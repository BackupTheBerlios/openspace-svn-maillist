<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Openspace-svn] r246 - in trunk: . doc doc/dev icons icons/default src src/plugins src/plugins/cmddialog src/plugins/filelist templates
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/openspace-svn/2006-February/index.html" >
   <LINK REL="made" HREF="mailto:openspace-svn%40lists.berlios.de?Subject=Re%3A%20%5BOpenspace-svn%5D%20r246%20-%20in%20trunk%3A%20.%20doc%20doc/dev%20icons%20icons/default%20src%20src/plugins%20src/plugins/cmddialog%20src/plugins/filelist%20templates&In-Reply-To=%3C200602121538.k1CFcjPD020041%40sheep.berlios.de%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="000026.html">
   <LINK REL="Next"  HREF="000028.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Openspace-svn] r246 - in trunk: . doc doc/dev icons icons/default src src/plugins src/plugins/cmddialog src/plugins/filelist templates</H1>
    <B>compbatant at berlios.de</B> 
    <A HREF="mailto:openspace-svn%40lists.berlios.de?Subject=Re%3A%20%5BOpenspace-svn%5D%20r246%20-%20in%20trunk%3A%20.%20doc%20doc/dev%20icons%20icons/default%20src%20src/plugins%20src/plugins/cmddialog%20src/plugins/filelist%20templates&In-Reply-To=%3C200602121538.k1CFcjPD020041%40sheep.berlios.de%3E"
       TITLE="[Openspace-svn] r246 - in trunk: . doc doc/dev icons icons/default src src/plugins src/plugins/cmddialog src/plugins/filelist templates">compbatant at berlios.de
       </A><BR>
    <I>Sun Feb 12 16:38:45 CET 2006</I>
    <P><UL>
        <LI>Previous message: <A HREF="000026.html">[Openspace-svn] r245 - branches/mloskot-style-refactoring/src
</A></li>
        <LI>Next message: <A HREF="000028.html">[Openspace-svn] r247 - trunk/src
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#27">[ date ]</a>
              <a href="thread.html#27">[ thread ]</a>
              <a href="subject.html#27">[ subject ]</a>
              <a href="author.html#27">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Author: compbatant
Date: 2006-02-12 16:36:06 +0100 (Sun, 12 Feb 2006)
New Revision: 246

Added:
   trunk/doc/
   trunk/doc/dev/
   trunk/doxygen.conf
   trunk/src/Makefile
   trunk/src/OSCMDDialogBox.cpp
   trunk/src/OSCMDDialogBox.h
   trunk/src/OSCommandTypeInfo.cpp
   trunk/src/OSCommandTypeInfo.h
   trunk/src/OSConfigure.cpp
   trunk/src/OSConfigure.h
   trunk/src/OSFile.h
   trunk/src/OSFileList.cpp
   trunk/src/OSFileList.h
   trunk/src/OSFileListItem.cpp
   trunk/src/OSFileListItem.h
   trunk/src/OSFileTypeInfo.cpp
   trunk/src/OSFileTypeInfo.h
   trunk/src/OSFileTypeSymbol.cpp
   trunk/src/OSFileTypeSymbol.h
   trunk/src/OSFirstRunDialogBox.cpp
   trunk/src/OSFirstRunDialogBox.h
   trunk/src/OSInfoPanel.cpp
   trunk/src/OSInfoPanel.h
   trunk/src/OSMainWindow.cpp
   trunk/src/OSMainWindow.h
   trunk/src/OSMimeApp.cpp
   trunk/src/OSMimeApp.h
   trunk/src/OSMimeType.cpp
   trunk/src/OSMimeType.h
   trunk/src/OSObjectManager.cpp
   trunk/src/OSObjectManager.h
   trunk/src/OSPathType.cpp
   trunk/src/OSPathType.h
   trunk/src/OSPreferences.cpp
   trunk/src/OSPreferences.h
   trunk/src/OSShutter.cpp
   trunk/src/OSShutter.h
   trunk/src/OSThreadExec.cpp
   trunk/src/OSThreadExec.h
   trunk/src/OSUtils.cpp
   trunk/src/OSUtils.h
   trunk/src/OSVirtualFileSystemBase.h
   trunk/src/OSVirtualFileSystemHeader.h
   trunk/src/OSVirtualFileSystemInfo.h
   trunk/src/config.h
   trunk/src/main.cpp
   trunk/src/plugins/cmddialog/OSAccess.cpp
   trunk/src/plugins/cmddialog/OSClone.cpp
   trunk/src/plugins/cmddialog/OSCompress.cpp
   trunk/src/plugins/cmddialog/OSEditSymlink.cpp
   trunk/src/plugins/cmddialog/OSMd5sum.cpp
   trunk/src/plugins/cmddialog/OSMkdir.cpp
   trunk/src/plugins/cmddialog/OSRename.cpp
   trunk/src/plugins/cmddialog/OSSymlink.cpp
   trunk/src/plugins/filelist/OSVfsArchive.cpp
   trunk/src/plugins/filelist/OSVfsArchive.h
   trunk/src/plugins/filelist/OSVfsFtp.cpp
   trunk/src/plugins/filelist/OSVfsFtp.h
   trunk/src/plugins/filelist/OSVfsLocal.cpp
   trunk/src/plugins/filelist/OSVfsLocal.h
   trunk/src/plugins/filelist/OSVfsSearch.cpp
   trunk/src/plugins/filelist/OSVfsSearch.h
   trunk/svnignore
   trunk/templates/
   trunk/templates/cpp
   trunk/templates/h
Removed:
   trunk/doc/dev/
   trunk/src/CommandsFileTypesContainers.cpp
   trunk/src/CommandsFileTypesContainers.h
   trunk/src/FirstRun.cpp
   trunk/src/FirstRun.h
   trunk/src/MimeApp.cpp
   trunk/src/MimeApp.h
   trunk/src/MimeType.cpp
   trunk/src/MimeType.h
   trunk/src/cmddialog.cpp
   trunk/src/cmddialog.h
   trunk/src/configure.cpp
   trunk/src/configure.h
   trunk/src/filelist.cpp
   trunk/src/filelist.h
   trunk/src/filelist_base.h
   trunk/src/filetype.cpp
   trunk/src/filetype.h
   trunk/src/informationpanel.cpp
   trunk/src/informationpanel.h
   trunk/src/mainwindow.cpp
   trunk/src/mainwindow.h
   trunk/src/openspace.cpp
   trunk/src/osfile.h
   trunk/src/oslistitem.cpp
   trunk/src/oslistitem.h
   trunk/src/pathtype.cpp
   trunk/src/pathtype.h
   trunk/src/plugins/cmddialog/access.cpp
   trunk/src/plugins/cmddialog/clone.cpp
   trunk/src/plugins/cmddialog/compress.cpp
   trunk/src/plugins/cmddialog/editsymlink.cpp
   trunk/src/plugins/cmddialog/md5sum.cpp
   trunk/src/plugins/cmddialog/mkdir.cpp
   trunk/src/plugins/cmddialog/rename.cpp
   trunk/src/plugins/cmddialog/symlink.cpp
   trunk/src/plugins/filelist/filelist_archive.cpp
   trunk/src/plugins/filelist/filelist_archive.h
   trunk/src/plugins/filelist/filelist_ftp.cpp
   trunk/src/plugins/filelist/filelist_ftp.h
   trunk/src/plugins/filelist/filelist_local.cpp
   trunk/src/plugins/filelist/filelist_local.h
   trunk/src/plugins/filelist/filelist_search.cpp
   trunk/src/plugins/filelist/filelist_search.h
   trunk/src/preferences.cpp
   trunk/src/preferences.h
   trunk/src/sharedFunctions.cpp
   trunk/src/sharedFunctions.h
   trunk/src/sharedobjects.cpp
   trunk/src/sharedobjects.h
   trunk/src/shutter.cpp
   trunk/src/shutter.h
   trunk/src/thread_elem.cpp
   trunk/src/thread_elem.h
   trunk/templates/cpp
   trunk/templates/h
Modified:
   trunk/
   trunk/INSTALL
   trunk/Makefile.in
   trunk/aclocal.m4
   trunk/configure
   trunk/configure.ac
   trunk/depcomp
   trunk/icons/
   trunk/icons/Makefile.in
   trunk/icons/default/
   trunk/icons/default/Makefile.in
   trunk/install-sh
   trunk/missing
   trunk/openspacerc.in
   trunk/src/
   trunk/src/Makefile.am
   trunk/src/Makefile.in
   trunk/src/config.h.in
   trunk/src/plugins/
   trunk/src/plugins/Makefile.am
   trunk/src/plugins/Makefile.in
   trunk/src/plugins/cmddialog/
   trunk/src/plugins/cmddialog/Makefile.am
   trunk/src/plugins/cmddialog/Makefile.in
   trunk/src/plugins/filelist/
   trunk/src/plugins/filelist/Makefile.am
   trunk/src/plugins/filelist/Makefile.in
   trunk/src/plugins/filelist/OSFXFile.cpp
   trunk/src/plugins/filelist/OSFXFile.h
   trunk/src/plugins/filelist/filelist_scp.cpp
   trunk/src/plugins/filelist/filelist_scp.h
   trunk/src/plugins/filelist/filelist_sftp.cpp
   trunk/src/plugins/filelist/filelist_sftp.h
   trunk/src/plugins/filelist/pftp.cpp
   trunk/src/plugins/filelist/pftp.h
Log:
refactoring


Property changes on: trunk
___________________________________________________________________
Name: svn:ignore
   - autom4*
Makefile
config.log
config.status
openspacerc
libtool
*.tar.bz2
*.tar.gz

   + *~
*.cache
*LOG
*log
*.kdev*
*.lo
*.loT
*.o
*.status
*.swp
.deps
.libs
libtool
openspacerc
tags
Doxyfile
Makefile


Modified: trunk/INSTALL
===================================================================
--- trunk/INSTALL	2006-02-12 13:43:28 UTC (rev 245)
+++ trunk/INSTALL	2006-02-12 15:36:06 UTC (rev 246)
@@ -1,16 +1,13 @@
-Installation Instructions
-*************************
+Copyright (C) 1994, 1995, 1996, 1999, 2000, 2001, 2002 Free Software
+Foundation, Inc.
 
-Copyright (C) 1994, 1995, 1996, 1999, 2000, 2001, 2002, 2004, 2005 Free
-Software Foundation, Inc.
-
-This file is free documentation; the Free Software Foundation gives
+   This file is free documentation; the Free Software Foundation gives
 unlimited permission to copy, distribute and modify it.
 
 Basic Installation
 ==================
 
-These are generic installation instructions.
+   These are generic installation instructions.
 
    The `configure' shell script attempts to guess correct values for
 various system-dependent variables used during compilation.  It uses
@@ -70,9 +67,9 @@
 Compilers and Options
 =====================
 
-Some systems require unusual options for compilation or linking that the
-`configure' script does not know about.  Run `./configure --help' for
-details on some of the pertinent environment variables.
+   Some systems require unusual options for compilation or linking that
+the `configure' script does not know about.  Run `./configure --help'
+for details on some of the pertinent environment variables.
 
    You can give `configure' initial values for configuration parameters
 by setting variables in the command line or in the environment.  Here
@@ -85,7 +82,7 @@
 Compiling For Multiple Architectures
 ====================================
 
-You can compile the package for more than one kind of computer at the
+   You can compile the package for more than one kind of computer at the
 same time, by placing the object files for each architecture in their
 own directory.  To do this, you must use a version of `make' that
 supports the `VPATH' variable, such as GNU `make'.  `cd' to the
@@ -102,19 +99,19 @@
 Installation Names
 ==================
 
-By default, `make install' will install the package's files in
+   By default, `make install' will install the package's files in
 `/usr/local/bin', `/usr/local/man', etc.  You can specify an
 installation prefix other than `/usr/local' by giving `configure' the
-option `--prefix=PREFIX'.
+option `--prefix=PATH'.
 
    You can specify separate installation prefixes for
 architecture-specific files and architecture-independent files.  If you
-give `configure' the option `--exec-prefix=PREFIX', the package will
-use PREFIX as the prefix for installing programs and libraries.
+give `configure' the option `--exec-prefix=PATH', the package will use
+PATH as the prefix for installing programs and libraries.
 Documentation and other data files will still use the regular prefix.
 
    In addition, if you use an unusual directory layout you can give
-options like `--bindir=DIR' to specify different values for particular
+options like `--bindir=PATH' to specify different values for particular
 kinds of files.  Run `configure --help' for a list of the directories
 you can set and what kinds of files go in them.
 
@@ -125,7 +122,7 @@
 Optional Features
 =================
 
-Some packages pay attention to `--enable-FEATURE' options to
+   Some packages pay attention to `--enable-FEATURE' options to
 `configure', where FEATURE indicates an optional part of the package.
 They may also pay attention to `--with-PACKAGE' options, where PACKAGE
 is something like `gnu-as' or `x' (for the X Window System).  The
@@ -140,11 +137,11 @@
 Specifying the System Type
 ==========================
 
-There may be some features `configure' cannot figure out automatically,
-but needs to determine by the type of machine the package will run on.
-Usually, assuming the package is built to be run on the _same_
-architectures, `configure' can figure that out, but if it prints a
-message saying it cannot guess the machine type, give it the
+   There may be some features `configure' cannot figure out
+automatically, but needs to determine by the type of machine the package
+will run on.  Usually, assuming the package is built to be run on the
+_same_ architectures, `configure' can figure that out, but if it prints
+a message saying it cannot guess the machine type, give it the
 `--build=TYPE' option.  TYPE can either be a short name for the system
 type, such as `sun4', or a canonical name which has the form:
 
@@ -170,9 +167,9 @@
 Sharing Defaults
 ================
 
-If you want to set default values for `configure' scripts to share, you
-can create a site shell script called `config.site' that gives default
-values for variables like `CC', `cache_file', and `prefix'.
+   If you want to set default values for `configure' scripts to share,
+you can create a site shell script called `config.site' that gives
+default values for variables like `CC', `cache_file', and `prefix'.
 `configure' looks for `PREFIX/share/config.site' if it exists, then
 `PREFIX/etc/config.site' if it exists.  Or, you can set the
 `CONFIG_SITE' environment variable to the location of the site script.
@@ -181,7 +178,7 @@
 Defining Variables
 ==================
 
-Variables not defined in a site shell script can be set in the
+   Variables not defined in a site shell script can be set in the
 environment passed to `configure'.  However, some packages may run
 configure again during the build, and the customized values of these
 variables may be lost.  In order to avoid this problem, you should set
@@ -189,18 +186,14 @@
 
      ./configure CC=/usr/local2/bin/gcc
 
-causes the specified `gcc' to be used as the C compiler (unless it is
-overridden in the site shell script).  Here is a another example:
+will cause the specified gcc to be used as the C compiler (unless it is
+overridden in the site shell script).
 
-     /bin/bash ./configure CONFIG_SHELL=/bin/bash
-
-Here the `CONFIG_SHELL=/bin/bash' operand causes subsequent
-configuration-related scripts to be executed by `/bin/bash'.
-
 `configure' Invocation
 ======================
 
-`configure' recognizes the following options to control how it operates.
+   `configure' recognizes the following options to control how it
+operates.
 
 `--help'
 `-h'

Modified: trunk/Makefile.in
===================================================================
--- trunk/Makefile.in	2006-02-12 13:43:28 UTC (rev 245)
+++ trunk/Makefile.in	2006-02-12 15:36:06 UTC (rev 246)
@@ -1,8 +1,8 @@
-# Makefile.in generated by automake 1.9.5 from Makefile.am.
+# Makefile.in generated by automake 1.8.5 from Makefile.am.
 # @configure_input@
 
 # Copyright (C) 1994, 1995, 1996, 1997, 1998, 1999, 2000, 2001, 2002,
-# 2003, 2004, 2005  Free Software Foundation, Inc.
+# 2003, 2004  Free Software Foundation, Inc.
 # This Makefile.in is free software; the Free Software Foundation
 # gives unlimited permission to copy and/or distribute it,
 # with or without modifications, as long as this notice is preserved.
@@ -34,7 +34,6 @@
 NORMAL_UNINSTALL = :
 PRE_UNINSTALL = :
 POST_UNINSTALL = :
-build_triplet = @build@
 host_triplet = @host@
 DIST_COMMON = README $(am__configure_deps) $(srcdir)/Makefile.am \
 	$(srcdir)/Makefile.in $(srcdir)/openspacerc.in \
@@ -47,7 +46,7 @@
 	$(ACLOCAL_M4)
 am__CONFIG_DISTCLEAN_FILES = config.status config.cache config.log \
  configure.lineno configure.status.lineno
-mkinstalldirs = $(install_sh) -d
+mkinstalldirs = $(mkdir_p)
 CONFIG_HEADER = $(top_builddir)/src/config.h
 CONFIG_CLEAN_FILES = openspacerc
 SOURCES =
@@ -58,12 +57,6 @@
 	install-recursive installcheck-recursive installdirs-recursive \
 	pdf-recursive ps-recursive uninstall-info-recursive \
 	uninstall-recursive
-am__vpath_adj_setup = srcdirstrip=`echo &quot;$(srcdir)&quot; | sed 's|.|.|g'`;
-am__vpath_adj = case $$p in \
-    $(srcdir)/*) f=`echo &quot;$$p&quot; | sed &quot;s|^$$srcdirstrip/||&quot;`;; \
-    *) f=$$p;; \
-  esac;
-am__strip_dir = `echo $$p | sed -e 's|^.*/||'`;
 am__installdirs = &quot;$(DESTDIR)$(sysconfdir)&quot;
 sysconfDATA_INSTALL = $(INSTALL_DATA)
 DATA = $(sysconf_DATA)
@@ -149,8 +142,6 @@
 am__include = @am__include@
 am__leading_dot = @am__leading_dot@
 am__quote = @am__quote@
-am__tar = @am__tar@
-am__untar = @am__untar@
 bindir = @bindir@
 build = @build@
 build_alias = @build_alias@
@@ -235,7 +226,7 @@
 	test -z &quot;$(sysconfdir)&quot; || $(mkdir_p) &quot;$(DESTDIR)$(sysconfdir)&quot;
 	@list='$(sysconf_DATA)'; for p in $$list; do \
 	  if test -f &quot;$$p&quot;; then d=; else d=&quot;$(srcdir)/&quot;; fi; \
-	  f=$(am__strip_dir) \
+	  f=&quot;`echo $$p | sed -e 's|^.*/||'`&quot;; \
 	  echo &quot; $(sysconfDATA_INSTALL) '$$d$$p' '$(DESTDIR)$(sysconfdir)/$$f'&quot;; \
 	  $(sysconfDATA_INSTALL) &quot;$$d$$p&quot; &quot;$(DESTDIR)$(sysconfdir)/$$f&quot;; \
 	done
@@ -243,7 +234,7 @@
 uninstall-sysconfDATA:
 	@$(NORMAL_UNINSTALL)
 	@list='$(sysconf_DATA)'; for p in $$list; do \
-	  f=$(am__strip_dir) \
+	  f=&quot;`echo $$p | sed -e 's|^.*/||'`&quot;; \
 	  echo &quot; rm -f '$(DESTDIR)$(sysconfdir)/$$f'&quot;; \
 	  rm -f &quot;$(DESTDIR)$(sysconfdir)/$$f&quot;; \
 	done
@@ -255,13 +246,7 @@
 #     (which will cause the Makefiles to be regenerated when you run `make');
 # (2) otherwise, pass the desired values on the `make' command line.
 $(RECURSIVE_TARGETS):
-	@failcom='exit 1'; \
-	for f in x $$MAKEFLAGS; do \
-	  case $$f in \
-	    *=* | --[!k]*);; \
-	    *k*) failcom='fail=yes';; \
-	  esac; \
-	done; \
+	@set fnord $$MAKEFLAGS; amf=$$2; \
 	dot_seen=no; \
 	target=`echo $@ | sed s/-recursive//`; \
 	list='$(SUBDIRS)'; for subdir in $$list; do \
@@ -273,7 +258,7 @@
 	    local_target=&quot;$$target&quot;; \
 	  fi; \
 	  (cd $$subdir &amp;&amp; $(MAKE) $(AM_MAKEFLAGS) $$local_target) \
-	  || eval $$failcom; \
+	   || case &quot;$$amf&quot; in *=*) exit 1;; *k*) fail=yes;; *) exit 1;; esac; \
 	done; \
 	if test &quot;$$dot_seen&quot; = &quot;no&quot;; then \
 	  $(MAKE) $(AM_MAKEFLAGS) &quot;$$target-am&quot; || exit 1; \
@@ -281,13 +266,7 @@
 
 mostlyclean-recursive clean-recursive distclean-recursive \
 maintainer-clean-recursive:
-	@failcom='exit 1'; \
-	for f in x $$MAKEFLAGS; do \
-	  case $$f in \
-	    *=* | --[!k]*);; \
-	    *k*) failcom='fail=yes';; \
-	  esac; \
-	done; \
+	@set fnord $$MAKEFLAGS; amf=$$2; \
 	dot_seen=no; \
 	case &quot;$@&quot; in \
 	  distclean-* | maintainer-clean-*) list='$(DIST_SUBDIRS)' ;; \
@@ -308,7 +287,7 @@
 	    local_target=&quot;$$target&quot;; \
 	  fi; \
 	  (cd $$subdir &amp;&amp; $(MAKE) $(AM_MAKEFLAGS) $$local_target) \
-	  || eval $$failcom; \
+	   || case &quot;$$amf&quot; in *=*) exit 1;; *k*) fail=yes;; *) exit 1;; esac; \
 	done &amp;&amp; test -z &quot;$$fail&quot;
 tags-recursive:
 	list='$(SUBDIRS)'; for subdir in $$list; do \
@@ -410,17 +389,15 @@
 	    || exit 1; \
 	  fi; \
 	done
-	list='$(DIST_SUBDIRS)'; for subdir in $$list; do \
+	list='$(SUBDIRS)'; for subdir in $$list; do \
 	  if test &quot;$$subdir&quot; = .; then :; else \
 	    test -d &quot;$(distdir)/$$subdir&quot; \
-	    || $(mkdir_p) &quot;$(distdir)/$$subdir&quot; \
+	    || mkdir &quot;$(distdir)/$$subdir&quot; \
 	    || exit 1; \
-	    distdir=`$(am__cd) $(distdir) &amp;&amp; pwd`; \
-	    top_distdir=`$(am__cd) $(top_distdir) &amp;&amp; pwd`; \
 	    (cd $$subdir &amp;&amp; \
 	      $(MAKE) $(AM_MAKEFLAGS) \
-	        top_distdir=&quot;$$top_distdir&quot; \
-	        distdir=&quot;$$distdir/$$subdir&quot; \
+	        top_distdir=&quot;../$(top_distdir)&quot; \
+	        distdir=&quot;../$(distdir)/$$subdir&quot; \
 	        distdir) \
 	      || exit 1; \
 	  fi; \
@@ -431,15 +408,15 @@
 	  ! -type d ! -perm -444 -exec $(SHELL) $(install_sh) -c -m a+r {} {} \; \
 	|| chmod -R a+r $(distdir)
 dist-gzip: distdir
-	tardir=$(distdir) &amp;&amp; $(am__tar) | GZIP=$(GZIP_ENV) gzip -c &gt;$(distdir).tar.gz
+	$(AMTAR) chof - $(distdir) | GZIP=$(GZIP_ENV) gzip -c &gt;$(distdir).tar.gz
 	$(am__remove_distdir)
 
 dist-bzip2: distdir
-	tardir=$(distdir) &amp;&amp; $(am__tar) | bzip2 -9 -c &gt;$(distdir).tar.bz2
+	$(AMTAR) chof - $(distdir) | bzip2 -9 -c &gt;$(distdir).tar.bz2
 	$(am__remove_distdir)
 
 dist-tarZ: distdir
-	tardir=$(distdir) &amp;&amp; $(am__tar) | compress -c &gt;$(distdir).tar.Z
+	$(AMTAR) chof - $(distdir) | compress -c &gt;$(distdir).tar.Z
 	$(am__remove_distdir)
 
 dist-shar: distdir
@@ -452,7 +429,7 @@
 	$(am__remove_distdir)
 
 dist dist-all: distdir
-	tardir=$(distdir) &amp;&amp; $(am__tar) | GZIP=$(GZIP_ENV) gzip -c &gt;$(distdir).tar.gz
+	$(AMTAR) chof - $(distdir) | GZIP=$(GZIP_ENV) gzip -c &gt;$(distdir).tar.gz
 	$(am__remove_distdir)
 
 # This target untars the dist file and tries a VPATH configuration.  Then
@@ -461,11 +438,11 @@
 distcheck: dist
 	case '$(DIST_ARCHIVES)' in \
 	*.tar.gz*) \
-	  GZIP=$(GZIP_ENV) gunzip -c $(distdir).tar.gz | $(am__untar) ;;\
+	  GZIP=$(GZIP_ENV) gunzip -c $(distdir).tar.gz | $(AMTAR) xf - ;;\
 	*.tar.bz2*) \
-	  bunzip2 -c $(distdir).tar.bz2 | $(am__untar) ;;\
+	  bunzip2 -c $(distdir).tar.bz2 | $(AMTAR) xf - ;;\
 	*.tar.Z*) \
-	  uncompress -c $(distdir).tar.Z | $(am__untar) ;;\
+	  uncompress -c $(distdir).tar.Z | $(AMTAR) xf - ;;\
 	*.shar.gz*) \
 	  GZIP=$(GZIP_ENV) gunzip -c $(distdir).shar.gz | unshar ;;\
 	*.zip*) \
@@ -549,7 +526,7 @@
 clean-generic:
 
 distclean-generic:
-	-test -z &quot;$(CONFIG_CLEAN_FILES)&quot; || rm -f $(CONFIG_CLEAN_FILES)
+	-rm -f $(CONFIG_CLEAN_FILES)
 
 maintainer-clean-generic:
 	@echo &quot;This command is intended for maintainers to use&quot;

Modified: trunk/aclocal.m4
===================================================================
--- trunk/aclocal.m4	2006-02-12 13:43:28 UTC (rev 245)
+++ trunk/aclocal.m4	2006-02-12 15:36:06 UTC (rev 246)
@@ -1,7 +1,7 @@
-# generated automatically by aclocal 1.9.5 -*- Autoconf -*-
+# generated automatically by aclocal 1.8.5 -*- Autoconf -*-
 
-# Copyright (C) 1996, 1997, 1998, 1999, 2000, 2001, 2002, 2003, 2004,
-# 2005  Free Software Foundation, Inc.
+# Copyright (C) 1996, 1997, 1998, 1999, 2000, 2001, 2002, 2003, 2004
+# Free Software Foundation, Inc.
 # This file is free software; the Free Software Foundation
 # gives unlimited permission to copy and/or distribute it,
 # with or without modifications, as long as this notice is preserved.
@@ -6267,33 +6267,56 @@
 AC_MSG_RESULT([$SED])
 ])
 
-# Copyright (C) 2002, 2003, 2005  Free Software Foundation, Inc.
-#
-# This file is free software; the Free Software Foundation
-# gives unlimited permission to copy and/or distribute it,
-# with or without modifications, as long as this notice is preserved.
+#                                                        -*- Autoconf -*-
+# Copyright (C) 2002, 2003  Free Software Foundation, Inc.
+# Generated from amversion.in; do not edit by hand.
 
+# This program is free software; you can redistribute it and/or modify
+# it under the terms of the GNU General Public License as published by
+# the Free Software Foundation; either version 2, or (at your option)
+# any later version.
+
+# This program is distributed in the hope that it will be useful,
+# but WITHOUT ANY WARRANTY; without even the implied warranty of
+# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
+# GNU General Public License for more details.
+
+# You should have received a copy of the GNU General Public License
+# along with this program; if not, write to the Free Software
+# Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA
+
 # AM_AUTOMAKE_VERSION(VERSION)
 # ----------------------------
 # Automake X.Y traces this macro to ensure aclocal.m4 has been
 # generated from the m4 files accompanying Automake X.Y.
-AC_DEFUN([AM_AUTOMAKE_VERSION], [am__api_version=&quot;1.9&quot;])
+AC_DEFUN([AM_AUTOMAKE_VERSION], [am__api_version=&quot;1.8&quot;])
 
 # AM_SET_CURRENT_AUTOMAKE_VERSION
 # -------------------------------
 # Call AM_AUTOMAKE_VERSION so it can be traced.
 # This function is AC_REQUIREd by AC_INIT_AUTOMAKE.
 AC_DEFUN([AM_SET_CURRENT_AUTOMAKE_VERSION],
-	 [AM_AUTOMAKE_VERSION([1.9.5])])
+	 [AM_AUTOMAKE_VERSION([1.8.5])])
 
-# AM_AUX_DIR_EXPAND                                         -*- Autoconf -*-
+# AM_AUX_DIR_EXPAND
 
-# Copyright (C) 2001, 2003, 2005  Free Software Foundation, Inc.
-#
-# This file is free software; the Free Software Foundation
-# gives unlimited permission to copy and/or distribute it,
-# with or without modifications, as long as this notice is preserved.
+# Copyright (C) 2001, 2003 Free Software Foundation, Inc.
 
+# This program is free software; you can redistribute it and/or modify
+# it under the terms of the GNU General Public License as published by
+# the Free Software Foundation; either version 2, or (at your option)
+# any later version.
+
+# This program is distributed in the hope that it will be useful,
+# but WITHOUT ANY WARRANTY; without even the implied warranty of
+# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
+# GNU General Public License for more details.
+
+# You should have received a copy of the GNU General Public License
+# along with this program; if not, write to the Free Software
+# Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA
+# 02111-1307, USA.
+
 # For projects using AC_CONFIG_AUX_DIR([foo]), Autoconf sets
 # $ac_aux_dir to `$srcdir/foo'.  In other projects, it is set to
 # `$srcdir', `$srcdir/..', or `$srcdir/../..'.
@@ -6339,17 +6362,27 @@
 am_aux_dir=`cd $ac_aux_dir &amp;&amp; pwd`
 ])
 
-# AM_CONDITIONAL                                            -*- Autoconf -*-
+# AM_CONDITIONAL                                              -*- Autoconf -*-
 
-# Copyright (C) 1997, 2000, 2001, 2003, 2004, 2005
-# Free Software Foundation, Inc.
-#
-# This file is free software; the Free Software Foundation
-# gives unlimited permission to copy and/or distribute it,
-# with or without modifications, as long as this notice is preserved.
+# Copyright (C) 1997, 2000, 2001, 2003 Free Software Foundation, Inc.
 
-# serial 7
+# This program is free software; you can redistribute it and/or modify
+# it under the terms of the GNU General Public License as published by
+# the Free Software Foundation; either version 2, or (at your option)
+# any later version.
 
+# This program is distributed in the hope that it will be useful,
+# but WITHOUT ANY WARRANTY; without even the implied warranty of
+# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
+# GNU General Public License for more details.
+
+# You should have received a copy of the GNU General Public License
+# along with this program; if not, write to the Free Software
+# Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA
+# 02111-1307, USA.
+
+# serial 6
+
 # AM_CONDITIONAL(NAME, SHELL-CONDITION)
 # -------------------------------------
 # Define a conditional.
@@ -6368,20 +6401,31 @@
 fi
 AC_CONFIG_COMMANDS_PRE(
 [if test -z &quot;${$1_TRUE}&quot; &amp;&amp; test -z &quot;${$1_FALSE}&quot;; then
-  AC_MSG_ERROR([[conditional &quot;$1&quot; was never defined.
-Usually this means the macro was only invoked conditionally.]])
+  AC_MSG_ERROR([conditional &quot;$1&quot; was never defined.
+Usually this means the macro was only invoked conditionally.])
 fi])])
 
+# serial 7						-*- Autoconf -*-
 
-# Copyright (C) 1999, 2000, 2001, 2002, 2003, 2004, 2005
+# Copyright (C) 1999, 2000, 2001, 2002, 2003, 2004
 # Free Software Foundation, Inc.
-#
-# This file is free software; the Free Software Foundation
-# gives unlimited permission to copy and/or distribute it,
-# with or without modifications, as long as this notice is preserved.
 
-# serial 8
+# This program is free software; you can redistribute it and/or modify
+# it under the terms of the GNU General Public License as published by
+# the Free Software Foundation; either version 2, or (at your option)
+# any later version.
 
+# This program is distributed in the hope that it will be useful,
+# but WITHOUT ANY WARRANTY; without even the implied warranty of
+# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
+# GNU General Public License for more details.
+
+# You should have received a copy of the GNU General Public License
+# along with this program; if not, write to the Free Software
+# Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA
+# 02111-1307, USA.
+
+
 # There are a few dirty hacks below to avoid letting `AC_PROG_CC' be
 # written in clear, in which case automake, when reading aclocal.m4,
 # will think it sees a *use*, and therefore will trigger all it's
@@ -6389,6 +6433,7 @@
 # CC etc. in the Makefile, will ask for an AC_PROG_CC use...
 
 
+
 # _AM_DEPENDENCIES(NAME)
 # ----------------------
 # See how the compiler implements dependency checking.
@@ -6528,17 +6573,27 @@
 AC_SUBST([AMDEPBACKSLASH])
 ])
 
-# Generate code to set up dependency tracking.              -*- Autoconf -*-
+# Generate code to set up dependency tracking.   -*- Autoconf -*-
 
-# Copyright (C) 1999, 2000, 2001, 2002, 2003, 2004, 2005
-# Free Software Foundation, Inc.
-#
-# This file is free software; the Free Software Foundation
-# gives unlimited permission to copy and/or distribute it,
-# with or without modifications, as long as this notice is preserved.
+# Copyright (C) 1999, 2000, 2001, 2002, 2003, 2004 Free Software Foundation, Inc.
 
-#serial 3
+# This program is free software; you can redistribute it and/or modify
+# it under the terms of the GNU General Public License as published by
+# the Free Software Foundation; either version 2, or (at your option)
+# any later version.
 
+# This program is distributed in the hope that it will be useful,
+# but WITHOUT ANY WARRANTY; without even the implied warranty of
+# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
+# GNU General Public License for more details.
+
+# You should have received a copy of the GNU General Public License
+# along with this program; if not, write to the Free Software
+# Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA
+# 02111-1307, USA.
+
+#serial 2
+
 # _AM_OUTPUT_DEPENDENCY_COMMANDS
 # ------------------------------
 AC_DEFUN([_AM_OUTPUT_DEPENDENCY_COMMANDS],
@@ -6556,21 +6611,27 @@
   else
     continue
   fi
-  # Extract the definition of DEPDIR, am__include, and am__quote
-  # from the Makefile without running `make'.
+  grep '^DEP_FILES *= *[[^ @%:@]]' &lt; &quot;$mf&quot; &gt; /dev/null || continue
+  # Extract the definition of DEP_FILES from the Makefile without
+  # running `make'.
   DEPDIR=`sed -n 's/^DEPDIR = //p' &lt; &quot;$mf&quot;`
   test -z &quot;$DEPDIR&quot; &amp;&amp; continue
-  am__include=`sed -n 's/^am__include = //p' &lt; &quot;$mf&quot;`
-  test -z &quot;am__include&quot; &amp;&amp; continue
-  am__quote=`sed -n 's/^am__quote = //p' &lt; &quot;$mf&quot;`
   # When using ansi2knr, U may be empty or an underscore; expand it
   U=`sed -n 's/^U = //p' &lt; &quot;$mf&quot;`
-  # Find all dependency output files, they are included files with
-  # $(DEPDIR) in their names.  We invoke sed twice because it is the
-  # simplest approach to changing $(DEPDIR) to its actual value in the
-  # expansion.
-  for file in `sed -n &quot;
-    s/^$am__include $am__quote\(.*(DEPDIR).*\)$am__quote&quot;'$/\1/p' &lt;&quot;$mf&quot; | \
+  test -d &quot;$dirpart/$DEPDIR&quot; || mkdir &quot;$dirpart/$DEPDIR&quot;
+  # We invoke sed twice because it is the simplest approach to
+  # changing $(DEPDIR) to its actual value in the expansion.
+  for file in `sed -n '
+    /^DEP_FILES = .*\\\\$/ {
+      s/^DEP_FILES = //
+      :loop
+	s/\\\\$//
+	p
+	n
+	/\\\\$/ b loop
+      p
+    }
+    /^DEP_FILES = / s/^DEP_FILES = //p' &lt; &quot;$mf&quot; | \
        sed -e 's/\$(DEPDIR)/'&quot;$DEPDIR&quot;'/g' -e 's/\$U/'&quot;$U&quot;'/g'`; do
     # Make sure the directory exists.
     test -f &quot;$dirpart/$file&quot; &amp;&amp; continue
@@ -6596,20 +6657,31 @@
      [AMDEP_TRUE=&quot;$AMDEP_TRUE&quot; ac_aux_dir=&quot;$ac_aux_dir&quot;])
 ])
 
-# Do all the work for Automake.                             -*- Autoconf -*-
+# Do all the work for Automake.                            -*- Autoconf -*-
 
-# Copyright (C) 1996, 1997, 1998, 1999, 2000, 2001, 2002, 2003, 2004, 2005
+# This macro actually does too much some checks are only needed if
+# your package does certain things.  But this isn't really a big deal.
+
+# Copyright (C) 1996, 1997, 1998, 1999, 2000, 2001, 2002, 2003
 # Free Software Foundation, Inc.
-#
-# This file is free software; the Free Software Foundation
-# gives unlimited permission to copy and/or distribute it,
-# with or without modifications, as long as this notice is preserved.
 
-# serial 12
+# This program is free software; you can redistribute it and/or modify
+# it under the terms of the GNU General Public License as published by
+# the Free Software Foundation; either version 2, or (at your option)
+# any later version.
 
-# This macro actually does too much.  Some checks are only needed if
-# your package does certain things.  But this isn't really a big deal.
+# This program is distributed in the hope that it will be useful,
+# but WITHOUT ANY WARRANTY; without even the implied warranty of
+# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
+# GNU General Public License for more details.
 
+# You should have received a copy of the GNU General Public License
+# along with this program; if not, write to the Free Software
+# Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA
+# 02111-1307, USA.
+
+# serial 11
+
 # AM_INIT_AUTOMAKE(PACKAGE, VERSION, [NO-DEFINE])
 # AM_INIT_AUTOMAKE([OPTIONS])
 # -----------------------------------------------
@@ -6666,6 +6738,7 @@
 AM_MISSING_PROG(AUTOMAKE, automake-${am__api_version})
 AM_MISSING_PROG(AUTOHEADER, autoheader)
 AM_MISSING_PROG(MAKEINFO, makeinfo)
+AM_MISSING_PROG(AMTAR, tar)
 AM_PROG_INSTALL_SH
 AM_PROG_INSTALL_STRIP
 AC_REQUIRE([AM_PROG_MKDIR_P])dnl
@@ -6674,9 +6747,7 @@
 AC_REQUIRE([AC_PROG_AWK])dnl
 AC_REQUIRE([AC_PROG_MAKE_SET])dnl
 AC_REQUIRE([AM_SET_LEADING_DOT])dnl
-_AM_IF_OPTION([tar-ustar], [_AM_PROG_TAR([ustar])],
-              [_AM_IF_OPTION([tar-pax], [_AM_PROG_TAR([pax])],
-	      		     [_AM_PROG_TAR([v7])])])
+
 _AM_IF_OPTION([no-dependencies],,
 [AC_PROVIDE_IFELSE([AC_PROG_CC],
                   [_AM_DEPENDENCIES(CC)],
@@ -6710,28 +6781,52 @@
 done
 echo &quot;timestamp for $1&quot; &gt;`AS_DIRNAME([$1])`/stamp-h[]$_am_stamp_count])
 
-# Copyright (C) 2001, 2003, 2005  Free Software Foundation, Inc.
-#
-# This file is free software; the Free Software Foundation
-# gives unlimited permission to copy and/or distribute it,
-# with or without modifications, as long as this notice is preserved.
-
 # AM_PROG_INSTALL_SH
 # ------------------
 # Define $install_sh.
+
+# Copyright (C) 2001, 2003 Free Software Foundation, Inc.
+
+# This program is free software; you can redistribute it and/or modify
+# it under the terms of the GNU General Public License as published by
+# the Free Software Foundation; either version 2, or (at your option)
+# any later version.
+
+# This program is distributed in the hope that it will be useful,
+# but WITHOUT ANY WARRANTY; without even the implied warranty of
+# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
+# GNU General Public License for more details.
+
+# You should have received a copy of the GNU General Public License
+# along with this program; if not, write to the Free Software
+# Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA
+# 02111-1307, USA.
+
 AC_DEFUN([AM_PROG_INSTALL_SH],
 [AC_REQUIRE([AM_AUX_DIR_EXPAND])dnl
 install_sh=${install_sh-&quot;$am_aux_dir/install-sh&quot;}
 AC_SUBST(install_sh)])
 
-# Copyright (C) 2003, 2005  Free Software Foundation, Inc.
-#
-# This file is free software; the Free Software Foundation
-# gives unlimited permission to copy and/or distribute it,
-# with or without modifications, as long as this notice is preserved.
+#                                                          -*- Autoconf -*-
+# Copyright (C) 2003  Free Software Foundation, Inc.
 
-# serial 2
+# This program is free software; you can redistribute it and/or modify
+# it under the terms of the GNU General Public License as published by
+# the Free Software Foundation; either version 2, or (at your option)
+# any later version.
 
+# This program is distributed in the hope that it will be useful,
+# but WITHOUT ANY WARRANTY; without even the implied warranty of
+# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
+# GNU General Public License for more details.
+
+# You should have received a copy of the GNU General Public License
+# along with this program; if not, write to the Free Software
+# Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA
+# 02111-1307, USA.
+
+# serial 1
+
 # Check whether the underlying file-system supports filenames
 # with a leading dot.  For instance MS-DOS doesn't.
 AC_DEFUN([AM_SET_LEADING_DOT],
@@ -6745,16 +6840,27 @@
 rmdir .tst 2&gt;/dev/null
 AC_SUBST([am__leading_dot])])
 
-# Check to see how 'make' treats includes.	            -*- Autoconf -*-
+# Check to see how 'make' treats includes.	-*- Autoconf -*-
 
-# Copyright (C) 2001, 2002, 2003, 2005  Free Software Foundation, Inc.
-#
-# This file is free software; the Free Software Foundation
-# gives unlimited permission to copy and/or distribute it,
-# with or without modifications, as long as this notice is preserved.
+# Copyright (C) 2001, 2002, 2003 Free Software Foundation, Inc.
 
-# serial 3
+# This program is free software; you can redistribute it and/or modify
+# it under the terms of the GNU General Public License as published by
+# the Free Software Foundation; either version 2, or (at your option)
+# any later version.
 
+# This program is distributed in the hope that it will be useful,
+# but WITHOUT ANY WARRANTY; without even the implied warranty of
+# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
+# GNU General Public License for more details.
+
+# You should have received a copy of the GNU General Public License
+# along with this program; if not, write to the Free Software
+# Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA
+# 02111-1307, USA.
+
+# serial 2
+
 # AM_MAKE_INCLUDE()
 # -----------------
 # Check to see how make treats includes.
@@ -6797,17 +6903,28 @@
 rm -f confinc confmf
 ])
 
-# Fake the existence of programs that GNU maintainers use.  -*- Autoconf -*-
+#  -*- Autoconf -*-
 
-# Copyright (C) 1997, 1999, 2000, 2001, 2003, 2005
-# Free Software Foundation, Inc.
-#
-# This file is free software; the Free Software Foundation
-# gives unlimited permission to copy and/or distribute it,
-# with or without modifications, as long as this notice is preserved.
 
-# serial 4
+# Copyright (C) 1997, 1999, 2000, 2001, 2003 Free Software Foundation, Inc.
 
+# This program is free software; you can redistribute it and/or modify
+# it under the terms of the GNU General Public License as published by
+# the Free Software Foundation; either version 2, or (at your option)
+# any later version.
+
+# This program is distributed in the hope that it will be useful,
+# but WITHOUT ANY WARRANTY; without even the implied warranty of
+# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
+# GNU General Public License for more details.
+
+# You should have received a copy of the GNU General Public License
+# along with this program; if not, write to the Free Software
+# Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA
+# 02111-1307, USA.
+
+# serial 3
+
 # AM_MISSING_PROG(NAME, PROGRAM)
 # ------------------------------
 AC_DEFUN([AM_MISSING_PROG],
@@ -6832,16 +6949,27 @@
 fi
 ])
 
-# Copyright (C) 2003, 2004, 2005  Free Software Foundation, Inc.
-#
-# This file is free software; the Free Software Foundation
-# gives unlimited permission to copy and/or distribute it,
-# with or without modifications, as long as this notice is preserved.
-
 # AM_PROG_MKDIR_P
 # ---------------
 # Check whether `mkdir -p' is supported, fallback to mkinstalldirs otherwise.
-#
+
+# Copyright (C) 2003, 2004 Free Software Foundation, Inc.
+
+# This program is free software; you can redistribute it and/or modify
+# it under the terms of the GNU General Public License as published by
+# the Free Software Foundation; either version 2, or (at your option)
+# any later version.
+
+# This program is distributed in the hope that it will be useful,
+# but WITHOUT ANY WARRANTY; without even the implied warranty of
+# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
+# GNU General Public License for more details.
+
+# You should have received a copy of the GNU General Public License
+# along with this program; if not, write to the Free Software
+# Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA
+# 02111-1307, USA.
+
 # Automake 1.8 used `mkdir -m 0755 -p --' to ensure that directories
 # created by `make install' are always world readable, even if the
 # installer happens to have an overly restrictive umask (e.g. 077).
@@ -6862,21 +6990,13 @@
 # this.)
 AC_DEFUN([AM_PROG_MKDIR_P],
 [if mkdir -p --version . &gt;/dev/null 2&gt;&amp;1 &amp;&amp; test ! -d ./--version; then
-  # We used to keeping the `.' as first argument, in order to
-  # allow $(mkdir_p) to be used without argument.  As in
+  # Keeping the `.' argument allows $(mkdir_p) to be used without
+  # argument.  Indeed, we sometimes output rules like
   #   $(mkdir_p) $(somedir)
-  # where $(somedir) is conditionally defined.  However this is wrong
-  # for two reasons:
-  #  1. if the package is installed by a user who cannot write `.'
-  #     make install will fail,
-  #  2. the above comment should most certainly read
-  #     $(mkdir_p) $(DESTDIR)$(somedir)
-  #     so it does not work when $(somedir) is undefined and
-  #     $(DESTDIR) is not.
-  #  To support the latter case, we have to write
-  #     test -z &quot;$(somedir)&quot; || $(mkdir_p) $(DESTDIR)$(somedir),
-  #  so the `.' trick is pointless.
-  mkdir_p='mkdir -p --'
+  # where $(somedir) is conditionally defined.
+  # (`test -n '$(somedir)' &amp;&amp; $(mkdir_p) $(somedir)' is a more
+  # expensive solution, as it forces Make to start a sub-shell.)
+  mkdir_p='mkdir -p -- .'
 else
   # On NextStep and OpenStep, the `mkdir' command does not
   # recognize any option.  It will interpret all options as
@@ -6895,16 +7015,27 @@
 fi
 AC_SUBST([mkdir_p])])
 
-# Helper functions for option handling.                     -*- Autoconf -*-
+# Helper functions for option handling.                    -*- Autoconf -*-
 
-# Copyright (C) 2001, 2002, 2003, 2005  Free Software Foundation, Inc.
-#
-# This file is free software; the Free Software Foundation
-# gives unlimited permission to copy and/or distribute it,
-# with or without modifications, as long as this notice is preserved.
+# Copyright (C) 2001, 2002, 2003  Free Software Foundation, Inc.
 
-# serial 3
+# This program is free software; you can redistribute it and/or modify
+# it under the terms of the GNU General Public License as published by
+# the Free Software Foundation; either version 2, or (at your option)
+# any later version.
 
+# This program is distributed in the hope that it will be useful,
+# but WITHOUT ANY WARRANTY; without even the implied warranty of
+# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
+# GNU General Public License for more details.
+
+# You should have received a copy of the GNU General Public License
+# along with this program; if not, write to the Free Software
+# Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA
+# 02111-1307, USA.
+
+# serial 2
+
 # _AM_MANGLE_OPTION(NAME)
 # -----------------------
 AC_DEFUN([_AM_MANGLE_OPTION],
@@ -6928,17 +7059,29 @@
 AC_DEFUN([_AM_IF_OPTION],
 [m4_ifset(_AM_MANGLE_OPTION([$1]), [$2], [$3])])
 
-# Check to make sure that the build environment is sane.    -*- Autoconf -*-
-
-# Copyright (C) 1996, 1997, 2000, 2001, 2003, 2005
-# Free Software Foundation, Inc.
 #
-# This file is free software; the Free Software Foundation
-# gives unlimited permission to copy and/or distribute it,
-# with or without modifications, as long as this notice is preserved.
+# Check to make sure that the build environment is sane.
+#
 
-# serial 4
+# Copyright (C) 1996, 1997, 2000, 2001, 2003 Free Software Foundation, Inc.
 
+# This program is free software; you can redistribute it and/or modify
+# it under the terms of the GNU General Public License as published by
+# the Free Software Foundation; either version 2, or (at your option)
+# any later version.
+
+# This program is distributed in the hope that it will be useful,
+# but WITHOUT ANY WARRANTY; without even the implied warranty of
+# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
+# GNU General Public License for more details.
+
+# You should have received a copy of the GNU General Public License
+# along with this program; if not, write to the Free Software
+# Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA
+# 02111-1307, USA.
+
+# serial 3
+
 # AM_SANITY_CHECK
 # ---------------
 AC_DEFUN([AM_SANITY_CHECK],
@@ -6980,14 +7123,25 @@
 fi
 AC_MSG_RESULT(yes)])
 
-# Copyright (C) 2001, 2003, 2005  Free Software Foundation, Inc.
-#
-# This file is free software; the Free Software Foundation
-# gives unlimited permission to copy and/or distribute it,
-# with or without modifications, as long as this notice is preserved.
+# AM_PROG_INSTALL_STRIP
 
-# AM_PROG_INSTALL_STRIP
-# ---------------------
+# Copyright (C) 2001, 2003 Free Software Foundation, Inc.
+
+# This program is free software; you can redistribute it and/or modify
+# it under the terms of the GNU General Public License as published by
+# the Free Software Foundation; either version 2, or (at your option)
+# any later version.
+
+# This program is distributed in the hope that it will be useful,
+# but WITHOUT ANY WARRANTY; without even the implied warranty of
+# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
+# GNU General Public License for more details.
+
+# You should have received a copy of the GNU General Public License
+# along with this program; if not, write to the Free Software
+# Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA
+# 02111-1307, USA.
+
 # One issue with vendor `install' (even GNU) is that you can't
 # specify the program used to strip binaries.  This is especially
 # annoying in cross-compiling environments, where the build's strip
@@ -7008,99 +7162,3 @@
 INSTALL_STRIP_PROGRAM=&quot;\${SHELL} \$(install_sh) -c -s&quot;
 AC_SUBST([INSTALL_STRIP_PROGRAM])])
 
-# Check how to create a tarball.                            -*- Autoconf -*-
-
-# Copyright (C) 2004, 2005  Free Software Foundation, Inc.
-#
-# This file is free software; the Free Software Foundation
-# gives unlimited permission to copy and/or distribute it,
-# with or without modifications, as long as this notice is preserved.
-
-# serial 2
-
-# _AM_PROG_TAR(FORMAT)
-# --------------------
-# Check how to create a tarball in format FORMAT.
-# FORMAT should be one of `v7', `ustar', or `pax'.
-#
-# Substitute a variable $(am__tar) that is a command
-# writing to stdout a FORMAT-tarball containing the directory
-# $tardir.
-#     tardir=directory &amp;&amp; $(am__tar) &gt; result.tar
-#
-# Substitute a variable $(am__untar) that extract such
-# a tarball read from stdin.
-#     $(am__untar) &lt; result.tar
-AC_DEFUN([_AM_PROG_TAR],
-[# Always define AMTAR for backward compatibility.
-AM_MISSING_PROG([AMTAR], [tar])
-m4_if([$1], [v7],
-     [am__tar='${AMTAR} chof - &quot;$$tardir&quot;'; am__untar='${AMTAR} xf -'],
-     [m4_case([$1], [ustar],, [pax],,
-              [m4_fatal([Unknown tar format])])
-AC_MSG_CHECKING([how to create a $1 tar archive])
-# Loop over all known methods to create a tar archive until one works.
-_am_tools='gnutar m4_if([$1], [ustar], [plaintar]) pax cpio none'
-_am_tools=${am_cv_prog_tar_$1-$_am_tools}
-# Do not fold the above two line into one, because Tru64 sh and
-# Solaris sh will not grok spaces in the rhs of `-'.
-for _am_tool in $_am_tools
-do
-  case $_am_tool in
-  gnutar)
-    for _am_tar in tar gnutar gtar;
-    do
-      AM_RUN_LOG([$_am_tar --version]) &amp;&amp; break
-    done
-    am__tar=&quot;$_am_tar --format=m4_if([$1], [pax], [posix], [$1]) -chf - &quot;'&quot;$$tardir&quot;'
-    am__tar_=&quot;$_am_tar --format=m4_if([$1], [pax], [posix], [$1]) -chf - &quot;'&quot;$tardir&quot;'
-    am__untar=&quot;$_am_tar -xf -&quot;
-    ;;
-  plaintar)
-    # Must skip GNU tar: if it does not support --format= it doesn't create
-    # ustar tarball either.
-    (tar --version) &gt;/dev/null 2&gt;&amp;1 &amp;&amp; continue
-    am__tar='tar chf - &quot;$$tardir&quot;'
-    am__tar_='tar chf - &quot;$tardir&quot;'
-    am__untar='tar xf -'
-    ;;
-  pax)
-    am__tar='pax -L -x $1 -w &quot;$$tardir&quot;'
-    am__tar_='pax -L -x $1 -w &quot;$tardir&quot;'
-    am__untar='pax -r'
-    ;;
-  cpio)
-    am__tar='find &quot;$$tardir&quot; -print | cpio -o -H $1 -L'
-    am__tar_='find &quot;$tardir&quot; -print | cpio -o -H $1 -L'
-    am__untar='cpio -i -H $1 -d'
-    ;;
-  none)
-    am__tar=false
-    am__tar_=false
-    am__untar=false
-    ;;
-  esac
-
-  # If the value was cached, stop now.  We just wanted to have am__tar
-  # and am__untar set.
-  test -n &quot;${am_cv_prog_tar_$1}&quot; &amp;&amp; break
-
-  # tar/untar a dummy directory, and stop if the command works
-  rm -rf conftest.dir
-  mkdir conftest.dir
-  echo GrepMe &gt; conftest.dir/file
-  AM_RUN_LOG([tardir=conftest.dir &amp;&amp; eval $am__tar_ &gt;conftest.tar])
-  rm -rf conftest.dir
-  if test -s conftest.tar; then
-    AM_RUN_LOG([$am__untar &lt;conftest.tar])
-    grep GrepMe conftest.dir/file &gt;/dev/null 2&gt;&amp;1 &amp;&amp; break
-  fi
-done
-rm -rf conftest.dir
-
-AC_CACHE_VAL([am_cv_prog_tar_$1], [am_cv_prog_tar_$1=$_am_tool])
-AC_MSG_RESULT([$am_cv_prog_tar_$1])])
-AC_SUBST([am__tar])
-AC_SUBST([am__untar])
-]) # _AM_PROG_TAR
-

Modified: trunk/configure
===================================================================
--- trunk/configure	2006-02-12 13:43:28 UTC (rev 245)
+++ trunk/configure	2006-02-12 15:36:06 UTC (rev 246)
@@ -1,6 +1,6 @@
 #! /bin/sh
 # Guess values for system-dependent variables and create Makefiles.
-# Generated by GNU Autoconf 2.59 for openspace 0.1.1.
+# Generated by GNU Autoconf 2.59 for openspace 0.2.0.
 #
 # Report bugs to &lt;<A HREF="http://openspace.linux.pl">http://openspace.linux.pl</A>&gt;.
 #
@@ -423,11 +423,11 @@
 # Identity of this package.
 PACKAGE_NAME='openspace'
 PACKAGE_TARNAME='openspace'
-PACKAGE_VERSION='0.1.1'
-PACKAGE_STRING='openspace 0.1.1'
+PACKAGE_VERSION='0.2.0'
+PACKAGE_STRING='openspace 0.2.0'
 PACKAGE_BUGREPORT='<A HREF="http://openspace.linux.pl">http://openspace.linux.pl</A>'
 
-ac_unique_file=&quot;src/openspace.cpp&quot;
+ac_unique_file=&quot;src/main.cpp&quot;
 # Factoring default headers for most tests.
 ac_includes_default=&quot;\
 #include &lt;stdio.h&gt;
@@ -465,7 +465,7 @@
 # include &lt;unistd.h&gt;
 #endif&quot;
 
-ac_subst_vars='SHELL PATH_SEPARATOR PACKAGE_NAME PACKAGE_TARNAME PACKAGE_VERSION PACKAGE_STRING PACKAGE_BUGREPORT exec_prefix prefix program_transform_name bindir sbindir libexecdir datadir sysconfdir sharedstatedir localstatedir libdir includedir oldincludedir infodir mandir build_alias host_alias target_alias DEFS ECHO_C ECHO_N ECHO_T LIBS INSTALL_PROGRAM INSTALL_SCRIPT INSTALL_DATA CYGPATH_W PACKAGE VERSION ACLOCAL AUTOCONF AUTOMAKE AUTOHEADER MAKEINFO install_sh STRIP ac_ct_STRIP INSTALL_STRIP_PROGRAM mkdir_p AWK SET_MAKE am__leading_dot AMTAR am__tar am__untar CXX CXXFLAGS LDFLAGS CPPFLAGS ac_ct_CXX EXEEXT OBJEXT DEPDIR am__include am__quote AMDEP_TRUE AMDEP_FALSE AMDEPBACKSLASH CXXDEPMODE am__fastdepCXX_TRUE am__fastdepCXX_FALSE CC CFLAGS ac_ct_CC CCDEPMODE am__fastdepCC_TRUE am__fastdepCC_FALSE CPP build build_cpu build_vendor build_os host host_cpu host_vendor host_os EGREP LN_S ECHO AR ac_ct_AR RANLIB ac_ct_RANLIB CXXCPP F77 FFLAGS ac_ct_F77 LIBTOOL LIBOBJS FOX_CON!
 FIG XML2_CONFIG LTLIBOBJS'
+ac_subst_vars='SHELL PATH_SEPARATOR PACKAGE_NAME PACKAGE_TARNAME PACKAGE_VERSION PACKAGE_STRING PACKAGE_BUGREPORT exec_prefix prefix program_transform_name bindir sbindir libexecdir datadir sysconfdir sharedstatedir localstatedir libdir includedir oldincludedir infodir mandir build_alias host_alias target_alias DEFS ECHO_C ECHO_N ECHO_T LIBS INSTALL_PROGRAM INSTALL_SCRIPT INSTALL_DATA CYGPATH_W PACKAGE VERSION ACLOCAL AUTOCONF AUTOMAKE AUTOHEADER MAKEINFO AMTAR install_sh STRIP ac_ct_STRIP INSTALL_STRIP_PROGRAM mkdir_p AWK SET_MAKE am__leading_dot CXX CXXFLAGS LDFLAGS CPPFLAGS ac_ct_CXX EXEEXT OBJEXT DEPDIR am__include am__quote AMDEP_TRUE AMDEP_FALSE AMDEPBACKSLASH CXXDEPMODE am__fastdepCXX_TRUE am__fastdepCXX_FALSE CC CFLAGS ac_ct_CC CCDEPMODE am__fastdepCC_TRUE am__fastdepCC_FALSE CPP build build_cpu build_vendor build_os host host_cpu host_vendor host_os EGREP LN_S ECHO AR ac_ct_AR RANLIB ac_ct_RANLIB CXXCPP F77 FFLAGS ac_ct_F77 LIBTOOL LIBOBJS FOX_CONFIG XML2_CONFIG LT!
 LIBOBJS'
 ac_subst_files=''
 
 # Initialize some variables set by options.
@@ -954,7 +954,7 @@
   # Omit some internal or obsolete options to make the list less imposing.
   # This message is too long to be a string in the A/UX 3.1 sh.
   cat &lt;&lt;_ACEOF
-\`configure' configures openspace 0.1.1 to adapt to many kinds of systems.
+\`configure' configures openspace 0.2.0 to adapt to many kinds of systems.
 
 Usage: $0 [OPTION]... [VAR=VALUE]...
 
@@ -1020,7 +1020,7 @@
 
 if test -n &quot;$ac_init_help&quot;; then
   case $ac_init_help in
-     short | recursive ) echo &quot;Configuration of openspace 0.1.1:&quot;;;
+     short | recursive ) echo &quot;Configuration of openspace 0.2.0:&quot;;;
    esac
   cat &lt;&lt;\_ACEOF
 
@@ -1159,7 +1159,7 @@
 test -n &quot;$ac_init_help&quot; &amp;&amp; exit 0
 if $ac_init_version; then
   cat &lt;&lt;\_ACEOF
-openspace configure 0.1.1
+openspace configure 0.2.0
 generated by GNU Autoconf 2.59
 
 Copyright (C) 2003 Free Software Foundation, Inc.
@@ -1173,7 +1173,7 @@
 This file contains any messages produced by compilers while
 running configure, to aid debugging if configure makes a mistake.
 
-It was created by openspace $as_me 0.1.1, which was
+It was created by openspace $as_me 0.2.0, which was
 generated by GNU Autoconf 2.59.  Invocation command line was
 
   $ $0 $@
@@ -1512,7 +1512,7 @@
 
           ac_config_headers=&quot;$ac_config_headers src/config.h&quot;
 
-am__api_version=&quot;1.9&quot;
+am__api_version=&quot;1.8&quot;
 ac_aux_dir=
 for ac_dir in $srcdir $srcdir/.. $srcdir/../..; do
   if test -f $ac_dir/install-sh; then
@@ -1689,21 +1689,13 @@
 fi
 
 if mkdir -p --version . &gt;/dev/null 2&gt;&amp;1 &amp;&amp; test ! -d ./--version; then
-  # We used to keeping the `.' as first argument, in order to
-  # allow $(mkdir_p) to be used without argument.  As in
+  # Keeping the `.' argument allows $(mkdir_p) to be used without
+  # argument.  Indeed, we sometimes output rules like
   #   $(mkdir_p) $(somedir)
-  # where $(somedir) is conditionally defined.  However this is wrong
-  # for two reasons:
-  #  1. if the package is installed by a user who cannot write `.'
-  #     make install will fail,
-  #  2. the above comment should most certainly read
-  #     $(mkdir_p) $(DESTDIR)$(somedir)
-  #     so it does not work when $(somedir) is undefined and
-  #     $(DESTDIR) is not.
-  #  To support the latter case, we have to write
-  #     test -z &quot;$(somedir)&quot; || $(mkdir_p) $(DESTDIR)$(somedir),
-  #  so the `.' trick is pointless.
-  mkdir_p='mkdir -p --'
+  # where $(somedir) is conditionally defined.
+  # (`test -n '$(somedir)' &amp;&amp; $(mkdir_p) $(somedir)' is a more
+  # expensive solution, as it forces Make to start a sub-shell.)
+  mkdir_p='mkdir -p -- .'
 else
   # On NextStep and OpenStep, the `mkdir' command does not
   # recognize any option.  It will interpret all options as
@@ -1819,7 +1811,7 @@
 
 # Define the identity of the package.
  PACKAGE='openspace'
- VERSION='0.1.1'
+ VERSION='0.2.0'
 
 
 cat &gt;&gt;confdefs.h &lt;&lt;_ACEOF
@@ -1847,6 +1839,9 @@
 
 MAKEINFO=${MAKEINFO-&quot;${am_missing_run}makeinfo&quot;}
 
+
+AMTAR=${AMTAR-&quot;${am_missing_run}tar&quot;}
+
 install_sh=${install_sh-&quot;$am_aux_dir/install-sh&quot;}
 
 # Installed binaries are usually stripped using `strip' when the user
@@ -1939,16 +1934,9 @@
 
 # We need awk for the &quot;check&quot; target.  The system &quot;awk&quot; is bad on
 # some platforms.
-# Always define AMTAR for backward compatibility.
 
-AMTAR=${AMTAR-&quot;${am_missing_run}tar&quot;}
 
-am__tar='${AMTAR} chof - &quot;$$tardir&quot;'; am__untar='${AMTAR} xf -'
 
-
-
-
-
 # Checks for programs.
 ac_ext=cc
 ac_cpp='$CXXCPP $CPPFLAGS'
@@ -4360,7 +4348,7 @@
   ;;
 *-*-irix6*)
   # Find out which ABI we are using.
-  echo '#line 4363 &quot;configure&quot;' &gt; conftest.$ac_ext
+  echo '#line 4351 &quot;configure&quot;' &gt; conftest.$ac_ext
   if { (eval echo &quot;$as_me:$LINENO: \&quot;$ac_compile\&quot;&quot;) &gt;&amp;5
   (eval $ac_compile) 2&gt;&amp;5
   ac_status=$?
@@ -5259,7 +5247,7 @@
 
 
 # Provide some information about the compiler.
-echo &quot;$as_me:5262:&quot; \
+echo &quot;$as_me:5250:&quot; \
      &quot;checking for Fortran 77 compiler version&quot; &gt;&amp;5
 ac_compiler=`set X $ac_compile; echo $2`
 { (eval echo &quot;$as_me:$LINENO: \&quot;$ac_compiler --version &lt;/dev/null &gt;&amp;5\&quot;&quot;) &gt;&amp;5
@@ -6398,11 +6386,11 @@
    -e 's:.*FLAGS}? :&amp;$lt_compiler_flag :; t' \
    -e 's: [^ ]*conftest\.: $lt_compiler_flag&amp;:; t' \
    -e 's:$: $lt_compiler_flag:'`
-   (eval echo &quot;\&quot;\$as_me:6401: $lt_compile\&quot;&quot; &gt;&amp;5)
+   (eval echo &quot;\&quot;\$as_me:6389: $lt_compile\&quot;&quot; &gt;&amp;5)
    (eval &quot;$lt_compile&quot; 2&gt;conftest.err)
    ac_status=$?
    cat conftest.err &gt;&amp;5
-   echo &quot;$as_me:6405: \$? = $ac_status&quot; &gt;&amp;5
+   echo &quot;$as_me:6393: \$? = $ac_status&quot; &gt;&amp;5
    if (exit $ac_status) &amp;&amp; test -s &quot;$ac_outfile&quot;; then
      # The compiler can only warn and ignore the option if not recognized
      # So say no if there are warnings other than the usual output.
@@ -6660,11 +6648,11 @@
    -e 's:.*FLAGS}? :&amp;$lt_compiler_flag :; t' \
    -e 's: [^ ]*conftest\.: $lt_compiler_flag&amp;:; t' \
    -e 's:$: $lt_compiler_flag:'`
-   (eval echo &quot;\&quot;\$as_me:6663: $lt_compile\&quot;&quot; &gt;&amp;5)
+   (eval echo &quot;\&quot;\$as_me:6651: $lt_compile\&quot;&quot; &gt;&amp;5)
    (eval &quot;$lt_compile&quot; 2&gt;conftest.err)
    ac_status=$?
    cat conftest.err &gt;&amp;5
-   echo &quot;$as_me:6667: \$? = $ac_status&quot; &gt;&amp;5
+   echo &quot;$as_me:6655: \$? = $ac_status&quot; &gt;&amp;5
    if (exit $ac_status) &amp;&amp; test -s &quot;$ac_outfile&quot;; then
      # The compiler can only warn and ignore the option if not recognized
      # So say no if there are warnings other than the usual output.
@@ -6722,11 +6710,11 @@
    -e 's:.*FLAGS}? :&amp;$lt_compiler_flag :; t' \
    -e 's: [^ ]*conftest\.: $lt_compiler_flag&amp;:; t' \
    -e 's:$: $lt_compiler_flag:'`
-   (eval echo &quot;\&quot;\$as_me:6725: $lt_compile\&quot;&quot; &gt;&amp;5)
+   (eval echo &quot;\&quot;\$as_me:6713: $lt_compile\&quot;&quot; &gt;&amp;5)
    (eval &quot;$lt_compile&quot; 2&gt;out/conftest.err)
    ac_status=$?
    cat out/conftest.err &gt;&amp;5
-   echo &quot;$as_me:6729: \$? = $ac_status&quot; &gt;&amp;5
+   echo &quot;$as_me:6717: \$? = $ac_status&quot; &gt;&amp;5
    if (exit $ac_status) &amp;&amp; test -s out/conftest2.$ac_objext
    then
      # The compiler can only warn and ignore the option if not recognized
@@ -8153,7 +8141,7 @@
   libsuff=
   case &quot;$host_cpu&quot; in
   x86_64*)
-    echo '#line 8156 &quot;configure&quot;' &gt; conftest.$ac_ext
+    echo '#line 8144 &quot;configure&quot;' &gt; conftest.$ac_ext
     if { (eval echo &quot;$as_me:$LINENO: \&quot;$ac_compile\&quot;&quot;) &gt;&amp;5
   (eval $ac_compile) 2&gt;&amp;5
   ac_status=$?
@@ -9017,7 +9005,7 @@
   lt_dlunknown=0; lt_dlno_uscore=1; lt_dlneed_uscore=2
   lt_status=$lt_dlunknown
   cat &gt; conftest.$ac_ext &lt;&lt;EOF
-#line 9020 &quot;configure&quot;
+#line 9008 &quot;configure&quot;
 #include &quot;confdefs.h&quot;
 
 #if HAVE_DLFCN_H
@@ -9115,7 +9103,7 @@
   lt_dlunknown=0; lt_dlno_uscore=1; lt_dlneed_uscore=2
   lt_status=$lt_dlunknown
   cat &gt; conftest.$ac_ext &lt;&lt;EOF
-#line 9118 &quot;configure&quot;
+#line 9106 &quot;configure&quot;
 #include &quot;confdefs.h&quot;
 
 #if HAVE_DLFCN_H
@@ -11363,11 +11351,11 @@
    -e 's:.*FLAGS}? :&amp;$lt_compiler_flag :; t' \
    -e 's: [^ ]*conftest\.: $lt_compiler_flag&amp;:; t' \
    -e 's:$: $lt_compiler_flag:'`
-   (eval echo &quot;\&quot;\$as_me:11366: $lt_compile\&quot;&quot; &gt;&amp;5)
+   (eval echo &quot;\&quot;\$as_me:11354: $lt_compile\&quot;&quot; &gt;&amp;5)
    (eval &quot;$lt_compile&quot; 2&gt;conftest.err)
    ac_status=$?
    cat conftest.err &gt;&amp;5
-   echo &quot;$as_me:11370: \$? = $ac_status&quot; &gt;&amp;5
+   echo &quot;$as_me:11358: \$? = $ac_status&quot; &gt;&amp;5
    if (exit $ac_status) &amp;&amp; test -s &quot;$ac_outfile&quot;; then
      # The compiler can only warn and ignore the option if not recognized
      # So say no if there are warnings other than the usual output.
@@ -11425,11 +11413,11 @@
    -e 's:.*FLAGS}? :&amp;$lt_compiler_flag :; t' \
    -e 's: [^ ]*conftest\.: $lt_compiler_flag&amp;:; t' \
    -e 's:$: $lt_compiler_flag:'`
-   (eval echo &quot;\&quot;\$as_me:11428: $lt_compile\&quot;&quot; &gt;&amp;5)
+   (eval echo &quot;\&quot;\$as_me:11416: $lt_compile\&quot;&quot; &gt;&amp;5)
    (eval &quot;$lt_compile&quot; 2&gt;out/conftest.err)
    ac_status=$?
    cat out/conftest.err &gt;&amp;5
-   echo &quot;$as_me:11432: \$? = $ac_status&quot; &gt;&amp;5
+   echo &quot;$as_me:11420: \$? = $ac_status&quot; &gt;&amp;5
    if (exit $ac_status) &amp;&amp; test -s out/conftest2.$ac_objext
    then
      # The compiler can only warn and ignore the option if not recognized
@@ -11985,7 +11973,7 @@
   libsuff=
   case &quot;$host_cpu&quot; in
   x86_64*)
-    echo '#line 11988 &quot;configure&quot;' &gt; conftest.$ac_ext
+    echo '#line 11976 &quot;configure&quot;' &gt; conftest.$ac_ext
     if { (eval echo &quot;$as_me:$LINENO: \&quot;$ac_compile\&quot;&quot;) &gt;&amp;5
   (eval $ac_compile) 2&gt;&amp;5
   ac_status=$?
@@ -12849,7 +12837,7 @@
   lt_dlunknown=0; lt_dlno_uscore=1; lt_dlneed_uscore=2
   lt_status=$lt_dlunknown
   cat &gt; conftest.$ac_ext &lt;&lt;EOF
-#line 12852 &quot;configure&quot;
+#line 12840 &quot;configure&quot;
 #include &quot;confdefs.h&quot;
 
 #if HAVE_DLFCN_H
@@ -12947,7 +12935,7 @@
   lt_dlunknown=0; lt_dlno_uscore=1; lt_dlneed_uscore=2
   lt_status=$lt_dlunknown
   cat &gt; conftest.$ac_ext &lt;&lt;EOF
-#line 12950 &quot;configure&quot;
+#line 12938 &quot;configure&quot;
 #include &quot;confdefs.h&quot;
 
 #if HAVE_DLFCN_H
@@ -13832,11 +13820,11 @@
    -e 's:.*FLAGS}? :&amp;$lt_compiler_flag :; t' \
    -e 's: [^ ]*conftest\.: $lt_compiler_flag&amp;:; t' \
    -e 's:$: $lt_compiler_flag:'`
-   (eval echo &quot;\&quot;\$as_me:13835: $lt_compile\&quot;&quot; &gt;&amp;5)
+   (eval echo &quot;\&quot;\$as_me:13823: $lt_compile\&quot;&quot; &gt;&amp;5)
    (eval &quot;$lt_compile&quot; 2&gt;conftest.err)
    ac_status=$?
    cat conftest.err &gt;&amp;5
-   echo &quot;$as_me:13839: \$? = $ac_status&quot; &gt;&amp;5
+   echo &quot;$as_me:13827: \$? = $ac_status&quot; &gt;&amp;5
    if (exit $ac_status) &amp;&amp; test -s &quot;$ac_outfile&quot;; then
      # The compiler can only warn and ignore the option if not recognized
      # So say no if there are warnings other than the usual output.
@@ -13894,11 +13882,11 @@
    -e 's:.*FLAGS}? :&amp;$lt_compiler_flag :; t' \
    -e 's: [^ ]*conftest\.: $lt_compiler_flag&amp;:; t' \
    -e 's:$: $lt_compiler_flag:'`
-   (eval echo &quot;\&quot;\$as_me:13897: $lt_compile\&quot;&quot; &gt;&amp;5)
+   (eval echo &quot;\&quot;\$as_me:13885: $lt_compile\&quot;&quot; &gt;&amp;5)
    (eval &quot;$lt_compile&quot; 2&gt;out/conftest.err)
    ac_status=$?
    cat out/conftest.err &gt;&amp;5
-   echo &quot;$as_me:13901: \$? = $ac_status&quot; &gt;&amp;5
+   echo &quot;$as_me:13889: \$? = $ac_status&quot; &gt;&amp;5
    if (exit $ac_status) &amp;&amp; test -s out/conftest2.$ac_objext
    then
      # The compiler can only warn and ignore the option if not recognized
@@ -15305,7 +15293,7 @@
   libsuff=
   case &quot;$host_cpu&quot; in
   x86_64*)
-    echo '#line 15308 &quot;configure&quot;' &gt; conftest.$ac_ext
+    echo '#line 15296 &quot;configure&quot;' &gt; conftest.$ac_ext
     if { (eval echo &quot;$as_me:$LINENO: \&quot;$ac_compile\&quot;&quot;) &gt;&amp;5
   (eval $ac_compile) 2&gt;&amp;5
   ac_status=$?
@@ -16071,11 +16059,11 @@
    -e 's:.*FLAGS}? :&amp;$lt_compiler_flag :; t' \
    -e 's: [^ ]*conftest\.: $lt_compiler_flag&amp;:; t' \
    -e 's:$: $lt_compiler_flag:'`
-   (eval echo &quot;\&quot;\$as_me:16074: $lt_compile\&quot;&quot; &gt;&amp;5)
+   (eval echo &quot;\&quot;\$as_me:16062: $lt_compile\&quot;&quot; &gt;&amp;5)
    (eval &quot;$lt_compile&quot; 2&gt;conftest.err)
    ac_status=$?
    cat conftest.err &gt;&amp;5
-   echo &quot;$as_me:16078: \$? = $ac_status&quot; &gt;&amp;5
+   echo &quot;$as_me:16066: \$? = $ac_status&quot; &gt;&amp;5
    if (exit $ac_status) &amp;&amp; test -s &quot;$ac_outfile&quot;; then
      # The compiler can only warn and ignore the option if not recognized
      # So say no if there are warnings other than the usual output.
@@ -16333,11 +16321,11 @@
    -e 's:.*FLAGS}? :&amp;$lt_compiler_flag :; t' \
    -e 's: [^ ]*conftest\.: $lt_compiler_flag&amp;:; t' \
    -e 's:$: $lt_compiler_flag:'`
-   (eval echo &quot;\&quot;\$as_me:16336: $lt_compile\&quot;&quot; &gt;&amp;5)
+   (eval echo &quot;\&quot;\$as_me:16324: $lt_compile\&quot;&quot; &gt;&amp;5)
    (eval &quot;$lt_compile&quot; 2&gt;conftest.err)
    ac_status=$?
    cat conftest.err &gt;&amp;5
-   echo &quot;$as_me:16340: \$? = $ac_status&quot; &gt;&amp;5
+   echo &quot;$as_me:16328: \$? = $ac_status&quot; &gt;&amp;5
    if (exit $ac_status) &amp;&amp; test -s &quot;$ac_outfile&quot;; then
      # The compiler can only warn and ignore the option if not recognized
      # So say no if there are warnings other than the usual output.
@@ -16395,11 +16383,11 @@
    -e 's:.*FLAGS}? :&amp;$lt_compiler_flag :; t' \
    -e 's: [^ ]*conftest\.: $lt_compiler_flag&amp;:; t' \
    -e 's:$: $lt_compiler_flag:'`
-   (eval echo &quot;\&quot;\$as_me:16398: $lt_compile\&quot;&quot; &gt;&amp;5)
+   (eval echo &quot;\&quot;\$as_me:16386: $lt_compile\&quot;&quot; &gt;&amp;5)
    (eval &quot;$lt_compile&quot; 2&gt;out/conftest.err)
    ac_status=$?
    cat out/conftest.err &gt;&amp;5
-   echo &quot;$as_me:16402: \$? = $ac_status&quot; &gt;&amp;5
+   echo &quot;$as_me:16390: \$? = $ac_status&quot; &gt;&amp;5
    if (exit $ac_status) &amp;&amp; test -s out/conftest2.$ac_objext
    then
      # The compiler can only warn and ignore the option if not recognized
@@ -17826,7 +17814,7 @@
   libsuff=
   case &quot;$host_cpu&quot; in
   x86_64*)
-    echo '#line 17829 &quot;configure&quot;' &gt; conftest.$ac_ext
+    echo '#line 17817 &quot;configure&quot;' &gt; conftest.$ac_ext
     if { (eval echo &quot;$as_me:$LINENO: \&quot;$ac_compile\&quot;&quot;) &gt;&amp;5
   (eval $ac_compile) 2&gt;&amp;5
   ac_status=$?
@@ -18690,7 +18678,7 @@
   lt_dlunknown=0; lt_dlno_uscore=1; lt_dlneed_uscore=2
   lt_status=$lt_dlunknown
   cat &gt; conftest.$ac_ext &lt;&lt;EOF
-#line 18693 &quot;configure&quot;
+#line 18681 &quot;configure&quot;
 #include &quot;confdefs.h&quot;
 
 #if HAVE_DLFCN_H
@@ -18788,7 +18776,7 @@
   lt_dlunknown=0; lt_dlno_uscore=1; lt_dlneed_uscore=2
   lt_status=$lt_dlunknown
   cat &gt; conftest.$ac_ext &lt;&lt;EOF
-#line 18791 &quot;configure&quot;
+#line 18779 &quot;configure&quot;
 #include &quot;confdefs.h&quot;
 
 #if HAVE_DLFCN_H
@@ -22883,7 +22871,7 @@
 } &gt;&amp;5
 cat &gt;&amp;5 &lt;&lt;_CSEOF
 
-This file was extended by openspace $as_me 0.1.1, which was
+This file was extended by openspace $as_me 0.2.0, which was
 generated by GNU Autoconf 2.59.  Invocation command line was
 
   CONFIG_FILES    = $CONFIG_FILES
@@ -22946,7 +22934,7 @@
 
 cat &gt;&gt;$CONFIG_STATUS &lt;&lt;_ACEOF
 ac_cs_version=&quot;\\
-openspace config.status 0.1.1
+openspace config.status 0.2.0
 configured by $0, generated by GNU Autoconf 2.59,
   with options \\&quot;`echo &quot;$ac_configure_args&quot; | sed 's/[\\&quot;&quot;\`\$]/\\\\&amp;/g'`\\&quot;
 
@@ -23162,6 +23150,7 @@
 <A HREF="https://lists.berlios.de/mailman/listinfo/openspace-svn">s, at AUTOMAKE</A>@,$AUTOMAKE,;t t
 <A HREF="https://lists.berlios.de/mailman/listinfo/openspace-svn">s, at AUTOHEADER</A>@,$AUTOHEADER,;t t
 <A HREF="https://lists.berlios.de/mailman/listinfo/openspace-svn">s, at MAKEINFO</A>@,$MAKEINFO,;t t
<A HREF="https://lists.berlios.de/mailman/listinfo/openspace-svn">+s, at AMTAR</A>@,$AMTAR,;t t
 <A HREF="https://lists.berlios.de/mailman/listinfo/openspace-svn">s, at install_sh</A>@,$install_sh,;t t
 <A HREF="https://lists.berlios.de/mailman/listinfo/openspace-svn">s, at STRIP</A>@,$STRIP,;t t
 <A HREF="https://lists.berlios.de/mailman/listinfo/openspace-svn">s, at ac_ct_STRIP</A>@,$ac_ct_STRIP,;t t
@@ -23170,9 +23159,6 @@
 <A HREF="https://lists.berlios.de/mailman/listinfo/openspace-svn">s, at AWK</A>@,$AWK,;t t
 <A HREF="https://lists.berlios.de/mailman/listinfo/openspace-svn">s, at SET_MAKE</A>@,$SET_MAKE,;t t
 <A HREF="https://lists.berlios.de/mailman/listinfo/openspace-svn">s, at am__leading_dot</A>@,$am__leading_dot,;t t
<A HREF="https://lists.berlios.de/mailman/listinfo/openspace-svn">-s, at AMTAR</A>@,$AMTAR,;t t
<A HREF="https://lists.berlios.de/mailman/listinfo/openspace-svn">-s, at am__tar</A>@,$am__tar,;t t
<A HREF="https://lists.berlios.de/mailman/listinfo/openspace-svn">-s, at am__untar</A>@,$am__untar,;t t
 <A HREF="https://lists.berlios.de/mailman/listinfo/openspace-svn">s, at CXX</A>@,$CXX,;t t
 <A HREF="https://lists.berlios.de/mailman/listinfo/openspace-svn">s, at CXXFLAGS</A>@,$CXXFLAGS,;t t
 <A HREF="https://lists.berlios.de/mailman/listinfo/openspace-svn">s, at LDFLAGS</A>@,$LDFLAGS,;t t
@@ -23842,21 +23828,27 @@
   else
     continue
   fi
-  # Extract the definition of DEPDIR, am__include, and am__quote
-  # from the Makefile without running `make'.
+  grep '^DEP_FILES *= *[^ #]' &lt; &quot;$mf&quot; &gt; /dev/null || continue
+  # Extract the definition of DEP_FILES from the Makefile without
+  # running `make'.
   DEPDIR=`sed -n 's/^DEPDIR = //p' &lt; &quot;$mf&quot;`
   test -z &quot;$DEPDIR&quot; &amp;&amp; continue
-  am__include=`sed -n 's/^am__include = //p' &lt; &quot;$mf&quot;`
-  test -z &quot;am__include&quot; &amp;&amp; continue
-  am__quote=`sed -n 's/^am__quote = //p' &lt; &quot;$mf&quot;`
   # When using ansi2knr, U may be empty or an underscore; expand it
   U=`sed -n 's/^U = //p' &lt; &quot;$mf&quot;`
-  # Find all dependency output files, they are included files with
-  # $(DEPDIR) in their names.  We invoke sed twice because it is the
-  # simplest approach to changing $(DEPDIR) to its actual value in the
-  # expansion.
-  for file in `sed -n &quot;
-    s/^$am__include $am__quote\(.*(DEPDIR).*\)$am__quote&quot;'$/\1/p' &lt;&quot;$mf&quot; | \
+  test -d &quot;$dirpart/$DEPDIR&quot; || mkdir &quot;$dirpart/$DEPDIR&quot;
+  # We invoke sed twice because it is the simplest approach to
+  # changing $(DEPDIR) to its actual value in the expansion.
+  for file in `sed -n '
+    /^DEP_FILES = .*\\\\$/ {
+      s/^DEP_FILES = //
+      :loop
+	s/\\\\$//
+	p
+	n
+	/\\\\$/ b loop
+      p
+    }
+    /^DEP_FILES = / s/^DEP_FILES = //p' &lt; &quot;$mf&quot; | \
        sed -e 's/\$(DEPDIR)/'&quot;$DEPDIR&quot;'/g' -e 's/\$U/'&quot;$U&quot;'/g'`; do
     # Make sure the directory exists.
     test -f &quot;$dirpart/$file&quot; &amp;&amp; continue

Modified: trunk/configure.ac
===================================================================
--- trunk/configure.ac	2006-02-12 13:43:28 UTC (rev 245)
+++ trunk/configure.ac	2006-02-12 15:36:06 UTC (rev 246)
@@ -2,8 +2,8 @@
 # Process this file with autoconf to produce a configure script.
 
 AC_PREREQ(2.59)
-AC_INIT(openspace, 0.1.1, <A HREF="http://openspace.linux.pl">http://openspace.linux.pl</A>)
-AC_CONFIG_SRCDIR(src/openspace.cpp)
+AC_INIT(openspace, 0.2.0, <A HREF="http://openspace.linux.pl">http://openspace.linux.pl</A>)
+AC_CONFIG_SRCDIR(src/main.cpp)
 AC_CONFIG_HEADER(src/config.h)
 AM_INIT_AUTOMAKE
 # Checks for programs.

Modified: trunk/depcomp
===================================================================
--- trunk/depcomp	2006-02-12 13:43:28 UTC (rev 245)
+++ trunk/depcomp	2006-02-12 15:36:06 UTC (rev 246)
@@ -1,9 +1,9 @@
 #! /bin/sh
 # depcomp - compile a program generating dependencies as side-effects
 
-scriptversion=2005-02-09.22
+scriptversion=2004-04-25.13
 
-# Copyright (C) 1999, 2000, 2003, 2004, 2005 Free Software Foundation, Inc.
+# Copyright (C) 1999, 2000, 2003, 2004 Free Software Foundation, Inc.
 
 # This program is free software; you can redistribute it and/or modify
 # it under the terms of the GNU General Public License as published by
@@ -43,18 +43,17 @@
   depmode     Dependency tracking mode.
   source      Source file read by `PROGRAMS ARGS'.
   object      Object file output by `PROGRAMS ARGS'.
-  DEPDIR      directory where to store dependencies.
   depfile     Dependency file to output.
   tmpdepfile  Temporary file to use when outputing dependencies.
   libtool     Whether libtool is used (yes/no).
 
 Report bugs to &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/openspace-svn">bug-automake at gnu.org</A>&gt;.
 EOF
-    exit $?
+    exit 0
     ;;
   -v | --v*)
     echo &quot;depcomp $scriptversion&quot;
-    exit $?
+    exit 0
     ;;
 esac
 
@@ -62,10 +61,18 @@
   echo &quot;depcomp: Variables source, object and depmode must be set&quot; 1&gt;&amp;2
   exit 1
 fi
+# `libtool' can also be set to `yes' or `no'.
 
-# Dependencies for sub/bar.o or sub/bar.obj go into sub/.deps/bar.Po.
-depfile=${depfile-`echo &quot;$object&quot; |
-  sed 's|[^\\/]*$|'${DEPDIR-.deps}'/&amp;|;s|\.\([^.]*\)$|.P\1|;s|Pobj$|Po|'`}
+if test -z &quot;$depfile&quot;; then
+   base=`echo &quot;$object&quot; | sed -e 's,^.*/,,' -e 's,\.\([^.]*\)$,.P\1,'`
+   dir=`echo &quot;$object&quot; | sed 's,/.*$,/,'`
+   if test &quot;$dir&quot; = &quot;$object&quot;; then
+      dir=
+   fi
+   # FIXME: should be _deps on DOS.
+   depfile=&quot;$dir.deps/$base&quot;
+fi
+
 tmpdepfile=${tmpdepfile-`echo &quot;$depfile&quot; | sed 's/\.\([^.]*\)$/.T\1/'`}
 
 rm -f &quot;$tmpdepfile&quot;
@@ -287,43 +294,33 @@
    base=`echo &quot;$object&quot; | sed -e 's|^.*/||' -e 's/\.o$//' -e 's/\.lo$//'`
 
    if test &quot;$libtool&quot; = yes; then
-      # With Tru64 cc, shared objects can also be used to make a
-      # static library.  This mecanism is used in libtool 1.4 series to
-      # handle both shared and static libraries in a single compilation.
-      # With libtool 1.4, dependencies were output in $dir.libs/$base.lo.d.
-      #
-      # With libtool 1.5 this exception was removed, and libtool now
-      # generates 2 separate objects for the 2 libraries.  These two
-      # compilations output dependencies in in $dir.libs/$base.o.d and
-      # in $dir$base.o.d.  We have to check for both files, because
-      # one of the two compilations can be disabled.  We should prefer
-      # $dir$base.o.d over $dir.libs/$base.o.d because the latter is
-      # automatically cleaned when .libs/ is deleted, while ignoring
-      # the former would cause a distcleancheck panic.
-      tmpdepfile1=$dir.libs/$base.lo.d   # libtool 1.4
-      tmpdepfile2=$dir$base.o.d          # libtool 1.5
-      tmpdepfile3=$dir.libs/$base.o.d    # libtool 1.5
-      tmpdepfile4=$dir.libs/$base.d      # Compaq CCC V6.2-504
+      # Dependencies are output in .lo.d with libtool 1.4.
+      # They are output in .o.d with libtool 1.5.
+      tmpdepfile1=&quot;$dir.libs/$base.lo.d&quot;
+      tmpdepfile2=&quot;$dir.libs/$base.o.d&quot;
+      tmpdepfile3=&quot;$dir.libs/$base.d&quot;
       &quot;$@&quot; -Wc,-MD
    else
-      tmpdepfile1=$dir$base.o.d
-      tmpdepfile2=$dir$base.d
-      tmpdepfile3=$dir$base.d
-      tmpdepfile4=$dir$base.d
+      tmpdepfile1=&quot;$dir$base.o.d&quot;
+      tmpdepfile2=&quot;$dir$base.d&quot;
+      tmpdepfile3=&quot;$dir$base.d&quot;
       &quot;$@&quot; -MD
    fi
 
    stat=$?
    if test $stat -eq 0; then :
    else
-      rm -f &quot;$tmpdepfile1&quot; &quot;$tmpdepfile2&quot; &quot;$tmpdepfile3&quot; &quot;$tmpdepfile4&quot;
+      rm -f &quot;$tmpdepfile1&quot; &quot;$tmpdepfile2&quot; &quot;$tmpdepfile3&quot;
       exit $stat
    fi
 
-   for tmpdepfile in &quot;$tmpdepfile1&quot; &quot;$tmpdepfile2&quot; &quot;$tmpdepfile3&quot; &quot;$tmpdepfile4&quot;
-   do
-     test -f &quot;$tmpdepfile&quot; &amp;&amp; break
-   done
+   if test -f &quot;$tmpdepfile1&quot;; then
+      tmpdepfile=&quot;$tmpdepfile1&quot;
+   elif test -f &quot;$tmpdepfile2&quot;; then
+      tmpdepfile=&quot;$tmpdepfile2&quot;
+   else
+      tmpdepfile=&quot;$tmpdepfile3&quot;
+   fi
    if test -f &quot;$tmpdepfile&quot;; then
       sed -e &quot;s,^.*\.[a-z]*:,$object:,&quot; &lt; &quot;$tmpdepfile&quot; &gt; &quot;$depfile&quot;
       # That's a tab and a space in the [].

Copied: trunk/doc (from rev 245, branches/mloskot-style-refactoring/doc)


Property changes on: trunk/doc
___________________________________________________________________
Name: svn:ignore
   + *~
*.cache
*LOG
*log
*.kdev*
*.lo
*.loT
*.o
*.status
*.swp
.deps
.libs
libtool
openspacerc
tags
Doxyfile
Makefile


Copied: trunk/doc/dev (from rev 245, branches/mloskot-style-refactoring/doc/dev)


Property changes on: trunk/doc/dev
___________________________________________________________________
Name: svn:ignore
   + *~
*.cache
*LOG
*log
*.kdev*
*.lo
*.loT
*.o
*.status
*.swp
.deps
.libs
libtool
openspacerc
tags
Doxyfile
Makefile


Copied: trunk/doxygen.conf (from rev 245, branches/mloskot-style-refactoring/doxygen.conf)


Property changes on: trunk/icons
___________________________________________________________________
Name: svn:ignore
   - Makefile

   + *~
*.cache
*LOG
*log
*.kdev*
*.lo
*.loT
*.o
*.status
*.swp
.deps
.libs
libtool
openspacerc
tags
Doxyfile
Makefile


Modified: trunk/icons/Makefile.in
===================================================================
--- trunk/icons/Makefile.in	2006-02-12 13:43:28 UTC (rev 245)
+++ trunk/icons/Makefile.in	2006-02-12 15:36:06 UTC (rev 246)
@@ -1,8 +1,8 @@
-# Makefile.in generated by automake 1.9.5 from Makefile.am.
+# Makefile.in generated by automake 1.8.5 from Makefile.am.
 # @configure_input@
 
 # Copyright (C) 1994, 1995, 1996, 1997, 1998, 1999, 2000, 2001, 2002,
-# 2003, 2004, 2005  Free Software Foundation, Inc.
+# 2003, 2004  Free Software Foundation, Inc.
 # This Makefile.in is free software; the Free Software Foundation
 # gives unlimited permission to copy and/or distribute it,
 # with or without modifications, as long as this notice is preserved.
@@ -33,7 +33,6 @@
 NORMAL_UNINSTALL = :
 PRE_UNINSTALL = :
 POST_UNINSTALL = :
-build_triplet = @build@
 host_triplet = @host@
 subdir = icons
 DIST_COMMON = $(srcdir)/Makefile.am $(srcdir)/Makefile.in
@@ -41,7 +40,7 @@
 am__aclocal_m4_deps = $(top_srcdir)/configure.ac
 am__configure_deps = $(am__aclocal_m4_deps) $(CONFIGURE_DEPENDENCIES) \
 	$(ACLOCAL_M4)
-mkinstalldirs = $(install_sh) -d
+mkinstalldirs = $(mkdir_p)
 CONFIG_HEADER = $(top_builddir)/src/config.h
 CONFIG_CLEAN_FILES =
 SOURCES =
@@ -124,8 +123,6 @@
 am__include = @am__include@
 am__leading_dot = @am__leading_dot@
 am__quote = @am__quote@
-am__tar = @am__tar@
-am__untar = @am__untar@
 bindir = @bindir@
 build = @build@
 build_alias = @build_alias@
@@ -205,13 +202,7 @@
 #     (which will cause the Makefiles to be regenerated when you run `make');
 # (2) otherwise, pass the desired values on the `make' command line.
 $(RECURSIVE_TARGETS):
-	@failcom='exit 1'; \
-	for f in x $$MAKEFLAGS; do \
-	  case $$f in \
-	    *=* | --[!k]*);; \
-	    *k*) failcom='fail=yes';; \
-	  esac; \
-	done; \
+	@set fnord $$MAKEFLAGS; amf=$$2; \
 	dot_seen=no; \
 	target=`echo $@ | sed s/-recursive//`; \
 	list='$(SUBDIRS)'; for subdir in $$list; do \
@@ -223,7 +214,7 @@
 	    local_target=&quot;$$target&quot;; \
 	  fi; \
 	  (cd $$subdir &amp;&amp; $(MAKE) $(AM_MAKEFLAGS) $$local_target) \
-	  || eval $$failcom; \
+	   || case &quot;$$amf&quot; in *=*) exit 1;; *k*) fail=yes;; *) exit 1;; esac; \
 	done; \
 	if test &quot;$$dot_seen&quot; = &quot;no&quot;; then \
 	  $(MAKE) $(AM_MAKEFLAGS) &quot;$$target-am&quot; || exit 1; \
@@ -231,13 +222,7 @@
 
 mostlyclean-recursive clean-recursive distclean-recursive \
 maintainer-clean-recursive:
-	@failcom='exit 1'; \
-	for f in x $$MAKEFLAGS; do \
-	  case $$f in \
-	    *=* | --[!k]*);; \
-	    *k*) failcom='fail=yes';; \
-	  esac; \
-	done; \
+	@set fnord $$MAKEFLAGS; amf=$$2; \
 	dot_seen=no; \
 	case &quot;$@&quot; in \
 	  distclean-* | maintainer-clean-*) list='$(DIST_SUBDIRS)' ;; \
@@ -258,7 +243,7 @@
 	    local_target=&quot;$$target&quot;; \
 	  fi; \
 	  (cd $$subdir &amp;&amp; $(MAKE) $(AM_MAKEFLAGS) $$local_target) \
-	  || eval $$failcom; \
+	   || case &quot;$$amf&quot; in *=*) exit 1;; *k*) fail=yes;; *) exit 1;; esac; \
 	done &amp;&amp; test -z &quot;$$fail&quot;
 tags-recursive:
 	list='$(SUBDIRS)'; for subdir in $$list; do \
@@ -357,17 +342,15 @@
 	    || exit 1; \
 	  fi; \
 	done
-	list='$(DIST_SUBDIRS)'; for subdir in $$list; do \
+	list='$(SUBDIRS)'; for subdir in $$list; do \
 	  if test &quot;$$subdir&quot; = .; then :; else \
 	    test -d &quot;$(distdir)/$$subdir&quot; \
-	    || $(mkdir_p) &quot;$(distdir)/$$subdir&quot; \
+	    || mkdir &quot;$(distdir)/$$subdir&quot; \
 	    || exit 1; \
-	    distdir=`$(am__cd) $(distdir) &amp;&amp; pwd`; \
-	    top_distdir=`$(am__cd) $(top_distdir) &amp;&amp; pwd`; \
 	    (cd $$subdir &amp;&amp; \
 	      $(MAKE) $(AM_MAKEFLAGS) \
-	        top_distdir=&quot;$$top_distdir&quot; \
-	        distdir=&quot;$$distdir/$$subdir&quot; \
+	        top_distdir=&quot;../$(top_distdir)&quot; \
+	        distdir=&quot;../$(distdir)/$$subdir&quot; \
 	        distdir) \
 	      || exit 1; \
 	  fi; \
@@ -396,7 +379,7 @@
 clean-generic:
 
 distclean-generic:
-	-test -z &quot;$(CONFIG_CLEAN_FILES)&quot; || rm -f $(CONFIG_CLEAN_FILES)
+	-rm -f $(CONFIG_CLEAN_FILES)
 
 maintainer-clean-generic:
 	@echo &quot;This command is intended for maintainers to use&quot;


Property changes on: trunk/icons/default
___________________________________________________________________
Name: svn:ignore
   - Makefile

   + *~
*.cache
*LOG
*log
*.kdev*
*.lo
*.loT
*.o
*.status
*.swp
.deps
.libs
libtool
openspacerc
tags
Doxyfile
Makefile


Modified: trunk/icons/default/Makefile.in
===================================================================
--- trunk/icons/default/Makefile.in	2006-02-12 13:43:28 UTC (rev 245)
+++ trunk/icons/default/Makefile.in	2006-02-12 15:36:06 UTC (rev 246)
@@ -1,8 +1,8 @@
-# Makefile.in generated by automake 1.9.5 from Makefile.am.
+# Makefile.in generated by automake 1.8.5 from Makefile.am.
 # @configure_input@
 
 # Copyright (C) 1994, 1995, 1996, 1997, 1998, 1999, 2000, 2001, 2002,
-# 2003, 2004, 2005  Free Software Foundation, Inc.
+# 2003, 2004  Free Software Foundation, Inc.
 # This Makefile.in is free software; the Free Software Foundation
 # gives unlimited permission to copy and/or distribute it,
 # with or without modifications, as long as this notice is preserved.
@@ -34,7 +34,6 @@
 NORMAL_UNINSTALL = :
 PRE_UNINSTALL = :
 POST_UNINSTALL = :
-build_triplet = @build@
 host_triplet = @host@
 subdir = icons/default
 DIST_COMMON = $(srcdir)/Makefile.am $(srcdir)/Makefile.in
@@ -42,17 +41,11 @@
 am__aclocal_m4_deps = $(top_srcdir)/configure.ac
 am__configure_deps = $(am__aclocal_m4_deps) $(CONFIGURE_DEPENDENCIES) \
 	$(ACLOCAL_M4)
-mkinstalldirs = $(install_sh) -d
+mkinstalldirs = $(mkdir_p)
 CONFIG_HEADER = $(top_builddir)/src/config.h
 CONFIG_CLEAN_FILES =
 SOURCES =
 DIST_SOURCES =
-am__vpath_adj_setup = srcdirstrip=`echo &quot;$(srcdir)&quot; | sed 's|.|.|g'`;
-am__vpath_adj = case $$p in \
-    $(srcdir)/*) f=`echo &quot;$$p&quot; | sed &quot;s|^$$srcdirstrip/||&quot;`;; \
-    *) f=$$p;; \
-  esac;
-am__strip_dir = `echo $$p | sed -e 's|^.*/||'`;
 am__installdirs = &quot;$(DESTDIR)$(iconsdir)&quot;
 iconsDATA_INSTALL = $(INSTALL_DATA)
 DATA = $(icons_DATA)
@@ -125,8 +118,6 @@
 am__include = @am__include@
 am__leading_dot = @am__leading_dot@
 am__quote = @am__quote@
-am__tar = @am__tar@
-am__untar = @am__untar@
 bindir = @bindir@
 build = @build@
 build_alias = @build_alias@
@@ -205,7 +196,7 @@
 	test -z &quot;$(iconsdir)&quot; || $(mkdir_p) &quot;$(DESTDIR)$(iconsdir)&quot;
 	@list='$(icons_DATA)'; for p in $$list; do \
 	  if test -f &quot;$$p&quot;; then d=; else d=&quot;$(srcdir)/&quot;; fi; \
-	  f=$(am__strip_dir) \
+	  f=&quot;`echo $$p | sed -e 's|^.*/||'`&quot;; \
 	  echo &quot; $(iconsDATA_INSTALL) '$$d$$p' '$(DESTDIR)$(iconsdir)/$$f'&quot;; \
 	  $(iconsDATA_INSTALL) &quot;$$d$$p&quot; &quot;$(DESTDIR)$(iconsdir)/$$f&quot;; \
 	done
@@ -213,7 +204,7 @@
 uninstall-iconsDATA:
 	@$(NORMAL_UNINSTALL)
 	@list='$(icons_DATA)'; for p in $$list; do \
-	  f=$(am__strip_dir) \
+	  f=&quot;`echo $$p | sed -e 's|^.*/||'`&quot;; \
 	  echo &quot; rm -f '$(DESTDIR)$(iconsdir)/$$f'&quot;; \
 	  rm -f &quot;$(DESTDIR)$(iconsdir)/$$f&quot;; \
 	done
@@ -277,7 +268,7 @@
 clean-generic:
 
 distclean-generic:
-	-test -z &quot;$(CONFIG_CLEAN_FILES)&quot; || rm -f $(CONFIG_CLEAN_FILES)
+	-rm -f $(CONFIG_CLEAN_FILES)
 
 maintainer-clean-generic:
 	@echo &quot;This command is intended for maintainers to use&quot;

Modified: trunk/install-sh
===================================================================
--- trunk/install-sh	2006-02-12 13:43:28 UTC (rev 245)
+++ trunk/install-sh	2006-02-12 15:36:06 UTC (rev 246)
@@ -1,7 +1,7 @@
 #!/bin/sh
 # install - install a program, script, or datafile
 
-scriptversion=2005-02-02.21
+scriptversion=2004-04-01.17
 
 # This originates from X11R5 (mit/util/scripts/install.sh), which was
 # later released in X11R6 (xc/config/util/install.sh) with the
@@ -58,6 +58,9 @@
 rmprog=&quot;${RMPROG-rm}&quot;
 mkdirprog=&quot;${MKDIRPROG-mkdir}&quot;
 
+transformbasename=
+transform_arg=
+instcmd=&quot;$mvprog&quot;
 chmodcmd=&quot;$chmodprog 0755&quot;
 chowncmd=
 chgrpcmd=
@@ -67,27 +70,23 @@
 src=
 dst=
 dir_arg=
-dstarg=
-no_target_directory=
 
-usage=&quot;Usage: $0 [OPTION]... [-T] SRCFILE DSTFILE
+usage=&quot;Usage: $0 [OPTION]... SRCFILE DSTFILE
    or: $0 [OPTION]... SRCFILES... DIRECTORY
-   or: $0 [OPTION]... -t DIRECTORY SRCFILES...
-   or: $0 [OPTION]... -d DIRECTORIES...
+   or: $0 -d DIRECTORIES...
 
-In the 1st form, copy SRCFILE to DSTFILE.
-In the 2nd and 3rd, copy all SRCFILES to DIRECTORY.
-In the 4th, create DIRECTORIES.
+In the first form, install SRCFILE to DSTFILE, removing SRCFILE by default.
+In the second, create the directory path DIR.
 
 Options:
--c         (ignored)
+-b=TRANSFORMBASENAME
+-c         copy source (using $cpprog) instead of moving (using $mvprog).
 -d         create directories instead of installing files.
--g GROUP   $chgrpprog installed files to GROUP.
--m MODE    $chmodprog installed files to MODE.
--o USER    $chownprog installed files to USER.
--s         $stripprog installed files.
--t DIRECTORY  install into DIRECTORY.
--T         report an error if DSTFILE is a directory.
+-g GROUP   $chgrp installed files to GROUP.
+-m MODE    $chmod installed files to MODE.
+-o USER    $chown installed files to USER.
+-s         strip installed files (using $stripprog).
+-t=TRANSFORM
 --help     display this help and exit.
 --version  display version info and exit.
 
@@ -97,9 +96,14 @@
 
 while test -n &quot;$1&quot;; do
   case $1 in
-    -c) shift
+    -b=*) transformbasename=`echo $1 | sed 's/-b=//'`
+        shift
         continue;;
 
+    -c) instcmd=$cpprog
+        shift
+        continue;;
+
     -d) dir_arg=true
         shift
         continue;;
@@ -109,7 +113,7 @@
         shift
         continue;;
 
-    --help) echo &quot;$usage&quot;; exit $?;;
+    --help) echo &quot;$usage&quot;; exit 0;;
 
     -m) chmodcmd=&quot;$chmodprog $2&quot;
         shift
@@ -125,20 +129,14 @@
         shift
         continue;;
 
-    -t) dstarg=$2
-	shift
-	shift
-	continue;;
+    -t=*) transformarg=`echo $1 | sed 's/-t=//'`
+        shift
+        continue;;
 
-    -T) no_target_directory=true
-	shift
-	continue;;
+    --version) echo &quot;$0 $scriptversion&quot;; exit 0;;
 
-    --version) echo &quot;$0 $scriptversion&quot;; exit $?;;
-
     *)  # When -d is used, all remaining arguments are directories to create.
-	# When -t is used, the destination is already specified.
-	test -n &quot;$dir_arg$dstarg&quot; &amp;&amp; break
+	test -n &quot;$dir_arg&quot; &amp;&amp; break
         # Otherwise, the last argument is the destination.  Remove it from $@.
 	for arg
 	do
@@ -176,13 +174,13 @@
     src=
 
     if test -d &quot;$dst&quot;; then
-      mkdircmd=:
+      instcmd=:
       chmodcmd=
     else
-      mkdircmd=$mkdirprog
+      instcmd=$mkdirprog
     fi
   else
-    # Waiting for this to be detected by the &quot;$cpprog $src $dsttmp&quot; command
+    # Waiting for this to be detected by the &quot;$instcmd $src $dsttmp&quot; command
     # might cause directories to be created, which would be especially bad
     # if $src (and thus $dsttmp) contains '*'.
     if test ! -f &quot;$src&quot; &amp;&amp; test ! -d &quot;$src&quot;; then
@@ -204,16 +202,12 @@
     # If destination is a directory, append the input filename; won't work
     # if double slashes aren't ignored.
     if test -d &quot;$dst&quot;; then
-      if test -n &quot;$no_target_directory&quot;; then
-	echo &quot;$0: $dstarg: Is a directory&quot; &gt;&amp;2
-	exit 1
-      fi
       dst=$dst/`basename &quot;$src&quot;`
     fi
   fi
 
   # This sed command emulates the dirname command.
-  dstdir=`echo &quot;$dst&quot; | sed -e 's,/*$,,;s,[^/]*$,,;s,/*$,,;s,^$,.,'`
+  dstdir=`echo &quot;$dst&quot; | sed -e 's,[^/]*$,,;s,/$,,;s,^$,.,'`
 
   # Make sure that the destination directory exists.
 
@@ -226,8 +220,7 @@
     oIFS=$IFS
     # Some sh's can't handle IFS=/ for some reason.
     IFS='%'
-    set x `echo &quot;$dstdir&quot; | sed -e 's@/@%@g' -e 's@^%@/@'`
-    shift
+    set - `echo &quot;$dstdir&quot; | sed -e 's@/@%@g' -e 's@^%@/@'`
     IFS=$oIFS
 
     pathcomp=
@@ -236,42 +229,51 @@
       pathcomp=$pathcomp$1
       shift
       if test ! -d &quot;$pathcomp&quot;; then
-        $mkdirprog &quot;$pathcomp&quot;
+        $mkdirprog &quot;$pathcomp&quot; || lasterr=$?
 	# mkdir can fail with a `File exist' error in case several
 	# install-sh are creating the directory concurrently.  This
 	# is OK.
-	test -d &quot;$pathcomp&quot; || exit
+	test ! -d &quot;$pathcomp&quot; &amp;&amp; { (exit ${lasterr-1}); exit; }
       fi
       pathcomp=$pathcomp/
     done
   fi
 
   if test -n &quot;$dir_arg&quot;; then
-    $doit $mkdircmd &quot;$dst&quot; \
+    $doit $instcmd &quot;$dst&quot; \
       &amp;&amp; { test -z &quot;$chowncmd&quot; || $doit $chowncmd &quot;$dst&quot;; } \
       &amp;&amp; { test -z &quot;$chgrpcmd&quot; || $doit $chgrpcmd &quot;$dst&quot;; } \
       &amp;&amp; { test -z &quot;$stripcmd&quot; || $doit $stripcmd &quot;$dst&quot;; } \
       &amp;&amp; { test -z &quot;$chmodcmd&quot; || $doit $chmodcmd &quot;$dst&quot;; }
 
   else
-    dstfile=`basename &quot;$dst&quot;`
+    # If we're going to rename the final executable, determine the name now.
+    if test -z &quot;$transformarg&quot;; then
+      dstfile=`basename &quot;$dst&quot;`
+    else
+      dstfile=`basename &quot;$dst&quot; $transformbasename \
+               | sed $transformarg`$transformbasename
+    fi
 
+    # don't allow the sed command to completely eliminate the filename.
+    test -z &quot;$dstfile&quot; &amp;&amp; dstfile=`basename &quot;$dst&quot;`
+
     # Make a couple of temp file names in the proper directory.
     dsttmp=$dstdir/_inst.$$_
     rmtmp=$dstdir/_rm.$$_
 
     # Trap to clean up those temp files at exit.
-    trap 'ret=$?; rm -f &quot;$dsttmp&quot; &quot;$rmtmp&quot; &amp;&amp; exit $ret' 0
+    trap 'status=$?; rm -f &quot;$dsttmp&quot; &quot;$rmtmp&quot; &amp;&amp; exit $status' 0
     trap '(exit $?); exit' 1 2 13 15
 
-    # Copy the file name to the temp name.
-    $doit $cpprog &quot;$src&quot; &quot;$dsttmp&quot; &amp;&amp;
+    # Move or copy the file name to the temp name
+    $doit $instcmd &quot;$src&quot; &quot;$dsttmp&quot; &amp;&amp;
 
     # and set any options; do chmod last to preserve setuid bits.
     #
     # If any of these fail, we abort the whole thing.  If we want to
     # ignore errors from any of these, just make sure not to ignore
-    # errors from the above &quot;$doit $cpprog $src $dsttmp&quot; command.
+    # errors from the above &quot;$doit $instcmd $src $dsttmp&quot; command.
     #
     { test -z &quot;$chowncmd&quot; || $doit $chowncmd &quot;$dsttmp&quot;; } \
       &amp;&amp; { test -z &quot;$chgrpcmd&quot; || $doit $chgrpcmd &quot;$dsttmp&quot;; } \
@@ -296,7 +298,7 @@
 	       || $doit $mvcmd -f &quot;$dstdir/$dstfile&quot; &quot;$rmtmp&quot; 2&gt;/dev/null \
 	       || {
 		 echo &quot;$0: cannot unlink or rename $dstdir/$dstfile&quot; &gt;&amp;2
-		 (exit 1); exit 1
+		 (exit 1); exit
 	       }
 	     else
 	       :
@@ -307,12 +309,12 @@
 	   $doit $mvcmd &quot;$dsttmp&quot; &quot;$dstdir/$dstfile&quot;
 	 }
     }
-  fi || { (exit 1); exit 1; }
+  fi || { (exit 1); exit; }
 done
 
 # The final little trick to &quot;correctly&quot; pass the exit status to the exit trap.
 {
-  (exit 0); exit 0
+  (exit 0); exit
 }
 
 # Local variables:

Modified: trunk/missing
===================================================================
--- trunk/missing	2006-02-12 13:43:28 UTC (rev 245)
+++ trunk/missing	2006-02-12 15:36:06 UTC (rev 246)
@@ -1,9 +1,9 @@
 #! /bin/sh
 # Common stub for a few missing GNU programs while installing.
 
-scriptversion=2005-02-08.22
+scriptversion=2003-09-02.23
 
-# Copyright (C) 1996, 1997, 1999, 2000, 2002, 2003, 2004, 2005
+# Copyright (C) 1996, 1997, 1999, 2000, 2002, 2003 
 #   Free Software Foundation, Inc.
 # Originally by Fran,cois Pinard &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/openspace-svn">pinard at iro.umontreal.ca</A>&gt;, 1996.
 
@@ -60,7 +60,12 @@
     msg=&quot;probably too old&quot;
   fi
   ;;
+esac
 
+# If it does not exist, or fails to run (possibly an outdated version),
+# try to emulate it.
+case &quot;$1&quot; in
+
   -h|--h|--he|--hel|--help)
     echo &quot;\
 $0 [OPTION]... PROGRAM [ARGUMENT]...
@@ -87,12 +92,10 @@
   yacc         create \`y.tab.[ch]', if possible, from existing .[ch]
 
 Send bug reports to &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/openspace-svn">bug-automake at gnu.org</A>&gt;.&quot;
-    exit $?
     ;;
 
   -v|--v|--ve|--ver|--vers|--versi|--versio|--version)
     echo &quot;missing $scriptversion (GNU Automake)&quot;
-    exit $?
     ;;
 
   -*)
@@ -101,42 +104,12 @@
     exit 1
     ;;
 
-esac
-
-# Now exit if we have it, but it failed.  Also exit now if we
-# don't have it and --version was passed (most likely to detect
-# the program).
-case &quot;$1&quot; in
-  lex|yacc)
-    # Not GNU programs, they don't have --version.
-    ;;
-
-  tar)
-    if test -n &quot;$run&quot;; then
-       echo 1&gt;&amp;2 &quot;ERROR: \`tar' requires --run&quot;
-       exit 1
-    elif test &quot;x$2&quot; = &quot;x--version&quot; || test &quot;x$2&quot; = &quot;x--help&quot;; then
-       exit 1
-    fi
-    ;;
-
-  *)
+  aclocal*)
     if test -z &quot;$run&quot; &amp;&amp; ($1 --version) &gt; /dev/null 2&gt;&amp;1; then
        # We have it, but it failed.
        exit 1
-    elif test &quot;x$2&quot; = &quot;x--version&quot; || test &quot;x$2&quot; = &quot;x--help&quot;; then
-       # Could not run --version or --help.  This is probably someone
-       # running `$TOOL --version' or `$TOOL --help' to check whether
-       # $TOOL exists and not knowing $TOOL uses missing.
-       exit 1
     fi
-    ;;
-esac
 
-# If it does not exist, or fails to run (possibly an outdated version),
-# try to emulate it.
-case &quot;$1&quot; in
-  aclocal*)
     echo 1&gt;&amp;2 &quot;\
 WARNING: \`$1' is $msg.  You should only need it if
          you modified \`acinclude.m4' or \`${configure_ac}'.  You might want
@@ -146,6 +119,11 @@
     ;;
 
   autoconf)
+    if test -z &quot;$run&quot; &amp;&amp; ($1 --version) &gt; /dev/null 2&gt;&amp;1; then
+       # We have it, but it failed.
+       exit 1
+    fi
+
     echo 1&gt;&amp;2 &quot;\
 WARNING: \`$1' is $msg.  You should only need it if
          you modified \`${configure_ac}'.  You might want to install the
@@ -155,6 +133,11 @@
     ;;
 
   autoheader)
+    if test -z &quot;$run&quot; &amp;&amp; ($1 --version) &gt; /dev/null 2&gt;&amp;1; then
+       # We have it, but it failed.
+       exit 1
+    fi
+
     echo 1&gt;&amp;2 &quot;\
 WARNING: \`$1' is $msg.  You should only need it if
          you modified \`acconfig.h' or \`${configure_ac}'.  You might want
@@ -174,6 +157,11 @@
     ;;
 
   automake*)
+    if test -z &quot;$run&quot; &amp;&amp; ($1 --version) &gt; /dev/null 2&gt;&amp;1; then
+       # We have it, but it failed.
+       exit 1
+    fi
+
     echo 1&gt;&amp;2 &quot;\
 WARNING: \`$1' is $msg.  You should only need it if
          you modified \`Makefile.am', \`acinclude.m4' or \`${configure_ac}'.
@@ -185,6 +173,11 @@
     ;;
 
   autom4te)
+    if test -z &quot;$run&quot; &amp;&amp; ($1 --version) &gt; /dev/null 2&gt;&amp;1; then
+       # We have it, but it failed.
+       exit 1
+    fi
+
     echo 1&gt;&amp;2 &quot;\
 WARNING: \`$1' is needed, but is $msg.
          You might have modified some files without having the
@@ -261,6 +254,11 @@
     ;;
 
   help2man)
+    if test -z &quot;$run&quot; &amp;&amp; ($1 --version) &gt; /dev/null 2&gt;&amp;1; then
+       # We have it, but it failed.
+       exit 1
+    fi
+
     echo 1&gt;&amp;2 &quot;\
 WARNING: \`$1' is $msg.  You should only need it if
 	 you modified a dependency of a manual page.  You may need the
@@ -281,6 +279,11 @@
     ;;
 
   makeinfo)
+    if test -z &quot;$run&quot; &amp;&amp; (makeinfo --version) &gt; /dev/null 2&gt;&amp;1; then
+       # We have makeinfo, but it failed.
+       exit 1
+    fi
+
     echo 1&gt;&amp;2 &quot;\
 WARNING: \`$1' is $msg.  You should only need it if
          you modified a \`.texi' or \`.texinfo' file, or any other file
@@ -288,20 +291,20 @@
          call might also be the consequence of using a buggy \`make' (AIX,
          DU, IRIX).  You might want to install the \`Texinfo' package or
          the \`GNU make' package.  Grab either from any GNU archive site.&quot;
-    # The file to touch is that specified with -o ...
     file=`echo &quot;$*&quot; | sed -n 's/.*-o \([^ ]*\).*/\1/p'`
     if test -z &quot;$file&quot;; then
-      # ... or it is the one specified with @setfilename ...
-      infile=`echo &quot;$*&quot; | sed 's/.* \([^ ]*\) *$/\1/'`
-      file=`sed -n '/^@setfilename/ { s/.* \([^ ]*\) *$/\1/; p; q; }' $infile`
-      # ... or it is derived from the source name (dir/f.texi becomes f.info)
-      test -z &quot;$file&quot; &amp;&amp; file=`echo &quot;$infile&quot; | sed 's,.*/,,;s,.[^.]*$,,'`.info
+      file=`echo &quot;$*&quot; | sed 's/.* \([^ ]*\) *$/\1/'`
+      file=`sed -n '/^@setfilename/ { s/.* \([^ ]*\) *$/\1/; p; q; }' $file`
     fi
     touch $file
     ;;
 
   tar)
     shift
+    if test -n &quot;$run&quot;; then
+      echo 1&gt;&amp;2 &quot;ERROR: \`tar' requires --run&quot;
+      exit 1
+    fi
 
     # We have already tried tar in the generic part.
     # Look for gnutar/gtar before invocation to avoid ugly error

Modified: trunk/openspacerc.in
===================================================================
--- trunk/openspacerc.in	2006-02-12 13:43:28 UTC (rev 245)
+++ trunk/openspacerc.in	2006-02-12 15:36:06 UTC (rev 246)
@@ -213,31 +213,38 @@
 		&lt;/filter_files&gt;
 		
 		
-		&lt;mkdir&gt;
+		&lt;OSMkdir&gt;
 			&lt;type&gt;PLUGIN&lt;/type&gt;
-		&lt;/mkdir&gt;
-		&lt;access&gt;
+			&lt;text&gt;mkdir&lt;/text&gt;
+		&lt;/OSMkdir&gt;
+		&lt;OSAccess&gt;
 			&lt;type&gt;PLUGIN&lt;/type&gt;
-		&lt;/access&gt;
+			&lt;text&gt;access&lt;/text&gt;
+		&lt;/OSAccess&gt;
 		&lt;remove&gt;
 			&lt;type&gt;INTERNAL&lt;/type&gt;
 			&lt;key&gt;Delete&lt;/key&gt;
 		&lt;/remove&gt;
-		&lt;rename&gt;
+		&lt;OSRename&gt;
 			&lt;type&gt;PLUGIN&lt;/type&gt;
-		&lt;/rename&gt;
-		&lt;clone&gt;
+			&lt;text&gt;rename&lt;/text&gt;
+		&lt;/OSRename&gt;
+		&lt;OSClone&gt;
 			&lt;type&gt;PLUGIN&lt;/type&gt;
-		&lt;/clone&gt;
-		&lt;symlink&gt;
+			&lt;text&gt;clone&lt;/text&gt;
+		&lt;/OSClone&gt;
+		&lt;OSSymlink&gt;
 			&lt;type&gt;PLUGIN&lt;/type&gt;
-		&lt;/symlink&gt;
-		&lt;compress&gt;
+			&lt;text&gt;symlink&lt;/text&gt;
+		&lt;/OSSymlink&gt;
+		&lt;OSCompress&gt;
 			&lt;type&gt;PLUGIN&lt;/type&gt;
-		&lt;/compress&gt;
-		&lt;editsymlink&gt;
+			&lt;text&gt;compress&lt;/text&gt;
+		&lt;/OSCompress&gt;
+		&lt;OSEditSymlink&gt;
 			&lt;type&gt;PLUGIN&lt;/type&gt;
-		&lt;/editsymlink&gt;
+			&lt;text&gt;edit symlink&lt;/text&gt;
+		&lt;/OSEditSymlink&gt;
 		&lt;other&gt;
 			&lt;type&gt;INTERNAL&lt;/type&gt;
 			&lt;icon&gt;other&lt;/icon&gt;
@@ -426,20 +433,20 @@
 		&lt;common&gt;
 			&lt;command&gt;copy&lt;/command&gt;
 			&lt;command&gt;move&lt;/command&gt;
-			&lt;command&gt;mkdir&lt;/command&gt;
-			&lt;command&gt;access&lt;/command&gt;
+			&lt;command&gt;OSMkdir&lt;/command&gt;
+			&lt;command&gt;OSAccess&lt;/command&gt;
 			&lt;command&gt;remove&lt;/command&gt;
-			&lt;command&gt;rename&lt;/command&gt;
-			&lt;command&gt;clone&lt;/command&gt;
-			&lt;command&gt;symlink&lt;/command&gt;
-			&lt;command&gt;editsymlink&lt;/command&gt;
+			&lt;command&gt;OSRename&lt;/command&gt;
+			&lt;command&gt;OSClone&lt;/command&gt;
+			&lt;command&gt;OSSymlink&lt;/command&gt;
+			&lt;command&gt;OSEditSymlink&lt;/command&gt;
 			&lt;command&gt;special&lt;/command&gt;
 			&lt;command&gt;totalsize&lt;/command&gt;
 			&lt;command&gt;new_file&lt;/command&gt;
 			&lt;command&gt;ls&lt;/command&gt;
 		&lt;/common&gt;
 		&lt;compress&gt;
-			&lt;command&gt;compress&lt;/command&gt;
+			&lt;command&gt;OSCompress&lt;/command&gt;
 		&lt;/compress&gt;
 		
 		&lt;panel&gt;


Property changes on: trunk/src
___________________________________________________________________
Name: svn:ignore
   - Makefile
config.h
stamp-h1
.deps
.libs
openspace

   + *~
*.cache
*LOG
*log
*.kdev*
*.lo
*.loT
*.o
*.status
*.swp
.deps
.libs
libtool
openspacerc
tags
Doxyfile
Makefile


Deleted: trunk/src/CommandsFileTypesContainers.cpp
===================================================================
--- trunk/src/CommandsFileTypesContainers.cpp	2006-02-12 13:43:28 UTC (rev 245)
+++ trunk/src/CommandsFileTypesContainers.cpp	2006-02-12 15:36:06 UTC (rev 246)
@@ -1,217 +0,0 @@
-#include &quot;CommandsFileTypesContainers.h&quot;
-#include &quot;sharedobjects.h&quot;
-
-
-filetype_container::filetype_container(string name,string command):name(name),command(command)
-{
-}
-
-bool filetype_container::load(string name)
-{
-this-&gt;name=name;
-
-string::size_type pos=name.find(&quot;/&quot;);
-	string path;
-	string mime_major;
-	string mime_minor;
-	if (pos != string::npos)
-	{
-		mime_major=name.substr(0,pos);	
-		mime_minor=name.substr(pos+1);
-	path=&quot;/OpenspaceConfig/file_types/&quot; + mime_major + &quot;/types/&quot;+mime_minor;
-	}
-	else
-	{
-	path=&quot;/OpenspaceConfig/file_types/&quot; + name;
-	}
-
-	    command = conf-&gt;readonestring (path + &quot;/default&quot;);
-	    icon=conf-&gt;readonestring(path +&quot;/icon&quot;) ;
-	    color=conf-&gt;readonestring(path +&quot;/color&quot;) ;
-	    backcolor=conf-&gt;readonestring(path +&quot;/backcolor&quot;) ;
-	    
-	    configure conflocal2 = *conf;
-	    if(conflocal2.openxpath(path + &quot;/commands/command&quot;)!=-1)
-	       {
-	       string commandstr;
-	      	 while(conflocal2.getnextstring(commandstr))
-	      	 {     	 
-	     	  commands.push_back(commandstr.c_str());
-	     	 }
-	       }    
-
-}
-void filetype_container::save(void)
-{
-//fxmessage(&quot;\nNAME=%s COMMAND=%s\n&quot;,name.c_str(),command.c_str());
-
-if(name==&quot;&quot;)
-return;
-
-	string::size_type pos=name.find(&quot;/&quot;);
-	string path;
-	string mime_major;
-	string mime_minor;
-	if (pos != string::npos)
-	{
-		mime_major=name.substr(0,pos);	
-		mime_minor=name.substr(pos+1);
-		string ret;
-				if(conf-&gt;readonestring (&quot;/OpenspaceConfig/file_types/&quot;+ mime_major,ret)==false)
-				conf-&gt;addstring (&quot;/OpenspaceConfig/file_types&quot;, mime_major,&quot;&quot;);
-				
-				if(conf-&gt;readonestring (&quot;/OpenspaceConfig/file_types/&quot;+ mime_major+&quot;/types&quot;,ret)==false)
-				conf-&gt;addstring (&quot;/OpenspaceConfig/file_types/&quot; + mime_major ,&quot;types&quot;,&quot;&quot;);	
-		
-		if(conf-&gt;readonestring (&quot;/OpenspaceConfig/file_types/&quot;+ mime_major+&quot;/types/&quot;+mime_minor,ret)==false)
-				conf-&gt;addstring (&quot;/OpenspaceConfig/file_types/&quot; + mime_major+&quot;/types&quot; ,mime_minor,&quot;&quot;);	
-		
-		path=&quot;/OpenspaceConfig/file_types/&quot; + mime_major + &quot;/types/&quot;+mime_minor;
-		
-	
-
-			
-	}
-	else  // major mime type: audio,video,etc
-	{
-	string ret;
-	if(conf-&gt;readonestring (&quot;/OpenspaceConfig/file_types/&quot;+ name,ret)==false)
-			conf-&gt;addstring (&quot;/OpenspaceConfig/file_types/&quot; ,name,&quot;&quot;);	
-	
-	path=&quot;/OpenspaceConfig/file_types/&quot; + name;
-	}
-	
-	if(command!=&quot;&quot;)
-	{
-	  if(!conf-&gt;saveonestring (path+&quot;/default&quot;,command))
-			{
-			conf-&gt;addstring(path ,&quot;default&quot;,command);
-			}
-	}
-	else
-	{
-	conf-&gt;removestring (path+&quot;/default&quot;);
-	}
-	
-		
-	
-	if(commands.size()&gt;0)
-	{
-	conf-&gt;removestring(path+&quot;/commands&quot;);
-	vector &lt;string&gt;::iterator iter;
-	conf-&gt;addstring(path,&quot;commands&quot;,&quot;&quot;);
-		for(iter=commands.begin();iter!=commands.end();iter++)
-		{
-		conf-&gt;addstring(path+&quot;/commands&quot;,&quot;command&quot;,iter-&gt;c_str());
-		}
-	
-	}
-	
-	if(!conf-&gt;saveonestring (path+&quot;/color&quot;,color))
-			{
-			conf-&gt;addstring(path ,&quot;color&quot;,color);
-			}
-	if(!conf-&gt;saveonestring (path+&quot;/backcolor&quot;,backcolor))
-			{
-			conf-&gt;addstring(path ,&quot;backcolor&quot;,backcolor);
-			}
-	if(icon!=&quot;&quot;)
-	{		
-	if(!conf-&gt;saveonestring (path+&quot;/icon&quot;,icon))
-			{
-			conf-&gt;addstring(path ,&quot;icon&quot;,icon);
-			}
-	}
-	else
-	{
-	conf-&gt;removestring (path+&quot;/icon&quot;);
-	}
-
-}
-
-command_container::command_container(string name, string exec):name(name),exec(exec)
-{
-capture=false;
-rescan=false;
-}
-
-void command_container::save(void)
-{
-
-string com = name;
-string value = exec;
-	
-	
-	
-	
-	if(type!=&quot;INTERNAL&quot; &amp;&amp; type!=&quot;PLUGIN&quot;)
-	{
-	
-		if (!conf-&gt;saveonestring (&quot;/OpenspaceConfig/commands/&quot; + com + &quot;/exec&quot;, value))
-		{
-		
-	   	 conf-&gt;addstring (&quot;/OpenspaceConfig/commands&quot;, com, &quot;&quot;);
-		 
-	   	    if(exec!=&quot;&quot;)
-		    { 
-	   	    conf-&gt;addstring (&quot;/OpenspaceConfig/commands/&quot; + com, &quot;exec&quot;, value);
-		    }
-		}
-	}
-	else
-	{
-	if (!conf-&gt;saveonestring (&quot;/OpenspaceConfig/commands/&quot; + com + &quot;/type&quot;, type))
-		{
-		conf-&gt;addstring (&quot;/OpenspaceConfig/commands&quot;, com, &quot;&quot;);
-		conf-&gt;addstring (&quot;/OpenspaceConfig/commands/&quot; + com, &quot;type&quot;, type);
-		}
-	}
-	
-	string options;
-	if (capture)
-	    options += &quot; capture&quot;;
-	if (rescan)
-	    options += &quot; rescan&quot;;
-
-	if (options != &quot;&quot;)
-	{
-	    if (!conf-&gt;saveonestring (&quot;/OpenspaceConfig/commands/&quot; + com + &quot;/options&quot;, options))
-		conf-&gt;addstring (&quot;/OpenspaceConfig/commands/&quot; + com, &quot;options&quot;, options);
-	}
-	else
-	conf-&gt;removestring (&quot;/OpenspaceConfig/commands/&quot; + com+ &quot;/options&quot;);
-
-	if (text != &quot;&quot;)
-	{
-	    if (!conf-&gt;saveonestring (&quot;/OpenspaceConfig/commands/&quot; + com + &quot;/text&quot;, text))
-		conf-&gt;addstring (&quot;/OpenspaceConfig/commands/&quot; + com, &quot;text&quot;, text);
-	}
-	else
-	conf-&gt;removestring (&quot;/OpenspaceConfig/commands/&quot; + com+ &quot;/text&quot;);
-
-	if (icon != &quot;&quot;)
-	{
-	    if (!conf-&gt;saveonestring (&quot;/OpenspaceConfig/commands/&quot; + com + &quot;/icon&quot;, icon))
-		conf-&gt;addstring (&quot;/OpenspaceConfig/commands/&quot; + com, &quot;icon&quot;, icon);
-	}
-	else
-	conf-&gt;removestring (&quot;/OpenspaceConfig/commands/&quot; + com+ &quot;/icon&quot;);
-	
-	if (key != &quot;&quot;)
-	{
-	    if (!conf-&gt;saveonestring (&quot;/OpenspaceConfig/commands/&quot; + com + &quot;/key&quot;, key))
-		conf-&gt;addstring (&quot;/OpenspaceConfig/commands/&quot; + com, &quot;key&quot;, key);
-	}
-	else
-	conf-&gt;removestring (&quot;/OpenspaceConfig/commands/&quot; + com+ &quot;/key&quot;);
-	
-	if (key_mask != &quot;&quot;)
-	{
-	    if (!conf-&gt;saveonestring (&quot;/OpenspaceConfig/commands/&quot; + com + &quot;/key_mask&quot;, key))
-		conf-&gt;addstring (&quot;/OpenspaceConfig/commands/&quot; + com, &quot;key_mask&quot;, key);
-	}
-	else
-	conf-&gt;removestring (&quot;/OpenspaceConfig/commands/&quot; + com+ &quot;/key_mask&quot;);
-
-}
-

Deleted: trunk/src/CommandsFileTypesContainers.h
===================================================================
--- trunk/src/CommandsFileTypesContainers.h	2006-02-12 13:43:28 UTC (rev 245)
+++ trunk/src/CommandsFileTypesContainers.h	2006-02-12 15:36:06 UTC (rev 246)
@@ -1,48 +0,0 @@
-#ifndef CFTC_H
-#define CFTC_H
-
-#include &lt;vector&gt;
-#include &lt;string&gt;
-#include &lt;map&gt;
-using namespace std;
-
-
-
-class filetype_container
-{
-  public:
-    string name;
-    string command;
-    string icon;
-    vector &lt;string&gt; commands;
-    string color;
-    string backcolor;
-    filetype_container(string name,string command);
-    filetype_container(){}
-    void save(void);
-    bool load(string name);
-};
-
-class command_container
-{
-  public:
-    string name;
-    string exec;
-    bool rescan;
-    bool capture;
-    string text;
-    string type;
-    string icon;
-    string key;
-    string key_mask;
-    command_container(string name,string exec);
-    command_container(){}
-    void save(void);
-    
-
-};
-
-
-
-
-#endif

Deleted: trunk/src/FirstRun.cpp
===================================================================
--- trunk/src/FirstRun.cpp	2006-02-12 13:43:28 UTC (rev 245)
+++ trunk/src/FirstRun.cpp	2006-02-12 15:36:06 UTC (rev 246)
@@ -1,68 +0,0 @@
-#include &quot;fx.h&quot;
-#include &quot;FirstRun.h&quot;
-#include &quot;MimeApp.h&quot;
-#include &quot;preferences.h&quot;
-
-using namespace std;
-
-FXDEFMAP (FirstRun) FirstRunMap[] =
-{
-    //________Message_Type_____________________ID____________Message_Handler_______  
-	FXMAPFUNCS (SEL_COMMAND, FirstRun::ID_CONF_MANUAL,FirstRun::ID_CONF_AUTOMATIC, FirstRun::onConfigure),
-};
-
-
-FXIMPLEMENT (FirstRun, FXDialogBox, FirstRunMap, ARRAYNUMBER (FirstRunMap)) FirstRun::FirstRun (FXWindow * owner):FXDialogBox (owner, &quot;FirstRun&quot;, DECOR_ALL, 0, 0, 0, 0, 0, 0, 0, 0, 4, 4)
-{
-
-
-    FXVerticalFrame *vertical = new FXVerticalFrame (this, LAYOUT_SIDE_TOP | LAYOUT_FILL_X | LAYOUT_FILL_Y);    
-    
-    FXGroupBox *vv = new FXGroupBox (vertical, &quot;&quot;, LAYOUT_SIDE_TOP | FRAME_GROOVE | LAYOUT_FILL_X, 0, 0, 0, 0);
-    new FXLabel(vv,&quot;Best for newbie and first run&quot;);	
-    FXButton *but3 = new FXButton (vv, &quot;full automatic configuration&quot;, NULL, this,ID_CONF_AUTOMATIC);
-     	
-    vv = new FXGroupBox (vertical, &quot;&quot;, LAYOUT_SIDE_TOP | FRAME_GROOVE | LAYOUT_FILL_X, 0, 0, 0, 0);
-    new FXLabel(vv,&quot;Choose which program will open given file type&quot;);	
-    FXButton *but2 = new FXButton (vv, &quot;semiautomatic configuration&quot;, NULL, this,ID_CONF_SEMI);    
-    
-    vv = new FXGroupBox (vertical, &quot;&quot;, LAYOUT_SIDE_TOP | FRAME_GROOVE | LAYOUT_FILL_X, 0, 0, 0, 0);
-    new FXLabel(vv,&quot;Not recomended - try better semi-auto configuration\n and then manual rather than only manual&quot;); 
-    FXButton *but1 = new FXButton (vv, &quot;manual configuration&quot;, NULL, this,ID_CONF_MANUAL);
-	
-	
-}
-
-
-
-FirstRun::~FirstRun ()
-{
-}
-
-
-
-long FirstRun::onConfigure(FXObject * sender, FXSelector sel, void *)
-{
-	FXushort id = FXSELID(sel);
-	if(id==ID_CONF_MANUAL)
-	{
-	preferences *prefer=new preferences(this);
-	prefer-&gt;create();
-	prefer-&gt;execute(PLACEMENT_OWNER);
-	}
-	else if(id==ID_CONF_SEMI)
-	{
-	MimeApp *mimeapp=new MimeApp(this);
-	mimeapp-&gt;create();
-	mimeapp-&gt;execute(PLACEMENT_OWNER);
-	}
-	else if(id==ID_CONF_AUTOMATIC)
-	{
-		MimeApp *mimeapp=new MimeApp(this);
-		mimeapp-&gt;doAutomaticConfiguration();
-	
-	}
-	FXMessageBox about (this, &quot;restart&quot;, &quot;restart openspace to apply changes&quot;, NULL, MBOX_OK | DECOR_TITLE | DECOR_BORDER);
-   	about.execute ();
-
-}

Deleted: trunk/src/FirstRun.h
===================================================================
--- trunk/src/FirstRun.h	2006-02-12 13:43:28 UTC (rev 245)
+++ trunk/src/FirstRun.h	2006-02-12 15:36:06 UTC (rev 246)
@@ -1,37 +0,0 @@
-#ifndef FirstRun_H
-#define FirstRun_H
-
-
-#include &lt;string&gt;
-
-using namespace std;
-
-class FirstRun:public FXDialogBox
-{
-  FXDECLARE (FirstRun) protected:
-
-  private:
-    FirstRun ()
-    {
-    }
-
-  public:
-  
-  
-
-    enum
-    {
-	ID_CONF_MANUAL = FXDialogBox::ID_LAST,
-	ID_CONF_SEMI,
-	ID_CONF_AUTOMATIC,
-	ID_LAST,
-    };
-
-    FirstRun (FXWindow * owner);
- 
-    long FirstRun::onConfigure(FXObject * sender, FXSelector sel, void *);
-    
-    virtual ~ FirstRun ();
-};
-
-#endif

Copied: trunk/src/Makefile (from rev 245, branches/mloskot-style-refactoring/src/Makefile)
===================================================================
--- branches/mloskot-style-refactoring/src/Makefile	2006-02-12 13:43:28 UTC (rev 245)
+++ trunk/src/Makefile	2006-02-12 15:36:06 UTC (rev 246)
@@ -0,0 +1,634 @@
+# Makefile.in generated by automake 1.8.5 from Makefile.am.
+# src/Makefile.  Generated from Makefile.in by configure.
+
+# Copyright (C) 1994, 1995, 1996, 1997, 1998, 1999, 2000, 2001, 2002,
+# 2003, 2004  Free Software Foundation, Inc.
+# This Makefile.in is free software; the Free Software Foundation
+# gives unlimited permission to copy and/or distribute it,
+# with or without modifications, as long as this notice is preserved.
+
+# This program is distributed in the hope that it will be useful,
+# but WITHOUT ANY WARRANTY, to the extent permitted by law; without
+# even the implied warranty of MERCHANTABILITY or FITNESS FOR A
+# PARTICULAR PURPOSE.
+
+
+
+
+SOURCES = $(openspace_SOURCES)
+
+srcdir = .
+top_srcdir = ..
+
+pkgdatadir = $(datadir)/openspace
+pkglibdir = $(libdir)/openspace
+pkgincludedir = $(includedir)/openspace
+top_builddir = ..
+am__cd = CDPATH=&quot;$${ZSH_VERSION+.}$(PATH_SEPARATOR)&quot; &amp;&amp; cd
+INSTALL = /bin/install -c
+install_sh_DATA = $(install_sh) -c -m 644
+install_sh_PROGRAM = $(install_sh) -c
+install_sh_SCRIPT = $(install_sh) -c
+INSTALL_HEADER = $(INSTALL_DATA)
+transform = $(program_transform_name)
+NORMAL_INSTALL = :
+PRE_INSTALL = :
+POST_INSTALL = :
+NORMAL_UNINSTALL = :
+PRE_UNINSTALL = :
+POST_UNINSTALL = :
+host_triplet = i686-pc-linux-gnu
+bin_PROGRAMS = openspace$(EXEEXT)
+subdir = src
+DIST_COMMON = $(noinst_HEADERS) $(srcdir)/Makefile.am \
+	$(srcdir)/Makefile.in $(srcdir)/config.h.in
+ACLOCAL_M4 = $(top_srcdir)/aclocal.m4
+am__aclocal_m4_deps = $(top_srcdir)/configure.ac
+am__configure_deps = $(am__aclocal_m4_deps) $(CONFIGURE_DEPENDENCIES) \
+	$(ACLOCAL_M4)
+mkinstalldirs = $(mkdir_p)
+CONFIG_HEADER = config.h
+CONFIG_CLEAN_FILES =
+am__installdirs = &quot;$(DESTDIR)$(bindir)&quot;
+binPROGRAMS_INSTALL = $(INSTALL_PROGRAM)
+PROGRAMS = $(bin_PROGRAMS)
+am_openspace_OBJECTS = main.$(OBJEXT) OSCMDDialogBox.$(OBJEXT) \
+	OSCommandTypeInfo.$(OBJEXT) OSConfigure.$(OBJEXT) \
+	OSFileList.$(OBJEXT) OSFileListItem.$(OBJEXT) \
+	OSFileTypeInfo.$(OBJEXT) OSFileTypeSymbol.$(OBJEXT) \
+	OSFirstRunDialogBox.$(OBJEXT) OSInfoPanel.$(OBJEXT) \
+	OSMainWindow.$(OBJEXT) OSMimeApp.$(OBJEXT) \
+	OSMimeType.$(OBJEXT) OSObjectManager.$(OBJEXT) \
+	OSPathType.$(OBJEXT) OSPreferences.$(OBJEXT) \
+	OSShutter.$(OBJEXT) OSThreadExec.$(OBJEXT) OSUtils.$(OBJEXT)
+openspace_OBJECTS = $(am_openspace_OBJECTS)
+openspace_LDADD = $(LDADD)
+DEFAULT_INCLUDES = -I. -I$(srcdir) -I.
+depcomp = $(SHELL) $(top_srcdir)/depcomp
+am__depfiles_maybe = depfiles
+DEP_FILES = ./$(DEPDIR)/OSCMDDialogBox.Po \
+	./$(DEPDIR)/OSCommandTypeInfo.Po \
+	./$(DEPDIR)/OSConfigure.Po \
+	./$(DEPDIR)/OSFileList.Po \
+	./$(DEPDIR)/OSFileListItem.Po \
+	./$(DEPDIR)/OSFileTypeInfo.Po \
+	./$(DEPDIR)/OSFileTypeSymbol.Po \
+	./$(DEPDIR)/OSFirstRunDialogBox.Po \
+	./$(DEPDIR)/OSInfoPanel.Po \
+	./$(DEPDIR)/OSMainWindow.Po \
+	./$(DEPDIR)/OSMimeApp.Po ./$(DEPDIR)/OSMimeType.Po \
+	./$(DEPDIR)/OSObjectManager.Po \
+	./$(DEPDIR)/OSPathType.Po \
+	./$(DEPDIR)/OSPreferences.Po \
+	./$(DEPDIR)/OSShutter.Po \
+	./$(DEPDIR)/OSThreadExec.Po ./$(DEPDIR)/OSUtils.Po \
+	./$(DEPDIR)/main.Po
+CXXCOMPILE = $(CXX) $(DEFS) $(DEFAULT_INCLUDES) $(INCLUDES) \
+	$(AM_CPPFLAGS) $(CPPFLAGS) $(AM_CXXFLAGS) $(CXXFLAGS)
+LTCXXCOMPILE = $(LIBTOOL) --mode=compile $(CXX) $(DEFS) \
+	$(DEFAULT_INCLUDES) $(INCLUDES) $(AM_CPPFLAGS) $(CPPFLAGS) \
+	$(AM_CXXFLAGS) $(CXXFLAGS)
+CXXLD = $(CXX)
+CXXLINK = $(LIBTOOL) --mode=link $(CXXLD) $(AM_CXXFLAGS) $(CXXFLAGS) \
+	$(AM_LDFLAGS) $(LDFLAGS) -o $@
+COMPILE = $(CC) $(DEFS) $(DEFAULT_INCLUDES) $(INCLUDES) $(AM_CPPFLAGS) \
+	$(CPPFLAGS) $(AM_CFLAGS) $(CFLAGS)
+LTCOMPILE = $(LIBTOOL) --mode=compile $(CC) $(DEFS) \
+	$(DEFAULT_INCLUDES) $(INCLUDES) $(AM_CPPFLAGS) $(CPPFLAGS) \
+	$(AM_CFLAGS) $(CFLAGS)
+CCLD = $(CC)
+LINK = $(LIBTOOL) --mode=link $(CCLD) $(AM_CFLAGS) $(CFLAGS) \
+	$(AM_LDFLAGS) $(LDFLAGS) -o $@
+SOURCES = $(openspace_SOURCES)
+DIST_SOURCES = $(openspace_SOURCES)
+RECURSIVE_TARGETS = all-recursive check-recursive dvi-recursive \
+	html-recursive info-recursive install-data-recursive \
+	install-exec-recursive install-info-recursive \
+	install-recursive installcheck-recursive installdirs-recursive \
+	pdf-recursive ps-recursive uninstall-info-recursive \
+	uninstall-recursive
+HEADERS = $(noinst_HEADERS)
+ETAGS = etags
+CTAGS = ctags
+DIST_SUBDIRS = $(SUBDIRS)
+DISTFILES = $(DIST_COMMON) $(DIST_SOURCES) $(TEXINFOS) $(EXTRA_DIST)
+ACLOCAL = ${SHELL} /root/opentrunk2/missing --run aclocal-1.8
+AMDEP_FALSE = #
+AMDEP_TRUE = 
+AMTAR = ${SHELL} /root/opentrunk2/missing --run tar
+AR = ar
+AUTOCONF = ${SHELL} /root/opentrunk2/missing --run autoconf
+AUTOHEADER = ${SHELL} /root/opentrunk2/missing --run autoheader
+AUTOMAKE = ${SHELL} /root/opentrunk2/missing --run automake-1.8
+AWK = gawk
+CC = gcc
+CCDEPMODE = depmode=gcc3
+CFLAGS = -g -O2
+CPP = gcc -E
+CPPFLAGS = 
+CXX = g++
+CXXCPP = g++ -E
+CXXDEPMODE = depmode=gcc3
+CXXFLAGS = -g -O2
+CYGPATH_W = echo
+DEFS = -DHAVE_CONFIG_H
+DEPDIR = .deps
+ECHO = echo
+ECHO_C = 
+ECHO_N = -n
+ECHO_T = 
+EGREP = grep -E
+EXEEXT = 
+F77 = 
+FFLAGS = 
+FOX_CONFIG = yes
+INSTALL_DATA = ${INSTALL} -m 644
+INSTALL_PROGRAM = ${INSTALL}
+INSTALL_SCRIPT = ${INSTALL}
+INSTALL_STRIP_PROGRAM = ${SHELL} $(install_sh) -c -s
+LDFLAGS = 
+LIBOBJS = 
+LIBS = -lFOX-1.4 
+LIBTOOL = $(SHELL) $(top_builddir)/libtool
+LN_S = ln -s
+LTLIBOBJS = 
+MAKEINFO = ${SHELL} /root/opentrunk2/missing --run makeinfo
+OBJEXT = o
+PACKAGE = openspace
+PACKAGE_BUGREPORT = <A HREF="http://openspace.linux.pl">http://openspace.linux.pl</A>
+PACKAGE_NAME = openspace
+PACKAGE_STRING = openspace 0.2.0
+PACKAGE_TARNAME = openspace
+PACKAGE_VERSION = 0.2.0
+PATH_SEPARATOR = :
+RANLIB = ranlib
+SET_MAKE = 
+SHELL = /bin/sh
+STRIP = strip
+VERSION = 0.2.0
+XML2_CONFIG = yes
+ac_ct_AR = ar
+ac_ct_CC = gcc
+ac_ct_CXX = g++
+ac_ct_F77 = 
+ac_ct_RANLIB = ranlib
+ac_ct_STRIP = strip
+am__fastdepCC_FALSE = #
+am__fastdepCC_TRUE = 
+am__fastdepCXX_FALSE = #
+am__fastdepCXX_TRUE = 
+am__include = include
+am__leading_dot = .
+am__quote = 
+bindir = ${exec_prefix}/bin
+build = i686-pc-linux-gnu
+build_alias = 
+build_cpu = i686
+build_os = linux-gnu
+build_vendor = pc
+datadir = ${prefix}/share
+exec_prefix = ${prefix}
+host = i686-pc-linux-gnu
+host_alias = 
+host_cpu = i686
+host_os = linux-gnu
+host_vendor = pc
+includedir = ${prefix}/include
+infodir = ${prefix}/info
+install_sh = /root/opentrunk2/install-sh
+libdir = ${exec_prefix}/lib
+libexecdir = ${exec_prefix}/libexec
+localstatedir = ${prefix}/var
+mandir = ${prefix}/man
+mkdir_p = mkdir -p -- .
+oldincludedir = /usr/include
+prefix = /usr
+program_transform_name = s,x,x,
+sbindir = ${exec_prefix}/sbin
+sharedstatedir = ${prefix}/com
+sysconfdir = /etc
+target_alias = 
+openspace_SOURCES = main.cpp OSCMDDialogBox.cpp OSCMDDialogBox.h \
+	OSCommandTypeInfo.cpp OSCommandTypeInfo.h OSConfigure.cpp OSConfigure.h OSFile.h \
+	OSFileList.cpp OSFileList.h OSFileListItem.cpp OSFileListItem.h OSFileTypeInfo.cpp \
+	OSFileTypeInfo.h OSFileTypeSymbol.cpp OSFileTypeSymbol.h OSFirstRunDialogBox.cpp \
+	OSFirstRunDialogBox.h OSInfoPanel.cpp OSInfoPanel.h OSMainWindow.cpp OSMainWindow.h \
+	OSMimeApp.cpp OSMimeApp.h OSMimeType.cpp OSMimeType.h OSObjectManager.cpp \
+	OSObjectManager.h OSPathType.cpp OSPathType.h OSPreferences.cpp OSPreferences.h \
+	OSShutter.cpp OSShutter.h OSThreadExec.cpp OSThreadExec.h OSUtils.cpp OSUtils.h \
+	OSVirtualFileSystemBase.h OSVirtualFileSystemHeader.h OSVirtualFileSystemInfo.h
+
+SUBDIRS = plugins
+INCLUDES = -I$(top_srcdir)/src `WANT_FOX=&quot;1.4&quot; fox-config --cflags`  `xml2-config  --cflags`  \
+	-DPATH_CFG=\&quot;$(sysconfdir)\&quot; \
+	-DPATH_LIBDIR=\&quot;$(libdir)\&quot;
+
+openspace_LDFLAGS = `WANT_FOX=&quot;1.4&quot; fox-config --libs`  `xml2-config  --libs`  
+noinst_HEADERS = OSVirtualFileSystemHeader.h OSVirtualFileSystemInfo.h \
+	OSFileTypeInfo.h
+
+all: config.h
+	$(MAKE) $(AM_MAKEFLAGS) all-recursive
+
+.SUFFIXES:
+.SUFFIXES: .cpp .lo .o .obj
+$(srcdir)/Makefile.in:  $(srcdir)/Makefile.am  $(am__configure_deps)
+	@for dep in $?; do \
+	  case '$(am__configure_deps)' in \
+	    *$$dep*) \
+	      cd $(top_builddir) &amp;&amp; $(MAKE) $(AM_MAKEFLAGS) am--refresh \
+		&amp;&amp; exit 0; \
+	      exit 1;; \
+	  esac; \
+	done; \
+	echo ' cd $(top_srcdir) &amp;&amp; $(AUTOMAKE) --gnu  src/Makefile'; \
+	cd $(top_srcdir) &amp;&amp; \
+	  $(AUTOMAKE) --gnu  src/Makefile
+.PRECIOUS: Makefile
+Makefile: $(srcdir)/Makefile.in $(top_builddir)/config.status
+	@case '$?' in \
+	  *config.status*) \
+	    cd $(top_builddir) &amp;&amp; $(MAKE) $(AM_MAKEFLAGS) am--refresh;; \
+	  *) \
+	    echo ' cd $(top_builddir) &amp;&amp; $(SHELL) ./config.status $(subdir)/$@ $(am__depfiles_maybe)'; \
+	    cd $(top_builddir) &amp;&amp; $(SHELL) ./config.status $(subdir)/$@ $(am__depfiles_maybe);; \
+	esac;
+
+$(top_builddir)/config.status: $(top_srcdir)/configure $(CONFIG_STATUS_DEPENDENCIES)
+	cd $(top_builddir) &amp;&amp; $(MAKE) $(AM_MAKEFLAGS) am--refresh
+
+$(top_srcdir)/configure:  $(am__configure_deps)
+	cd $(top_builddir) &amp;&amp; $(MAKE) $(AM_MAKEFLAGS) am--refresh
+$(ACLOCAL_M4):  $(am__aclocal_m4_deps)
+	cd $(top_builddir) &amp;&amp; $(MAKE) $(AM_MAKEFLAGS) am--refresh
+
+config.h: stamp-h1
+	@if test ! -f $@; then \
+	  rm -f stamp-h1; \
+	  $(MAKE) stamp-h1; \
+	else :; fi
+
+stamp-h1: $(srcdir)/config.h.in $(top_builddir)/config.status
+	@rm -f stamp-h1
+	cd $(top_builddir) &amp;&amp; $(SHELL) ./config.status src/config.h
+$(srcdir)/config.h.in:  $(am__configure_deps) 
+	cd $(top_srcdir) &amp;&amp; $(AUTOHEADER)
+	rm -f stamp-h1
+	touch $@
+
+distclean-hdr:
+	-rm -f config.h stamp-h1
+install-binPROGRAMS: $(bin_PROGRAMS)
+	@$(NORMAL_INSTALL)
+	test -z &quot;$(bindir)&quot; || $(mkdir_p) &quot;$(DESTDIR)$(bindir)&quot;
+	@list='$(bin_PROGRAMS)'; for p in $$list; do \
+	  p1=`echo $$p|sed 's/$(EXEEXT)$$//'`; \
+	  if test -f $$p \
+	     || test -f $$p1 \
+	  ; then \
+	    f=`echo &quot;$$p1&quot; | sed 's,^.*/,,;$(transform);s/$$/$(EXEEXT)/'`; \
+	   echo &quot; $(INSTALL_PROGRAM_ENV) $(LIBTOOL) --mode=install $(binPROGRAMS_INSTALL) '$$p' '$(DESTDIR)$(bindir)/$$f'&quot;; \
+	   $(INSTALL_PROGRAM_ENV) $(LIBTOOL) --mode=install $(binPROGRAMS_INSTALL) &quot;$$p&quot; &quot;$(DESTDIR)$(bindir)/$$f&quot; || exit 1; \
+	  else :; fi; \
+	done
+
+uninstall-binPROGRAMS:
+	@$(NORMAL_UNINSTALL)
+	@list='$(bin_PROGRAMS)'; for p in $$list; do \
+	  f=`echo &quot;$$p&quot; | sed 's,^.*/,,;s/$(EXEEXT)$$//;$(transform);s/$$/$(EXEEXT)/'`; \
+	  echo &quot; rm -f '$(DESTDIR)$(bindir)/$$f'&quot;; \
+	  rm -f &quot;$(DESTDIR)$(bindir)/$$f&quot;; \
+	done
+
+clean-binPROGRAMS:
+	@list='$(bin_PROGRAMS)'; for p in $$list; do \
+	  f=`echo $$p|sed 's/$(EXEEXT)$$//'`; \
+	  echo &quot; rm -f $$p $$f&quot;; \
+	  rm -f $$p $$f ; \
+	done
+openspace$(EXEEXT): $(openspace_OBJECTS) $(openspace_DEPENDENCIES) 
+	@rm -f openspace$(EXEEXT)
+	$(CXXLINK) $(openspace_LDFLAGS) $(openspace_OBJECTS) $(openspace_LDADD) $(LIBS)
+
+mostlyclean-compile:
+	-rm -f *.$(OBJEXT)
+
+distclean-compile:
+	-rm -f *.tab.c
+
+include ./$(DEPDIR)/OSCMDDialogBox.Po
+include ./$(DEPDIR)/OSCommandTypeInfo.Po
+include ./$(DEPDIR)/OSConfigure.Po
+include ./$(DEPDIR)/OSFileList.Po
+include ./$(DEPDIR)/OSFileListItem.Po
+include ./$(DEPDIR)/OSFileTypeInfo.Po
+include ./$(DEPDIR)/OSFileTypeSymbol.Po
+include ./$(DEPDIR)/OSFirstRunDialogBox.Po
+include ./$(DEPDIR)/OSInfoPanel.Po
+include ./$(DEPDIR)/OSMainWindow.Po
+include ./$(DEPDIR)/OSMimeApp.Po
+include ./$(DEPDIR)/OSMimeType.Po
+include ./$(DEPDIR)/OSObjectManager.Po
+include ./$(DEPDIR)/OSPathType.Po
+include ./$(DEPDIR)/OSPreferences.Po
+include ./$(DEPDIR)/OSShutter.Po
+include ./$(DEPDIR)/OSThreadExec.Po
+include ./$(DEPDIR)/OSUtils.Po
+include ./$(DEPDIR)/main.Po
+
+.cpp.o:
+	if $(CXXCOMPILE) -MT $@ -MD -MP -MF &quot;$(DEPDIR)/$*.Tpo&quot; -c -o $@ $&lt;; \
+	then mv -f &quot;$(DEPDIR)/$*.Tpo&quot; &quot;$(DEPDIR)/$*.Po&quot;; else rm -f &quot;$(DEPDIR)/$*.Tpo&quot;; exit 1; fi
+#	source='$&lt;' object='$@' libtool=no \
+#	depfile='$(DEPDIR)/$*.Po' tmpdepfile='$(DEPDIR)/$*.TPo' \
+#	$(CXXDEPMODE) $(depcomp) \
+#	$(CXXCOMPILE) -c -o $@ $&lt;
+
+.cpp.obj:
+	if $(CXXCOMPILE) -MT $@ -MD -MP -MF &quot;$(DEPDIR)/$*.Tpo&quot; -c -o $@ `$(CYGPATH_W) '$&lt;'`; \
+	then mv -f &quot;$(DEPDIR)/$*.Tpo&quot; &quot;$(DEPDIR)/$*.Po&quot;; else rm -f &quot;$(DEPDIR)/$*.Tpo&quot;; exit 1; fi
+#	source='$&lt;' object='$@' libtool=no \
+#	depfile='$(DEPDIR)/$*.Po' tmpdepfile='$(DEPDIR)/$*.TPo' \
+#	$(CXXDEPMODE) $(depcomp) \
+#	$(CXXCOMPILE) -c -o $@ `$(CYGPATH_W) '$&lt;'`
+
+.cpp.lo:
+	if $(LTCXXCOMPILE) -MT $@ -MD -MP -MF &quot;$(DEPDIR)/$*.Tpo&quot; -c -o $@ $&lt;; \
+	then mv -f &quot;$(DEPDIR)/$*.Tpo&quot; &quot;$(DEPDIR)/$*.Plo&quot;; else rm -f &quot;$(DEPDIR)/$*.Tpo&quot;; exit 1; fi
+#	source='$&lt;' object='$@' libtool=yes \
+#	depfile='$(DEPDIR)/$*.Plo' tmpdepfile='$(DEPDIR)/$*.TPlo' \
+#	$(CXXDEPMODE) $(depcomp) \
+#	$(LTCXXCOMPILE) -c -o $@ $&lt;
+
+mostlyclean-libtool:
+	-rm -f *.lo
+
+clean-libtool:
+	-rm -rf .libs _libs
+
+distclean-libtool:
+	-rm -f libtool
+uninstall-info-am:
+
+# This directory's subdirectories are mostly independent; you can cd
+# into them and run `make' without going through this Makefile.
+# To change the values of `make' variables: instead of editing Makefiles,
+# (1) if the variable is set in `config.status', edit `config.status'
+#     (which will cause the Makefiles to be regenerated when you run `make');
+# (2) otherwise, pass the desired values on the `make' command line.
+$(RECURSIVE_TARGETS):
+	@set fnord $$MAKEFLAGS; amf=$$2; \
+	dot_seen=no; \
+	target=`echo $@ | sed s/-recursive//`; \
+	list='$(SUBDIRS)'; for subdir in $$list; do \
+	  echo &quot;Making $$target in $$subdir&quot;; \
+	  if test &quot;$$subdir&quot; = &quot;.&quot;; then \
+	    dot_seen=yes; \
+	    local_target=&quot;$$target-am&quot;; \
+	  else \
+	    local_target=&quot;$$target&quot;; \
+	  fi; \
+	  (cd $$subdir &amp;&amp; $(MAKE) $(AM_MAKEFLAGS) $$local_target) \
+	   || case &quot;$$amf&quot; in *=*) exit 1;; *k*) fail=yes;; *) exit 1;; esac; \
+	done; \
+	if test &quot;$$dot_seen&quot; = &quot;no&quot;; then \
+	  $(MAKE) $(AM_MAKEFLAGS) &quot;$$target-am&quot; || exit 1; \
+	fi; test -z &quot;$$fail&quot;
+
+mostlyclean-recursive clean-recursive distclean-recursive \
+maintainer-clean-recursive:
+	@set fnord $$MAKEFLAGS; amf=$$2; \
+	dot_seen=no; \
+	case &quot;$@&quot; in \
+	  distclean-* | maintainer-clean-*) list='$(DIST_SUBDIRS)' ;; \
+	  *) list='$(SUBDIRS)' ;; \
+	esac; \
+	rev=''; for subdir in $$list; do \
+	  if test &quot;$$subdir&quot; = &quot;.&quot;; then :; else \
+	    rev=&quot;$$subdir $$rev&quot;; \
+	  fi; \
+	done; \
+	rev=&quot;$$rev .&quot;; \
+	target=`echo $@ | sed s/-recursive//`; \
+	for subdir in $$rev; do \
+	  echo &quot;Making $$target in $$subdir&quot;; \
+	  if test &quot;$$subdir&quot; = &quot;.&quot;; then \
+	    local_target=&quot;$$target-am&quot;; \
+	  else \
+	    local_target=&quot;$$target&quot;; \
+	  fi; \
+	  (cd $$subdir &amp;&amp; $(MAKE) $(AM_MAKEFLAGS) $$local_target) \
+	   || case &quot;$$amf&quot; in *=*) exit 1;; *k*) fail=yes;; *) exit 1;; esac; \
+	done &amp;&amp; test -z &quot;$$fail&quot;
+tags-recursive:
+	list='$(SUBDIRS)'; for subdir in $$list; do \
+	  test &quot;$$subdir&quot; = . || (cd $$subdir &amp;&amp; $(MAKE) $(AM_MAKEFLAGS) tags); \
+	done
+ctags-recursive:
+	list='$(SUBDIRS)'; for subdir in $$list; do \
+	  test &quot;$$subdir&quot; = . || (cd $$subdir &amp;&amp; $(MAKE) $(AM_MAKEFLAGS) ctags); \
+	done
+
+ID: $(HEADERS) $(SOURCES) $(LISP) $(TAGS_FILES)
+	list='$(SOURCES) $(HEADERS) $(LISP) $(TAGS_FILES)'; \
+	unique=`for i in $$list; do \
+	    if test -f &quot;$$i&quot;; then echo $$i; else echo $(srcdir)/$$i; fi; \
+	  done | \
+	  $(AWK) '    { files[$$0] = 1; } \
+	       END { for (i in files) print i; }'`; \
+	mkid -fID $$unique
+tags: TAGS
+
+TAGS: tags-recursive $(HEADERS) $(SOURCES) config.h.in $(TAGS_DEPENDENCIES) \
+		$(TAGS_FILES) $(LISP)
+	tags=; \
+	here=`pwd`; \
+	if ($(ETAGS) --etags-include --version) &gt;/dev/null 2&gt;&amp;1; then \
+	  include_option=--etags-include; \
+	  empty_fix=.; \
+	else \
+	  include_option=--include; \
+	  empty_fix=; \
+	fi; \
+	list='$(SUBDIRS)'; for subdir in $$list; do \
+	  if test &quot;$$subdir&quot; = .; then :; else \
+	    test ! -f $$subdir/TAGS || \
+	      tags=&quot;$$tags $$include_option=$$here/$$subdir/TAGS&quot;; \
+	  fi; \
+	done; \
+	list='$(SOURCES) $(HEADERS) config.h.in $(LISP) $(TAGS_FILES)'; \
+	unique=`for i in $$list; do \
+	    if test -f &quot;$$i&quot;; then echo $$i; else echo $(srcdir)/$$i; fi; \
+	  done | \
+	  $(AWK) '    { files[$$0] = 1; } \
+	       END { for (i in files) print i; }'`; \
+	if test -z &quot;$(ETAGS_ARGS)$$tags$$unique&quot;; then :; else \
+	  test -n &quot;$$unique&quot; || unique=$$empty_fix; \
+	  $(ETAGS) $(ETAGSFLAGS) $(AM_ETAGSFLAGS) $(ETAGS_ARGS) \
+	    $$tags $$unique; \
+	fi
+ctags: CTAGS
+CTAGS: ctags-recursive $(HEADERS) $(SOURCES) config.h.in $(TAGS_DEPENDENCIES) \
+		$(TAGS_FILES) $(LISP)
+	tags=; \
+	here=`pwd`; \
+	list='$(SOURCES) $(HEADERS) config.h.in $(LISP) $(TAGS_FILES)'; \
+	unique=`for i in $$list; do \
+	    if test -f &quot;$$i&quot;; then echo $$i; else echo $(srcdir)/$$i; fi; \
+	  done | \
+	  $(AWK) '    { files[$$0] = 1; } \
+	       END { for (i in files) print i; }'`; \
+	test -z &quot;$(CTAGS_ARGS)$$tags$$unique&quot; \
+	  || $(CTAGS) $(CTAGSFLAGS) $(AM_CTAGSFLAGS) $(CTAGS_ARGS) \
+	     $$tags $$unique
+
+GTAGS:
+	here=`$(am__cd) $(top_builddir) &amp;&amp; pwd` \
+	  &amp;&amp; cd $(top_srcdir) \
+	  &amp;&amp; gtags -i $(GTAGS_ARGS) $$here
+
+distclean-tags:
+	-rm -f TAGS ID GTAGS GRTAGS GSYMS GPATH tags
+
+distdir: $(DISTFILES)
+	@srcdirstrip=`echo &quot;$(srcdir)&quot; | sed 's|.|.|g'`; \
+	topsrcdirstrip=`echo &quot;$(top_srcdir)&quot; | sed 's|.|.|g'`; \
+	list='$(DISTFILES)'; for file in $$list; do \
+	  case $$file in \
+	    $(srcdir)/*) file=`echo &quot;$$file&quot; | sed &quot;s|^$$srcdirstrip/||&quot;`;; \
+	    $(top_srcdir)/*) file=`echo &quot;$$file&quot; | sed &quot;s|^$$topsrcdirstrip/|$(top_builddir)/|&quot;`;; \
+	  esac; \
+	  if test -f $$file || test -d $$file; then d=.; else d=$(srcdir); fi; \
+	  dir=`echo &quot;$$file&quot; | sed -e 's,/[^/]*$$,,'`; \
+	  if test &quot;$$dir&quot; != &quot;$$file&quot; &amp;&amp; test &quot;$$dir&quot; != &quot;.&quot;; then \
+	    dir=&quot;/$$dir&quot;; \
+	    $(mkdir_p) &quot;$(distdir)$$dir&quot;; \
+	  else \
+	    dir=''; \
+	  fi; \
+	  if test -d $$d/$$file; then \
+	    if test -d $(srcdir)/$$file &amp;&amp; test $$d != $(srcdir); then \
+	      cp -pR $(srcdir)/$$file $(distdir)$$dir || exit 1; \
+	    fi; \
+	    cp -pR $$d/$$file $(distdir)$$dir || exit 1; \
+	  else \
+	    test -f $(distdir)/$$file \
+	    || cp -p $$d/$$file $(distdir)/$$file \
+	    || exit 1; \
+	  fi; \
+	done
+	list='$(SUBDIRS)'; for subdir in $$list; do \
+	  if test &quot;$$subdir&quot; = .; then :; else \
+	    test -d &quot;$(distdir)/$$subdir&quot; \
+	    || mkdir &quot;$(distdir)/$$subdir&quot; \
+	    || exit 1; \
+	    (cd $$subdir &amp;&amp; \
+	      $(MAKE) $(AM_MAKEFLAGS) \
+	        top_distdir=&quot;../$(top_distdir)&quot; \
+	        distdir=&quot;../$(distdir)/$$subdir&quot; \
+	        distdir) \
+	      || exit 1; \
+	  fi; \
+	done
+check-am: all-am
+check: check-recursive
+all-am: Makefile $(PROGRAMS) $(HEADERS) config.h
+installdirs: installdirs-recursive
+installdirs-am:
+	for dir in &quot;$(DESTDIR)$(bindir)&quot;; do \
+	  test -z &quot;$$dir&quot; || $(mkdir_p) &quot;$$dir&quot;; \
+	done
+install: install-recursive
+install-exec: install-exec-recursive
+install-data: install-data-recursive
+uninstall: uninstall-recursive
+
+install-am: all-am
+	@$(MAKE) $(AM_MAKEFLAGS) install-exec-am install-data-am
+
+installcheck: installcheck-recursive
+install-strip:
+	$(MAKE) $(AM_MAKEFLAGS) INSTALL_PROGRAM=&quot;$(INSTALL_STRIP_PROGRAM)&quot; \
+	  install_sh_PROGRAM=&quot;$(INSTALL_STRIP_PROGRAM)&quot; INSTALL_STRIP_FLAG=-s \
+	  `test -z '$(STRIP)' || \
+	    echo &quot;INSTALL_PROGRAM_ENV=STRIPPROG='$(STRIP)'&quot;` install
+mostlyclean-generic:
+
+clean-generic:
+
+distclean-generic:
+	-rm -f $(CONFIG_CLEAN_FILES)
+
+maintainer-clean-generic:
+	@echo &quot;This command is intended for maintainers to use&quot;
+	@echo &quot;it deletes files that may require special tools to rebuild.&quot;
+clean: clean-recursive
+
+clean-am: clean-binPROGRAMS clean-generic clean-libtool mostlyclean-am
+
+distclean: distclean-recursive
+	-rm -rf ./$(DEPDIR)
+	-rm -f Makefile
+distclean-am: clean-am distclean-compile distclean-generic \
+	distclean-hdr distclean-libtool distclean-tags
+
+dvi: dvi-recursive
+
+dvi-am:
+
+html: html-recursive
+
+info: info-recursive
+
+info-am:
+
+install-data-am:
+
+install-exec-am: install-binPROGRAMS
+
+install-info: install-info-recursive
+
+install-man:
+
+installcheck-am:
+
+maintainer-clean: maintainer-clean-recursive
+	-rm -rf ./$(DEPDIR)
+	-rm -f Makefile
+maintainer-clean-am: distclean-am maintainer-clean-generic
+
+mostlyclean: mostlyclean-recursive
+
+mostlyclean-am: mostlyclean-compile mostlyclean-generic \
+	mostlyclean-libtool
+
+pdf: pdf-recursive
+
+pdf-am:
+
+ps: ps-recursive
+
+ps-am:
+
+uninstall-am: uninstall-binPROGRAMS uninstall-info-am
+
+uninstall-info: uninstall-info-recursive
+
+.PHONY: $(RECURSIVE_TARGETS) CTAGS GTAGS all all-am check check-am \
+	clean clean-binPROGRAMS clean-generic clean-libtool \
+	clean-recursive ctags ctags-recursive distclean \
+	distclean-compile distclean-generic distclean-hdr \
+	distclean-libtool distclean-recursive distclean-tags distdir \
+	dvi dvi-am html html-am info info-am install install-am \
+	install-binPROGRAMS install-data install-data-am install-exec \
+	install-exec-am install-info install-info-am install-man \
+	install-strip installcheck installcheck-am installdirs \
+	installdirs-am maintainer-clean maintainer-clean-generic \
+	maintainer-clean-recursive mostlyclean mostlyclean-compile \
+	mostlyclean-generic mostlyclean-libtool mostlyclean-recursive \
+	pdf pdf-am ps ps-am tags tags-recursive uninstall uninstall-am \
+	uninstall-binPROGRAMS uninstall-info-am
+
+# Tell versions [3.59,3.63) of GNU make to not export all variables.
+# Otherwise a system limit (for SysV at least) may be exceeded.
+.NOEXPORT:

Modified: trunk/src/Makefile.am
===================================================================
--- trunk/src/Makefile.am	2006-02-12 13:43:28 UTC (rev 245)
+++ trunk/src/Makefile.am	2006-02-12 15:36:06 UTC (rev 246)
@@ -1,42 +1,14 @@
 bin_PROGRAMS = openspace
 
-openspace_SOURCES = cmddialog.cpp \
-	filetype.cpp \
-	openspace.cpp \
-	preferences.cpp \
-	configure.cpp \
-	informationpanel.cpp \
-	oslistitem.cpp \
-	shutter.cpp \
-	filelist.cpp \
-	mainwindow.cpp \
-	pathtype.cpp \
-	thread_elem.cpp \
-	cmddialog.h \
-	filetype.h \
-	oslistitem.h \
-	shutter.h \
-	configure.h \
-	informationpanel.h \
-	pathtype.h \
-	thread_elem.h \
-	filelist_base.h \
-	mainwindow.h \
-	preferences.h \
-	filelist.h \
-	osfile.h \
-	sharedobjects.h \
-	sharedobjects.cpp \
-	MimeType.h \
-	MimeType.cpp \
-	MimeApp.h \
-	MimeApp.cpp \
-	FirstRun.cpp \
-	FirstRun.h \
-	CommandsFileTypesContainers.h \
-	CommandsFileTypesContainers.cpp \
-	sharedFunctions.h \
-	sharedFunctions.cpp
+openspace_SOURCES = main.cpp OSCMDDialogBox.cpp OSCMDDialogBox.h \
+	OSCommandTypeInfo.cpp OSCommandTypeInfo.h OSConfigure.cpp OSConfigure.h OSFile.h \
+	OSFileList.cpp OSFileList.h OSFileListItem.cpp OSFileListItem.h OSFileTypeInfo.cpp \
+	OSFileTypeInfo.h OSFileTypeSymbol.cpp OSFileTypeSymbol.h OSFirstRunDialogBox.cpp \
+	OSFirstRunDialogBox.h OSInfoPanel.cpp OSInfoPanel.h OSMainWindow.cpp OSMainWindow.h \
+	OSMimeApp.cpp OSMimeApp.h OSMimeType.cpp OSMimeType.h OSObjectManager.cpp \
+	OSObjectManager.h OSPathType.cpp OSPathType.h OSPreferences.cpp OSPreferences.h \
+	OSShutter.cpp OSShutter.h OSThreadExec.cpp OSThreadExec.h OSUtils.cpp OSUtils.h \
+	OSVirtualFileSystemBase.h OSVirtualFileSystemHeader.h OSVirtualFileSystemInfo.h
 
 SUBDIRS = plugins
 
@@ -46,3 +18,5 @@
 
 openspace_LDFLAGS = `WANT_FOX=&quot;1.4&quot; fox-config --libs`  `xml2-config  --libs`  
 
+noinst_HEADERS = OSVirtualFileSystemHeader.h OSVirtualFileSystemInfo.h \
+	OSFileTypeInfo.h


Property changes on: trunk/src/Makefile.am
___________________________________________________________________
Name: svn:keywords
   + Id

Modified: trunk/src/Makefile.in
===================================================================
--- trunk/src/Makefile.in	2006-02-12 13:43:28 UTC (rev 245)
+++ trunk/src/Makefile.in	2006-02-12 15:36:06 UTC (rev 246)
@@ -1,8 +1,8 @@
-# Makefile.in generated by automake 1.9.5 from Makefile.am.
+# Makefile.in generated by automake 1.8.5 from Makefile.am.
 # @configure_input@
 
 # Copyright (C) 1994, 1995, 1996, 1997, 1998, 1999, 2000, 2001, 2002,
-# 2003, 2004, 2005  Free Software Foundation, Inc.
+# 2003, 2004  Free Software Foundation, Inc.
 # This Makefile.in is free software; the Free Software Foundation
 # gives unlimited permission to copy and/or distribute it,
 # with or without modifications, as long as this notice is preserved.
@@ -14,6 +14,7 @@
 
 @SET_MAKE@
 
+
 SOURCES = $(openspace_SOURCES)
 
 srcdir = @srcdir@
@@ -36,50 +37,67 @@
 NORMAL_UNINSTALL = :
 PRE_UNINSTALL = :
 POST_UNINSTALL = :
-build_triplet = @build@
 host_triplet = @host@
 bin_PROGRAMS = openspace$(EXEEXT)
 subdir = src
-DIST_COMMON = $(srcdir)/Makefile.am $(srcdir)/Makefile.in \
-	$(srcdir)/config.h.in
+DIST_COMMON = $(noinst_HEADERS) $(srcdir)/Makefile.am \
+	$(srcdir)/Makefile.in $(srcdir)/config.h.in
 ACLOCAL_M4 = $(top_srcdir)/aclocal.m4
 am__aclocal_m4_deps = $(top_srcdir)/configure.ac
 am__configure_deps = $(am__aclocal_m4_deps) $(CONFIGURE_DEPENDENCIES) \
 	$(ACLOCAL_M4)
-mkinstalldirs = $(install_sh) -d
+mkinstalldirs = $(mkdir_p)
 CONFIG_HEADER = config.h
 CONFIG_CLEAN_FILES =
 am__installdirs = &quot;$(DESTDIR)$(bindir)&quot;
 binPROGRAMS_INSTALL = $(INSTALL_PROGRAM)
 PROGRAMS = $(bin_PROGRAMS)
-am_openspace_OBJECTS = cmddialog.$(OBJEXT) filetype.$(OBJEXT) \
-	openspace.$(OBJEXT) preferences.$(OBJEXT) configure.$(OBJEXT) \
-	informationpanel.$(OBJEXT) oslistitem.$(OBJEXT) \
-	shutter.$(OBJEXT) filelist.$(OBJEXT) mainwindow.$(OBJEXT) \
-	pathtype.$(OBJEXT) thread_elem.$(OBJEXT) \
-	sharedobjects.$(OBJEXT) MimeType.$(OBJEXT) MimeApp.$(OBJEXT) \
-	FirstRun.$(OBJEXT) CommandsFileTypesContainers.$(OBJEXT) \
-	sharedFunctions.$(OBJEXT)
+am_openspace_OBJECTS = main.$(OBJEXT) OSCMDDialogBox.$(OBJEXT) \
+	OSCommandTypeInfo.$(OBJEXT) OSConfigure.$(OBJEXT) \
+	OSFileList.$(OBJEXT) OSFileListItem.$(OBJEXT) \
+	OSFileTypeInfo.$(OBJEXT) OSFileTypeSymbol.$(OBJEXT) \
+	OSFirstRunDialogBox.$(OBJEXT) OSInfoPanel.$(OBJEXT) \
+	OSMainWindow.$(OBJEXT) OSMimeApp.$(OBJEXT) \
+	OSMimeType.$(OBJEXT) OSObjectManager.$(OBJEXT) \
+	OSPathType.$(OBJEXT) OSPreferences.$(OBJEXT) \
+	OSShutter.$(OBJEXT) OSThreadExec.$(OBJEXT) OSUtils.$(OBJEXT)
 openspace_OBJECTS = $(am_openspace_OBJECTS)
 openspace_LDADD = $(LDADD)
 DEFAULT_INCLUDES = -I. -I$(srcdir) -I.
 depcomp = $(SHELL) $(top_srcdir)/depcomp
 am__depfiles_maybe = depfiles
<A HREF="https://lists.berlios.de/mailman/listinfo/openspace-svn">+ at AMDEP_TRUE</A>@DEP_FILES = ./$(DEPDIR)/OSCMDDialogBox.Po \
<A HREF="https://lists.berlios.de/mailman/listinfo/openspace-svn">+ at AMDEP_TRUE</A>@	./$(DEPDIR)/OSCommandTypeInfo.Po \
<A HREF="https://lists.berlios.de/mailman/listinfo/openspace-svn">+ at AMDEP_TRUE</A>@	./$(DEPDIR)/OSConfigure.Po \
<A HREF="https://lists.berlios.de/mailman/listinfo/openspace-svn">+ at AMDEP_TRUE</A>@	./$(DEPDIR)/OSFileList.Po \
<A HREF="https://lists.berlios.de/mailman/listinfo/openspace-svn">+ at AMDEP_TRUE</A>@	./$(DEPDIR)/OSFileListItem.Po \
<A HREF="https://lists.berlios.de/mailman/listinfo/openspace-svn">+ at AMDEP_TRUE</A>@	./$(DEPDIR)/OSFileTypeInfo.Po \
<A HREF="https://lists.berlios.de/mailman/listinfo/openspace-svn">+ at AMDEP_TRUE</A>@	./$(DEPDIR)/OSFileTypeSymbol.Po \
<A HREF="https://lists.berlios.de/mailman/listinfo/openspace-svn">+ at AMDEP_TRUE</A>@	./$(DEPDIR)/OSFirstRunDialogBox.Po \
<A HREF="https://lists.berlios.de/mailman/listinfo/openspace-svn">+ at AMDEP_TRUE</A>@	./$(DEPDIR)/OSInfoPanel.Po \
<A HREF="https://lists.berlios.de/mailman/listinfo/openspace-svn">+ at AMDEP_TRUE</A>@	./$(DEPDIR)/OSMainWindow.Po \
<A HREF="https://lists.berlios.de/mailman/listinfo/openspace-svn">+ at AMDEP_TRUE</A>@	./$(DEPDIR)/OSMimeApp.Po ./$(DEPDIR)/OSMimeType.Po \
<A HREF="https://lists.berlios.de/mailman/listinfo/openspace-svn">+ at AMDEP_TRUE</A>@	./$(DEPDIR)/OSObjectManager.Po \
<A HREF="https://lists.berlios.de/mailman/listinfo/openspace-svn">+ at AMDEP_TRUE</A>@	./$(DEPDIR)/OSPathType.Po \
<A HREF="https://lists.berlios.de/mailman/listinfo/openspace-svn">+ at AMDEP_TRUE</A>@	./$(DEPDIR)/OSPreferences.Po \
<A HREF="https://lists.berlios.de/mailman/listinfo/openspace-svn">+ at AMDEP_TRUE</A>@	./$(DEPDIR)/OSShutter.Po \
<A HREF="https://lists.berlios.de/mailman/listinfo/openspace-svn">+ at AMDEP_TRUE</A>@	./$(DEPDIR)/OSThreadExec.Po ./$(DEPDIR)/OSUtils.Po \
<A HREF="https://lists.berlios.de/mailman/listinfo/openspace-svn">+ at AMDEP_TRUE</A>@	./$(DEPDIR)/main.Po
 CXXCOMPILE = $(CXX) $(DEFS) $(DEFAULT_INCLUDES) $(INCLUDES) \
 	$(AM_CPPFLAGS) $(CPPFLAGS) $(AM_CXXFLAGS) $(CXXFLAGS)
-LTCXXCOMPILE = $(LIBTOOL) --tag=CXX --mode=compile $(CXX) $(DEFS) \
+LTCXXCOMPILE = $(LIBTOOL) --mode=compile $(CXX) $(DEFS) \
 	$(DEFAULT_INCLUDES) $(INCLUDES) $(AM_CPPFLAGS) $(CPPFLAGS) \
 	$(AM_CXXFLAGS) $(CXXFLAGS)
 CXXLD = $(CXX)
-CXXLINK = $(LIBTOOL) --tag=CXX --mode=link $(CXXLD) $(AM_CXXFLAGS) \
-	$(CXXFLAGS) $(AM_LDFLAGS) $(LDFLAGS) -o $@
+CXXLINK = $(LIBTOOL) --mode=link $(CXXLD) $(AM_CXXFLAGS) $(CXXFLAGS) \
+	$(AM_LDFLAGS) $(LDFLAGS) -o $@
 COMPILE = $(CC) $(DEFS) $(DEFAULT_INCLUDES) $(INCLUDES) $(AM_CPPFLAGS) \
 	$(CPPFLAGS) $(AM_CFLAGS) $(CFLAGS)
-LTCOMPILE = $(LIBTOOL) --tag=CC --mode=compile $(CC) $(DEFS) \
+LTCOMPILE = $(LIBTOOL) --mode=compile $(CC) $(DEFS) \
 	$(DEFAULT_INCLUDES) $(INCLUDES) $(AM_CPPFLAGS) $(CPPFLAGS) \
 	$(AM_CFLAGS) $(CFLAGS)
 CCLD = $(CC)
-LINK = $(LIBTOOL) --tag=CC --mode=link $(CCLD) $(AM_CFLAGS) $(CFLAGS) \
+LINK = $(LIBTOOL) --mode=link $(CCLD) $(AM_CFLAGS) $(CFLAGS) \
 	$(AM_LDFLAGS) $(LDFLAGS) -o $@
 SOURCES = $(openspace_SOURCES)
 DIST_SOURCES = $(openspace_SOURCES)
@@ -89,6 +107,7 @@
 	install-recursive installcheck-recursive installdirs-recursive \
 	pdf-recursive ps-recursive uninstall-info-recursive \
 	uninstall-recursive
+HEADERS = $(noinst_HEADERS)
 ETAGS = etags
 CTAGS = ctags
 DIST_SUBDIRS = $(SUBDIRS)
@@ -161,8 +180,6 @@
 am__include = @am__include@
 am__leading_dot = @am__leading_dot@
 am__quote = @am__quote@
-am__tar = @am__tar@
-am__untar = @am__untar@
 bindir = @bindir@
 build = @build@
 build_alias = @build_alias@
@@ -191,43 +208,15 @@
 sharedstatedir = @sharedstatedir@
 sysconfdir = @sysconfdir@
 target_alias = @target_alias@
-openspace_SOURCES = cmddialog.cpp \
-	filetype.cpp \
-	openspace.cpp \
-	preferences.cpp \
-	configure.cpp \
-	informationpanel.cpp \
-	oslistitem.cpp \
-	shutter.cpp \
-	filelist.cpp \
-	mainwindow.cpp \
-	pathtype.cpp \
-	thread_elem.cpp \
-	cmddialog.h \
-	filetype.h \
-	oslistitem.h \
-	shutter.h \
-	configure.h \
-	informationpanel.h \
-	pathtype.h \
-	thread_elem.h \
-	filelist_base.h \
-	mainwindow.h \
-	preferences.h \
-	filelist.h \
-	osfile.h \
-	sharedobjects.h \
-	sharedobjects.cpp \
-	MimeType.h \
-	MimeType.cpp \
-	MimeApp.h \
-	MimeApp.cpp \
-	FirstRun.cpp \
-	FirstRun.h \
-	CommandsFileTypesContainers.h \
-	CommandsFileTypesContainers.cpp \
-	sharedFunctions.h \
-	sharedFunctions.cpp
+openspace_SOURCES = main.cpp OSCMDDialogBox.cpp OSCMDDialogBox.h \
+	OSCommandTypeInfo.cpp OSCommandTypeInfo.h OSConfigure.cpp OSConfigure.h OSFile.h \
+	OSFileList.cpp OSFileList.h OSFileListItem.cpp OSFileListItem.h OSFileTypeInfo.cpp \
+	OSFileTypeInfo.h OSFileTypeSymbol.cpp OSFileTypeSymbol.h OSFirstRunDialogBox.cpp \
+	OSFirstRunDialogBox.h OSInfoPanel.cpp OSInfoPanel.h OSMainWindow.cpp OSMainWindow.h \
+	OSMimeApp.cpp OSMimeApp.h OSMimeType.cpp OSMimeType.h OSObjectManager.cpp \
+	OSObjectManager.h OSPathType.cpp OSPathType.h OSPreferences.cpp OSPreferences.h \
+	OSShutter.cpp OSShutter.h OSThreadExec.cpp OSThreadExec.h OSUtils.cpp OSUtils.h \
+	OSVirtualFileSystemBase.h OSVirtualFileSystemHeader.h OSVirtualFileSystemInfo.h
 
 SUBDIRS = plugins
 INCLUDES = -I$(top_srcdir)/src `WANT_FOX=&quot;1.4&quot; fox-config --cflags`  `xml2-config  --cflags`  \
@@ -235,6 +224,9 @@
 	-DPATH_LIBDIR=\&quot;$(libdir)\&quot;
 
 openspace_LDFLAGS = `WANT_FOX=&quot;1.4&quot; fox-config --libs`  `xml2-config  --libs`  
+noinst_HEADERS = OSVirtualFileSystemHeader.h OSVirtualFileSystemInfo.h \
+	OSFileTypeInfo.h
+
 all: config.h
 	$(MAKE) $(AM_MAKEFLAGS) all-recursive
 
@@ -324,44 +316,48 @@
 distclean-compile:
 	-rm -f *.tab.c
 
<A HREF="https://lists.berlios.de/mailman/listinfo/openspace-svn">- at AMDEP_TRUE</A>@@am__include@ @<A HREF="https://lists.berlios.de/mailman/listinfo/openspace-svn">am__quote at .</A>/$(DEPDIR)/<A HREF="https://lists.berlios.de/mailman/listinfo/openspace-svn">CommandsFileTypesContainers.Po at am__quote</A>@
<A HREF="https://lists.berlios.de/mailman/listinfo/openspace-svn">- at AMDEP_TRUE</A>@@am__include@ @<A HREF="https://lists.berlios.de/mailman/listinfo/openspace-svn">am__quote at .</A>/$(DEPDIR)/<A HREF="https://lists.berlios.de/mailman/listinfo/openspace-svn">FirstRun.Po at am__quote</A>@
<A HREF="https://lists.berlios.de/mailman/listinfo/openspace-svn">- at AMDEP_TRUE</A>@@am__include@ @<A HREF="https://lists.berlios.de/mailman/listinfo/openspace-svn">am__quote at .</A>/$(DEPDIR)/<A HREF="https://lists.berlios.de/mailman/listinfo/openspace-svn">MimeApp.Po at am__quote</A>@
<A HREF="https://lists.berlios.de/mailman/listinfo/openspace-svn">- at AMDEP_TRUE</A>@@am__include@ @<A HREF="https://lists.berlios.de/mailman/listinfo/openspace-svn">am__quote at .</A>/$(DEPDIR)/<A HREF="https://lists.berlios.de/mailman/listinfo/openspace-svn">MimeType.Po at am__quote</A>@
<A HREF="https://lists.berlios.de/mailman/listinfo/openspace-svn">- at AMDEP_TRUE</A>@@am__include@ @<A HREF="https://lists.berlios.de/mailman/listinfo/openspace-svn">am__quote at .</A>/$(DEPDIR)/<A HREF="https://lists.berlios.de/mailman/listinfo/openspace-svn">cmddialog.Po at am__quote</A>@
<A HREF="https://lists.berlios.de/mailman/listinfo/openspace-svn">- at AMDEP_TRUE</A>@@am__include@ @<A HREF="https://lists.berlios.de/mailman/listinfo/openspace-svn">am__quote at .</A>/$(DEPDIR)/<A HREF="https://lists.berlios.de/mailman/listinfo/openspace-svn">configure.Po at am__quote</A>@
<A HREF="https://lists.berlios.de/mailman/listinfo/openspace-svn">- at AMDEP_TRUE</A>@@am__include@ @<A HREF="https://lists.berlios.de/mailman/listinfo/openspace-svn">am__quote at .</A>/$(DEPDIR)/<A HREF="https://lists.berlios.de/mailman/listinfo/openspace-svn">filelist.Po at am__quote</A>@
<A HREF="https://lists.berlios.de/mailman/listinfo/openspace-svn">- at AMDEP_TRUE</A>@@am__include@ @<A HREF="https://lists.berlios.de/mailman/listinfo/openspace-svn">am__quote at .</A>/$(DEPDIR)/<A HREF="https://lists.berlios.de/mailman/listinfo/openspace-svn">filetype.Po at am__quote</A>@
<A HREF="https://lists.berlios.de/mailman/listinfo/openspace-svn">- at AMDEP_TRUE</A>@@am__include@ @<A HREF="https://lists.berlios.de/mailman/listinfo/openspace-svn">am__quote at .</A>/$(DEPDIR)/<A HREF="https://lists.berlios.de/mailman/listinfo/openspace-svn">informationpanel.Po at am__quote</A>@
<A HREF="https://lists.berlios.de/mailman/listinfo/openspace-svn">- at AMDEP_TRUE</A>@@am__include@ @<A HREF="https://lists.berlios.de/mailman/listinfo/openspace-svn">am__quote at .</A>/$(DEPDIR)/<A HREF="https://lists.berlios.de/mailman/listinfo/openspace-svn">mainwindow.Po at am__quote</A>@
<A HREF="https://lists.berlios.de/mailman/listinfo/openspace-svn">- at AMDEP_TRUE</A>@@am__include@ @<A HREF="https://lists.berlios.de/mailman/listinfo/openspace-svn">am__quote at .</A>/$(DEPDIR)/<A HREF="https://lists.berlios.de/mailman/listinfo/openspace-svn">openspace.Po at am__quote</A>@
<A HREF="https://lists.berlios.de/mailman/listinfo/openspace-svn">- at AMDEP_TRUE</A>@@am__include@ @<A HREF="https://lists.berlios.de/mailman/listinfo/openspace-svn">am__quote at .</A>/$(DEPDIR)/<A HREF="https://lists.berlios.de/mailman/listinfo/openspace-svn">oslistitem.Po at am__quote</A>@
<A HREF="https://lists.berlios.de/mailman/listinfo/openspace-svn">- at AMDEP_TRUE</A>@@am__include@ @<A HREF="https://lists.berlios.de/mailman/listinfo/openspace-svn">am__quote at .</A>/$(DEPDIR)/<A HREF="https://lists.berlios.de/mailman/listinfo/openspace-svn">pathtype.Po at am__quote</A>@
<A HREF="https://lists.berlios.de/mailman/listinfo/openspace-svn">- at AMDEP_TRUE</A>@@am__include@ @<A HREF="https://lists.berlios.de/mailman/listinfo/openspace-svn">am__quote at .</A>/$(DEPDIR)/<A HREF="https://lists.berlios.de/mailman/listinfo/openspace-svn">preferences.Po at am__quote</A>@
<A HREF="https://lists.berlios.de/mailman/listinfo/openspace-svn">- at AMDEP_TRUE</A>@@am__include@ @<A HREF="https://lists.berlios.de/mailman/listinfo/openspace-svn">am__quote at .</A>/$(DEPDIR)/<A HREF="https://lists.berlios.de/mailman/listinfo/openspace-svn">sharedFunctions.Po at am__quote</A>@
<A HREF="https://lists.berlios.de/mailman/listinfo/openspace-svn">- at AMDEP_TRUE</A>@@am__include@ @<A HREF="https://lists.berlios.de/mailman/listinfo/openspace-svn">am__quote at .</A>/$(DEPDIR)/<A HREF="https://lists.berlios.de/mailman/listinfo/openspace-svn">sharedobjects.Po at am__quote</A>@
<A HREF="https://lists.berlios.de/mailman/listinfo/openspace-svn">- at AMDEP_TRUE</A>@@am__include@ @<A HREF="https://lists.berlios.de/mailman/listinfo/openspace-svn">am__quote at .</A>/$(DEPDIR)/<A HREF="https://lists.berlios.de/mailman/listinfo/openspace-svn">shutter.Po at am__quote</A>@
<A HREF="https://lists.berlios.de/mailman/listinfo/openspace-svn">- at AMDEP_TRUE</A>@@am__include@ @<A HREF="https://lists.berlios.de/mailman/listinfo/openspace-svn">am__quote at .</A>/$(DEPDIR)/<A HREF="https://lists.berlios.de/mailman/listinfo/openspace-svn">thread_elem.Po at am__quote</A>@
<A HREF="https://lists.berlios.de/mailman/listinfo/openspace-svn">+ at AMDEP_TRUE</A>@@am__include@ @<A HREF="https://lists.berlios.de/mailman/listinfo/openspace-svn">am__quote at .</A>/$(DEPDIR)/<A HREF="https://lists.berlios.de/mailman/listinfo/openspace-svn">OSCMDDialogBox.Po at am__quote</A>@
<A HREF="https://lists.berlios.de/mailman/listinfo/openspace-svn">+ at AMDEP_TRUE</A>@@am__include@ @<A HREF="https://lists.berlios.de/mailman/listinfo/openspace-svn">am__quote at .</A>/$(DEPDIR)/<A HREF="https://lists.berlios.de/mailman/listinfo/openspace-svn">OSCommandTypeInfo.Po at am__quote</A>@
<A HREF="https://lists.berlios.de/mailman/listinfo/openspace-svn">+ at AMDEP_TRUE</A>@@am__include@ @<A HREF="https://lists.berlios.de/mailman/listinfo/openspace-svn">am__quote at .</A>/$(DEPDIR)/<A HREF="https://lists.berlios.de/mailman/listinfo/openspace-svn">OSConfigure.Po at am__quote</A>@
<A HREF="https://lists.berlios.de/mailman/listinfo/openspace-svn">+ at AMDEP_TRUE</A>@@am__include@ @<A HREF="https://lists.berlios.de/mailman/listinfo/openspace-svn">am__quote at .</A>/$(DEPDIR)/<A HREF="https://lists.berlios.de/mailman/listinfo/openspace-svn">OSFileList.Po at am__quote</A>@
<A HREF="https://lists.berlios.de/mailman/listinfo/openspace-svn">+ at AMDEP_TRUE</A>@@am__include@ @<A HREF="https://lists.berlios.de/mailman/listinfo/openspace-svn">am__quote at .</A>/$(DEPDIR)/<A HREF="https://lists.berlios.de/mailman/listinfo/openspace-svn">OSFileListItem.Po at am__quote</A>@
<A HREF="https://lists.berlios.de/mailman/listinfo/openspace-svn">+ at AMDEP_TRUE</A>@@am__include@ @<A HREF="https://lists.berlios.de/mailman/listinfo/openspace-svn">am__quote at .</A>/$(DEPDIR)/<A HREF="https://lists.berlios.de/mailman/listinfo/openspace-svn">OSFileTypeInfo.Po at am__quote</A>@
<A HREF="https://lists.berlios.de/mailman/listinfo/openspace-svn">+ at AMDEP_TRUE</A>@@am__include@ @<A HREF="https://lists.berlios.de/mailman/listinfo/openspace-svn">am__quote at .</A>/$(DEPDIR)/<A HREF="https://lists.berlios.de/mailman/listinfo/openspace-svn">OSFileTypeSymbol.Po at am__quote</A>@
<A HREF="https://lists.berlios.de/mailman/listinfo/openspace-svn">+ at AMDEP_TRUE</A>@@am__include@ @<A HREF="https://lists.berlios.de/mailman/listinfo/openspace-svn">am__quote at .</A>/$(DEPDIR)/<A HREF="https://lists.berlios.de/mailman/listinfo/openspace-svn">OSFirstRunDialogBox.Po at am__quote</A>@
<A HREF="https://lists.berlios.de/mailman/listinfo/openspace-svn">+ at AMDEP_TRUE</A>@@am__include@ @<A HREF="https://lists.berlios.de/mailman/listinfo/openspace-svn">am__quote at .</A>/$(DEPDIR)/<A HREF="https://lists.berlios.de/mailman/listinfo/openspace-svn">OSInfoPanel.Po at am__quote</A>@
<A HREF="https://lists.berlios.de/mailman/listinfo/openspace-svn">+ at AMDEP_TRUE</A>@@am__include@ @<A HREF="https://lists.berlios.de/mailman/listinfo/openspace-svn">am__quote at .</A>/$(DEPDIR)/<A HREF="https://lists.berlios.de/mailman/listinfo/openspace-svn">OSMainWindow.Po at am__quote</A>@
<A HREF="https://lists.berlios.de/mailman/listinfo/openspace-svn">+ at AMDEP_TRUE</A>@@am__include@ @<A HREF="https://lists.berlios.de/mailman/listinfo/openspace-svn">am__quote at .</A>/$(DEPDIR)/<A HREF="https://lists.berlios.de/mailman/listinfo/openspace-svn">OSMimeApp.Po at am__quote</A>@
<A HREF="https://lists.berlios.de/mailman/listinfo/openspace-svn">+ at AMDEP_TRUE</A>@@am__include@ @<A HREF="https://lists.berlios.de/mailman/listinfo/openspace-svn">am__quote at .</A>/$(DEPDIR)/<A HREF="https://lists.berlios.de/mailman/listinfo/openspace-svn">OSMimeType.Po at am__quote</A>@
<A HREF="https://lists.berlios.de/mailman/listinfo/openspace-svn">+ at AMDEP_TRUE</A>@@am__include@ @<A HREF="https://lists.berlios.de/mailman/listinfo/openspace-svn">am__quote at .</A>/$(DEPDIR)/<A HREF="https://lists.berlios.de/mailman/listinfo/openspace-svn">OSObjectManager.Po at am__quote</A>@
<A HREF="https://lists.berlios.de/mailman/listinfo/openspace-svn">+ at AMDEP_TRUE</A>@@am__include@ @<A HREF="https://lists.berlios.de/mailman/listinfo/openspace-svn">am__quote at .</A>/$(DEPDIR)/<A HREF="https://lists.berlios.de/mailman/listinfo/openspace-svn">OSPathType.Po at am__quote</A>@
<A HREF="https://lists.berlios.de/mailman/listinfo/openspace-svn">+ at AMDEP_TRUE</A>@@am__include@ @<A HREF="https://lists.berlios.de/mailman/listinfo/openspace-svn">am__quote at .</A>/$(DEPDIR)/<A HREF="https://lists.berlios.de/mailman/listinfo/openspace-svn">OSPreferences.Po at am__quote</A>@
<A HREF="https://lists.berlios.de/mailman/listinfo/openspace-svn">+ at AMDEP_TRUE</A>@@am__include@ @<A HREF="https://lists.berlios.de/mailman/listinfo/openspace-svn">am__quote at .</A>/$(DEPDIR)/<A HREF="https://lists.berlios.de/mailman/listinfo/openspace-svn">OSShutter.Po at am__quote</A>@
<A HREF="https://lists.berlios.de/mailman/listinfo/openspace-svn">+ at AMDEP_TRUE</A>@@am__include@ @<A HREF="https://lists.berlios.de/mailman/listinfo/openspace-svn">am__quote at .</A>/$(DEPDIR)/<A HREF="https://lists.berlios.de/mailman/listinfo/openspace-svn">OSThreadExec.Po at am__quote</A>@
<A HREF="https://lists.berlios.de/mailman/listinfo/openspace-svn">+ at AMDEP_TRUE</A>@@am__include@ @<A HREF="https://lists.berlios.de/mailman/listinfo/openspace-svn">am__quote at .</A>/$(DEPDIR)/<A HREF="https://lists.berlios.de/mailman/listinfo/openspace-svn">OSUtils.Po at am__quote</A>@
<A HREF="https://lists.berlios.de/mailman/listinfo/openspace-svn">+ at AMDEP_TRUE</A>@@am__include@ @<A HREF="https://lists.berlios.de/mailman/listinfo/openspace-svn">am__quote at .</A>/$(DEPDIR)/<A HREF="https://lists.berlios.de/mailman/listinfo/openspace-svn">main.Po at am__quote</A>@
 
 .cpp.o:
 @am__fastdepCXX_TRUE@	if $(CXXCOMPILE) -MT $@ -MD -MP -MF &quot;$(DEPDIR)/$*.Tpo&quot; -c -o $@ $&lt;; \
 @am__fastdepCXX_TRUE@	then mv -f &quot;$(DEPDIR)/$*.Tpo&quot; &quot;$(DEPDIR)/$*.Po&quot;; else rm -f &quot;$(DEPDIR)/$*.Tpo&quot;; exit 1; fi
 @AMDEP_TRUE@@am__fastdepCXX_FALSE@	source='$&lt;' object='$@' libtool=no @AMDEPBACKSLASH@
<A HREF="https://lists.berlios.de/mailman/listinfo/openspace-svn">- at AMDEP_TRUE</A>@@am__fastdepCXX_FALSE@	DEPDIR=$(DEPDIR) $(CXXDEPMODE) $(depcomp) @AMDEPBACKSLASH@
<A HREF="https://lists.berlios.de/mailman/listinfo/openspace-svn">+ at AMDEP_TRUE</A>@@am__fastdepCXX_FALSE@	depfile='$(DEPDIR)/$*.Po' tmpdepfile='$(DEPDIR)/$*.TPo' @AMDEPBACKSLASH@
<A HREF="https://lists.berlios.de/mailman/listinfo/openspace-svn">+ at AMDEP_TRUE</A>@@am__fastdepCXX_FALSE@	$(CXXDEPMODE) $(depcomp) @AMDEPBACKSLASH@
 @am__fastdepCXX_FALSE@	$(CXXCOMPILE) -c -o $@ $&lt;
 
 .cpp.obj:
 @am__fastdepCXX_TRUE@	if $(CXXCOMPILE) -MT $@ -MD -MP -MF &quot;$(DEPDIR)/$*.Tpo&quot; -c -o $@ `$(CYGPATH_W) '$&lt;'`; \
 @am__fastdepCXX_TRUE@	then mv -f &quot;$(DEPDIR)/$*.Tpo&quot; &quot;$(DEPDIR)/$*.Po&quot;; else rm -f &quot;$(DEPDIR)/$*.Tpo&quot;; exit 1; fi
 @AMDEP_TRUE@@am__fastdepCXX_FALSE@	source='$&lt;' object='$@' libtool=no @AMDEPBACKSLASH@
<A HREF="https://lists.berlios.de/mailman/listinfo/openspace-svn">- at AMDEP_TRUE</A>@@am__fastdepCXX_FALSE@	DEPDIR=$(DEPDIR) $(CXXDEPMODE) $(depcomp) @AMDEPBACKSLASH@
<A HREF="https://lists.berlios.de/mailman/listinfo/openspace-svn">+ at AMDEP_TRUE</A>@@am__fastdepCXX_FALSE@	depfile='$(DEPDIR)/$*.Po' tmpdepfile='$(DEPDIR)/$*.TPo' @AMDEPBACKSLASH@
<A HREF="https://lists.berlios.de/mailman/listinfo/openspace-svn">+ at AMDEP_TRUE</A>@@am__fastdepCXX_FALSE@	$(CXXDEPMODE) $(depcomp) @AMDEPBACKSLASH@
 @am__fastdepCXX_FALSE@	$(CXXCOMPILE) -c -o $@ `$(CYGPATH_W) '$&lt;'`
 
 .cpp.lo:
 @am__fastdepCXX_TRUE@	if $(LTCXXCOMPILE) -MT $@ -MD -MP -MF &quot;$(DEPDIR)/$*.Tpo&quot; -c -o $@ $&lt;; \
 @am__fastdepCXX_TRUE@	then mv -f &quot;$(DEPDIR)/$*.Tpo&quot; &quot;$(DEPDIR)/$*.Plo&quot;; else rm -f &quot;$(DEPDIR)/$*.Tpo&quot;; exit 1; fi
 @AMDEP_TRUE@@am__fastdepCXX_FALSE@	source='$&lt;' object='$@' libtool=yes @AMDEPBACKSLASH@
<A HREF="https://lists.berlios.de/mailman/listinfo/openspace-svn">- at AMDEP_TRUE</A>@@am__fastdepCXX_FALSE@	DEPDIR=$(DEPDIR) $(CXXDEPMODE) $(depcomp) @AMDEPBACKSLASH@
<A HREF="https://lists.berlios.de/mailman/listinfo/openspace-svn">+ at AMDEP_TRUE</A>@@am__fastdepCXX_FALSE@	depfile='$(DEPDIR)/$*.Plo' tmpdepfile='$(DEPDIR)/$*.TPlo' @AMDEPBACKSLASH@
<A HREF="https://lists.berlios.de/mailman/listinfo/openspace-svn">+ at AMDEP_TRUE</A>@@am__fastdepCXX_FALSE@	$(CXXDEPMODE) $(depcomp) @AMDEPBACKSLASH@
 @am__fastdepCXX_FALSE@	$(LTCXXCOMPILE) -c -o $@ $&lt;
 
 mostlyclean-libtool:
@@ -381,13 +377,7 @@
 #     (which will cause the Makefiles to be regenerated when you run `make');
 # (2) otherwise, pass the desired values on the `make' command line.
 $(RECURSIVE_TARGETS):
-	@failcom='exit 1'; \
-	for f in x $$MAKEFLAGS; do \
-	  case $$f in \
-	    *=* | --[!k]*);; \
-	    *k*) failcom='fail=yes';; \
-	  esac; \
-	done; \
+	@set fnord $$MAKEFLAGS; amf=$$2; \
 	dot_seen=no; \
 	target=`echo $@ | sed s/-recursive//`; \
 	list='$(SUBDIRS)'; for subdir in $$list; do \
@@ -399,7 +389,7 @@
 	    local_target=&quot;$$target&quot;; \
 	  fi; \
 	  (cd $$subdir &amp;&amp; $(MAKE) $(AM_MAKEFLAGS) $$local_target) \
-	  || eval $$failcom; \
+	   || case &quot;$$amf&quot; in *=*) exit 1;; *k*) fail=yes;; *) exit 1;; esac; \
 	done; \
 	if test &quot;$$dot_seen&quot; = &quot;no&quot;; then \
 	  $(MAKE) $(AM_MAKEFLAGS) &quot;$$target-am&quot; || exit 1; \
@@ -407,13 +397,7 @@
 
 mostlyclean-recursive clean-recursive distclean-recursive \
 maintainer-clean-recursive:
-	@failcom='exit 1'; \
-	for f in x $$MAKEFLAGS; do \
-	  case $$f in \
-	    *=* | --[!k]*);; \
-	    *k*) failcom='fail=yes';; \
-	  esac; \
-	done; \
+	@set fnord $$MAKEFLAGS; amf=$$2; \
 	dot_seen=no; \
 	case &quot;$@&quot; in \
 	  distclean-* | maintainer-clean-*) list='$(DIST_SUBDIRS)' ;; \
@@ -434,7 +418,7 @@
 	    local_target=&quot;$$target&quot;; \
 	  fi; \
 	  (cd $$subdir &amp;&amp; $(MAKE) $(AM_MAKEFLAGS) $$local_target) \
-	  || eval $$failcom; \
+	   || case &quot;$$amf&quot; in *=*) exit 1;; *k*) fail=yes;; *) exit 1;; esac; \
 	done &amp;&amp; test -z &quot;$$fail&quot;
 tags-recursive:
 	list='$(SUBDIRS)'; for subdir in $$list; do \
@@ -533,24 +517,22 @@
 	    || exit 1; \
 	  fi; \
 	done
-	list='$(DIST_SUBDIRS)'; for subdir in $$list; do \
+	list='$(SUBDIRS)'; for subdir in $$list; do \
 	  if test &quot;$$subdir&quot; = .; then :; else \
 	    test -d &quot;$(distdir)/$$subdir&quot; \
-	    || $(mkdir_p) &quot;$(distdir)/$$subdir&quot; \
+	    || mkdir &quot;$(distdir)/$$subdir&quot; \
 	    || exit 1; \
-	    distdir=`$(am__cd) $(distdir) &amp;&amp; pwd`; \
-	    top_distdir=`$(am__cd) $(top_distdir) &amp;&amp; pwd`; \
 	    (cd $$subdir &amp;&amp; \
 	      $(MAKE) $(AM_MAKEFLAGS) \
-	        top_distdir=&quot;$$top_distdir&quot; \
-	        distdir=&quot;$$distdir/$$subdir&quot; \
+	        top_distdir=&quot;../$(top_distdir)&quot; \
+	        distdir=&quot;../$(distdir)/$$subdir&quot; \
 	        distdir) \
 	      || exit 1; \
 	  fi; \
 	done
 check-am: all-am
 check: check-recursive
-all-am: Makefile $(PROGRAMS) config.h
+all-am: Makefile $(PROGRAMS) $(HEADERS) config.h
 installdirs: installdirs-recursive
 installdirs-am:
 	for dir in &quot;$(DESTDIR)$(bindir)&quot;; do \
@@ -575,7 +557,7 @@
 clean-generic:
 
 distclean-generic:
-	-test -z &quot;$(CONFIG_CLEAN_FILES)&quot; || rm -f $(CONFIG_CLEAN_FILES)
+	-rm -f $(CONFIG_CLEAN_FILES)
 
 maintainer-clean-generic:
 	@echo &quot;This command is intended for maintainers to use&quot;


Property changes on: trunk/src/Makefile.in
___________________________________________________________________
Name: svn:keywords
   + Id

Deleted: trunk/src/MimeApp.cpp
===================================================================
--- trunk/src/MimeApp.cpp	2006-02-12 13:43:28 UTC (rev 245)
+++ trunk/src/MimeApp.cpp	2006-02-12 15:36:06 UTC (rev 246)
@@ -1,198 +0,0 @@
-#include &quot;fx.h&quot;
-#include &quot;MimeApp.h&quot;
-#include &quot;sharedobjects.h&quot;
-#include &quot;sharedFunctions.h&quot;
-
-#include &quot;CommandsFileTypesContainers.h&quot;
-
-#ifdef WIN32
-#define SEPARATOR &quot;\\&quot;
-#else
-#include &lt;dlfcn.h&gt;
-#define SEPARATOR &quot;/&quot;
-#endif
-
-#ifndef PATH_CFG
-#define PATH_CFG        &quot;/usr/local/etc/&quot;
-#endif
-
-using namespace std;
-
-FXDEFMAP (MimeApp) MimeAppMap[] =
-{
-    //________Message_Type_____________________ID____________Message_Handler_______  
-	FXMAPFUNCS (SEL_COMMAND, MimeApp::ID_NEXT,MimeApp::ID_PREVIOUS, MimeApp::onNextPrevious),
-	FXMAPFUNC (SEL_CLOSE,0, MimeApp::onClose),
-};
-
-
-FXIMPLEMENT (MimeApp, FXDialogBox, MimeAppMap, ARRAYNUMBER (MimeAppMap)) MimeApp::MimeApp (FXWindow * owner):FXDialogBox (owner, &quot;MimeApp&quot;, DECOR_TITLE | DECOR_BORDER | DECOR_RESIZE, 0, 0, 0, 0, 0, 0, 0, 0, 4, 4)
-{
-
-
-    FXVerticalFrame *vertical = new FXVerticalFrame (this, LAYOUT_SIDE_TOP | LAYOUT_FILL_X | LAYOUT_FILL_Y);
-    
-    mime_label=new FXLabel(vertical,&quot;&quot;);
-    programsbox= new FXComboBox (vertical, 20, NULL, 0, FRAME_THICK | LAYOUT_SIDE_TOP | COMBOBOX_STATIC);
-    programsbox-&gt;setNumVisible(10);
-    
-    FXHorizontalFrame *hori = new FXHorizontalFrame (vertical, LAYOUT_SIDE_TOP | LAYOUT_FILL_X | LAYOUT_FILL_Y);
-    FXButton *but1 = new FXButton (hori, &quot;PREVIOUS&quot;, NULL, this,ID_PREVIOUS);
-    FXButton *but3 = new FXButton (hori, &quot;NEXT&quot;, NULL, this,ID_NEXT);
-
- string file = string(PATH_CFG) + string(SEPARATOR) + string(&quot;mimeapp&quot;);
- ifstream ifs (file.c_str(), ios::in);
-
-    while (!ifs.eof ())
-    {
-	string tmp;
-	getline (ifs, tmp);
-
-	if (tmp == &quot;&quot; || tmp[0] == '#')
-	    continue;
-	mime_vector.push_back(mime2xml(tmp));
-    }
-    ifs.close ();
- iter = mime_vector.begin ();
- fill(*iter);
-
-}
-
-
-long MimeApp::onClose (FXObject * sender, FXSelector sel, void *ptr)
-{
-string program=programsbox-&gt;getText().text();
-string mime=mime_label-&gt;getText().text();	
-save(mime,program);
-
-FXDialogBox::onCmdAccept(sender,sel,ptr);
-
-}
-
-
-MimeApp::~MimeApp ()
-{
-}
-
-void MimeApp::doAutomaticConfiguration(void)
-{
-vector &lt;string&gt;::iterator iter;
-			
-		for (iter=mime_vector.begin(); iter != mime_vector.end(); iter++)
-    		{
-			fill(*iter);
-			save(mime_label-&gt;getText().text(),programsbox-&gt;getText().text());
-		}
-	
-
-}
-
-long MimeApp::onNextPrevious(FXObject * sender, FXSelector sel, void *)
-{
-
-	FXushort id = FXSELID(sel);
-
-	if(id==ID_NEXT &amp;&amp; iter+1 != mime_vector.end())
-	{
-	iter++;
-	}
-	else if(id==ID_PREVIOUS &amp;&amp; iter != mime_vector.begin())
-	{
-		iter--;
-	}
-	
-	string program=programsbox-&gt;getText().text();
-	string mime=mime_label-&gt;getText().text();	
-	save(mime,program);
-	
-	
-	fill(*iter);
-
-
-}
-void MimeApp::fill(string tmp)
-{
-	string mime, program;
-	mime = tmp.substr (0, tmp.rfind (&quot;:&quot;));
-	program = tmp.substr (tmp.rfind (&quot;:&quot;) + 1);
-
-	mime_label-&gt;setText(mime.c_str());
-	
-	programsbox-&gt;clearItems();
-	
-	std::stringstream parser (program);
-	string prog;
-	while(parser &gt;&gt; prog)
-	{
-	
-	string command=&quot;which &quot; + prog + &quot; &gt;/dev/null 2&gt;/dev/null&quot;;
-		if(system(command.c_str())==0)
-		{
-		programsbox-&gt;appendItem(prog.c_str());
-		}
-
-	
-	}
-	programsbox-&gt;appendItem(&quot;&quot;);
-
-
-}
-
-void MimeApp::save(string mime, string program)
-{
-
-if(program==&quot;&quot;)
-return;
-
-	string::size_type pos=mime.find(&quot;/&quot;);
-	
-	string mime_major;
-	string mime_minor;
-	string command_name=&quot;open_&quot;;
-	string command_exec=program + &quot; {f}&quot; ;
-	
-	string reg2;
-	
-	if (pos != string::npos)
-	{
-		mime_major=mime.substr(0,pos);	
-		mime_minor=mime.substr(pos+1);
-			
-		command_name+=mime_major+&quot;_&quot;+mime_minor;
-	
-		reg2 = conf-&gt;readonestring (&quot;/OpenspaceConfig/file_types/&quot; + mime_major + &quot;/default&quot;);
-		string command_major = conf-&gt;readonestring (&quot;/OpenspaceConfig/commands/&quot; + reg2 + &quot;/exec&quot;);
-		
-		if(reg2==&quot;&quot; || (command_major!=command_exec &amp;&amp; reg2!=command_name))
-		{
-		filetype_container ct=filetype_container();
-		ct.load(mime);
-		ct.command=command_name;
-		ct.save();	
-			
-		}
-		else
-		return;
-	}
-	else // major mime type: audio,video,etc
-	{
-		command_name+=mime;
-		string reg = conf-&gt;readonestring (&quot;/OpenspaceConfig/file_types/&quot; + mime + &quot;/default&quot;);
-		string cmd = conf-&gt;readonestring (&quot;/OpenspaceConfig/commands/&quot; + reg + &quot;/exec&quot;); 
-		
-		if(reg==&quot;&quot; || cmd!=command_exec)
-		{
-		
-		filetype_container ct=filetype_container();
-		ct.load(mime);
-		ct.command=command_name;
-		ct.save();			
-		}
-		else
-		return;
-	}
-
-	command_container cm=command_container(command_name,command_exec);
-	cm.save();
-
-}

Deleted: trunk/src/MimeApp.h
===================================================================
--- trunk/src/MimeApp.h	2006-02-12 13:43:28 UTC (rev 245)
+++ trunk/src/MimeApp.h	2006-02-12 15:36:06 UTC (rev 246)
@@ -1,51 +0,0 @@
-#ifndef MIMEAPP_H
-#define MIMEAPP_H
-
-
-#include &lt;vector&gt;
-#include &lt;string&gt;
-#include &lt;fstream&gt;
-#include &lt;sstream&gt;
-using namespace std;
-
-class MimeApp:public FXDialogBox
-{
-  FXDECLARE (MimeApp) protected:
-
-  private:
-    MimeApp ()
-    {
-    }
-
- 
-
-  
-   
-    FXComboBox *programsbox;
-    FXLabel *mime_label;  
-  
-    vector &lt;string&gt; mime_vector;
-    vector &lt;string&gt;::iterator iter;
- public:
-    enum
-    {	 
-	ID_NEXT=FXDialogBox::ID_LAST,
-	ID_PREVIOUS,
-	ID_LAST,
-    };
-
-    MimeApp (FXWindow * owner);
-
-    long MimeApp::onNextPrevious(FXObject * sender, FXSelector sel, void *);
-    long MimeApp::onClose (FXObject * sender, FXSelector sel, void *ptr);
-    
-    void MimeApp::fill(string tmp);
-    static void MimeApp::save(string mime, string program);
-    void MimeApp::doAutomaticConfiguration(void);
-    
-    
-
-    virtual ~ MimeApp ();
-};
-
-#endif

Deleted: trunk/src/MimeType.cpp
===================================================================
--- trunk/src/MimeType.cpp	2006-02-12 13:43:28 UTC (rev 245)
+++ trunk/src/MimeType.cpp	2006-02-12 15:36:06 UTC (rev 246)
@@ -1,156 +0,0 @@
-#include &lt;string&gt;
-#include &lt;map&gt;
-#include &lt;iostream&gt;
-#include &lt;fstream&gt;
-#include &lt;list&gt;
-#include &lt;algorithm&gt;
-#include &lt;cctype&gt;
-
-using namespace std;
-
-#include &quot;MimeType.h&quot;
-#include &quot;sharedFunctions.h&quot;
-
-bool MimeType::isInitialized = false;
-map &lt; string, string &gt; MimeType::mimeMap;
-map &lt; string, string &gt; MimeType::mimeCache;
-
-bool MimeType::_matches (string pattern, string ext)
-{
-
-    if (pattern[0] == '*')
-    {
-	pattern = pattern.substr (1);
-	unsigned int pos = ext.rfind (pattern);
-	if (pos == string::npos)
-	    return false;
-	return ext.length () - pos == pattern.length ();
-    }
-
-    if (pattern[pattern.length () - 1] == '*')
-    {
-	pattern = pattern.substr (0, pattern.length () - 1);
-	return ext.find (pattern) == 0;
-    }
-
-    return ext == pattern;
-
-}
-
-string MimeType::getMimeFromName (string name)
-{
-
-transform (name.begin (), name.end (), name.begin (), ::tolower);
-
-    if (!isInitialized)
-	__initialize ();
-
-    if (mimeCache[name] != &quot;&quot;)
-	return mime2xml(mimeCache[name]);
-
-    string ext;
-
-    if (name.find (&quot;.&quot;) == string::npos)
-    {
-
-	ext = name;
-
-    }
-    else
-    {
-
-	ext = name.substr (name.rfind (&quot;.&quot;));
-
-	if (name.length () &gt;= 6 &amp;&amp; name.substr (name.length () - 6, 6) == &quot;tar.gz&quot;)
-	    return &quot;application/x-compressed-tar&quot;;	//ext=&quot;tar.gz&quot;;
-
-	if (name.length () &gt;= 7 &amp;&amp; name.substr (name.length () - 7, 7) == &quot;tar.bz2&quot;)
-	    return &quot;application/x-bzip-compressed-tar&quot;;	//ext=&quot;tar.bz2&quot;;
-
-
-    }
-
-    string rv = &quot;application/octet-stream&quot;;
-
-    for (map &lt; string, string &gt;::iterator it = mimeMap.begin (); it != mimeMap.end (); ++it)
-    {
-
-	if (_matches (it-&gt;first, ext))
-	{
-	    rv = it-&gt;second;
-	    break;
-	}
-
-    }
-
-    mimeCache[name] = rv;
-
-    return mime2xml(rv);
-
-}
-
-void MimeType::__initialize (void)
-{
-
-    if (isInitialized)
-	return;
-
-#ifndef WIN32
-    ifstream ifs (&quot;/usr/share/mime/globs&quot;, ios::in);
-
-    if (!ifs)
-    {
-	cerr &lt;&lt; &quot;ifs() failed&quot; &lt;&lt; endl;
-	return;
-    }
-
-    mimeMap.clear ();
-    mimeCache.clear ();
-
-    while (!ifs.eof ())
-    {
-
-	string tmp;
-	getline (ifs, tmp);
-
-	if (tmp == &quot;&quot; || tmp[0] == '#')
-	    continue;
-
-	string mime, pattern;
-	mime = tmp.substr (0, tmp.find (&quot;:&quot;));
-	pattern = tmp.substr (tmp.find (&quot;:&quot;) + 1);
-
-	mimeMap[pattern] = mime;
-
-    }
-
-    ifs.close ();
-#else
-    _NOT_IMPLEMENTED_;
-#endif
-
-    // Some missing globs:
-    mimeMap[&quot;*.asc&quot;] = &quot;application/pgp-encrypted&quot;;
-    mimeMap[&quot;*.com&quot;] = &quot;application/x-ms-dos-executable&quot;;
-    mimeMap[&quot;*.conf&quot;] = &quot;text/x-config&quot;;
-    mimeMap[&quot;*.dll&quot;] = &quot;application/x-ms-dos-executable&quot;;
-    mimeMap[&quot;*.ebuild&quot;] = &quot;text/ebuild&quot;;
-    mimeMap[&quot;*.eclass&quot;] = &quot;text/eclass&quot;;
-    mimeMap[&quot;*.gpg&quot;] = &quot;application/pgp-keys&quot;;
-    mimeMap[&quot;*.h++&quot;] = &quot;text/x-c++hdr&quot;;
-    mimeMap[&quot;*.hpp&quot;] = &quot;text/x-c++hdr&quot;;
-    mimeMap[&quot;*.ini&quot;] = &quot;text/x-config&quot;;
-    mimeMap[&quot;*.jsp&quot;] = &quot;text/x-jsp&quot;;
-    mimeMap[&quot;*.key&quot;] = &quot;application/pgp-keys&quot;;
-    mimeMap[&quot;*.l&quot;] = &quot;text/x-lex&quot;;
-    mimeMap[&quot;*.latex&quot;] = &quot;text/x-tex&quot;;
-    mimeMap[&quot;*.mak&quot;] = &quot;text/x-makefile&quot;;
-    mimeMap[&quot;*.ogm&quot;] = &quot;video/vorbis&quot;;
-    mimeMap[&quot;*.tbz2&quot;] = &quot;application/x-bzip-compresses-tar&quot;;
-    mimeMap[&quot;*.wma&quot;] = &quot;application/x-ms-wma&quot;;
-    mimeMap[&quot;*.y&quot;] = &quot;text/x-yacc&quot;;
-    mimeMap[&quot;*rc&quot;] = &quot;text/x-config&quot;;
-
-    isInitialized = true;
-
-}

Deleted: trunk/src/MimeType.h
===================================================================
--- trunk/src/MimeType.h	2006-02-12 13:43:28 UTC (rev 245)
+++ trunk/src/MimeType.h	2006-02-12 15:36:06 UTC (rev 246)
@@ -1,29 +0,0 @@
-
-#ifndef __MimeType_h__
-#define __MimeType_h__
-
-class MimeType
-{
-
- private:   
-    static map &lt; string, string &gt; mimeCache;
-    static bool isInitialized;
-
-  private:
-     MimeType ()
-    {
-    }
-    ~MimeType ()
-    {
-    }
-
-   
-    static bool _matches (string pattern, string fname);
-
-  public:
-    static string getMimeFromName (string name);
-    static map &lt; string, string &gt; mimeMap;
-    static void __initialize (void);
-};
-
-#endif

Copied: trunk/src/OSCMDDialogBox.cpp (from rev 245, branches/mloskot-style-refactoring/src/OSCMDDialogBox.cpp)


Property changes on: trunk/src/OSCMDDialogBox.cpp
___________________________________________________________________
Name: svn:keywords
   + Id

Copied: trunk/src/OSCMDDialogBox.h (from rev 245, branches/mloskot-style-refactoring/src/OSCMDDialogBox.h)


Property changes on: trunk/src/OSCMDDialogBox.h
___________________________________________________________________
Name: svn:keywords
   + Id

Copied: trunk/src/OSCommandTypeInfo.cpp (from rev 245, branches/mloskot-style-refactoring/src/OSCommandTypeInfo.cpp)


Property changes on: trunk/src/OSCommandTypeInfo.cpp
___________________________________________________________________
Name: svn:keywords
   + Id

Copied: trunk/src/OSCommandTypeInfo.h (from rev 245, branches/mloskot-style-refactoring/src/OSCommandTypeInfo.h)


Property changes on: trunk/src/OSCommandTypeInfo.h
___________________________________________________________________
Name: svn:keywords
   + Id

Copied: trunk/src/OSConfigure.cpp (from rev 245, branches/mloskot-style-refactoring/src/OSConfigure.cpp)


Property changes on: trunk/src/OSConfigure.cpp
___________________________________________________________________
Name: svn:keywords
   + Id

Copied: trunk/src/OSConfigure.h (from rev 245, branches/mloskot-style-refactoring/src/OSConfigure.h)


Property changes on: trunk/src/OSConfigure.h
___________________________________________________________________
Name: svn:keywords
   + Id

Copied: trunk/src/OSFile.h (from rev 245, branches/mloskot-style-refactoring/src/OSFile.h)


Property changes on: trunk/src/OSFile.h
___________________________________________________________________
Name: svn:keywords
   + Id

Copied: trunk/src/OSFileList.cpp (from rev 245, branches/mloskot-style-refactoring/src/OSFileList.cpp)


Property changes on: trunk/src/OSFileList.cpp
___________________________________________________________________
Name: svn:keywords
   + Id

Copied: trunk/src/OSFileList.h (from rev 245, branches/mloskot-style-refactoring/src/OSFileList.h)


Property changes on: trunk/src/OSFileList.h
___________________________________________________________________
Name: svn:keywords
   + Id

Copied: trunk/src/OSFileListItem.cpp (from rev 245, branches/mloskot-style-refactoring/src/OSFileListItem.cpp)


Property changes on: trunk/src/OSFileListItem.cpp
___________________________________________________________________
Name: svn:keywords
   + Id

Copied: trunk/src/OSFileListItem.h (from rev 245, branches/mloskot-style-refactoring/src/OSFileListItem.h)


Property changes on: trunk/src/OSFileListItem.h
___________________________________________________________________
Name: svn:keywords
   + Id

Copied: trunk/src/OSFileTypeInfo.cpp (from rev 245, branches/mloskot-style-refactoring/src/OSFileTypeInfo.cpp)


Property changes on: trunk/src/OSFileTypeInfo.cpp
___________________________________________________________________
Name: svn:keywords
   + Id

Copied: trunk/src/OSFileTypeInfo.h (from rev 245, branches/mloskot-style-refactoring/src/OSFileTypeInfo.h)


Property changes on: trunk/src/OSFileTypeInfo.h
___________________________________________________________________
Name: svn:keywords
   + Id

Copied: trunk/src/OSFileTypeSymbol.cpp (from rev 245, branches/mloskot-style-refactoring/src/OSFileTypeSymbol.cpp)


Property changes on: trunk/src/OSFileTypeSymbol.cpp
___________________________________________________________________
Name: svn:keywords
   + Id

Copied: trunk/src/OSFileTypeSymbol.h (from rev 245, branches/mloskot-style-refactoring/src/OSFileTypeSymbol.h)


Property changes on: trunk/src/OSFileTypeSymbol.h
___________________________________________________________________
Name: svn:keywords
   + Id

Copied: trunk/src/OSFirstRunDialogBox.cpp (from rev 245, branches/mloskot-style-refactoring/src/OSFirstRunDialogBox.cpp)


Property changes on: trunk/src/OSFirstRunDialogBox.cpp
___________________________________________________________________
Name: svn:keywords
   + Id

Copied: trunk/src/OSFirstRunDialogBox.h (from rev 245, branches/mloskot-style-refactoring/src/OSFirstRunDialogBox.h)


Property changes on: trunk/src/OSFirstRunDialogBox.h
___________________________________________________________________
Name: svn:keywords
   + Id

Copied: trunk/src/OSInfoPanel.cpp (from rev 245, branches/mloskot-style-refactoring/src/OSInfoPanel.cpp)


Property changes on: trunk/src/OSInfoPanel.cpp
___________________________________________________________________
Name: svn:keywords
   + Id

Copied: trunk/src/OSInfoPanel.h (from rev 245, branches/mloskot-style-refactoring/src/OSInfoPanel.h)


Property changes on: trunk/src/OSInfoPanel.h
___________________________________________________________________
Name: svn:keywords
   + Id

Copied: trunk/src/OSMainWindow.cpp (from rev 245, branches/mloskot-style-refactoring/src/OSMainWindow.cpp)
===================================================================
--- branches/mloskot-style-refactoring/src/OSMainWindow.cpp	2006-02-12 13:43:28 UTC (rev 245)
+++ trunk/src/OSMainWindow.cpp	2006-02-12 15:36:06 UTC (rev 246)
@@ -0,0 +1,1317 @@
+#include &quot;config.h&quot;
+#include &lt;string&gt;
+#include &lt;vector&gt;
+#include &lt;map&gt;
+using namespace std;
+
+#include &quot;fx.h&quot; 
+// #include &quot;FXPNGIcon.h&quot;
+#include &quot;OSThreadExec.h&quot;
+#include &quot;OSFileList.h&quot;
+#include &quot;OSObjectManager.h&quot;
+#include &quot;OSMainWindow.h&quot;
+#include &quot;OSInfoPanel.h&quot;
+#include &quot;OSConfigure.h&quot;
+#include &quot;OSFileListItem.h&quot;
+
+#include &quot;OSFirstRunDialogBox.h&quot;
+
+#include &lt;sys/types.h&gt;
+#include &lt;sys/stat.h&gt;
+#include &lt;unistd.h&gt;
+#include &lt;dirent.h&gt;
+
+#ifdef WIN32
+#define SEPARATOR &quot;\\&quot;
+#else /*  */
+#include &lt;dlfcn.h&gt;
+#define SEPARATOR &quot;/&quot;
+#endif /*  */
+using namespace FX;
+FXDEFMAP ( OSMainWindow ) OSMainWindowMap[] =
+    {
+
+        //________Message_Type_____________________ID____________Message_Handler_______
+        FXMAPFUNC ( SEL_COMMAND, OSMainWindow::ID_DIRCH, OSMainWindow::onChangeDir ),
+        // FXMAPFUNC(SEL_ENTER, OSMainWindow::ID_DIRCH,   OSMainWindow::onListNextDir),
+        // FXMAPFUNC(SEL_LEAVE, OSMainWindow::ID_DIRCH,   OSMainWindow::onListNextDir),
+        FXMAPFUNC ( SEL_RIGHTBUTTONRELEASE, OSMainWindow::ID_DIR, OSMainWindow::onListDirs ),
+        FXMAPFUNC ( SEL_COMMAND, OSMainWindow::ID_DIR, OSMainWindow::onOpenDir ),
+        FXMAPFUNC ( SEL_COMMAND, OSMainWindow::ID_CONFIGURE, OSMainWindow::onOpenConfigure ),
+        FXMAPFUNC ( SEL_COMMAND, OSMainWindow::ID_ABOUT, OSMainWindow::onAbout ),
+        FXMAPFUNCS ( SEL_LEFTBUTTONRELEASE, OSMainWindow::ID_TOLEFT, OSMainWindow::ID_TORIGHT, OSMainWindow::onChangeList ),
+        FXMAPFUNCS ( SEL_COMMAND, OSMainWindow::ID_OVERWRITE, OSMainWindow::ID_SKIP_ALL, OSMainWindow::onOverwrite ),
+        FXMAPFUNC ( SEL_COMMAND, OSMainWindow::ID_NEWFRAME, OSMainWindow::onNewFrame ),
+        FXMAPFUNC ( SEL_COMMAND, OSMainWindow::ID_NEW_NETWORK, OSMainWindow::onNewNetworkFrame ),
+        FXMAPFUNC ( SEL_COMMAND, OSMainWindow::ID_NEW_SEARCH, OSMainWindow::onNewSearchFrame ),
+        FXMAPFUNCS ( SEL_COMMAND, 666, 668, OSMainWindow::onNotify ),
+        FXMAPFUNC ( SEL_TIMEOUT, OSMainWindow::ID_TIMER, OSMainWindow::onTimer ),
+        FXMAPFUNC ( SEL_COMMAND, OSMainWindow::ID_COMMANDS_SHOW, OSMainWindow::commandsShow ),
+        FXMAPFUNC ( SEL_CONFIGURE, 0, OSMainWindow::onConfigure ),
+        FXMAPFUNC ( SEL_COMMAND, OSMainWindow::ID_CANCEL, OSMainWindow::cancel ),
+        FXMAPFUNC ( SEL_UPDATE, 0, OSMainWindow::onUpdate ) };
+
+FXIMPLEMENT ( OSMainWindow, FXMainWindow, OSMainWindowMap, ARRAYNUMBER ( OSMainWindowMap ) )
+
+
+//-----MAIN WINDOW---------------------------------------------------------------------------------------------------------------------------
+OSMainWindow::OSMainWindow ( FXApp * a ) : FXMainWindow ( a, &quot;openspace&quot;, NULL, NULL, DECOR_ALL | LAYOUT_FIX_WIDTH, 0, 0, 600, 400, 0, 0 )
+{
+    conf = new OSConfigure ();
+
+    if ( conf-&gt;loadconfig() )
+    {
+        if ( conf-&gt;readonestring ( &quot;/OpenspaceConfig/version&quot; ) == PACKAGE_VERSION )
+        {
+
+
+            objmanager = OSObjectManager::instance( getApp() );
+
+            new FXToolTip ( getApp (), TOOLTIP_NORMAL );
+            pane = NULL;
+            filemenu = NULL;
+            pref = NULL;
+
+            string fontdesc = conf-&gt;readonestring ( &quot;/OpenspaceConfig/fonts/normalfont&quot; );
+            FXFont *font = new FXFont( getApp(), fontdesc.c_str() );
+            font-&gt;create();
+            getApp() -&gt;setNormalFont( font );
+
+
+            getApp() -&gt;setTypingSpeed( FXIntVal( conf-&gt;readonestring ( &quot;/OpenspaceConfig/speed_delay/typing_speed&quot; ).c_str () ) );
+            getApp() -&gt;setClickSpeed( FXIntVal( conf-&gt;readonestring ( &quot;/OpenspaceConfig/speed_delay/click_speed&quot; ).c_str () ) );
+            getApp() -&gt;setScrollSpeed( FXIntVal( conf-&gt;readonestring ( &quot;/OpenspaceConfig/speed_delay/scroll_speed&quot; ).c_str () ) );
+            getApp() -&gt;setScrollDelay( FXIntVal( conf-&gt;readonestring ( &quot;/OpenspaceConfig/speed_delay/scroll_delay&quot; ).c_str () ) );
+            getApp() -&gt;setBlinkSpeed( FXIntVal( conf-&gt;readonestring ( &quot;/OpenspaceConfig/speed_delay/blink_speed&quot; ).c_str () ) );
+            getApp() -&gt;setAnimSpeed( FXIntVal( conf-&gt;readonestring ( &quot;/OpenspaceConfig/speed_delay/anim_speed&quot; ).c_str () ) );
+            getApp() -&gt;setMenuPause( FXIntVal( conf-&gt;readonestring ( &quot;/OpenspaceConfig/speed_delay/menu_pause&quot; ).c_str () ) );
+            getApp() -&gt;setTooltipPause( FXIntVal( conf-&gt;readonestring ( &quot;/OpenspaceConfig/speed_delay/tooltip_pause&quot; ).c_str () ) );
+            getApp() -&gt;setTooltipTime( FXIntVal( conf-&gt;readonestring ( &quot;/OpenspaceConfig/speed_delay/tooltip_time&quot; ).c_str () ) );
+            getApp() -&gt;setDragDelta( FXIntVal( conf-&gt;readonestring ( &quot;/OpenspaceConfig/speed_delay/drag_delta&quot; ).c_str () ) );
+            getApp() -&gt;setWheelLines( FXIntVal( conf-&gt;readonestring ( &quot;/OpenspaceConfig/speed_delay/wheel_lines&quot; ).c_str () ) );
+
+            getApp() -&gt;setBaseColor( fxcolorfromname( conf-&gt;readonestring ( &quot;/OpenspaceConfig/colors/base&quot; ).c_str() ) );
+            getApp() -&gt;setBorderColor( fxcolorfromname( conf-&gt;readonestring ( &quot;/OpenspaceConfig/colors/border&quot; ).c_str() ) );
+            getApp() -&gt;setForeColor( fxcolorfromname( conf-&gt;readonestring ( &quot;/OpenspaceConfig/colors/fore&quot; ).c_str() ) );
+            getApp() -&gt;setHiliteColor( fxcolorfromname( conf-&gt;readonestring ( &quot;/OpenspaceConfig/colors/hilite&quot; ).c_str() ) );
+            getApp() -&gt;setShadowColor( fxcolorfromname( conf-&gt;readonestring ( &quot;/OpenspaceConfig/colors/shadow&quot; ).c_str() ) );
+            getApp() -&gt;setSelforeColor( fxcolorfromname( conf-&gt;readonestring ( &quot;/OpenspaceConfig/colors/selfore&quot; ).c_str() ) );
+            getApp() -&gt;setSelbackColor( fxcolorfromname( conf-&gt;readonestring ( &quot;/OpenspaceConfig/colors/selback&quot; ).c_str() ) );
+            getApp() -&gt;setTipforeColor( fxcolorfromname( conf-&gt;readonestring ( &quot;/OpenspaceConfig/colors/tipfore&quot; ).c_str() ) );
+            getApp() -&gt;setTipbackColor( fxcolorfromname( conf-&gt;readonestring ( &quot;/OpenspaceConfig/colors/tipback&quot; ).c_str() ) );
+            getApp() -&gt;setSelMenuTextColor( fxcolorfromname( conf-&gt;readonestring ( &quot;/OpenspaceConfig/colors/selmenutext&quot; ).c_str() ) );
+            getApp() -&gt;setSelMenuBackColor( fxcolorfromname( conf-&gt;readonestring ( &quot;/OpenspaceConfig/colors/selmenuback&quot; ).c_str() ) );
+
+            string iconsdir = conf-&gt;readonestring ( &quot;/OpenspaceConfig/path&quot; ) + &quot;icons/&quot; + conf-&gt;readonestring ( &quot;/OpenspaceConfig/icons_theme&quot; );
+
+            if ( !FXFile::exists( iconsdir.c_str() ) )
+                iconsdir = FXFile::getUserDirectory ( &quot;&quot; ).text () + string( &quot;/.openspace/icons/&quot; ) + conf-&gt;readonestring ( &quot;/OpenspaceConfig/icons_theme&quot; );
+
+            iconsdir += string( &quot;/&quot; );
+
+            loadicons( iconsdir );
+
+
+            string res = conf-&gt;readonestring ( &quot;/OpenspaceConfig/version&quot; );
+            FXTRACE ( ( 1, &quot;\n openspace version %s\n\n&quot;, res.c_str () ) );
+            int w = atoi ( conf-&gt;readonestring ( &quot;/OpenspaceConfig/mainwindow/width&quot; ).c_str () );
+            int h = atoi ( conf-&gt;readonestring ( &quot;/OpenspaceConfig/mainwindow/height&quot; ).c_str () );
+            resize ( w, h );
+
+            // read icons for file types
+            if ( conf-&gt;openxpath ( &quot;/OpenspaceConfig/file_types&quot; ) != -1 )
+            {
+                string res;
+                while ( conf-&gt;getnextnode ( res ) )
+                {
+                    loadMimeSettings ( &quot;/OpenspaceConfig/file_types/&quot; + res, res );
+                    OSConfigure conflocal = *conf;
+                    if ( conflocal.openxpath ( &quot;/OpenspaceConfig/file_types/&quot; + res + &quot;/types&quot; ) != -1 )
+                    {
+                        string res2;
+                        while ( conflocal.getnextnode ( res2 ) )
+                        {
+                            loadMimeSettings ( &quot;/OpenspaceConfig/file_types/&quot; + res + &quot;/types/&quot; + res2, res + &quot;/&quot; + res2 );
+                        }
+                    }
+                }
+            }
+
+
+
+
+            topdock = new FXDockSite ( this, LAYOUT_SIDE_TOP | LAYOUT_FILL_X );
+            bottomdock = new FXDockSite ( this, LAYOUT_SIDE_BOTTOM | LAYOUT_FILL_X );
+            leftdock = new FXDockSite ( this, LAYOUT_SIDE_LEFT | LAYOUT_FILL_Y );
+            rightdock = new FXDockSite ( this, LAYOUT_SIDE_RIGHT | LAYOUT_FILL_Y );
+
+
+
+            FXToolBarShell *dragshell1 = new FXToolBarShell ( this, FRAME_RAISED );
+            FXToolBar *toolbar = new FXToolBar ( topdock, dragshell1, LAYOUT_DOCK_NEXT | LAYOUT_SIDE_TOP | FRAME_RAISED );
+            new FXToolBarGrip ( toolbar, toolbar, FXToolBar::ID_TOOLBARGRIP, TOOLBARGRIP_SINGLE );
+
+
+
+
+            FXVerticalFrame *ff = new FXVerticalFrame ( this, LAYOUT_FILL_X | LAYOUT_FILL_Y );
+            controlframe = new FXVerticalFrame ( ff, LAYOUT_FILL_X | FRAME_THICK, 0, 0, 0, 0, 0, 0, 0, 0 );
+            splitter = new FXSplitter ( ff, LAYOUT_FILL_X | SPLITTER_TRACKING | LAYOUT_FILL_Y );
+            left = new FXVerticalFrame ( splitter, LAYOUT_FILL_X | LAYOUT_FILL_Y | FRAME_NONE, 0, 0, w / 2, 0, 0, 0, 0 );
+            right = new FXVerticalFrame ( splitter, LAYOUT_FILL_X | LAYOUT_FILL_Y | FRAME_NONE, 0, 0, w / 2, 0, 0, 0, 0 );
+            if ( conf-&gt;readonestring ( &quot;/OpenspaceConfig/panels&quot; ) == &quot;single&quot; )
+                ratio = 0;
+
+            else
+                ratio = 1.0 / 2.0;
+            leftcontrolframe = new FXVerticalFrame ( left, LAYOUT_FILL_X );
+            leftframe = new FXVerticalFrame ( left, LAYOUT_FILL_X | LAYOUT_FILL_Y );
+            rightcontrolframe = new FXVerticalFrame ( right, LAYOUT_FILL_X );
+            rightframe = new FXVerticalFrame ( right, LAYOUT_FILL_X | LAYOUT_FILL_Y );
+            //   FXHorizontalFrame * buttonsframe = new FXHorizontalFrame (toolbar, LAYOUT_FILL_X | FRAME_THICK, 0, 0, 0, 0, 0, 0, 0, 0);
+            new FXButton ( toolbar, &quot;\thide/show copy/move progress&quot;, objmanager-&gt;osicons[ &quot;plus&quot; ], this, OSMainWindow::ID_COMMANDS_SHOW, FRAME_THICK, 0, 0, 0, 0, 0, 0, 0, 0 );
+            new FXButton ( toolbar, &quot;\topen new panel&quot;, objmanager-&gt;osicons[ &quot;directory&quot; ], this, OSMainWindow::ID_NEWFRAME, FRAME_THICK, 0, 0, 0, 0, 0, 0, 0, 0 );
+            new FXButton ( toolbar, &quot;\tconnect&quot;, objmanager-&gt;osicons[ &quot;network&quot; ], this, OSMainWindow::ID_NEW_NETWORK, FRAME_THICK, 0, 0, 0, 0, 0, 0, 0, 0 );
+            new FXButton ( toolbar, &quot;\tsearch&quot;, objmanager-&gt;osicons[ &quot;search&quot; ], this, OSMainWindow::ID_NEW_SEARCH, FRAME_THICK, 0, 0, 0, 0, 0, 0, 0, 0 );
+
+            new FXSeparator ( toolbar, SEPARATOR_NONE );
+            new FXSeparator ( toolbar, SEPARATOR_GROOVE );
+            new FXSeparator ( toolbar, SEPARATOR_NONE );
+
+            new FXButton ( toolbar, &quot;\tconfiguration&quot;, objmanager-&gt;osicons[ &quot;configure&quot; ], this, OSMainWindow::ID_CONFIGURE, FRAME_THICK, 0, 0, 0, 0, 0, 0, 0, 0 );
+            new FXButton ( toolbar, &quot;\tabout&quot;, objmanager-&gt;osicons[ &quot;foxmini&quot; ], this, OSMainWindow::ID_ABOUT, FRAME_THICK, 0, 0, 0, 0, 0, 0, 0, 0 );
+            toolbar-&gt;dock( rightdock );
+
+            string dir = parseDir ( conf-&gt;readonestring ( &quot;/OpenspaceConfig/leftdir/dir&quot; ) );
+            string type = conf-&gt;readonestring ( &quot;/OpenspaceConfig/leftdir/type&quot; );
+            OSPathType pt ( dir, type );
+            left_frame = new Frame ( leftcontrolframe, leftframe, pt, this, -1 );
+            left_frame-&gt;f-&gt;toolbar-&gt;dock( topdock );
+            left_frame-&gt;f-&gt;toolbar-&gt;hide();
+            left_frame-&gt;f-&gt;toolbar2-&gt;dock( rightdock );
+            left_frame-&gt;f-&gt;toolbar2-&gt;hide();
+
+            dir = parseDir ( conf-&gt;readonestring ( &quot;/OpenspaceConfig/rightdir/dir&quot; ) );
+            type = conf-&gt;readonestring ( &quot;/OpenspaceConfig/rightdir/type&quot; );
+            OSPathType pt2 ( dir, type );
+            right_frame = new Frame ( rightcontrolframe, rightframe, pt2, this, -1 );
+
+            right_frame-&gt;f-&gt;toolbar-&gt;dock( topdock );
+            right_frame-&gt;f-&gt;toolbar2-&gt;dock( rightdock );
+
+            left_frame-&gt;f-&gt;filelist_opposite = right_frame-&gt;f;
+            right_frame-&gt;f-&gt;filelist_opposite = left_frame-&gt;f;
+            infoframe = new FXVerticalFrame ( ff, LAYOUT_FILL_X );
+            networkframe = NULL;
+            searchframe = NULL;
+            getApp () -&gt;addTimeout ( this, ID_TIMER, 200 );
+
+            if ( conf-&gt;readonestring ( &quot;/OpenspaceConfig/first_run&quot; ) == &quot;true&quot; )
+            {
+                conf-&gt;saveonestring ( &quot;/OpenspaceConfig/first_run&quot;, &quot;false&quot; );
+
+                OSFirstRunDialogBox* first_run;
+                first_run = new OSFirstRunDialogBox( this );
+                first_run-&gt;show ( PLACEMENT_SCREEN );
+            }
+        }
+        else
+        {
+            new FXLabel( this, &quot;Configuration file version mismatch&quot; );
+            new FXLabel( this, &quot;Please remove .openspace/openspacerc file in your home directory&quot; );
+            conf-&gt;loadconfig( true );
+            delete conf;
+            conf = NULL;
+        }
+    }
+    else //configuration file broken
+    {
+
+        new FXLabel( this, &quot;Configuration file is broken :|&quot; );
+        new FXLabel( this, &quot;Restoring last good configuation file, restart program to apply changes&quot; );
+
+        conf-&gt;loadconfig( true );
+        delete conf;
+        conf = NULL;
+    }
+
+}
+
+
+//----------------------------------------------------
+// open configure window
+long OSMainWindow::onOpenConfigure ( FXObject * sender, FXSelector sel, void * )
+{
+    if ( pref == NULL )
+    {
+        pref = new OSPreferences ( this );
+        pref-&gt;create();
+    }
+    pref-&gt;show ( PLACEMENT_OWNER );
+}
+
+
+//about
+long OSMainWindow::onAbout ( FXObject * sender, FXSelector sel, void * )
+{
+
+    string msg = &quot;Openspace File Browser &quot; + string( PACKAGE_VERSION ) + &quot;\n\nby Mateusz Dworak (<A HREF="http://openspace.linux.pl">http://openspace.linux.pl</A>)\n\nUsing the FOX C++ GUI Library (<A HREF="http://www.fox-tookit.org">http://www.fox-tookit.org</A>) \n\n icons by Dawn Simon&quot;;
+
+    FXMessageBox about ( this, &quot;About Openspace&quot;, msg.c_str(), objmanager-&gt;osicons[ &quot;foxbig&quot; ], MBOX_OK | DECOR_TITLE | DECOR_BORDER );
+    about.execute ();
+}
+
+
+
+
+//new frame
+long OSMainWindow::onNewFrame ( FXObject * sender, FXSelector, void *ptr )
+{
+    string dir;
+    string type;
+    string str_server;
+    string str_user;
+    string str_pass;
+    string str_port;
+    if ( networkframe == NULL &amp;&amp; searchframe == NULL )
+    {
+        dir = parseDir ( conf-&gt;readonestring ( &quot;/OpenspaceConfig/defaultdir/dir&quot; ) );
+        type = conf-&gt;readonestring ( &quot;/OpenspaceConfig/defaultdir/type&quot; );
+    }
+    else
+    {
+
+
+        if ( networkframe == NULL )  //search
+        {
+
+
+            string s_size_greater = search_size_greater-&gt;getText().text();
+            string s_size_less = search_size_less-&gt;getText().text();
+            string s_dir = search_path-&gt;getText().text();
+            string s_filter = search_filefilter-&gt;getText().text();
+
+            str_server = &quot;find &quot; + s_dir;
+
+            if ( s_filter != &quot;&quot; )
+                str_server += &quot; -name \&quot;&quot; + s_filter + &quot;\&quot;&quot; ;
+            if ( s_size_greater != &quot;&quot; )
+                str_server += &quot; -size +&quot; + s_size_greater + &quot;k&quot; ;
+            if ( s_size_less != &quot;&quot; )
+                str_server += &quot; -size -&quot; + s_size_less + &quot;k&quot; ;
+
+
+            dir = &quot;/&quot;;
+            type = &quot;search&quot;;
+
+            searchframe-&gt;hide ();
+            delete searchframe;
+            searchframe = NULL;
+        }
+        else            //network
+        {
+            dir = &quot;/&quot;;
+            type = filelisttypecombobox-&gt;getText().text();
+            str_server = server-&gt;getText ().text ();
+            str_user = user-&gt;getText ().text ();
+            str_pass = password-&gt;getText ().text ();
+            str_port = port-&gt;getText().text();
+            networkframe-&gt;hide ();
+            delete networkframe;
+            networkframe = NULL;
+        }
+
+
+        controlframe-&gt;recalc ();
+    }
+    OSPathType pt ( dir, type, str_server, str_user, str_pass, str_port );
+    Frame *fr = new Frame ( controlframe, leftframe, pt, this, 0 );
+
+    fr-&gt;frame-&gt;create ();
+    fr-&gt;hf-&gt;create ();
+    fr-&gt;f-&gt;toolbar-&gt;dock( topdock );
+    fr-&gt;f-&gt;toolbar-&gt;hide();
+    fr-&gt;f-&gt;toolbar2-&gt;dock( rightdock );
+    fr-&gt;f-&gt;toolbar2-&gt;hide();
+
+
+    this-&gt;handle ( fr-&gt;toleft, FXSEL ( SEL_LEFTBUTTONRELEASE, ID_TOLEFT ), NULL );
+
+    controlframe-&gt;recalc ();
+}
+
+
+//show or hide frame where we can set login/pass/etc for connecting do remote filesystem
+long OSMainWindow::onNewNetworkFrame ( FXObject * sender, FXSelector, void * )
+{
+    if ( networkframe == NULL )
+    {
+        networkframe = new FXHorizontalFrame ( controlframe, LAYOUT_FILL_X | FRAME_THICK, 0, 0, 0, 0, 0, 0, 0, 0 );
+        new FXLabel ( networkframe, &quot;server:&quot; );
+        server = new FXTextField ( networkframe, 20 );
+        new FXLabel ( networkframe, &quot;user:&quot;, objmanager-&gt;osicons[ &quot;user&quot; ] );
+        user = new FXTextField ( networkframe, 20 );
+        new FXLabel ( networkframe, &quot;pass:&quot;, objmanager-&gt;osicons[ &quot;password&quot; ] );
+        password = new FXTextField ( networkframe, 20, NULL, 0, TEXTFIELD_PASSWD | FRAME_SUNKEN | FRAME_THICK );
+        new FXLabel ( networkframe, &quot;port:&quot;, NULL, 0, TEXTFIELD_INTEGER );
+        port = new FXTextField ( networkframe, 5 );
+
+        filelisttypecombobox = new FXComboBox ( networkframe, 4, NULL, 0,
+                                                FRAME_THICK | LAYOUT_SIDE_TOP | COMBOBOX_STATIC );
+
+        int count = 0;
+        if ( conf-&gt;openxpath ( &quot;/OpenspaceConfig/filelist&quot; ) != -1 )
+        {
+            string res;
+            while ( conf-&gt;getnextnode ( res ) )
+            {
+                string filelist_type = conf-&gt;readonestring ( &quot;/OpenspaceConfig/filelist/&quot; + res + &quot;/type&quot; );
+
+                if ( filelist_type == &quot;network&quot; )
+                {
+                    filelisttypecombobox-&gt;appendItem ( res.c_str() );
+                    count++;
+                }
+            }
+        }
+
+
+        filelisttypecombobox-&gt;setNumVisible ( count );
+
+        new FXButton ( networkframe, &quot;connect&quot;, NULL, this, OSMainWindow::ID_NEWFRAME, FRAME_RAISED, 0, 0, 0, 0, 0, 0, 0, 0 );
+        networkframe-&gt;create ();
+        networkframe-&gt;recalc ();
+    }
+
+    else
+    {
+        networkframe-&gt;hide ();
+        delete networkframe;
+        networkframe = NULL;
+        controlframe-&gt;recalc ();
+    }
+}
+
+
+long OSMainWindow::onNewSearchFrame ( FXObject * sender, FXSelector, void * )
+{
+    if ( searchframe == NULL )
+    {
+        searchframe = new FXHorizontalFrame ( controlframe, LAYOUT_FILL_X | FRAME_THICK, 0, 0, 0, 0, 0, 0, 0, 0 );
+        new FXLabel ( searchframe, &quot;path: &quot; );
+        search_path = new FXTextField ( searchframe, 20 );
+        if ( left_frame-&gt;f-&gt;active )
+            search_path-&gt;setText( left_frame-&gt;f-&gt;path.c_str() );
+        else
+            search_path-&gt;setText( right_frame-&gt;f-&gt;path.c_str() );
+        new FXLabel ( searchframe, &quot;size&quot; );
+        new FXLabel ( searchframe, &quot;greater than(KB):&quot; );
+        search_size_greater = new FXTextField ( searchframe, 10 );
+        new FXLabel ( searchframe, &quot;less than(KB):&quot; );
+        search_size_less = new FXTextField ( searchframe, 10 );
+
+
+        new FXLabel ( searchframe, &quot;file filter: &quot; );
+        search_filefilter = new FXTextField ( searchframe, 20 );
+        search_filefilter-&gt;setText( &quot;*&quot; );
+        new FXButton ( searchframe, &quot;search&quot;, NULL, this, OSMainWindow::ID_NEWFRAME, FRAME_RAISED, 0, 0, 0, 0, 0, 0, 0, 0 );
+        searchframe-&gt;create ();
+        searchframe-&gt;recalc ();
+    }
+
+    else
+    {
+        searchframe-&gt;hide ();
+        delete searchframe;
+        searchframe = NULL;
+        controlframe-&gt;recalc ();
+    }
+}
+
+
+//----------------------------------------------------
+OSMainWindow::~OSMainWindow ()
+{
+    delete pref;
+    delete conf;
+}
+
+
+//----------------------------------------------------
+void OSMainWindow::create ()
+{
+    FXMainWindow::create ();
+    string position;
+    if ( conf )
+        position = conf-&gt;readonestring ( &quot;/OpenspaceConfig/position&quot; );
+
+    if ( position == &quot;cursor&quot; )
+        show ( PLACEMENT_CURSOR );
+    else
+        show ( PLACEMENT_SCREEN );
+}
+
+//----------------------------------------------------
+//show or hide frame containing informaitions about copying/moving files
+long OSMainWindow::commandsShow ( FXObject * sender, FXSelector, void *ptr )
+{
+    if ( infoframe-&gt;shown () )
+        infoframe-&gt;hide ();
+
+    else
+        infoframe-&gt;show ();
+}
+
+
+//executed when we change directory clicking directory name in popoup window
+long OSMainWindow::onChangeDir ( FXObject * sender, FXSelector, void *ptr )
+{
+    OSFileList * fil = current_frame-&gt;f;
+    FXTRACE ( ( 5, &quot;CHANGE DIR\n&quot;, fil-&gt;path.c_str () ) );
+    FXMenuCommand *mc = ( FXMenuCommand * ) sender;
+    FXEvent *event = ( FXEvent * ) ptr;
+    FXWindow *win = ( FXWindow * ) mc-&gt;getParent ();
+    int x = win-&gt;getX ();
+    int y = win-&gt;getY ();
+    string p = fil-&gt;path;
+    string current_path = p;
+
+    if ( current_path != &quot;/&quot; )
+        current_path.append ( SEPARATOR );
+
+    current_path.append ( mc-&gt;getText ().text () );
+    current_frame-&gt;f-&gt;path = current_path;
+    current_frame-&gt;f-&gt;opendir ( current_path );
+    current_frame-&gt;generate_menu ( current_path, this );
+    popupDir ( current_frame-&gt;f, current_path, x, y );
+}
+
+//popup with dir names when we click right button in dir path
+int OSMainWindow::popupDir ( OSFileList * current_filelist, string path, int x, int y )
+{
+    vector &lt; string &gt; vec;
+    for ( int i = 0; i &lt; current_filelist-&gt;getNumItems (); i++ )
+    {
+        OSFileListItem *oslistitem = ( OSFileListItem * ) current_filelist-&gt;getItem ( i );
+        if ( oslistitem-&gt;osf.type &amp; FOLDER )
+        {
+            string name = oslistitem-&gt;osf.name;
+            if ( name != &quot;.&quot; &amp;&amp; name != &quot;..&quot; &amp;&amp; name[ 0 ] != '.' )
+                vec.push_back ( name );
+        }
+    }
+
+    /*
+     
+        if(current_filelist-&gt;fb-&gt;osopendir(path)==-1)
+        {
+        return 0;
+        }
+     
+     
+     
+     
+     
+        while(1)
+        {
+        osfile os_file=current_filelist-&gt;fb-&gt;osreaddir();
+            if(os_file.name==&quot;&quot;)
+            break;
+        
+            if(os_file.type&amp;FOLDER &amp;&amp; os_file.name!=&quot;.&quot; &amp;&amp; os_file.name!=&quot;..&quot;)
+            vec.push_back (os_file.name);       
+        }
+     
+    */
+    unsigned int indx;
+    if ( vec.size () &gt; 0 )
+    {
+        sort ( vec.begin (), vec.end () );
+        if ( filemenu )
+        {
+            filemenu-&gt;popdown ();
+            delete filemenu;
+            filemenu = NULL;
+        }
+        filemenu = new FXMenuPane ( this );
+        for ( indx = 0; indx &lt; vec.size (); indx++ )
+        {
+            new FXMenuCommand ( filemenu, vec[ indx ].c_str (), objmanager-&gt;osicons[ &quot;directory&quot; ], this, OSMainWindow::ID_DIRCH );
+        }
+        filemenu-&gt;create ();
+        filemenu-&gt;popup ( NULL, x, y, 0, 0 );
+    }
+}
+
+
+//currently nothing ;p
+long OSMainWindow::onListNextDir ( FXObject * sender, FXSelector sel, void *ptr )
+{}
+
+//popup with directory names when we click right button in path
+long OSMainWindow::onListDirs ( FXObject * sender, FXSelector, void *ptr )
+{
+    FXTRACE ( ( 5, &quot;LIST DIRS\n&quot; ) );
+    FXButton *bt = ( FXButton * ) sender;
+    box *boxel = ( box * ) bt-&gt;getUserData ();
+    box *boxbackup = boxel;
+    current_frame = boxel-&gt;fr;
+    if ( boxel-&gt;fr != right_frame &amp;&amp; boxel-&gt;fr != left_frame )
+        return 0;
+    string path = &quot;&quot;;
+    while ( boxel-&gt;prebutton != NULL )
+    {
+        boxel = ( box * ) boxel-&gt;prebutton-&gt;getUserData ();
+    }
+    while ( boxel != NULL )
+    {
+        if ( boxel == boxbackup )
+        {
+            path.append ( boxel-&gt;bt-&gt;getText ().text () );
+            break;
+        }
+        path.append ( boxel-&gt;bt-&gt;getText ().text () );
+        boxel = ( box * ) boxel-&gt;nextbutton-&gt;getUserData ();
+    }
+    current_frame-&gt;f-&gt;path = path;
+    current_frame-&gt;f-&gt;opendir ( path );
+    FXEvent *event = ( FXEvent * ) ptr;
+    int x = event-&gt;root_x;
+    int y = event-&gt;root_y;
+    popupDir ( current_frame-&gt;f, path, x, y );
+}
+
+//change position or close frame
+long OSMainWindow::onChangeList ( FXObject * sender, FXSelector sel, void *ptr )
+{
+    FXButton * bt = ( FXButton * ) sender;
+    box *boxel = ( box * ) bt-&gt;getUserData ();
+    FXushort id = FXSELID ( sel );
+    int pos = -1;
+    if ( id == ID_TOCLOSE )
+    {
+        bool canclose = true;
+
+        vector &lt; OSThreadExec * &gt;::iterator iter;
+        for ( iter = objmanager-&gt;thread_vec.begin (); iter != objmanager-&gt;thread_vec.end (); iter++ )
+        {
+            OSThreadExec *telem = *iter;
+            if ( telem-&gt;fb == boxel-&gt;fr-&gt;f-&gt;fb )
+            {
+                canclose = false;
+            }
+        }
+        if ( canclose )
+        {
+
+            boxel-&gt;fr-&gt;f-&gt;fb-&gt;quit ();
+            delete boxel-&gt;fr-&gt;hf;
+            delete boxel-&gt;fr-&gt;f-&gt;toolbar;
+            delete boxel-&gt;fr-&gt;f-&gt;toolbar2;
+            delete boxel-&gt;fr-&gt;frame;
+            sender = NULL;
+
+        }
+        else
+        {
+            FXMessageBox about ( this, &quot;error&quot;, &quot;There are some processes connected with this filelist,\n finish them all and then you can close this filelist\n(this behavior will change in the next release of program)&quot;, NULL, MBOX_OK | DECOR_TITLE | DECOR_BORDER );
+            about.execute ();
+
+        }
+
+        return 1;
+
+    }
+
+    else
+    {
+        if ( id == ID_TORIGHT )
+        {
+            pos = 1;
+        }
+
+        if ( left_frame-&gt;f-&gt;getWidth() == 0 )
+            pos = 1;
+
+        if ( right_frame-&gt;f-&gt;getWidth() == 0 )
+            pos = -1;
+
+
+    }
+    if ( pos == -1 )
+    {
+        boxel-&gt;fr-&gt;frame-&gt;reparent ( leftframe );
+        boxel-&gt;fr-&gt;hf-&gt;reparent ( leftcontrolframe );
+        left_frame-&gt;hf-&gt;reparent ( controlframe );
+        left_frame-&gt;f-&gt;toolbar-&gt;hide();
+        left_frame-&gt;f-&gt;toolbar2-&gt;hide();
+        left_frame-&gt;toleft-&gt;show ();
+        left_frame-&gt;toright-&gt;show ();
+        left_frame-&gt;toclose-&gt;show ();
+        left_frame-&gt;frame-&gt;hide ();
+        left_frame = boxel-&gt;fr;
+        left_frame-&gt;frame-&gt;show ();
+
+    }
+
+    else
+    {
+        boxel-&gt;fr-&gt;frame-&gt;reparent ( rightframe );
+        boxel-&gt;fr-&gt;hf-&gt;reparent ( rightcontrolframe );
+        right_frame-&gt;hf-&gt;reparent ( controlframe );
+        right_frame-&gt;f-&gt;toolbar-&gt;hide();
+        right_frame-&gt;f-&gt;toolbar2-&gt;hide();
+        right_frame-&gt;toleft-&gt;show ();
+        right_frame-&gt;toright-&gt;show ();
+        right_frame-&gt;toclose-&gt;show ();
+        right_frame-&gt;frame-&gt;hide ();
+        right_frame = boxel-&gt;fr;
+        right_frame-&gt;frame-&gt;show ();
+    }
+    left_frame-&gt;f-&gt;filelist_opposite = right_frame-&gt;f;
+    right_frame-&gt;f-&gt;filelist_opposite = left_frame-&gt;f;
+    boxel-&gt;fr-&gt;toleft-&gt;hide ();
+    boxel-&gt;fr-&gt;toright-&gt;hide ();
+    boxel-&gt;fr-&gt;toclose-&gt;hide ();
+    boxel-&gt;fr-&gt;f-&gt;handle ( this, FXSEL ( SEL_FOCUSIN, OSFileList::ID_ICO ), NULL );
+
+    rightframe-&gt;recalc ();
+    leftframe-&gt;recalc ();
+}
+
+
+//notify from filelist
+long OSMainWindow::onNotify ( FXObject * sender, FXSelector sel, void *ptr )
+{
+    FXTRACE ( ( 5, &quot;NOTIFY\n&quot; ) );
+    FXushort id = FXSELID ( sel );
+    if ( id == 667 )
+    {
+        string * file_ptr = ( string * ) ptr;
+        string file = *file_ptr;
+        FXTRACE ( ( 5, &quot;change to directory %s\n&quot;, file.c_str () ) );
+        delete file_ptr;
+        string dir;
+        string type;
+        string str_server = file;
+        dir = &quot;/&quot;;
+        type = &quot;archive&quot;;
+        OSPathType pt ( dir, type, str_server );
+        Frame *fr;
+        if ( left_frame-&gt;f-&gt;active )
+            fr = new Frame ( leftcontrolframe, leftframe, pt, this, -1 );
+
+        else
+            fr = new Frame ( rightcontrolframe, rightframe, pt, this, -1 );
+        if ( left_frame-&gt;f-&gt;active )
+        {
+            left_frame-&gt;hf-&gt;reparent ( controlframe );
+            left_frame-&gt;toleft-&gt;show ();
+            left_frame-&gt;toright-&gt;show ();
+            left_frame-&gt;toclose-&gt;show ();
+            left_frame-&gt;frame-&gt;hide ();
+            left_frame-&gt;f-&gt;toolbar-&gt;hide();
+            left_frame-&gt;f-&gt;toolbar2-&gt;hide();
+            left_frame = fr;
+
+        }
+
+        else
+        {
+            right_frame-&gt;hf-&gt;reparent ( controlframe );
+            right_frame-&gt;toleft-&gt;show ();
+            right_frame-&gt;toright-&gt;show ();
+            right_frame-&gt;toclose-&gt;show ();
+            right_frame-&gt;frame-&gt;hide ();
+            right_frame-&gt;f-&gt;toolbar-&gt;hide();
+            right_frame-&gt;f-&gt;toolbar2-&gt;hide();
+            right_frame = fr;
+
+
+        }
+        controlframe-&gt;recalc ();
+        fr-&gt;frame-&gt;create ();
+        fr-&gt;hf-&gt;create ();
+        fr-&gt;frame-&gt;show ();
+        fr-&gt;f-&gt;toolbar-&gt;dock( topdock );
+        fr-&gt;f-&gt;toolbar2-&gt;dock( rightdock );
+
+        left_frame-&gt;f-&gt;filelist_opposite = right_frame-&gt;f;
+        right_frame-&gt;f-&gt;filelist_opposite = left_frame-&gt;f;
+
+        if ( left_frame-&gt;f-&gt;active )
+            left_frame-&gt;f-&gt;handle ( this, FXSEL ( SEL_FOCUSIN, OSFileList::ID_ICO ), NULL );
+        else
+            right_frame-&gt;f-&gt;handle ( this, FXSEL ( SEL_FOCUSIN, OSFileList::ID_ICO ), NULL );
+
+        rightframe-&gt;recalc ();
+        leftframe-&gt;recalc ();
+    }
+
+    else if ( id == 666 )       //directory change, for example user clicked double on direcotry, or clicked with 3rd button to go to parent dir
+    {
+        if ( left_frame-&gt;f-&gt;active )
+            left_frame-&gt;generate_menu ( left_frame-&gt;f-&gt;path, this );
+
+        else
+            right_frame-&gt;generate_menu ( right_frame-&gt;f-&gt;path, this );
+    }
+
+    else if ( id == 668 )
+    {
+        if ( left-&gt;getWidth () == 0 || right-&gt;getWidth () == 0 )
+            left-&gt;setWidth ( getWidth () / 2 );
+
+        else
+        {
+            if ( left_frame-&gt;f == ( OSFileList * ) sender )
+                left-&gt;setWidth ( right-&gt;getWidth () + left-&gt;getWidth () );
+
+            else
+                left-&gt;setWidth ( 0 );
+        }
+    }
+}
+
+
+//pressed button in path
+long OSMainWindow::onOpenDir ( FXObject * sender, FXSelector, void *ptr )
+{
+    FXTRACE ( ( 5, &quot;OPEN DIR\n&quot; ) );
+    FXButton *bt = ( FXButton * ) sender;
+    box *boxel = ( box * ) bt-&gt;getUserData ();
+    box *boxbackup = boxel;
+    if ( boxel-&gt;fr != right_frame &amp;&amp; boxel-&gt;fr != left_frame )
+        return 0;
+    string path = &quot;&quot;;
+    while ( boxel-&gt;prebutton != NULL )
+    {
+        boxel = ( box * ) boxel-&gt;prebutton-&gt;getUserData ();
+    }
+    while ( boxel != NULL )
+    {
+        if ( boxel == boxbackup )
+        {
+            break;
+        }
+        path.append ( boxel-&gt;bt-&gt;getText ().text () );
+        boxel = ( box * ) boxel-&gt;nextbutton-&gt;getUserData ();
+    }
+    if ( path == &quot;&quot; )
+        path = &quot;/&quot;;
+    boxbackup-&gt;fr-&gt;f-&gt;path = path;
+    boxbackup-&gt;fr-&gt;f-&gt;opendir ( path );
+    boxbackup-&gt;fr-&gt;generate_menu ( path, this );
+}
+
+
+//executed cyclically to update informations about progress of copying/moving/deleteing files
+//using vector of special objects OSThreadExec to read from them information and to write request
+//for example stoping copying.
+long OSMainWindow::onTimer ( FXObject *, FXSelector, void * )
+{
+    vector &lt; OSThreadExec * &gt;::iterator iter;
+    unsigned int indx;
+    for ( iter = objmanager-&gt;thread_vec.begin (); iter != objmanager-&gt;thread_vec.end (); iter++ )
+    {
+        bool end = false;
+        OSInfoPanel *infp;
+        OSThreadExec *telem = *iter;
+        if ( telem-&gt;mutex.trylock () )
+        {
+            if ( telem-&gt;gui == NULL )
+            {
+                infp = new OSInfoPanel ( infoframe, telem-&gt;command );
+                telem-&gt;gui = ( void * ) infp;
+                if ( telem-&gt;command == &quot;copy&quot; || telem-&gt;command == &quot;move&quot; || telem-&gt;command == &quot;remove&quot; )
+                {
+                    infp-&gt;bu-&gt;setUserData ( telem );
+                    infp-&gt;bu-&gt;setSelector ( OSMainWindow::ID_CANCEL );
+                    infp-&gt;bu-&gt;setTarget ( this );
+                }
+
+                else if ( telem-&gt;command == &quot;execute&quot; )
+                {
+                    string show_commands = conf-&gt;readonestring ( &quot;/OpenspaceConfig/show_commands&quot; );
+                    if ( show_commands == &quot;true&quot; )
+                    {
+                        FXFont * font = new FXFont ( getApp (), &quot;Arial&quot;, 8 );
+                        if ( font )
+                        {
+                            font-&gt;create ();
+                            infp-&gt;lab0-&gt;setFont ( font );
+                        }
+                        infp-&gt;lab0-&gt;setText ( telem-&gt;src[ 0 ].c_str () );
+                        infp-&gt;frame-&gt;recalc ();
+                    }
+
+                    else
+                        infp-&gt;frame-&gt;hide ();
+                }
+
+                else if ( telem-&gt;command == &quot;init&quot; )
+                {
+                    string text = &quot;connecting ... &quot;;
+                    infp-&gt;lab0-&gt;setText ( text.c_str () );
+                    infp-&gt;frame-&gt;recalc ();
+                }
+            }
+            //popup with question about skipping or overwriting file
+            if ( telem-&gt;question == true )
+            {
+                telem-&gt;question = false;
+                telem-&gt;pane = new FXMenuPane ( this );
+                FXButton *but = new FXButton ( telem-&gt;pane, &quot;overwrite&quot;, NULL, this,
+                                               ID_OVERWRITE );
+                but-&gt;setUserData ( telem );
+                but = new FXButton ( telem-&gt;pane, &quot;skip&quot;, NULL, this, ID_SKIP );
+                but-&gt;setUserData ( telem );
+                but = new FXButton ( telem-&gt;pane, &quot;skip all&quot;, NULL, this, ID_SKIP_ALL );
+                but-&gt;setUserData ( telem );
+                but = new FXButton ( telem-&gt;pane, &quot;overwrite all&quot;, NULL, this, ID_OVERWRITE_ALL );
+                but-&gt;setUserData ( telem );
+                telem-&gt;pane-&gt;create ();
+                telem-&gt;pane-&gt;popup ( NULL, this-&gt;getX () + 300, this-&gt;getY () + 300, but-&gt;getWidth (), 100 );
+            }
+            //when command is copy or move update information about progress
+            if ( telem-&gt;command == &quot;copy&quot; || telem-&gt;command == &quot;move&quot; )
+            {
+                infp = ( OSInfoPanel * ) telem-&gt;gui;
+                string info = &quot;total size: &quot; + numtostring ( telem-&gt;total_size );
+                infp-&gt;lab0-&gt;setText ( info.c_str () );
+                info = &quot;Current file: &quot; + telem-&gt;act_file_name + &quot; size: &quot; + numtostring ( telem-&gt;file_size );
+                infp-&gt;lab1-&gt;setText ( info.c_str () );
+                double pct2 = 100 * ( double ) telem-&gt;act_total_size / ( double ) telem-&gt;total_size;
+                infp-&gt;pbar2-&gt;setProgress ( ( int ) pct2 );
+                double pct = 100 * ( double ) telem-&gt;act_file_size / ( double ) telem-&gt;file_size;
+                infp-&gt;pbar-&gt;setProgress ( ( int ) pct );
+                double diff = difftime ( time ( NULL ), *telem-&gt;tim );
+                info = &quot;time elapsed: &quot; + ntos ( ( unsigned int ) diff ) + &quot; copied size: &quot;;
+                info.append ( numtostring ( telem-&gt;act_file_size ) );
+                if ( diff == 0 )
+                    diff = 0.001;
+                double speed = ( double ) telem-&gt;act_total_size / diff;
+                info.append ( &quot; Speed: &quot; + numtostring ( ( unsigned int ) speed ) + &quot;/s&quot; );
+                unsigned int eta = ( unsigned int ) ( ( diff * ( double ) telem-&gt;total_size ) / ( double ) telem-&gt;act_total_size );
+                eta = eta - ( unsigned int ) diff;
+                info.append ( &quot; ETA: &quot; + ntos ( eta ) );
+                infp-&gt;lab2-&gt;setText ( info.c_str () );
+            }
+
+            else if ( telem-&gt;command == &quot;remove&quot; )
+            {
+                infp = ( OSInfoPanel * ) telem-&gt;gui;
+                string info = &quot;Removing: &quot; + telem-&gt;act_file_name;
+                //FXTRACE ((5, &quot;remove file %s\n&quot;, telem-&gt;act_file_name.c_str ()));
+                infp-&gt;lab0-&gt;setText ( info.c_str () );
+                infp-&gt;frame-&gt;recalc ();
+            }
+
+            else if ( telem-&gt;command == &quot;execute&quot; )
+            {
+                string::size_type pos = telem-&gt;options.find ( &quot;capture&quot; );
+                if ( pos != string::npos )
+                {
+                    char readbuf[ 80 ];
+                    int k = 0;
+                    while ( read ( telem-&gt;p[ 0 ], readbuf, 1 ) &gt; 0 &amp;&amp; k++ &lt; 2000 )
+                    {
+                        string s = &quot;&quot;;
+                        s = s + readbuf[ 0 ];
+                        if ( s == &quot;!&quot; )
+                            telem-&gt;end = true;
+
+                        else
+                            telem-&gt;dst = telem-&gt;dst + readbuf[ 0 ];
+                    }
+                }
+            }
+            end = telem-&gt;end;
+            telem-&gt;mutex.unlock ();
+            if ( end )      //when telem ended
+            {
+
+                if ( telem-&gt;error )
+                {
+                    FXMessageBox about ( this, &quot;error&quot;, telem-&gt;msg.c_str(), NULL, MBOX_OK | DECOR_TITLE | DECOR_BORDER );
+                    about.execute ();
+                }
+                OSFileList *fil = ( OSFileList* ) telem-&gt;filel;
+
+                string::size_type pos = telem-&gt;options.find ( &quot;download&quot; );
+                bool download = false;
+                if ( pos != string::npos )
+                {
+                    download = true;
+
+                }
+
+                if ( telem-&gt;command == &quot;init&quot; )
+                {
+                    FXTRACE ( ( 5, &quot;INIT \n&quot; ) );
+                    if ( fil-&gt;init () != false )
+                    {
+                        if ( left_frame-&gt;f-&gt;active )
+                            left_frame-&gt;generate_menu ( fil-&gt;path, this );
+                        else
+                            right_frame-&gt;generate_menu ( fil-&gt;path, this );
+                    }
+                    else
+                    {
+                        FXMessageBox box( getApp (), &quot;error&quot;, &quot;Can't connect :|&quot;, NULL, MBOX_OK | DECOR_TITLE | DECOR_BORDER );
+                        box.execute ();
+
+
+                    }
+                }
+                if ( telem-&gt;command == &quot;copy&quot; )
+                {
+                    if ( ( left_frame-&gt;f-&gt;fb == telem-&gt;fb &amp;&amp; download == true ) || ( download == false &amp;&amp; right_frame-&gt;f-&gt;fb == telem-&gt;fb ) )
+                        left_frame-&gt;f-&gt;refresh ();
+
+                    else
+                        right_frame-&gt;f-&gt;refresh ();
+                }
+
+                else if ( telem-&gt;command == &quot;remove&quot; )
+                {
+                    fil-&gt;refresh ();
+                }
+
+                else if ( telem-&gt;command == &quot;move&quot; )
+                {
+                    right_frame-&gt;f-&gt;refresh ();
+                    left_frame-&gt;f-&gt;refresh ();
+                }
+                string options = telem-&gt;options;    // get special options
+                pos = options.find ( &quot;rescan&quot; );    // when we need to rescan directory after command finish
+                if ( pos != string::npos )
+                {
+
+                    fil-&gt;refresh ();
+
+                }
+                pos = telem-&gt;options.find ( &quot;capture&quot; );    // when we need to capture data from standard output from executed program
+                if ( pos != string::npos )
+                {
+                    telem-&gt;pane = new FXMenuPane ( this );
+                    FXLabel *lab = new FXLabel ( telem-&gt;pane, telem-&gt;dst.c_str () );
+                    telem-&gt;pane-&gt;create ();
+                    telem-&gt;pane-&gt;popup ( NULL, this-&gt;getX (), this-&gt;getY (), lab-&gt;getWidth (), lab-&gt;getHeight () );
+                }
+                //cleanup
+                delete ( ( OSInfoPanel * ) telem-&gt;gui );
+                telem-&gt;gui = NULL;
+                infoframe-&gt;recalc ();
+
+                //erase from vector and delete telem;
+                objmanager-&gt;thread_vec.erase ( iter );
+                delete telem;
+                break;
+            }
+        }
+    }               //end for
+    getApp () -&gt;addTimeout ( this, ID_TIMER, 200 );
+    return 1;
+}
+
+
+//when we choose in popup if we want overwrite or skip
+//notify about this filelist plugin using telem
+long OSMainWindow::onOverwrite ( FXObject * sender, FXSelector sel, void * )
+{
+    FXushort id = FXSELID ( sel );
+    FXButton *but = ( FXButton * ) sender;
+    OSThreadExec *te = ( OSThreadExec * ) but-&gt;getUserData ();
+    te-&gt;mutex.lock ();
+    if ( id == ID_OVERWRITE )
+    {
+        te-&gt;overwrite = true;
+    }
+
+    else if ( id == ID_SKIP )
+    {
+        te-&gt;overwrite = false;
+    }
+
+    else if ( ID_OVERWRITE_ALL )
+    {
+        te-&gt;overwrite = true;
+        te-&gt;all = true;
+    }
+
+    else if ( id == ID_SKIP_ALL )
+    {
+        te-&gt;overwrite = false;
+        te-&gt;all = true;
+    }
+    te-&gt;pane-&gt;hide ();
+    delete te-&gt;pane;
+    te-&gt;answer = true;
+    te-&gt;mutex.unlock ();
+}
+
+
+//NEED TO CHANGE THIS
+long OSMainWindow::onConfigure ( FXObject * sender, FXSelector sel, void *ptr )
+{
+    if ( !conf ) return 0;
+
+    FXMainWindow::onConfigure ( sender, sel, ptr );
+    float widthpanel = this-&gt;getWidth () * ratio;
+    left-&gt;setWidth ( ( int ) widthpanel );
+
+}
+long OSMainWindow::onUpdate ( FXObject * sender, FXSelector sel, void *ptr )
+{
+    if ( !conf ) return 0;
+
+    FXMainWindow::onUpdate ( sender, sel, ptr );
+    float l = left-&gt;getWidth ();
+    float r = right-&gt;getWidth ();
+    float w = getWidth ();
+    ratio = ( float ) l / ( float ) w;
+
+}
+
+//telem is canceled
+long OSMainWindow::cancel ( FXObject * sender, FXSelector, void * )
+{
+    FXButton * but = ( FXButton * ) sender;
+    OSThreadExec *te = ( OSThreadExec * ) but-&gt;getUserData ();
+    te-&gt;mutex.lock ();
+    te-&gt;cancel = true;
+    te-&gt;mutex.unlock ();
+}
+
+
+
+
+//load icon from file and put in the array
+void OSMainWindow::loadicons ( string icondir )
+{
+
+    objmanager = OSObjectManager::instance( getApp() );
+
+
+    FXIconSource *source = new FXIconSource ( getApp () );
+    FXString fil = icondir.c_str();
+    FXString name = fil + conf-&gt;readonestring ( &quot;/OpenspaceConfig/file_types/COMMON/types/dir/icon&quot; ).c_str() + &quot;.png&quot;;
+    objmanager-&gt;specialicons[ 0 ] = source-&gt;loadIcon ( name );
+    if ( objmanager-&gt;specialicons[ 0 ] )
+        objmanager-&gt;specialicons[ 0 ] -&gt;create();
+    name = fil + &quot;big_&quot; + conf-&gt;readonestring ( &quot;/OpenspaceConfig/file_types/COMMON/types/dir/icon&quot; ).c_str() + &quot;.png&quot;;
+    objmanager-&gt;specialicons[ 1 ] = source-&gt;loadIcon ( name );
+    if ( objmanager-&gt;specialicons[ 1 ] )
+        objmanager-&gt;specialicons[ 1 ] -&gt;create();
+    name = fil + conf-&gt;readonestring ( &quot;/OpenspaceConfig/file_types/COMMON/types/all/icon&quot; ).c_str() + &quot;.png&quot;;
+    objmanager-&gt;specialicons[ 2 ] = source-&gt;loadIcon ( name );
+    if ( objmanager-&gt;specialicons[ 2 ] )
+        objmanager-&gt;specialicons[ 2 ] -&gt;create();
+    name = fil + &quot;big_&quot; + conf-&gt;readonestring ( &quot;/OpenspaceConfig/file_types/COMMON/types/all/icon&quot; ).c_str() + &quot;.png&quot;;
+    objmanager-&gt;specialicons[ 3 ] = source-&gt;loadIcon ( name );
+    if ( objmanager-&gt;specialicons[ 3 ] )
+        objmanager-&gt;specialicons[ 3 ] -&gt;create();
+    name = fil + conf-&gt;readonestring ( &quot;/OpenspaceConfig/file_types/COMMON/types/executable/icon&quot; ).c_str() + &quot;.png&quot;;
+    objmanager-&gt;specialicons[ 4 ] = source-&gt;loadIcon ( name );
+    if ( objmanager-&gt;specialicons[ 4 ] )
+        objmanager-&gt;specialicons[ 4 ] -&gt;create();
+    name = fil + conf-&gt;readonestring ( &quot;/OpenspaceConfig/file_types/COMMON/types/symlink/icon&quot; ).c_str() + &quot;.png&quot;;
+    objmanager-&gt;specialicons[ 5 ] = source-&gt;loadIcon ( name );
+    if ( objmanager-&gt;specialicons[ 5 ] )
+        objmanager-&gt;specialicons[ 5 ] -&gt;create();
+
+
+    struct stat status;
+    struct dirent *dp;
+    DIR *dirp;
+
+    dirp = opendir ( icondir.c_str () );
+
+    if ( dirp )
+        while ( ( dp = readdir ( dirp ) ) != NULL )
+        {
+
+            if ( dp-&gt;d_name[ 0 ] != '.' || ( dp-&gt;d_name[ 1 ] != '\0' &amp;&amp; ( dp-&gt;d_name[ 1 ] != '.' || dp-&gt;d_name[ 2 ] != '\0' ) ) )
+            {
+                string name = dp-&gt;d_name;
+
+                //if (name.length () &gt;= 3 &amp;&amp; (name.substr (name.length () - 3, 3) == &quot;gif&quot; || name.substr (name.length () - 3, 3) == &quot;png&quot;))
+                {
+
+                    string file = icondir;
+                    file.append ( name );
+                    string shortname = name.substr ( 0, name.length () - 4 );
+
+                    FXString fil_name = file.c_str();
+
+                    objmanager-&gt;osicons[ shortname ] = source-&gt;loadIcon ( fil_name );
+
+                    objmanager-&gt;osicons[ shortname ] -&gt;create ();
+
+
+                }
+
+            }
+        }
+
+    closedir ( dirp );
+
+
+}
+
+
+// read color definied as FF FF FF and return FXColor
+FXColor readcolor ( string col )
+{
+    if ( col == &quot;&quot; )
+        return FXRGB ( 0, 0, 0 );
+
+    return fxcolorfromname( col.c_str() );
+
+}
+
+
+//the same as above but defualt color is white
+FXColor readcolor2 ( string col )
+{
+    if ( col == &quot;&quot; )
+        return FXRGB ( 255, 255, 255 );
+    return fxcolorfromname( col.c_str() );
+}
+
+string OSMainWindow::parseDir ( string dir )
+{
+    if ( dir == &quot;{homedir}&quot; )
+        return FXFile::getHomeDirectory ().text ();
+
+    else
+        return dir;
+}
+
+bool OSMainWindow::loadMimeSettings ( string path, string type )
+{
+
+    string res2 = conf-&gt;readonestring ( path + &quot;/icon&quot; );
+    string colorstr = conf-&gt;readonestring ( path + &quot;/color&quot; );
+    FXColor color = readcolor ( colorstr );
+    string backcolorstr = conf-&gt;readonestring ( path + &quot;/backcolor&quot; );
+    FXColor backcolor = readcolor2 ( backcolorstr );
+    if ( res2 != &quot;&quot; )
+        objmanager-&gt;file_type_settings[ type ] = new OSFileTypeSymbol ( objmanager-&gt;osicons[ res2 ], objmanager-&gt;osicons[ &quot;big_&quot; + res2 ], color, backcolor );
+    else
+        return false;
+
+}
+
+
+
+
+//-----FRAME---------------------------------------------------------------------------------------------------------------------------
+Frame::Frame ( FXComposite * cp, FXComposite * p, OSPathType pt, FXObject * tgt, int position = 0 )
+{
+    this-&gt;pathdir = pt.dir;
+    this-&gt;type = pt.type;
+    string path = pathdir;
+    hf = new FXHorizontalFrame ( cp, LAYOUT_FILL_X | FRAME_THICK, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0 );
+    pathdir = path;
+    firstbutton=NULL;
+    
+    
+    FXButton *prebutton = NULL;
+    FXButton *nextbutton = NULL;
+
+    OSObjectManager*objmanager = OSObjectManager::instance( cp-&gt;getApp() );
+
+    toleft = new FXButton ( hf, &quot;&quot;, objmanager-&gt;osicons[ &quot;left&quot; ], tgt, OSMainWindow::ID_TOLEFT, FRAME_THICK, 0, 0, 0, 0, 0, 0, 0, 0 );
+    toleft-&gt;setUserData ( new box ( this, NULL, NULL, NULL ) );
+    toclose = new FXButton ( hf, &quot;&quot;, objmanager-&gt;osicons[ &quot;close&quot; ], tgt, OSMainWindow::ID_TOCLOSE, FRAME_THICK, 0, 0, 0, 0, 0, 0, 0, 0 );
+    toclose-&gt;setUserData ( new box ( this, NULL, NULL, NULL ) );
+    toright = new FXButton ( hf, &quot;&quot;, objmanager-&gt;osicons[ &quot;right&quot; ], tgt, OSMainWindow::ID_TORIGHT, FRAME_THICK, 0, 0, 0, 0, 0, 0, 0, 0 );
+    toright-&gt;setUserData ( new box ( this, NULL, NULL, NULL ) );
+    if ( pt.server != &quot;&quot; )
+    {
+        string lab = pt.server + &quot;: &quot;;
+        new FXLabel( hf, lab.c_str() );
+    }
+
+    if ( position != 0 )
+    {
+        toleft-&gt;hide ();
+        toclose-&gt;hide ();
+        toright-&gt;hide ();
+    }
+   
+    generate_menu(pathdir,tgt);
+
+    frame = new FXVerticalFrame ( p, LAYOUT_FILL_X | LAYOUT_FILL_Y | FRAME_SUNKEN, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0 );
+    f = new OSFileList ( frame, pt );
+    if ( position == 0 )
+    {
+        frame-&gt;hide ();
+    }
+}
+
+
+//generate buttons path for given path
+void Frame::generate_menu ( string path, FXObject * tgt )
+{
+
+    OSObjectManager * objmanager = OSObjectManager::instance( hf-&gt;getApp() );
+
+    if (path.length()&gt;1 &amp;&amp; path[ 0 ] == '/' &amp;&amp; path[ 1 ] == '/' )
+        path.erase ( 0, 1 );
+	
+    	if(firstbutton!=NULL)
+	{	
+    	box *boxel = ( box * ) firstbutton-&gt;getUserData ();
+    	box *boxbackup = boxel;
+    		while ( boxel )
+    		{
+        		box * boxel_del = boxel;
+       			if ( boxel-&gt;nextbutton != NULL )
+            		boxel = ( box * ) boxel-&gt;nextbutton-&gt;getUserData ();
+        		else
+            		boxel = NULL;
+			
+       		delete boxel_del-&gt;bt;
+        	delete boxel_del;
+       		boxel_del-&gt;bt = NULL;
+        	boxel_del = NULL;
+    		}
+    	}
+	
+    this-&gt;pathdir = path;
+    int z = 0;
+    FXButton *prebutton = NULL;
+    FXButton *nextbutton = NULL;
+    while ( z != -1 )
+    {
+        string path_element = &quot;&quot;;
+        z = path.find ( SEPARATOR, 1 );
+        if ( z == -1 )
+            path_element.append ( path );
+
+        else
+            path_element.append ( path.substr ( 0, z ) );
+        path.erase ( 0, z );
+        FXButton *bt = new FXButton ( hf, path_element.c_str (), NULL, tgt,
+                                      OSMainWindow::ID_DIR, FRAME_THICK, 0, 0, 0, 0, 0, 0,
+                                      0, 0 );
+        bt-&gt;setBackColor ( objmanager-&gt;maincolor );
+	
+	if(firstbutton!=NULL)
+        bt-&gt;create ();
+	
+        if ( prebutton != NULL )
+        {
+            box * boxel = ( box * ) prebutton-&gt;getUserData ();
+            boxel-&gt;nextbutton = bt;
+        }
+
+        else
+            firstbutton = bt;
+        bt-&gt;setUserData ( new box ( this, prebutton, bt, NULL ) );
+        prebutton = bt;
+    }
+}


Property changes on: trunk/src/OSMainWindow.cpp
___________________________________________________________________
Name: svn:keywords
   + Id

Copied: trunk/src/OSMainWindow.h (from rev 245, branches/mloskot-style-refactoring/src/OSMainWindow.h)


Property changes on: trunk/src/OSMainWindow.h
___________________________________________________________________
Name: svn:keywords
   + Id

Copied: trunk/src/OSMimeApp.cpp (from rev 245, branches/mloskot-style-refactoring/src/OSMimeApp.cpp)


Property changes on: trunk/src/OSMimeApp.cpp
___________________________________________________________________
Name: svn:keywords
   + Id

Copied: trunk/src/OSMimeApp.h (from rev 245, branches/mloskot-style-refactoring/src/OSMimeApp.h)


Property changes on: trunk/src/OSMimeApp.h
___________________________________________________________________
Name: svn:keywords
   + Id

Copied: trunk/src/OSMimeType.cpp (from rev 245, branches/mloskot-style-refactoring/src/OSMimeType.cpp)


Property changes on: trunk/src/OSMimeType.cpp
___________________________________________________________________
Name: svn:keywords
   + Id

Copied: trunk/src/OSMimeType.h (from rev 245, branches/mloskot-style-refactoring/src/OSMimeType.h)


Property changes on: trunk/src/OSMimeType.h
___________________________________________________________________
Name: svn:keywords
   + Id

Copied: trunk/src/OSObjectManager.cpp (from rev 245, branches/mloskot-style-refactoring/src/OSObjectManager.cpp)


Property changes on: trunk/src/OSObjectManager.cpp
___________________________________________________________________
Name: svn:keywords
   + Id

Copied: trunk/src/OSObjectManager.h (from rev 245, branches/mloskot-style-refactoring/src/OSObjectManager.h)


Property changes on: trunk/src/OSObjectManager.h
___________________________________________________________________
Name: svn:keywords
   + Id

Copied: trunk/src/OSPathType.cpp (from rev 245, branches/mloskot-style-refactoring/src/OSPathType.cpp)


Property changes on: trunk/src/OSPathType.cpp
___________________________________________________________________
Name: svn:keywords
   + Id

Copied: trunk/src/OSPathType.h (from rev 245, branches/mloskot-style-refactoring/src/OSPathType.h)


Property changes on: trunk/src/OSPathType.h
___________________________________________________________________
Name: svn:keywords
   + Id

Copied: trunk/src/OSPreferences.cpp (from rev 245, branches/mloskot-style-refactoring/src/OSPreferences.cpp)


Property changes on: trunk/src/OSPreferences.cpp
___________________________________________________________________
Name: svn:keywords
   + Id

Copied: trunk/src/OSPreferences.h (from rev 245, branches/mloskot-style-refactoring/src/OSPreferences.h)


Property changes on: trunk/src/OSPreferences.h
___________________________________________________________________
Name: svn:keywords
   + Id

Copied: trunk/src/OSShutter.cpp (from rev 245, branches/mloskot-style-refactoring/src/OSShutter.cpp)


Property changes on: trunk/src/OSShutter.cpp
___________________________________________________________________
Name: svn:keywords
   + Id

Copied: trunk/src/OSShutter.h (from rev 245, branches/mloskot-style-refactoring/src/OSShutter.h)


Property changes on: trunk/src/OSShutter.h
___________________________________________________________________
Name: svn:keywords
   + Id

Copied: trunk/src/OSThreadExec.cpp (from rev 245, branches/mloskot-style-refactoring/src/OSThreadExec.cpp)


Property changes on: trunk/src/OSThreadExec.cpp
___________________________________________________________________
Name: svn:keywords
   + Id

Copied: trunk/src/OSThreadExec.h (from rev 245, branches/mloskot-style-refactoring/src/OSThreadExec.h)


Property changes on: trunk/src/OSThreadExec.h
___________________________________________________________________
Name: svn:keywords
   + Id

Copied: trunk/src/OSUtils.cpp (from rev 245, branches/mloskot-style-refactoring/src/OSUtils.cpp)


Property changes on: trunk/src/OSUtils.cpp
___________________________________________________________________
Name: svn:keywords
   + Id

Copied: trunk/src/OSUtils.h (from rev 245, branches/mloskot-style-refactoring/src/OSUtils.h)


Property changes on: trunk/src/OSUtils.h
___________________________________________________________________
Name: svn:keywords
   + Id

Copied: trunk/src/OSVirtualFileSystemBase.h (from rev 245, branches/mloskot-style-refactoring/src/OSVirtualFileSystemBase.h)


Property changes on: trunk/src/OSVirtualFileSystemBase.h
___________________________________________________________________
Name: svn:keywords
   + Id

Copied: trunk/src/OSVirtualFileSystemHeader.h (from rev 245, branches/mloskot-style-refactoring/src/OSVirtualFileSystemHeader.h)


Property changes on: trunk/src/OSVirtualFileSystemHeader.h
___________________________________________________________________
Name: svn:keywords
   + Id

Copied: trunk/src/OSVirtualFileSystemInfo.h (from rev 245, branches/mloskot-style-refactoring/src/OSVirtualFileSystemInfo.h)


Property changes on: trunk/src/OSVirtualFileSystemInfo.h
___________________________________________________________________
Name: svn:keywords
   + Id

Deleted: trunk/src/cmddialog.cpp
===================================================================
--- trunk/src/cmddialog.cpp	2006-02-12 13:43:28 UTC (rev 245)
+++ trunk/src/cmddialog.cpp	2006-02-12 15:36:06 UTC (rev 246)
@@ -1,33 +0,0 @@
-#include &quot;fx.h&quot;
-
-#include &quot;cmddialog.h&quot;
-
-
-FXIMPLEMENT (cmddialog, FXDialogBox, NULL, 0) 
-cmddialog::cmddialog (FXWindow * owner, filelist_base * fb, vector &lt; string &gt; src):
-FXDialogBox (owner, &quot;command&quot;, DECOR_TITLE | DECOR_BORDER)
-{
-
-    this-&gt;src = src;
-    this-&gt;fb = fb;
-    FXObject *tgt = (FXObject *) owner;
-    contents = new FXVerticalFrame (this, LAYOUT_SIDE_TOP | FRAME_NONE | LAYOUT_FILL_X | PACK_UNIFORM_WIDTH);
-
-    buttons = new FXHorizontalFrame (this, LAYOUT_SIDE_TOP | FRAME_NONE | LAYOUT_FILL_X | LAYOUT_FILL_Y | PACK_UNIFORM_WIDTH);
-    ok = new FXButton (buttons, &quot;OK&quot;, NULL, owner, ID_COMMAND, BUTTON_INITIAL | FRAME_RAISED, 0, 0, 0, 0, 0, 0, 0, 0);
-    cancel = new FXButton (buttons, &quot;CANCEL&quot;, NULL, tgt, ID_CANCEL_COMMAND, FRAME_RAISED, 0, 0, 0, 0, 0, 0, 0, 0);
-
-
-}
-
-
-
-
-
-
-cmddialog::~cmddialog ()
-{
-    
-    delete contents;
-    delete buttons;
-}

Deleted: trunk/src/cmddialog.h
===================================================================
--- trunk/src/cmddialog.h	2006-02-12 13:43:28 UTC (rev 245)
+++ trunk/src/cmddialog.h	2006-02-12 15:36:06 UTC (rev 246)
@@ -1,39 +0,0 @@
-#ifndef CMDDIALOG
-#define CMDDIALOG
-
-#include &quot;filelist_base.h&quot;
-
-class cmddialog:public FXDialogBox
-{
-  FXDECLARE (cmddialog) 
-
-    
-  protected:
-     cmddialog ()
-    {
-    }
-    FXVerticalFrame * contents;
-    FXHorizontalFrame *buttons;
-    FXButton *ok;
-    FXButton *cancel;
-    filelist_base *fb;
-    vector &lt; string &gt; src;
-    
-  public:
-     cmddialog (FXWindow * owner, filelist_base * fb = NULL, vector &lt; string &gt; src=vector &lt; string &gt;());
-    virtual int exec (void)
-    {
-    };
-
-    virtual ~ cmddialog ();
-
-    enum
-    {
-	ID_EXEC = FXDialogBox::ID_LAST + 666,
-	ID_COMMAND,
-	ID_CANCEL_COMMAND,
-	ID_LAST,
-    };
-
-};
-#endif

Copied: trunk/src/config.h (from rev 245, branches/mloskot-style-refactoring/src/config.h)


Property changes on: trunk/src/config.h
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/src/config.h.in
___________________________________________________________________
Name: svn:keywords
   + Id

Deleted: trunk/src/configure.cpp
===================================================================
--- trunk/src/configure.cpp	2006-02-12 13:43:28 UTC (rev 245)
+++ trunk/src/configure.cpp	2006-02-12 15:36:06 UTC (rev 246)
@@ -1,434 +0,0 @@
-#include &quot;configure.h&quot;
-
-#include &quot;fx.h&quot;
-
-
-#ifdef WIN32
-#define SEPARATOR &quot;\\&quot;
-#else
-#include &lt;dlfcn.h&gt;
-#define SEPARATOR &quot;/&quot;
-#endif
-
-#ifndef PATH_CFG
-#define PATH_CFG        &quot;/usr/local/etc&quot;
-#endif
-
-configure *conf;
-
-configure::configure ()
-{
-
-    doc=NULL;
-}
-
-configure::configure (configure &amp; conf)
-{
-
-    doc = conf.doc;
-    copy = true;
-}
-
-
-configure::~configure ()
-{
-    if (!copy)
-    {
-	FXTRACE ((5, &quot;CONFIGURATION SAVING\n&quot;));
-
-	
-	if(doc)
-	{
-	xmlSaveFormatFileEnc(file.c_str(), doc, &quot;UTF-8&quot;, 1);
-	string cmd=&quot;xmllint --format &quot; +file+ &quot; -o &quot;+file;
-	system(cmd.c_str());
-	xmlFreeDoc (doc);
-	xmlCleanupParser ();
-	}
-
-    }
-
-}
-
-bool configure::loadconfig(bool restore)
-{
-
-string dir = FXFile::getUserDirectory (&quot;&quot;).text ();
-    file = dir +  &quot;/.openspace/openspacerc&quot;;
-    
-    if (!FXFile::exists (file.c_str ()))
-    {
-	file = &quot;&quot;;
-	file = file + PATH_CFG + SEPARATOR + &quot;openspacerc&quot;;
-    }
-    FXTRACE ((5, &quot;OPENING CONFIGRATION FILE %s\n&quot;, file.c_str ()));
-
-    doc = xmlParseFile (file.c_str ());
-    copy = false;
-    
-    
-
-	if(!doc)
-	{	
-		if(restore)
-		{
-		fxmessage(&quot;restore&quot;);
-		doc = xmlParseFile (string(file+&quot;.backup&quot;).c_str());
-			if(doc)
-			return true;
-		}
-	return false;
-	}
-	else
-	{
-	FXFile::copy(file.c_str(),string(file+&quot;.backup&quot;).c_str(),true);
-	return true;
-	}
-
-}
-
-
-
-bool configure::readonestring (string path,string &amp;ret)
-{
-
-
-    xmlChar *xpath = (xmlChar *) path.c_str ();
-    xmlChar *keyword;
-    string retstring;
-
-
-    xmlNodeSetPtr nodeset;
-    xmlXPathContextPtr context;
-    xmlXPathObjectPtr result;
-
-    context = xmlXPathNewContext (doc);
-    if (context == NULL)
-	return false;
-
-    result = xmlXPathEvalExpression (xpath, context);
-    xmlXPathFreeContext (context);
-    if (result == NULL)
-	return false;
-
-
-    if (xmlXPathNodeSetIsEmpty (result-&gt;nodesetval))
-    {
-	return false;
-    }
-
-
-    nodeset = result-&gt;nodesetval;
-    keyword = xmlNodeListGetString (doc, nodeset-&gt;nodeTab[0]-&gt;xmlChildrenNode, 1);
-    if(keyword!=NULL)
-    retstring = string ((char *) keyword);
-    xmlFree (keyword);
-
-
-
-
-    xmlXPathFreeObject (result);
-    ret=retstring;
-    return true;
-
-}
-
-string configure::readonestring (string path)
-{
-
-    xmlChar *xpath = (xmlChar *) path.c_str ();
-    xmlChar *keyword;
-    string retstring;
-
-
-    xmlNodeSetPtr nodeset;
-    xmlXPathContextPtr context;
-    xmlXPathObjectPtr result;
-
-    context = xmlXPathNewContext (doc);
-    if (context == NULL)
-	return &quot;&quot;;
-
-    result = xmlXPathEvalExpression (xpath, context);
-    xmlXPathFreeContext (context);
-    if (result == NULL)
-	return &quot;&quot;;
-
-
-    if (xmlXPathNodeSetIsEmpty (result-&gt;nodesetval))
-    {
-	return &quot;&quot;;
-    }
-
-
-    nodeset = result-&gt;nodesetval;
-    keyword = xmlNodeListGetString (doc, nodeset-&gt;nodeTab[0]-&gt;xmlChildrenNode, 1);
-    if(keyword!=NULL)
-    retstring = string ((char *) keyword);
-    xmlFree (keyword);
-
-
-
-
-    xmlXPathFreeObject (result);
-
-    return retstring;
-
-}
-
-
-bool configure::removestring (string path)
-{
-
-    xmlChar *xpath = (xmlChar *) path.c_str ();
-    xmlChar *keyword;
-    string retstring;
-
-
-    xmlNodeSetPtr nodeset;
-    xmlXPathContextPtr context;
-    xmlXPathObjectPtr result;
-
-    context = xmlXPathNewContext (doc);
-    if (context == NULL)
-	return false;
-
-    result = xmlXPathEvalExpression (xpath, context);
-    xmlXPathFreeContext (context);
-    if (result == NULL)
-	return false;
-
-
-    if (xmlXPathNodeSetIsEmpty (result-&gt;nodesetval))
-    {
-	return false;
-    }
-
-
-    nodeset = result-&gt;nodesetval;
-    /*keyword = xmlNodeListGetString(doc, nodeset-&gt;nodeTab[0]-&gt;xmlChildrenNode, 1);
-       retstring=string((char*)keyword);
-       xmlFree(keyword);
-     */
-    //delete nodeset-&gt;nodeTab[0]; 
-    //nodeset-&gt;nodeTab[0] = NULL;
-
-    //xmlXPathFreeNodeSet(nodeset-&gt;nodeTab[0]);
-
-    xmlUnlinkNode (nodeset-&gt;nodeTab[0]);
-    xmlFreeNode (nodeset-&gt;nodeTab[0]);
-
-
-
-
-
-    xmlXPathFreeObject (result);
-
-    return true;
-
-}
-
-
-bool configure::saveonestring (string path, string value)
-{
-
-    xmlChar *xpath = (xmlChar *) path.c_str ();
-    xmlChar *keyword;
-    string retstring;
-
-
-    xmlNodeSetPtr nodeset;
-    xmlXPathContextPtr context;
-    xmlXPathObjectPtr result;
-
-    context = xmlXPathNewContext (doc);
-    if (context == NULL)
-	return &quot;&quot;;
-
-    result = xmlXPathEvalExpression (xpath, context);
-    xmlXPathFreeContext (context);
-    if (result == NULL)
-	return false;
-
-
-    if (xmlXPathNodeSetIsEmpty (result-&gt;nodesetval))
-    {
-	return false;
-    }
-
-
-    nodeset = result-&gt;nodesetval;
-
-
-
-
-    int size;
-    int i;
-    size = (nodeset) ? nodeset-&gt;nodeNr : 0;
-
-
-    for (i = size - 1; i &gt;= 0; i--)
-    {
-
-	xmlNodeSetContent (nodeset-&gt;nodeTab[i], (xmlChar *) value.c_str ());
-
-
-
-	if (nodeset-&gt;nodeTab[i]-&gt;type != XML_NAMESPACE_DECL)
-	    nodeset-&gt;nodeTab[i] = NULL;
-    }
-
-
-
-
-
-    xmlXPathFreeObject (result);
-
-    return true;
-
-}
-
-
-bool configure::addstring (string path, string node, string value)
-{
-
-    xmlChar *xpath = (xmlChar *) path.c_str ();
-    xmlChar *keyword;
-    string retstring;
-
-
-    xmlNodeSetPtr nodeset;
-    xmlXPathContextPtr context;
-    xmlXPathObjectPtr result;
-
-    context = xmlXPathNewContext (doc);
-    if (context == NULL)
-	return false;
-
-    result = xmlXPathEvalExpression (xpath, context);
-    xmlXPathFreeContext (context);
-    if (result == NULL)
-	return false;
-
-
-    if (xmlXPathNodeSetIsEmpty (result-&gt;nodesetval))
-    {
-	return false;
-    }
-
-
-    nodeset = result-&gt;nodesetval;
-
-   xmlNewChild (nodeset-&gt;nodeTab[0], NULL, (xmlChar *) node.c_str (), (xmlChar *) value.c_str ());
-
-
-
-
-    xmlXPathFreeObject (result);
-
-    return true;
-
-}
-
-
-
-int configure::openxpath (string path)
-{
-
-    xmlChar *xpath = (xmlChar *) path.c_str ();
-    xmlChar *keyword;
-    string retstring;
-
-
-    xmlXPathContextPtr context;
-
-    context = xmlXPathNewContext (doc);
-    if (context == NULL)
-	return -1;
-
-    result = xmlXPathEvalExpression (xpath, context);
-    xmlXPathFreeContext (context);
-    if (result == NULL)
-	return -1;
-
-
-    if (xmlXPathNodeSetIsEmpty (result-&gt;nodesetval))
-    {
-	return -1;
-    }
-    nodeset = result-&gt;nodesetval;
-
-    cur = nodeset-&gt;nodeTab[0]-&gt;xmlChildrenNode;
-    pos = 0;
-    return 0;
-
-}
-
-bool configure::getnextnode (string &amp;ret)
-{
-
-    string retstring;
-    if (cur)
-    {
-	if (cur-&gt;next)
-	{
-	    retstring = string ((char *) cur-&gt;next-&gt;name);
-	    
-	}
-	else
-	    return false;
-    }
-    else
-	return false;
-
-    if(cur-&gt;next!=NULL)
-    cur = cur-&gt;next-&gt;next;
-    else
-    return false;
-
-    ret=retstring;	
-    return true;
-
-
-
-}
-
-
-bool configure::getnextstring (string &amp;ret)
-{
-
-
-    xmlChar *keyword;
-
-    if (nodeset-&gt;nodeNr == pos)
-    {
-	xmlXPathFreeObject (result);
-	return false;
-    }
-
-
-
-    keyword = xmlNodeListGetString (doc, nodeset-&gt;nodeTab[pos]-&gt;xmlChildrenNode, 1);
-    string retstring = string ((char *) keyword);
-
-    xmlFree (keyword);
-    pos++;
-    ret=retstring;
-    return true;
-
-
-
-}
-
-int configure::countxpath (string path)
-{
-    int counter = 0;
-    openxpath (path);
-    string res;
-    while (getnextstring (res))
-    {
-	counter++;
-    }
-    return counter;
-}
-

Deleted: trunk/src/configure.h
===================================================================
--- trunk/src/configure.h	2006-02-12 13:43:28 UTC (rev 245)
+++ trunk/src/configure.h	2006-02-12 15:36:06 UTC (rev 246)
@@ -1,42 +0,0 @@
-#ifndef CONFIGURE
-#define CONFIGURE
-
-
-#include &lt;libxml/parser.h&gt;
-#include &lt;libxml/xpath.h&gt;
-
-#include &lt;string&gt;
-using namespace std;
-
-//read and save to XML config file
-class configure
-{
-  public:
-    configure::configure ();
-    configure::configure (configure &amp; conf);
-    configure::~configure ();
-    
-
-    bool loadconfig(bool restore=false);
-    string readonestring (string path);
-    bool configure::readonestring (string path,string &amp;ret);
-    bool configure::saveonestring (string path, string value);
-    bool configure::addstring (string path, string node, string value);
-    int configure::openxpath (string path);
-    bool configure::getnextstring (string &amp;ret);
-    bool configure::getnextnode (string &amp;ret);
-    int configure::countxpath (string path);
-    bool configure::removestring (string path);
-    
-  private:  
-    string file;
-    xmlDocPtr doc;
-
-    bool copy;
-
-    int pos;
-    xmlXPathObjectPtr result;
-    xmlNodeSetPtr nodeset;
-    xmlNodePtr cur;
-};
-#endif

Deleted: trunk/src/filelist.cpp
===================================================================
--- trunk/src/filelist.cpp	2006-02-12 13:43:28 UTC (rev 245)
+++ trunk/src/filelist.cpp	2006-02-12 15:36:06 UTC (rev 246)
@@ -1,2328 +0,0 @@
-
-#include &lt;string&gt;
-#include &lt;map&gt;
-#include &lt;vector&gt;
-#include &lt;list&gt;
-
-
-using namespace std;
-
-#include &quot;MimeType.h&quot;
-
-#include &quot;pathtype.h&quot;
-#include &quot;fx.h&quot;
-#include &quot;osfile.h&quot;
-#include &quot;FXDLL.h&quot;
-#include &quot;filelist.h&quot;
-#include &quot;cmddialog.h&quot;
-#include &lt;fcntl.h&gt;
-#include &lt;sys/vfs.h&gt;
-#include &lt;fxkeys.h&gt;
-
-
-#include &lt;time.h&gt;
-
-
-#include &quot;sharedobjects.h&quot;
-
-#include &quot;oslistitem.h&quot;
-#include &quot;shutter.h&quot;
-
-#ifdef WIN32
-#define SEPARATOR &quot;\\&quot;
-#else
-#include &lt;dlfcn.h&gt;
-#define SEPARATOR &quot;/&quot;
-#endif
-#include &lt;sys/mount.h&gt;
-
-FXDEFMAP (filelist) filelistMap[] =
-{
-FXMAPFUNC (SEL_FOCUSIN, filelist::ID_ICO, filelist::setFocus),
-	FXMAPFUNC (SEL_FOCUSOUT, filelist::ID_ICO, filelist::lostFocus),
-	FXMAPFUNC (SEL_DOUBLECLICKED, filelist::ID_ICO, filelist::openfile),
-	FXMAPFUNC (SEL_CLICKED, filelist::ID_ICO, filelist::click),
-	FXMAPFUNC (SEL_MIDDLEBUTTONPRESS, filelist::ID_ICO, filelist::gotoparentdir),
-	FXMAPFUNC (SEL_RIGHTBUTTONRELEASE, filelist::ID_ICO, filelist::onPopup),
-	FXMAPFUNCS (SEL_COMMAND, filelist::ID_LAST, filelist::ID_LAST + 50, filelist::file_operation),
-	FXMAPFUNCS (SEL_COMMAND, filelist::ID_LAST+51, filelist::ID_LAST + 100, filelist::key_shortcut),
-	FXMAPFUNC (SEL_COMMAND, filelist::ID_TEXTFIELD_RUN, filelist::texfield_run),	
-	FXMAPFUNC (SEL_COMMAND, filelist::ID_HEADER_CHANGE, filelist::onCmdHeader),
-	FXMAPFUNC (SEL_COMMAND, filelist::ID_SORT_CHANGE, filelist::onCmdHeader),
-	FXMAPFUNC (SEL_LEAVE, filelist::ID_HEADER_CHANGE, filelist::onCmdResize),	
-	FXMAPFUNC (SEL_COMMAND, cmddialog::ID_COMMAND, filelist::onCommand),
-	FXMAPFUNC (SEL_COMMAND, cmddialog::ID_CANCEL_COMMAND, filelist::onCommandCancel),
-	FXMAPFUNC (SEL_DRAGGED, 0, filelist::onDragged),
-	FXMAPFUNC (SEL_DND_ENTER, 0, filelist::onDNDEnter),
-	FXMAPFUNC (SEL_DND_LEAVE, 0, filelist::onDNDLeave),
-	FXMAPFUNC (SEL_DND_DROP, 0, filelist::onDNDDrop),
-	FXMAPFUNC (SEL_DND_MOTION, 0, filelist::onDNDMotion),
-	FXMAPFUNC (SEL_DND_REQUEST, 0, filelist::onDNDRequest),
-	FXMAPFUNC (SEL_BEGINDRAG, 0, filelist::onBeginDrag),
-	FXMAPFUNC (SEL_ENDDRAG, 0, filelist::onEndDrag),
-	//FXMAPFUNC (SEL_CLIPBOARD_LOST, 0, filelist::onClipboardLost), 
-	//FXMAPFUNC (SEL_CLIPBOARD_GAINED, 0, filelist::onClipboardGained), 
-	FXMAPFUNC (SEL_CLIPBOARD_REQUEST, 0, filelist::onClipboardRequest),
-		
-	};
-
-FXIMPLEMENT (filelist, FXIconList, filelistMap, ARRAYNUMBER (filelistMap))
-     bool filelist::ascend = true;
-     bool filelist::strcase = false;
-
-
-
-
-//-----FILELIST----------------------------------------------------------------------------------------------------------------------------------------- 
-
-
-
-
-
-
-filelist::filelist (FXComposite * p, pathtype pt):
-FXIconList (p, this, ID_ICO, LAYOUT_FILL_X | LAYOUT_FILL_Y | ICONLIST_EXTENDEDSELECT | ICONLIST_COLUMNS)
-{
-objmanager=objectmanager::instance(getApp());
- 
-FXScrollArea::vertical-&gt;setArrowColor(FXRGB(255, 255, 255));
-FXScrollArea::vertical-&gt;setShadowColor(objmanager-&gt;maincolor);
-FXScrollArea::vertical-&gt;setHiliteColor(FXRGB(255, 255, 255));
-FXScrollArea::vertical-&gt;setBorderColor(FXRGB(255, 255, 255));
-FXScrollArea::vertical-&gt;setBackColor(objmanager-&gt;maincolor);
-
-FXScrollArea::horizontal-&gt;setArrowColor(FXRGB(255, 255, 255));
-FXScrollArea::horizontal-&gt;setShadowColor(objmanager-&gt;maincolor);
-FXScrollArea::horizontal-&gt;setHiliteColor(FXRGB(255, 255, 255));
-FXScrollArea::horizontal-&gt;setBorderColor(FXRGB(255, 255, 255));
-FXScrollArea::horizontal-&gt;setBackColor(objmanager-&gt;maincolor);
-
-    flags |= FLAG_ENABLED | FLAG_DROPTARGET;
-    popupmenu = NULL;
-    sortpop = NULL;
-
-    icons_size=atoi(conf-&gt;readonestring (&quot;/OpenspaceConfig/icon_size&quot;).c_str());   
-    if(conf-&gt;readonestring (&quot;/OpenspaceConfig/show_hidden_files&quot;)==&quot;true&quot;)
-    show_hidden_files=true;
-    else
-    show_hidden_files=false;
-
-    dropaction = DRAG_MOVE;   
-
-   
-    setKeys();
-    setFont (objmanager-&gt;captionfont3);
-    specialicons = objmanager-&gt;specialicons;
-
-
-    thumb_size = 0;
-    this-&gt;path = pt.dir;
-    this-&gt;type = pt.type;
-
-    if (type == &quot;local&quot;)
-    {
-	string size = conf-&gt;readonestring (&quot;/OpenspaceConfig/filelist/local/thumbs/size&quot;);
-	thumb_size = atoi (size.c_str ());
-    }
-
-    string style = conf-&gt;readonestring (&quot;/OpenspaceConfig/filelist/&quot; + this-&gt;type + &quot;/style&quot;);
-    if (style == &quot;big icons&quot;)
-    {
-	this-&gt;setListStyle (ICONLIST_EXTENDEDSELECT | ICONLIST_BIG_ICONS | ICONLIST_COLUMNS);
-	setFont (objmanager-&gt;captionfont1);
-    }
-    else if (style == &quot;small icons&quot;)
-	this-&gt;setListStyle (ICONLIST_EXTENDEDSELECT | ICONLIST_MINI_ICONS | ICONLIST_COLUMNS);
-    else if (style == &quot;detailed&quot;)
-	this-&gt;setListStyle (ICONLIST_EXTENDEDSELECT | ICONLIST_DETAILED | ICONLIST_COLUMNS);
-
-
-    sort_nr = 0;
-
-
-    notifyparent = getShell ();
-
-    active = false;
-
-	FXDockSite *docksite = new FXDockSite (p, LAYOUT_SIDE_TOP | LAYOUT_FILL_X);
-	FXToolBarShell *dragshell1 = new FXToolBarShell (this, FRAME_RAISED);
-	toolbar = new FXToolBar (docksite, dragshell1, LAYOUT_DOCK_NEXT | LAYOUT_SIDE_TOP | LAYOUT_FILL_X | FRAME_RAISED);
-	new FXToolBarGrip (toolbar, toolbar, FXToolBar::ID_TOOLBARGRIP, TOOLBARGRIP_DOUBLE);
-
-
-        toolbar2 = new FXToolBar (docksite, dragshell1,LAYOUT_DOCK_NEXT | LAYOUT_SIDE_TOP | FRAME_RAISED);
-        new FXToolBarGrip (toolbar2, toolbar2, FXToolBar::ID_TOOLBARGRIP, TOOLBARGRIP_SINGLE);
-
-
-int command_num=0;
-
-
- if(conf-&gt;openxpath(&quot;/OpenspaceConfig/toolbars&quot;)!=-1)
-	       {
-	       string commandstr;
-	      	 while(conf-&gt;getnextnode(commandstr))
-	      	 {     	 
-	     	 
-
-		 
-		 configure conflocal=*conf;		 
-		 
-		  if(conflocal.openxpath(&quot;/OpenspaceConfig/toolbars/&quot;+commandstr+&quot;/command&quot;)!=-1)
-	     	  {
-	      	 string res;
-	      		 while(conflocal.getnextstring(res))
-	      		 {     	 
-				
-		
-			FXToolBar *toolb;
-			if(commandstr==&quot;toolbar1&quot;)
-			toolb=toolbar;
-			else
-			toolb=toolbar2;
-			
-			if(res==&quot;SEPARATOR&quot;)
-			{
-			 new FXSeparator (toolb, SEPARATOR_NONE);
-   			 new FXSeparator (toolb, SEPARATOR_GROOVE);
-   			 new FXSeparator (toolb, SEPARATOR_NONE);
-			}
-			else
-			{
-			string name=conf-&gt;readonestring (&quot;/OpenspaceConfig/commands/&quot;+res+&quot;/icon&quot;);
-				if(name==&quot;&quot;)
-				new FXButton (toolb, res.c_str (), NULL, this, ID_LAST + command_num, FRAME_RAISED | LAYOUT_TOP | LAYOUT_LEFT | BUTTON_TOOLBAR, 0, 0, 0, 0, 0, 0, 0, 0);
-				else
-				{
-				string cmd_txt=conf-&gt;readonestring (&quot;/OpenspaceConfig/commands/&quot;+res+&quot;/text&quot;);
-				if(cmd_txt==&quot;&quot;)
-				cmd_txt=res;
-				cmd_txt=&quot;\t&quot;+cmd_txt;
-			
-				new FXButton (toolb, cmd_txt.c_str(), objmanager-&gt;osicons[name], this, ID_LAST + command_num, FRAME_RAISED | LAYOUT_TOP | LAYOUT_LEFT | BUTTON_TOOLBAR, 0, 0, 0, 0, 0, 0, 0, 0);
-				}
-			
-				button_commands_tab.push_back(res);
-		       		command_num++;
-			 }	
-			 }
-	     	  }
-		 
-		 
-	     	 }
-	       }	 
-
-
-if (conf-&gt;openxpath (&quot;/OpenspaceConfig/button_commands/command&quot;) != -1)
-    {
-
-    string res;
-	while (conf-&gt;getnextstring (res))
-	{
-		   	
-
-	    
-	}
-  }
-
-
-	
-
-
-    string plugin_path = string(PATH_LIBDIR) + &quot;/openspace/plugins/filelist/libfilelist&quot; + this-&gt;type;
-
-
-#ifdef WIN32
-    plugin_path += &quot;.dll&quot;;
-#else
-    plugin_path += &quot;.so&quot;;
-#endif
-
-    if(!FXFile::exists(plugin_path.c_str()))
-	{
-	plugin_path = FXFile::getUserDirectory (&quot;&quot;).text ()+string(&quot;/.openspace/plugins/filelist/libfilelist&quot;)+ this-&gt;type;
-	#ifdef WIN32
-	plugin_path += &quot;.dll&quot;;
-	#else
-	plugin_path += &quot;.so&quot;;
-	#endif
-	}
-    
-    void *dllhandle = fxdllOpen (plugin_path.c_str ());
-    if (dllhandle)
-    {
-	
-	filelist_base *(*gg) (void);
-	gg = (filelist_base * (*)(void)) fxdllSymbol (dllhandle, &quot;get_filelist&quot;);
-	fb = gg ();
-
-	FXIconListSortFunc sortfunc = filelist::cmp;
-	setSortFunc (sortfunc);
-
-//label=new FXLabel (p,this-&gt;path.c_str());
-	info = new FXLabel (p, fb-&gt;info ().c_str ());
-	
-
-	//bottomframe = new FXHorizontalFrame (toolbar, LAYOUT_FILL_X | FRAME_THICK, 0, 0, 0, 0, 0, 0, 0, 0);
-	textfield = new FXTextField (toolbar, 30, this, filelist::ID_TEXTFIELD_RUN);
-
-	dial = NULL;
-	processing = false;
-	this-&gt;pt = new pathtype (pt);
-	
-	
-    vector_name.push_back (&quot;name&quot;);
-    string wi;
-
-    if ((wi = conf-&gt;readonestring (&quot;/OpenspaceConfig/filelist/&quot;+type+&quot;/properties/name/width&quot;)) != &quot;&quot;)
-	vector_width.push_back (atoi (wi.c_str ()));
-    else
-	vector_width.push_back (100);
-
-    vector_type.push_back (0);
-
-
-    int counter = 1;
-
-   // display_size = conf-&gt;readonestring (&quot;/OpenspaceConfig/filelist/&quot;+type+&quot;/properties/name/display&quot;);
-
-    if (conf-&gt;openxpath (&quot;/OpenspaceConfig/filelist/&quot;+type+&quot;/headers/header&quot;) != -1)
-    {
-    string res;
-	while (conf-&gt;getnextstring (res))
-	{
-
-
-	    if ((wi = conf-&gt;readonestring (&quot;/OpenspaceConfig/filelist/&quot;+type+&quot;/properties/&quot; + res + &quot;/width&quot;)) != &quot;&quot;)
-		vector_width.push_back (atoi (wi.c_str ()));
-	    else
-		vector_width.push_back (40);
-
-
-	    vector_name.push_back (res);
-
-	    string fieldtype=conf-&gt;readonestring (&quot;/OpenspaceConfig/filelist/&quot;+type+&quot;/properties/&quot; + res + &quot;/type&quot;);
-	    	    
-	    if (fieldtype == &quot;size&quot;)
-		vector_type.push_back (1);
-	    else if(fieldtype == &quot;date&quot;)
-	    	vector_type.push_back (2);	
-	    else
-		vector_type.push_back (0);
-
-	    counter++;
-	}
-    }
-	
-	
-	
-	//if(type!=&quot;local&quot;)
-	if (1)
-	{
-	    processing = true;
-	    thread_elem *el = new thread_elem (fb, &quot;init&quot;, &quot;none&quot;);
-	    start_thread (el);
-	}
-	else
-	    init ();
-
-
-    }
-}
-
-long filelist::texfield_run (FXObject * obj, FXSelector sel, void *ptr)
-{
-
-system(textfield-&gt;getText ().text());
-
-}
-
-filelist::~filelist ()
-{
-	
-
-
-
-    delete sortpop;
-    FXTRACE ((5, &quot;destruct\n&quot;));
-
-}
-
-//--------------------------------------------------------------------
-//initializing fuction, get availible headers from filelist plugin
-bool filelist::init ()
-{
-
-
-
-    if (!processing)
-	fb-&gt;init (&amp;vector_name,*pt, conf);
-
-    for (int i = 0; i &lt; vector_name.size (); i++)
-    {
-
-	appendHeader (vector_name[i].c_str (), NULL, vector_width[i]);
-	unsigned int test = vector_type[i];
-	header_vec.push_back (vector_name[i]);
-    }
-
-
-    sortpop = new FXPopup (this);
-
-    int indx;
-
-    for (indx = 0; indx &lt; header_vec.size (); indx++)
-    {
-	new FXOption (sortpop, header_vec[indx].c_str (), NULL, this, ID_SORT_CHANGE, FRAME_THICK | JUSTIFY_HZ_APART | ICON_AFTER_TEXT);
-    }
-
-    new FXOption (sortpop, &quot;file type&quot;, NULL, this, ID_SORT_CHANGE, FRAME_THICK | JUSTIFY_HZ_APART | ICON_AFTER_TEXT);
-
-    sortmenu = new FXOptionMenu (toolbar, sortpop, LAYOUT_TOP |FRAME_THICK | JUSTIFY_HZ_APART | ICON_AFTER_TEXT);
-
-    if (processing)
-	sortmenu-&gt;create ();
-
-    toolbar-&gt;recalc ();
-    processing = false;
-    
-    string initialdir=fb-&gt;getinitialdir();
-    if(this-&gt;path==&quot;/&quot; &amp;&amp; initialdir!=&quot;/&quot;)
-    {
-    this-&gt;path=initialdir;
-    //notifyparent-&gt;handle (this, FXSEL (SEL_COMMAND, 666), NULL);
-    
-    }
-    
-    return opendir (this-&gt;path);
-    
-
-}
-
-
-//return default command for given filename
-
-string filelist::getdefaultcommand (string name)
-{
-
-    string ext = getfiletype (name);
-    string key = &quot;&quot;;
-    if (ext != &quot;&quot;)
-    {
-	string str = &quot;/types/&quot;;
-	ext = ext.replace (ext.find (&quot;/&quot;), 1, str);
-	key = conf-&gt;readonestring (&quot;/OpenspaceConfig/file_types/&quot; + ext + &quot;/default&quot;);
-    }
-
-    if (key == &quot;&quot;)
-    {
-	ext = ext.substr (0, ext.find (&quot;/&quot;));
-	key = conf-&gt;readonestring (&quot;/OpenspaceConfig/file_types/&quot; + ext + &quot;/default&quot;);
-    }
-
-
-   
-	return key;
-}
-
-//return file type for given name
-string filelist::getfiletype (string name)
-{
-
-    //std::transform (name.begin (), name.end (), name.begin (), std::tolower);
-
-    string r = MimeType::getMimeFromName (name);
-
-    //printf(&quot;Name: '%s' MimeType: '%s'\n&quot;, name.c_str(), r.c_str());
-
-    return r;
-
-}
-
-	 
- 
-
-//return command with replaced {f} with valid path
-string filelist::resolvecommand(string command,string name)
-{
-string res;
-	if (command != &quot;&quot;)
-	    res = conf-&gt;readonestring (&quot;/OpenspaceConfig/commands/&quot; + command + &quot;/exec&quot;);
-	else
-	    return &quot;&quot;;
-
-	if (res == &quot;INTERNAL&quot;)
-	{
-	    FXTRACE ((5, &quot;INTERNAL&quot;));
-	    return &quot;INTERNAL&quot;;
-	}
-	else if(res == &quot;VFS&quot;)
-	{
-	 FXTRACE ((5, &quot;VFS&quot;));
-	    return &quot;VFS&quot;;
-	}
-	
-	string fullname;
-	
-	if(this-&gt;type==&quot;local&quot;)
-		fullname = &quot;\&quot;&quot; + returnpath(name) + &quot;\&quot;&quot;;
-	else
-	{
-		fullname = &quot;\&quot;/tmp/openspace/&quot; + name + &quot;\&quot;&quot;;
-	}	
-	
-	int pos = res.find (&quot;{f}&quot;);
-	res.replace (pos, fullname.length (), fullname);
-	return res;
-
-
-}
-
-
-
-void filelist::create ()
-{
-
-    FXIconList::create ();
-    if (!deleteType)
-    {
-	deleteType = getApp ()-&gt;registerDragType (deleteTypeName);
-    }
-    if (!urilistType)
-    {
-	urilistType = getApp ()-&gt;registerDragType (urilistTypeName);
-    }
-
-}
-
-long filelist::key_shortcut (FXObject * obj, FXSelector sel, void *ptr)
-{
-
-    FXushort id = FXSELID (sel);
-    
-    string com_name;
-
-    com_name = key_commands_tab[id - ID_LAST-51];
-
-    runCommand(com_name);
-
-}
-
-//--------------------------------------------------------------------------------
-//bind keys
-long filelist::setKeys (void)
-{
-FXAccelTable *table = getShell ()-&gt;getAccelTable ();
-int counter=0;
-	if (conf-&gt;openxpath (&quot;/OpenspaceConfig/commands&quot;) != -1)
-  	  {
-		string res;
-		while (conf-&gt;getnextnode (res))
-		{
-		configure conflocal = *conf;
-	   	string key = conflocal.readonestring (&quot;/OpenspaceConfig/commands/&quot; + res + &quot;/key&quot;);
-		string key_mask = conflocal.readonestring (&quot;/OpenspaceConfig/commands/&quot; + res + &quot;/key_mask&quot;);
-			if(key!=&quot;&quot;)
-			{
-			unsigned int mask=0;
-			
-			if(key_mask==&quot;control&quot;)
-				mask=CONTROLMASK;
-			else if(key_mask==&quot;alt&quot;)
-				mask=ALTMASK;
-			
-			table-&gt;addAccel (MKUINT ((FXushort)objmanager-&gt;key_map[key],mask ), this, FXSEL (SEL_COMMAND, ID_LAST+51+counter));
-			key_commands_tab.push_back(res);
-			counter++;
-			}
-		}
-	  }	
-	    
-	    
-
-
-/*    
-    table-&gt;addAccel (MKUINT (KEY_a, CONTROLMASK), this, FXSEL (SEL_COMMAND, filelist::ID_SELECT_ALL));
-    table-&gt;addAccel (MKUINT (KEY_c, CONTROLMASK), this, FXSEL (SEL_COMMAND, filelist::ID_CLIP_COPY));
-    table-&gt;addAccel (MKUINT (KEY_x, CONTROLMASK), this, FXSEL (SEL_COMMAND, filelist::ID_CLIP_CUT));
-    table-&gt;addAccel (MKUINT (KEY_v, CONTROLMASK), this, FXSEL (SEL_COMMAND, filelist::ID_CLIP_PASTE));
-    table-&gt;addAccel (MKUINT (KEY_F5, 0), this, FXSEL (SEL_COMMAND, filelist::ID_REFRESH));
-    table-&gt;addAccel (MKUINT (KEY_Delete, 0), this, FXSEL (SEL_COMMAND, filelist::ID_REMOVE));
-*/
-}
-
-//copy/move/remove function
-void filelist::copymoveremove (string com_name)
-{
-
-	if(com_name==&quot;remove&quot;)
-	{
-	FXMessageBox about (this, &quot;?&quot;, &quot;Are you sure to remove selected files?&quot;, NULL, MBOX_YES_NO | DECOR_TITLE | DECOR_BORDER);
-    
-		if(about.execute ()==MBOX_CLICKED_NO)
-		return;
-	}
-	
-	
-    int selit = 0;
-
-    for (int c = 0; c &lt; getNumItems (); c++)
-    {
-	if (isItemSelected (c))
-	    selit++;
-    }
-
-
-    vector&lt;string&gt; src;
-    for (int c = 0; c &lt; getNumItems (); c++)
-    {
-	if (isItemSelected (c))
-	{
-	    src.push_back( returnpath(getItemText (c).text ()));
-	}
-
-
-    }
-
-    string options;
-    filelist_base *fil = fb;
-
-
-    if (this-&gt;type == &quot;local&quot; &amp;&amp; com_name != &quot;remove&quot;)
-    {
-	options = &quot;download&quot;;
-	fil = filelist_opposite-&gt;fb;
-    }
-    else  //type other than local
-	options = &quot;upload&quot;;
-
-
-
-    if(this-&gt;type==&quot;local&quot; || filelist_opposite-&gt;type==&quot;local&quot; || com_name==&quot;remove&quot;)
-    {
-    FXTRACE ((5, &quot;copy/move/remove&quot;));
-    thread_elem *el = new thread_elem (fil, com_name, options, src,filelist_opposite-&gt;path);
-    start_thread (el);
-    }
-    else
-    {
-    FXMessageBox about (this, &quot;error&quot;, &quot;copying/moving beetwen VFS not implemented (yet ;p)&quot;, NULL, MBOX_OK | DECOR_TITLE | DECOR_BORDER);
-    about.execute ();
-    }	
-
-  
-}
-
-//opendir
-bool filelist::opendir (string dir)
-{
-
-
-//label-&gt;setText(dir.c_str());
-    
-
-
-    if (fb-&gt;osopendir (dir) == -1)
-    {
-    return false;
-    }	
-clearItems ();
-
-
-    for (int indx = 0; indx &lt; icon_vec.size (); indx++)
-    {
-	icon_vec[indx]-&gt;detach ();
-	delete icon_vec[indx];
-    }
-
-    icon_vec.erase (icon_vec.begin (), icon_vec.end ());
-
-
-
-    int count = 0;
-    while (1)
-    {
-
-	count++;
-	osfile os_file = fb-&gt;osreaddir ();
-
-	if (os_file.name == &quot;&quot;)
-	    break;
-
-	if(os_file.name[0]=='.' &amp;&amp; show_hidden_files==false)
-	continue;
-	
-	FXColor color;
-	FXColor backcolor;
-	FXIcon *icon = NULL;
-	FXIcon *icon2 = NULL;
-
-	
-	if (os_file.type &amp; FOLDER)
-	{
-	    color = readcolor (conf-&gt;readonestring (&quot;/OpenspaceConfig/file_types/COMMON/types/dir/color&quot;));
-	    backcolor = readcolor2 (conf-&gt;readonestring (&quot;/OpenspaceConfig/file_types/COMMON/types/dir/backcolor&quot;));
-	    icon = specialicons[1];
-	    icon2 = specialicons[0];
-	}
-	else
-	{
-
-	    string ext = getfiletype (os_file.name);
-	    file_type *filet = NULL;
-	    if (ext != &quot;&quot;)
-	    {
-		filet = objmanager-&gt;file_type_settings[ext];
-		if (filet == NULL)
-		{
-		    ext = ext.substr (0, ext.find (&quot;/&quot;));
-
-		    filet = objmanager-&gt;file_type_settings[ext];
-		}
-
-	    }
-
-
-
-
-	    if (filet)
-	    {
-		icon2 = filet-&gt;icon;
-		icon = filet-&gt;bigicon;
-		color = filet-&gt;color;
-		backcolor = filet-&gt;backcolor;
-	    }
-	    else
-	    {
-	  
-		icon = specialicons[3];
-		icon2 = specialicons[2];
-		color = readcolor (conf-&gt;readonestring (&quot;/OpenspaceConfig/file_types/COMMON/types/all/color&quot;));
-		backcolor = readcolor2 (conf-&gt;readonestring (&quot;/OpenspaceConfig/file_types/COMMON/types/all/backcolor&quot;));
-	    }
-		
-	    string graphtype=ext.substr(0,5);
-			
-	    if ((type == &quot;local&quot; || type == &quot;search&quot;) &amp;&amp; graphtype==&quot;image&quot; &amp;&amp; os_file.size &lt; thumb_size &amp;&amp; (this-&gt;getListStyle () &amp; ICONLIST_BIG_ICONS) )
-	    {
-
-		string file = dir+&quot;/&quot; +os_file.name;
-		FXString fil = file.c_str ();
-		FXIconSource *source = new FXIconSource (getApp ());
-		FXIcon *ico = NULL;
-
-		ico = source-&gt;loadScaledIcon (fil, icons_size);
-
-		if (ico)
-		{
-		
-		    ico-&gt;create ();
-		    icon_vec.push_back (ico);
-		    icon = ico;
-		    icon2 = ico;
-		}
-	
-		
-	    }
-
-
-	}
-
-	if (os_file.type &amp; EXECUTABLE &amp;&amp; !(os_file.type &amp; FOLDER))
-	{
-	    color = readcolor (conf-&gt;readonestring (&quot;/OpenspaceConfig/file_types/COMMON/types/executable/color&quot;));
-	    backcolor = readcolor2 (conf-&gt;readonestring (&quot;/OpenspaceConfig/file_types/COMMON/types/executable/backcolor&quot;));
-	}
-
-
-	appendItem (new os_ListItem (this, os_file, color, backcolor, icon, icon2));
-
-
-    }
-
-    sortItems ();
-
-    struct statfs stats;
-
-    string siz;
-    if (statfs (dir.c_str (), &amp;stats) != -1)
-    {
-
-
-	unsigned long size = stats.f_bsize / 1024 * stats.f_bavail * 1024;
-	siz = numtostring (size);
-
-
-    }
-
-
-    string inf = &quot;files: &quot; + ntos (count) + &quot;   free: &quot; + siz;
-    info-&gt;setText (inf.c_str ());
- return true;
-}
-
-
-long filelist::setFocus (FXObject * obj, FXSelector sel, void *ptr)
-{
-
-setKeys();
-    active = true;
-    filelist_opposite-&gt;active = false;
-    filelist_opposite-&gt;toolbar-&gt;hide();
-    filelist_opposite-&gt;toolbar2-&gt;hide();		
-    toolbar-&gt;show();
-    toolbar-&gt;recalc();	
-    toolbar2-&gt;show();
-    toolbar2-&gt;recalc();
-    setBackColor (FXRGB (255, 255, 255));
-    chdir (path.c_str ());
-}
-
-long filelist::lostFocus (FXObject * obj, FXSelector sel, void *ptr)
-{
-//active=false;
-    setBackColor (FXRGB (220, 220, 220));
-
-
-}
-
-
-
-
-void *filelist::thread_func (void *data)
-{
-
-    thread_elem *el = (thread_elem *) data;
-    filelist_base *fb = (filelist_base *) el-&gt;fb;
-
-    FXASSERT ((5, &quot;THREAD :) %s\n&quot;, el-&gt;command.c_str ()));
-
-    filelist *filel = (filelist *) el-&gt;filel;
-
-    if (el-&gt;command == &quot;copy&quot;)
-    {
-	fb-&gt;copy (el);
-    }
-    else if (el-&gt;command == &quot;move&quot;)
-    {
-	fb-&gt;move (el);
-    }
-    else if (el-&gt;command == &quot;remove&quot;)
-    {
-	fb-&gt;remove (el);
-    }
-    else if (el-&gt;command == &quot;mkdir&quot;)
-    {
-	//fb-&gt;mkdir(el-&gt;src,0); 
-	sleep (5);
-    }
-    else if (el-&gt;command == &quot;execute&quot;)
-    {
-    string command=el-&gt;dst;
-    	if(command==&quot;&quot;)//command don't need files as parametr
-	{
-	system (el-&gt;src[0].c_str ());
-	}
-	else
-	{
-	
-		bool exportfile=false;
-		
-		if( ((filelist*)el-&gt;filel)-&gt;type!=&quot;local&quot; &amp;&amp; ((filelist*)el-&gt;filel)-&gt;type!=&quot;search&quot;)
-		exportfile=true;
-			
-		bool simple_command=true;
-		string::size_type pos = command.find (&quot;{F}&quot;);
-		if (pos != string::npos)
-		{
-		simple_command=false;
-		}
-		else
-		{
-		pos = command.find (&quot;{f}&quot;);
-		}
-
-		string tmpdir;
-		string destdir;
-		string fbdir;
-		if(((filelist*)el-&gt;filel)-&gt;type!=&quot;local&quot;)
-		{
-		tmpdir=FXFile::time (&quot;%S%H%M%d%m%y&quot;, FXFile::now()).text ();
-		destdir=string(&quot;/tmp/openspace/&quot;) + tmpdir;
-		FXFile::createDirectory(destdir.c_str(),0);
-		}
-		
-		string Flist;
-		vector &lt;string&gt; Flist_vector;
-		vector &lt;FXTime&gt; Flist_vector_time;
-		vector &lt;FXTime&gt;::iterator time_iter;
-		
-		
-	 	 vector &lt;string&gt;::iterator iter;
-		 for (iter = el-&gt;src.begin (); iter != el-&gt;src.end (); iter++)
- 		 {
-		 	
-			string tmpfile=*iter;
-				if(exportfile)
-				{
-				string name=FXFile::name(iter-&gt;c_str()).text();
-				fbdir=FXFile::directory(iter-&gt;c_str()).text();
-				tmpfile=destdir+&quot;/&quot;+name;
-			
-				thread_elem *el2 = new thread_elem (fb, &quot;copy&quot;, &quot;upload&quot;, *iter,destdir);
-				fb-&gt;copy (el2);
-				delete el2;
-				}
-			if(simple_command)
-			{	
-				FXTime t1=FXFile::modified(tmpfile.c_str());
-				string f=&quot;\&quot;&quot;+tmpfile+&quot;\&quot;&quot;;
-				string exec=command.replace (pos, f.length (),f );	
-				system (exec.c_str ());
-				if(exportfile)
-				{	
-				FXTime t2=FXFile::modified(tmpfile.c_str());
-					if(t1!=t2)
-					{
-					thread_elem *el2 = new thread_elem (fb, &quot;copy&quot;, &quot;download&quot;, tmpfile,fbdir);
-					fb-&gt;copy (el2);
-					delete el2;
-					}
-				
-				}
-				
-				
-			}
-			else
-			{
-			Flist=Flist+ &quot; \&quot;&quot;+tmpfile+&quot;\&quot; &quot;;
-				if(exportfile)
-				{
-				Flist_vector.push_back(tmpfile);
-				FXTime t1=FXFile::modified(tmpfile.c_str());
-				Flist_vector_time.push_back(t1);
-				}
-			}
-		 
-		 }
-			if(!simple_command)
-			{
-			string exec=command.replace (pos, Flist.length (), Flist);	
-				system (exec.c_str ());	
-				
-				time_iter=Flist_vector_time.begin();
-				vector &lt;string&gt; copysrc;
-				
-				for (iter = Flist_vector.begin (); iter != Flist_vector.end (); iter++)
- 		 		{
-					FXTime t2=FXFile::modified(iter-&gt;c_str());
-					if(t2!=*time_iter)
-					{
-					copysrc.push_back(*iter);
-					
-					}
-					time_iter++;
-				}
-				
-				
-				if(copysrc.size()&gt;0)
-				{
-				thread_elem *el2 = new thread_elem (fb, &quot;copy&quot;, &quot;download&quot;,copysrc,fbdir);
-				fb-&gt;copy (el2);
-				delete el2;
-				
-				}
-				
-				
-			}
-		 
-		 
-		if(exportfile)
-		{
-		FXFile::remove(destdir.c_str());
-		}
-		
-		
-	
-	
-	}
-   				
-	
-
-    }
-    else if (el-&gt;command == &quot;init&quot;)
-    {
-
-	fb-&gt;init (&amp;filel-&gt;vector_name, (*(filel-&gt;pt)), conf);
-
-    }
-
-
-    el-&gt;end = true;
-}
-
-
-int filelist::runCommand(string command)
-{
-
-
-string command_type=conf-&gt;readonestring (&quot;/OpenspaceConfig/commands/&quot; + command + &quot;/type&quot;);
-
-
-/*
-    int k = getCurrentItem ();
-    os_ListItem *oslistitem = (os_ListItem *) getItem (k);
-    string dir=returnpath(getItemText(k).text());
-    string name = oslistitem-&gt;osf.name;	
-*/
-
-    if (command_type == &quot;VFS&quot;)	//internal command, open new window for virtual file system
-    {
-		int c = getCurrentItem ();
-		string *file = new string (returnpath(getItemText (c).text ()));
-		notifyparent-&gt;handle (this, FXSEL (SEL_COMMAND, 667), (void *) file);
-		return 0;
-    }
-    else if (command_type == &quot;EXTERNAL&quot; || command_type==&quot;&quot;)
-    {
-
-
-	string res = conf-&gt;readonestring (&quot;/OpenspaceConfig/commands/&quot; + command + &quot;/exec&quot;);
-	string options = conf-&gt;readonestring (&quot;/OpenspaceConfig/commands/&quot; + command + &quot;/options&quot;);
-	if (res == &quot;&quot;)
-	    return 0;
-	    
-       string exec=res;
-    
-  		bool simple_command=true;
-		int pos = exec.find (&quot;{F}&quot;);
-		if (pos != -1)
-		simple_command=false;
-		else
-		pos = exec.find (&quot;{f}&quot;);
-		
-	    if (pos == -1)//command don't need any selected files
-	    {
-	
-		thread_elem *el = new thread_elem (fb, &quot;execute&quot;, options, res);
-		start_thread (el);
-	    }
-	    else
-	    {
-	    	vector&lt;string&gt; src;
-	
-		
-	    	for (int i = 0; i &lt; getNumItems (); i++)
-		{
-	    		if (isItemSelected (i))
-	   		 {
-		 		 os_ListItem *oslistitem = (os_ListItem *) getItem (i);
-				 string name = oslistitem-&gt;osf.name;
-				 string fullname = returnpath(name);
-				 
-				 if(simple_command==true)
-				 {
-				 thread_elem *el = new thread_elem (fb, &quot;execute&quot;, options,fullname,exec);
-	  	 		 start_thread (el);
-				 }
-				 else			
-				 src.push_back(fullname);
-				 
-				 				 
-			 }
-	
-		 }
-		 
-		 if(simple_command==false &amp;&amp; src.size()&gt;0) 
-		 {
-	   	   thread_elem *el = new thread_elem (fb, &quot;execute&quot;, options,src,exec);
-	  	   start_thread (el);
-		 }
-	    
-	    }
-
-
-    }
-
-    else if (command_type == &quot;INTERNAL&quot;)
-    {
-
-
-	if (command == &quot;other&quot;)
-	{
-	    path = filelist_opposite-&gt;path;
-	    //label-&gt;setText(path.c_str());
-	    notifyparent-&gt;handle (this, FXSEL (SEL_COMMAND, 666), NULL);
-	    opendir (filelist_opposite-&gt;path);
-	}
-	else if (command == &quot;copy&quot; || command == &quot;move&quot; || command == &quot;remove&quot;)
-	{
-	    copymoveremove (command);
-	}
-	else if (command == &quot;new_file&quot;)
-	{
-
-	    string sr = &quot;touch &quot; + returnpath(&quot;newfile&quot;);
-	    system (sr.c_str ());
-	    refresh ();
-	}
-	else if (command == &quot;totalsize&quot;)
-	{
-
-	    unsigned long size = 0;
-	    for (int c = 0; c &lt; getNumItems (); c++)
-	    {
-		if (isItemSelected (c))
-		{
-		    string sr = returnpath(getItemText (c).text ());
-		    if (FXFile::isDirectory (sr.c_str ()))
-			sr.append (SEPARATOR);
-		    fb-&gt;totalsize (sr, size);
-
-		}
-
-
-	    }
-
-
-	    string inf = &quot;total size: &quot; + numtostring (size);
-	    info-&gt;setText (inf.c_str ());
-	}
-	else if (command == &quot;umount&quot;)
-	{
-	    int c = getCurrentItem ();
-	    string sr = returnpath(getItemText (c).text ());
-	    umount2 (sr.c_str (), MNT_FORCE);
-	}
-	else if (command == &quot;refresh&quot;)
-	{
-		refresh ();
-	} 
-	else if (command == &quot;select_all&quot;)
-	{
-		for (int i = 0; i &lt; getNumItems (); i++)
-		{
-	  	  string name = getItem (i)-&gt;getText ().text ();
-	   		 if (name != &quot;.&quot; &amp;&amp; name != &quot;..&quot;)
-			 selectItem (i);
-		}
-	}    
-	else if (command == &quot;home&quot;)
-	{
-		 opendir(FXFile::getHomeDirectory ().text ());
-   		 path=FXFile::getHomeDirectory ().text ();
-  		 notifyparent-&gt;handle (this, FXSEL (SEL_COMMAND, 666), NULL);
-	} 
-	else if (command == &quot;dirup&quot;)
-	{
-		 this-&gt;handle (this, FXSEL (SEL_MIDDLEBUTTONPRESS, ID_ICO), NULL);
-	} 
-	else if (command == &quot;change_view_mini_icons&quot;)
-	{
-	setFont (objmanager-&gt;captionfont3);
-	setListStyle (ICONLIST_EXTENDEDSELECT | ICONLIST_MINI_ICONS | ICONLIST_COLUMNS);
-	refresh ();
-	conf-&gt;saveonestring (&quot;/OpenspaceConfig/filelist/&quot; + this-&gt;type + &quot;/style&quot;,&quot;small icons&quot;);
-    	}
-    	else if (command == &quot;change_view_big_icons&quot;)
-	{
-	setFont (objmanager-&gt;captionfont1);
-	setListStyle (ICONLIST_EXTENDEDSELECT | ICONLIST_BIG_ICONS | ICONLIST_COLUMNS);
-	refresh ();
-	conf-&gt;saveonestring (&quot;/OpenspaceConfig/filelist/&quot; + this-&gt;type + &quot;/style&quot;,&quot;big icons&quot;);
-   	}
-	else if (command == &quot;change_view_detailed&quot;)
-	{
-	setFont (objmanager-&gt;captionfont3);
-	setListStyle (ICONLIST_EXTENDEDSELECT | ICONLIST_DETAILED | ICONLIST_COLUMNS);
-	refresh ();
-	conf-&gt;saveonestring (&quot;/OpenspaceConfig/filelist/&quot; + this-&gt;type + &quot;/style&quot;,&quot;detailed&quot;);
-    	}
-	else if(command == &quot;clipboard_copy&quot; || command == &quot;clipboard_cut&quot;)
-	{
-		  FXDragType types[1];
-   		  types[0] = urilistType;
-    
-  		  if (acquireClipboard (types, 1))
-    		  {
-   
-
-  			 if(command == &quot;clipboard_copy&quot;)
-   			 {
-   			 dropaction=DRAG_COPY;
-   			 }
-   			 else if(command == &quot;clipboard_cut&quot;)
-   			 {
-   			 dropaction=DRAG_MOVE;
-   			 }
-    
-    
-    			 //FXEvent *event = (FXEvent *) ptr;
-   			  //handleDrag (event-&gt;root_x, event-&gt;root_y, dropaction);
-     
-			filelist_opposite-&gt;dropaction=dropaction;
-
-			dragfiles = FXString::null;
-		for (int i = 0; i &lt; getNumItems (); i++)
-		{
-	   	 if (isItemSelected (i))
-	  	  {
-			os_ListItem *oslistitem = (os_ListItem *) getItem (i);
-			string name = oslistitem-&gt;osf.name;
-			string fullname =returnpath(name);
-			if (name != &quot;.&quot; &amp;&amp; name != &quot;..&quot;)
-			{
-			    if (!dragfiles.empty ())
-				dragfiles += &quot;\r\n&quot;;
-			    dragfiles += FXURL::fileToURL (fullname.c_str ());
-		    
-			}
-	   	 }
-		}
-
-   	      }
- 
-	}
-	else if(command == &quot;clipboard_paste&quot;)
-	{
-		dropData (true);
-	}
-	else if(command == &quot;switch_on_or_two_panel_mode&quot;)
-	{
-	
-		if (filelist_opposite-&gt;getWidth () == 0)
-		maximize = true;
-
-  		 maximize = !maximize;
-
-  		 if (maximize)
-   		 {
-			conf-&gt;saveonestring (&quot;/OpenspaceConfig/panels&quot;, &quot;single&quot;);
-   		 }
-   		 else
-   		 {
-			conf-&gt;saveonestring (&quot;/OpenspaceConfig/panels&quot;, &quot;double&quot;);
-   		 }
-   	 notifyparent-&gt;handle (this, FXSEL (SEL_COMMAND, 668), NULL);
-	
-	}
-	else if(command == &quot;filter_files&quot;)
-	{
-
-		for (int i = 0; i &lt; getNumItems (); i++)
-		{
-	  	  deselectItem (i);
-		}
-
-
-		FXRex identifier (textfield-&gt;getText ());
-
-		for (int i = 0; i &lt; getNumItems (); i++)
-		{
-	 	   os_ListItem *oslistitem = (os_ListItem *) getItem (i);
-	   	   string name = oslistitem-&gt;osf.name;
-	   	 	if (identifier.match (name.c_str ()))
-	   	 	{
-			selectItem (i);
-	   		}
-		}
-
-       }
-       else if(command == &quot;goto_dir&quot;)
-       {
-	opendir (textfield-&gt;getText ().text ());
-	path = textfield-&gt;getText ().text ();
-	notifyparent-&gt;handle (this, FXSEL (SEL_COMMAND, 666), NULL);
-       }
-       else if (command == &quot;get_dir&quot;)
-       {
-	textfield-&gt;setText (path.c_str ());
-       }
-       else if(command==&quot;show_hide_hidden_files&quot;)
-       {
-       show_hidden_files=!show_hidden_files;
-       refresh();
-       
-      	 if(show_hidden_files)
-	 conf-&gt;saveonestring (&quot;/OpenspaceConfig/show_hidden_files&quot;,&quot;true&quot;);
-	 else
-	 conf-&gt;saveonestring (&quot;/OpenspaceConfig/show_hidden_files&quot;,&quot;false&quot;);
-       
-       }
-
-	
-	
-	
-	
-    }
-
-    else if (command_type == &quot;PLUGIN&quot;)
-    {
-	
-
-
-
-	string plugin_path = string(PATH_LIBDIR) + &quot;/openspace/plugins/cmddialog/lib&quot; + command;
-#ifdef WIN32
-	plugin_path += &quot;.dll&quot;;
-#else
-	plugin_path += &quot;.so&quot;;
-#endif
-
-	if(!FXFile::exists(plugin_path.c_str()))
-	{
-	plugin_path = FXFile::getUserDirectory (&quot;&quot;).text ()+string(&quot;/.openspace/plugins/cmddialog&quot;)+&quot;/lib&quot; + command;
-	#ifdef WIN32
-	plugin_path += &quot;.dll&quot;;
-	#else
-	plugin_path += &quot;.so&quot;;
-	#endif
-	}
-
-
-	void *dllhandle = fxdllOpen (plugin_path.c_str ());
-
-	fxmessage (fxdllError ().text ());
-
-	if (dllhandle)
-	{
-
-	    int selit = 0;
-
-	    for (int c = 0; c &lt; getNumItems (); c++)
-	    {
-		if (isItemSelected (c))
-		    selit++;
-	    }
-
-	
-	    vector &lt; string &gt; src;
-	    for (int c = 0; c &lt; getNumItems (); c++)
-	    {
-		if (isItemSelected (c))
-		{
-		    src.push_back(returnpath(getItemText (c).text ()));
-		}
-	    }
-	
-	    cmddialog *(*gg) (FXWindow *, filelist_base * fb, vector &lt; string &gt; src);
-	    gg = (cmddialog * (*)(FXWindow *, filelist_base * fb, vector &lt; string &gt; src)) fxdllSymbol (dllhandle, &quot;get_cmddialog&quot;);
-	    dial = gg (this, fb, src);
-	    dial-&gt;create ();
-
-	    dial-&gt;show (PLACEMENT_OWNER);
-
-	}
-
-
-    }
-    
-
-
-}
-
-//double click on file/direcotry in filelist
-long filelist::openfile (FXObject * sender, FXSelector, void *)
-{
-
-    if (processing)
-	return 0;
-
-    int k = getCurrentItem ();
-    os_ListItem *oslistitem = (os_ListItem *) getItem (k);
-  
-    if (oslistitem-&gt;osf.type &amp; FOLDER)
-    {
-	string dir = this-&gt;path;
-
-	if (getItemText (k) == &quot;..&quot;)
-	{
-	    dir = FXFile::upLevel (dir.c_str ()).text ();
-
-	}
-	else if (getItemText (k) == &quot;.&quot;)
-	{
-	    dir = dir;
-	}
-	else
-	{
-	    dir=returnpath(getItemText(k).text());
-	}
-
-	;
-	//label-&gt;setText(path.c_str());
-	
-	if(opendir (dir))
-	{
-	path = dir;
-	notifyparent-&gt;handle (this, FXSEL (SEL_COMMAND, 666), NULL);
-  	
-	}  
-    }
-    else
-    {    
-    	string name = oslistitem-&gt;osf.name;
-	string command = getdefaultcommand (name);
-	
-	if(command!=&quot;&quot;)
-	runCommand(command);	
-        else if (oslistitem-&gt;osf.type &amp; EXECUTABLE)
-   	{
-    	    string command=returnpath(oslistitem-&gt;osf.name);
-	    command+=&quot; &amp;&quot;;
-	    system (command.c_str ());
-   	}
-	else
-	{
-	runCommand(conf-&gt;readonestring (&quot;/OpenspaceConfig/file_types/COMMON/types/all/default&quot;));
-	
-	}
-			
-    }
-
-}
-
-//----------------------------------------------------  
-// go up dir, 3rd button of mouse 
-long filelist::gotoparentdir (FXObject *, FXSelector, void *)
-{
-    if (processing)
-	return 0;
-
-   string pathnew = FXFile::upLevel (path.c_str ()).text ();
-    
-    if(opendir (pathnew));
-    {
-    this-&gt;path = pathnew;
-    notifyparent-&gt;handle (this, FXSEL (SEL_COMMAND, 666), NULL);
-    
-    }
-}
-
-
-//----------------------------------------------------   
-//poup menu
-long filelist::onPopup (FXObject *, FXSelector, void *ptr)
-{
-
-    if (processing)
-	return 0;
-
-commands_tab.clear();
-
-    FXEvent *event = (FXEvent *) ptr;
-    selectitem ();
-
-    int k = getCurrentItem ();
-
-    if (popupmenu)
-    {
-	delete popupmenu;
-	popupmenu = NULL;
-    }
-
-    popupmenu = new FXMenuPane (this);
-
-
-
-    FXShutter *shutterFrame = new shutter (popupmenu, this);
-    FXShutterItem *shutterItem;
-
-
-
-    int command_num = 0;
-
-
-    if (conf-&gt;openxpath (&quot;/OpenspaceConfig/shutter&quot;) != -1)
-    {
-	string res;
-	while (conf-&gt;getnextnode (res))
-	{
-
-
-	    configure conflocal = *conf;
-	    //shutterItem = new FXShutterItem(shutterFrame,res.c_str(),NULL,      FRAME_SUNKEN|LAYOUT_FILL_X|LAYOUT_FILL_Y|LAYOUT_TOP|LAYOUT_LEFT,0,0,0,0,0,0,0,0,0,0);
-	    // shutterItem = new FXShutterItem(shutterFrame,res.c_str(),osicons[8],FRAME_NONE|LAYOUT_FILL_X|LAYOUT_FILL_Y|LAYOUT_TOP|LAYOUT_LEFT,0,0,0,0,0,0,0,0,0,0);
-	    shutterItem = new FXShutterItem (shutterFrame, res.c_str (), objmanager-&gt;osicons[&quot;execute&quot;], FRAME_NONE | LAYOUT_FILL_X | LAYOUT_FILL_Y | LAYOUT_TOP | LAYOUT_LEFT, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0);
-
-	    FXButton *but = shutterItem-&gt;getButton ();
-	    FXVerticalFrame *content = shutterItem-&gt;getContent ();
-
-	    but-&gt;setButtonStyle (BUTTON_TOOLBAR);
-	    but-&gt;setIconPosition (ICON_BEFORE_TEXT);
-	    but-&gt;setJustify (JUSTIFY_LEFT);
-	    but-&gt;setBackColor (objmanager-&gt;maincolor);
-	    //but-&gt;setBackColor (readcolor (conf-&gt;readonestring (&quot;/OpenspaceConfig/colors/maincolor&quot;)));
-	    content-&gt;setBackColor (getApp ()-&gt;getShadowColor ());
-	    if (conflocal.openxpath (&quot;/OpenspaceConfig/shutter/&quot; + res + &quot;/command&quot;) != -1)
-	    {
-	    string res;
-		while (conflocal.getnextstring (res))
-		{
-	
-
-		    string comm_s;
-		    if (res == &quot;special&quot;)
-		    {
-			int sp = 0;
-			list &lt; string &gt; supported_commands;
-			list &lt; string &gt;::iterator nums_iter;
-
-			for (int i = 0; i &lt; getNumItems (); i++)
-			{
-			    if (isItemSelected (i))
-			    {
-				sp++;
-				os_ListItem *oslistitem = (os_ListItem *) getItem (i);
-				string ext = getfiletype (oslistitem-&gt;osf.name);
-				string rep;
-
-				string str = &quot;/types/&quot;;
-				ext = ext.replace (ext.find (&quot;/&quot;), 1, str);
-				rep = &quot;file_types/&quot; + ext;
-
-				if (oslistitem-&gt;osf.type &amp; FOLDER)
-				{
-				    rep = &quot;file_types/COMMON/types/dir&quot;;
-				    ext = &quot;dir&quot;;
-				}
-				configure conflocal3 = *conf;
-
-				int open = 0;
-
-				if (ext != &quot;&quot; &amp;&amp; conflocal3.openxpath (&quot;/OpenspaceConfig/&quot; + rep + &quot;/commands/command&quot;) != -1)
-				{
-				    open++;
-				       string res;
-					while (conflocal3.getnextstring (res))
-					{
-
-
-					if (sp == 1)
-					{
-					    supported_commands.push_back (res);
-					}
-					else	//sp &gt;1
-					{
-					    nums_iter = find (supported_commands.begin (), supported_commands.end (), res);
-					    if (nums_iter == supported_commands.end ())
-					    {
-						supported_commands.remove (res);
-					    }
-					}
-
-
-				    }
-				}
-
-
-
-
-				ext = ext.substr (0, ext.find (&quot;/&quot;));
-				rep = &quot;file_types/&quot; + ext;
-
-				if (ext != &quot;&quot; &amp;&amp; conflocal3.openxpath (&quot;/OpenspaceConfig/&quot; + rep + &quot;/commands/command&quot;) != -1)
-				{
-				    open++;
-				        string res;
-				   while (conflocal3.getnextstring (res))
-				   {
-
-
-					if (sp == 1)
-					{
-					    supported_commands.push_back (res);
-					}
-					else	//sp &gt;1
-					{
-					    nums_iter = find (supported_commands.begin (), supported_commands.end (), res);
-					    if (nums_iter == supported_commands.end ())
-					    {
-						supported_commands.remove (res);
-					    }
-					}
-
-
-				    }
-				}
-
-				if (open == 0)
-				{
-				    supported_commands.clear ();
-				}
-
-
-			    }
-			}
-
-
-
-
-
-			while (supported_commands.size () &gt; 0)
-			{
-
-			    string res = supported_commands.front ();
-			    supported_commands.pop_front ();
-
-			    configure conflocal2 = conflocal;
-			    string command_text = conflocal2.readonestring (&quot;/OpenspaceConfig/commands/&quot; + res + &quot;/text&quot;);
-			    if(command_text==&quot;&quot;)command_text=res;
-		
-			    new FXButton (shutterItem-&gt;getContent (), command_text.c_str (), 0, this, ID_LAST + command_num, FRAME_RAISED | LAYOUT_FILL_X | LAYOUT_TOP | LAYOUT_LEFT | BUTTON_TOOLBAR, 0, 0, 0, 0, 0, 0, 0, 0);
-			    commands_tab.push_back(res.c_str ());
-			    command_num++;
-
-			}
-
-			continue;
-		    }
-
-		    configure conflocal2 = conflocal;
-		    string command_text = conflocal2.readonestring (&quot;/OpenspaceConfig/commands/&quot; + res + &quot;/text&quot;);
-		    if(command_text==&quot;&quot;)command_text=res;
-	
-		    new FXButton (shutterItem-&gt;getContent (), command_text.c_str (), 0, this, ID_LAST + command_num, FRAME_RAISED | LAYOUT_FILL_X | LAYOUT_TOP | LAYOUT_LEFT | BUTTON_TOOLBAR, 0, 0, 0, 0, 0, 0, 0, 0);
-		    commands_tab.push_back(res.c_str ());
-		    command_num++;
-
-		}
-
-	    }
-
-	}
-    }
-
-
-
-    int height_size = ((shutter *) shutterFrame)-&gt;getheight ();
-    popupmenu-&gt;create ();
-
-
-
-    popup_x = event-&gt;root_x - 5;
-    popup_y = event-&gt;root_y - 5;
-
-    popupmenu-&gt;popup (NULL, popup_x, popup_y, 90, height_size);
-    getApp ()-&gt;runModalWhileShown (popupmenu);
-    popupmenu-&gt;setFocus ();
-    return 1;
-
-
-}
-
-//----------------------------------------------------  
-// choose command from popoup menu
-long filelist::file_operation (FXObject * obj, FXSelector sel, void *ptr)
-{
-    if (processing)
-	return 0;
-	
-	
-
-    FXushort id = FXSELID (sel);
-    
-    string com_name;
-
-    if(((FXWindow*)obj)-&gt;getParent()==toolbar2 || ((FXWindow*)obj)-&gt;getParent()==toolbar)
-    {
-    com_name = button_commands_tab[id - ID_LAST];
-    }
-    
-    else
-    {   
-    com_name = commands_tab[id - ID_LAST];
-    }
-    
-    if(popupmenu)
-  	   popupmenu-&gt;popdown ();
-    
-    runCommand(com_name);
-
-}
-
-
-//execute function(copying files etc) as thread 
-void filelist::start_thread (thread_elem * te)
-{
-
-    te-&gt;filel = (void *) this;
-
-   objmanager-&gt;thread_vec.push_back (te);
-
-
-    if (te-&gt;command == &quot;execute&quot; &amp;&amp; te-&gt;options == &quot;capture&quot;)
-    {
-	pipe (te-&gt;p);
-	fcntl (te-&gt;p[0], O_NONBLOCK);
-
-	if (fork () == 0)	//child
-	{
-	    close (te-&gt;p[0]);
-	    dup2 (te-&gt;p[1], fileno (stdout));
-
-	    //close(te-&gt;p[1]);
-
-
-	    //if(execl(&quot;/bin/ls&quot;,&quot;ls&quot;,NULL)== -1)perror(&quot;execl&quot;);
-		
-	    system (te-&gt;src[0].c_str ());
-	    /*
-	       ;
-	     */
-	    string end = &quot;!&quot;;
-	    write (te-&gt;p[1], end.c_str (), end.size ());
-	    _exit (0);
-	}
-	else
-	{
-	    close (te-&gt;p[1]);
-	}
-
-
-    }
-    else
-    {
-
-	pthread_t t;
-	pthread_attr_t attr;
-	pthread_attr_init (&amp;attr);
-	pthread_create (&amp;t, &amp;attr, filelist::thread_func, (void *) te);
-	pthread_attr_destroy (&amp;attr);
-    }
-
-}
-
-//thread function
-
-
-
-//----------------------------------------------------   
-
-void filelist::refresh (void)
-{
-    if (processing)
-	return;
-    opendir (path);
-}
-
-//----------------------------------------------------   
-//select item using right mouse button
-void filelist::selectitem ()
-{
-    if (processing)
-	return;
-
-    int num = 0;
-    for (int u = 0; u &lt; getNumItems (); u++)
-	if (isItemSelected (u))
-	    num++;
-
-    if (num &lt;= 1)
-    {
-	FXint x, y;
-	FXuint state;
-	getCursorPosition (x, y, state);
-
-	int item = getItemAt (x, y);
-
-	if (getCurrentItem () &gt;= 0)
-	    deselectItem (getCurrentItem ());
-
-	if (item &gt;= 0)
-	{
-	    setCurrentItem (item);
-	    if (!selectItem (item));
-	}
-
-    }
-
-
-}
-
-//----------------------------------------------------  
-//function for sorting files in filelist
-FXint filelist::cmp (const FXIconItem * pa, const FXIconItem * pb)
-{
-
-
-    os_ListItem *a = (os_ListItem *) pa;
-    os_ListItem *b = (os_ListItem *) pb;
-
-    filelist *fl = (filelist *) a-&gt;list;
-
-    if (b-&gt;osf.type &amp; FOLDER &amp;&amp; !(a-&gt;osf.type &amp; FOLDER))
-	return 1;
-    else if (a-&gt;osf.type &amp; FOLDER &amp;&amp; !(b-&gt;osf.type &amp; FOLDER))
-	return -1;
-
-/*
- register FXint diff=b-&gt;osf.type|FOLDER - a-&gt;osf.type|FOLDER;	
-	 if(diff) 
-		return diff;
-		*/
-    register const unsigned char *p;
-    register const unsigned char *q;
-
-    if (fl-&gt;sort_nr == 0)	//name
-    {
-	p = (const unsigned char *) a-&gt;getText ().text ();
-	q = (const unsigned char *) b-&gt;getText ().text ();
-    }
-    else if (fl-&gt;sort_nr == -1)	//extension sorting
-    {
-	string exta = filelist::getfiletype (a-&gt;getText ().text ());
-	if (exta == &quot;&quot;)
-	    exta = &quot;zzzzz&quot;;
-	string extb = filelist::getfiletype (b-&gt;getText ().text ());
-	if (exta == &quot;&quot;)
-	    extb = &quot;zzzzz&quot;;
-
-
-	p = (const unsigned char *) exta.c_str ();
-	q = (const unsigned char *) extb.c_str ();
-
-    }
-    else
-    {
-	p = (const unsigned char *) a-&gt;osf.attrib[fl-&gt;sort_nr-1].c_str ();
-	q = (const unsigned char *) b-&gt;osf.attrib[fl-&gt;sort_nr-1].c_str ();
-	
-    }
-    
-    
-    if (fl-&gt;vector_type[fl-&gt;sort_nr] == 1)	//size      
-    {
-
-	if (a-&gt;osf.size &gt; b-&gt;osf.size)
-	    if (ascend)
-		return 1;
-	    else
-		return -1;
-	else if (ascend)
-	    return -1;
-	else
-	    return 1;
-
-    }
-    else if(fl-&gt;vector_type[fl-&gt;sort_nr] == 2)  //date
-    {
-    
-    
-       struct tm tm1;
-       struct tm tm2;
-
-       strptime((const char*)p, &quot;%H:%M %d/%m/%y&quot;, &amp;tm1);
-       strptime((const char*)q, &quot;%H:%M %d/%m/%y&quot;, &amp;tm2);
-    time_t t1=mktime(&amp;tm1);
-    time_t t2=mktime(&amp;tm2);
-   
-    
-      if(t1&gt;t2) 
-      	if(ascend)
-      	  return 1;
-	else  
-	  return -1;
-      else  if(t1&lt;t2)	
-      	if(ascend)
-      	  return -1;
-	else  
-	  return 1;
-      else 
-      	return 0;		      
-    } 
-    else			//string
-    {
-
-	while (1)
-	{
-
-	    if (!*p)
-		break;
-	    if (!*q)
-		break;
-
-	    if (strcase)
-	    {
-		if (*p &gt; *q)
-		    if (ascend)
-			return 1;
-		    else
-			return -1;
-		if (*p &lt; *q)
-		    if (ascend)
-			return -1;
-		    else
-			return 1;
-	    }
-	    else
-	    {
-		if (tolower (*p) &gt; tolower (*q))
-		    if (ascend)
-			return 1;
-		    else
-			return -1;
-		if (tolower (*p) &lt; tolower (*q))
-		    if (ascend)
-			return -1;
-		    else
-			return 1;
-	    }
-
-	    p++;
-	    q++;
-	}
-	return 0;
-
-    }
-
-
-
-
-}
-
-
-//--------------------------------------------------------------------
-
-long filelist::onCmdResize(FXObject * sender, FXSelector sel, void *ptr)
-{
-
-//FXIconList::onHeaderResize(sender, sel,ptr);
-
-for(int i=0;i&lt;getNumHeaders();i++)
-	{
-	string header=getHeaderText(i).text();
-	int width=getHeaderSize(i);
-	conf-&gt;saveonestring(&quot;/OpenspaceConfig/filelist/&quot;+this-&gt;type+&quot;/properties/&quot;+header+&quot;/width&quot;,ntos(width));
-	
-	}
-}
-
-
-
-//--------------------------------------------------------------------
-//click on filelist header (change sorting)
-long filelist::onCmdHeader (FXObject *, FXSelector sel, void *ptr)
-{
-    if (processing)
-	return 0;
-
-
-    FXASSERT ((5, &quot;CMDHEADER\n&quot;));
-    FXushort id = FXSELID (sel);
-    int num;
-
-    if (id == ID_SORT_CHANGE)
-    {
-	FXOption *option = sortmenu-&gt;getCurrent ();
-	string sort = option-&gt;getText ().text ();
-	if (sort == &quot;file type&quot;)
-	{
-
-	    num = -1;
-	}
-	else
-	    num = sortmenu-&gt;getCurrentNo ();
-    }
-    else
-    {
-	num = ((int)*((int*)ptr));
-    }
-
-    if (num == sort_nr)
-    {
-	ascend = !ascend;
-    }
-    else
-    {
-	sort_nr = num;
-    }
-
-
-    sortItems ();
-}
-
-//execute command from cmddialog plugin and hide this plugin window
-long filelist::onCommand (FXObject *, FXSelector, void *ptr)
-{
-
-    if (dial-&gt;exec () != -1)
-    {
-	dial-&gt;hide ();
-	//delete dial;
-    }
-    refresh ();
-
-
-}
-
-//cancel cmddialog
-long filelist::onCommandCancel (FXObject *, FXSelector, void *ptr)
-{
-    dial-&gt;hide ();
-    delete dial;
-}
-
-//update info about selected files
-long filelist::click (FXObject *, FXSelector, void *ptr)
-{
-    int count = 0;
-    long unsigned int size = 0;
-    os_ListItem *os;
-    for (int i = 0; i &lt; getNumItems (); i++)
-    {
-	if (isItemSelected (i))
-	{
-
-	    count++;
-	    os = (os_ListItem *) getItem (i);
-	    size += os-&gt;osf.size;
-
-	}
-    }
-    string inf = &quot;selected: &quot; + ntos (count) + &quot; size: &quot; + numtostring (size);
-    if (count == 1)
-    {
-	inf = inf + &quot; &quot; + os-&gt;osf.name;
-    }
-
-
-    info-&gt;setText (inf.c_str ());
-
-}
-
-
-    
-
-
-//===================================================================================================
-//Below only drag and drop functions:
-
-// Handle drag-and-drop enter, remember current directory
-long filelist::onDNDEnter (FXObject * sender, FXSelector sel, void *ptr)
-{
-
-    FXIconList::onDNDEnter (sender, sel, ptr);
-    //orgdirectory=getDirectory();
-    return 1;
-}
-
-
-// Handle drag-and-drop leave, restore current directory prior to drag
-long filelist::onDNDLeave (FXObject * sender, FXSelector sel, void *ptr)
-{
-    FXIconList::onDNDLeave (sender, sel, ptr);
-    // getApp()-&gt;removeTimeout(this,ID_OPENTIMER);
-    stopAutoScroll ();
-    // setDirectory(orgdirectory);
-    return 1;
-}
-
-
-// Handle drag-and-drop motion
-long filelist::onDNDMotion (FXObject * sender, FXSelector sel, void *ptr)
-{
-    FXEvent *event = (FXEvent *) ptr;
-    FXint index = -1;
-
-    // Cancel open up timer
-    // getApp()-&gt;removeTimeout(this,ID_OPENTIMER);
-
-    // Start autoscrolling
-    if (startAutoScroll (event, FALSE))
-	return 1;
-
-    // Give base class a shot
-    if (FXIconList::onDNDMotion (sender, sel, ptr))
-	return 1;
-
-    // Dropping list of filenames
-    if (offeredDNDType (FROM_DRAGNDROP, urilistType))
-    {
-
-	// Drop in the background
-	//  dropdirectory=getDirectory();
-
-	// What is being done (move,copy,link)
-	dropaction = inquireDNDAction ();
-/*
-    // We will open up a folder if we can hover over it for a while
-    index=getItemAt(event-&gt;win_x,event-&gt;win_y);
-    if(0&lt;=index &amp;&amp; isItemDirectory(index)){
-
-      // Set open up timer
-      getApp()-&gt;addTimeout(this,ID_OPENTIMER,700);
-
-      // Directory where to drop, or directory to open up
-      dropdirectory=getItemPathname(index);
-      }
-*/
-	// See if dropdirectory is writable
-	// if(FXFile::isWritable(dropdirectory)){
-	//  FXTRACE((100,&quot;accepting drop on %s\n&quot;,dropdirectory.text()));
-	acceptDrop (DRAG_ACCEPT);
-	//   }
-	return 1;
-    }
-    return 0;
-}
-
-
-// Handle drag-and-drop drop
-long filelist::onDNDDrop (FXObject * sender, FXSelector sel, void *ptr)
-{
-    // Cancel open up timer
-//  getApp()-&gt;removeTimeout(this,ID_OPENTIMER);
-
-    // Stop scrolling
-    stopAutoScroll ();
-
-
-    // Perhaps target wants to deal with it
-    if (FXIconList::onDNDDrop (sender, sel, ptr))
-	return 1;
-    dropData (false);
-
-
-    return 0;
-}
-
-
-// Somebody wants our dragged data
-long filelist::onDNDRequest (FXObject * sender, FXSelector sel, void *ptr)
-{
-    FXEvent *event = (FXEvent *) ptr;
-    FXuchar *data;
-    FXuint len;
-
-    // Perhaps the target wants to supply its own data
-    if (FXIconList::onDNDRequest (sender, sel, ptr))
-	return 1;
-
-    // Return list of filenames as a uri-list
-    if (event-&gt;target == urilistType)
-    {
-	if (!dragfiles.empty ())
-	{
-	    len = dragfiles.length ();
-	    FXMEMDUP (&amp;data, dragfiles.text (), FXuchar, len);
-	    setDNDData (FROM_DRAGNDROP, event-&gt;target, data, len);
-	}
-	return 1;
-    }
-
-    // Delete selected files
-    if (event-&gt;target == deleteType)
-    {
-	FXTRACE ((100, &quot;Delete files not yet implemented\n&quot;));
-	return 1;
-    }
-
-    return 0;
-}
-
-string filelist::returnpath(string dirname)
-{
-	string ret;
-	if(path==SEPARATOR)
-	ret=SEPARATOR + dirname;
-	else
-	ret=path + SEPARATOR + dirname;
-	
-	return ret;
-}
-
-// Start a drag operation
-long filelist::onBeginDrag (FXObject * sender, FXSelector sel, void *ptr)
-{
-    register FXint i;
-    if (FXIconList::onBeginDrag (sender, sel, ptr))
-	return 1;
-    if (beginDrag (&amp;urilistType, 1))
-    {
-	dragfiles = FXString::null;
-	for (i = 0; i &lt; getNumItems (); i++)
-	{
-	    if (isItemSelected (i))
-	    {
-
-		os_ListItem *oslistitem = (os_ListItem *) getItem (i);
-		string name = oslistitem-&gt;osf.name;
-		string fullname = returnpath(name);
-		if (name != &quot;.&quot; &amp;&amp; name != &quot;..&quot;)
-		{
-		    if (!dragfiles.empty ())
-			dragfiles += &quot;\r\n&quot;;
-
-		    dragfiles += FXURL::fileToURL (fullname.c_str ());
-		}
-	    }
-	}
-	return 1;
-    }
-    return 0;
-}
-
-
-// End drag operation
-long filelist::onEndDrag (FXObject * sender, FXSelector sel, void *ptr)
-{
-    if (FXIconList::onEndDrag (sender, sel, ptr))
-	return 1;
-    endDrag ((didAccept () != DRAG_REJECT));
-    setDragCursor (getDefaultCursor ());
-    dragfiles = FXString::null;
-    return 1;
-}
-
-
-// Dragged stuff around
-long filelist::onDragged (FXObject * sender, FXSelector sel, void *ptr)
-{
-    FXEvent *event = (FXEvent *) ptr;
-    FXDragAction action;
-    if (FXIconList::onDragged (sender, sel, ptr))
-	return 1;
-    action = DRAG_MOVE;
-    if (event-&gt;state &amp; CONTROLMASK)
-	action = DRAG_COPY;
-    if (event-&gt;state &amp; SHIFTMASK)
-	action = DRAG_MOVE;
-    if (event-&gt;state &amp; ALTMASK)
-	action = DRAG_LINK;
-    handleDrag (event-&gt;root_x, event-&gt;root_y, action);
-    if (didAccept () != DRAG_REJECT)
-    {
-	if (action == DRAG_MOVE)
-	    setDragCursor (getApp ()-&gt;getDefaultCursor (DEF_DNDMOVE_CURSOR));
-	else if (action == DRAG_LINK)
-	    setDragCursor (getApp ()-&gt;getDefaultCursor (DEF_DNDLINK_CURSOR));
-	else
-	    setDragCursor (getApp ()-&gt;getDefaultCursor (DEF_DNDCOPY_CURSOR));
-    }
-    else
-    {
-	setDragCursor (getApp ()-&gt;getDefaultCursor (DEF_DNDSTOP_CURSOR));
-    }
-    return 1;
-}
-
-
-
-
-
-//----------------------------------------------------  
-
-
-// We now really do have the clipboard, keep clipped text
-long filelist::onClipboardGained (FXObject * sender, FXSelector sel, void *ptr)
-{
-    FXIconList::onClipboardGained (sender, sel, ptr);
-    return 1;
-}
-
-
-// We lost the clipboard, free clipped text
-long filelist::onClipboardLost (FXObject * sender, FXSelector sel, void *ptr)
-{
-    FXIconList::onClipboardLost (sender, sel, ptr);
-    dragfiles=FXString::null;
-    //clipped.clear();
-    return 1;
-}
-
-
-// Somebody wants our clipped text
-long filelist::onClipboardRequest (FXObject * sender, FXSelector sel, void *ptr)
-{
-    FXEvent *event = (FXEvent *) ptr;
-    FXuchar *data;
-    FXuint len;
-    len = dragfiles.length ();
-    FXMEMDUP (&amp;data, dragfiles.text (), FXuchar, len);
-    setDNDData (FROM_CLIPBOARD, event-&gt;target, data, len);
-    return 0;
-}
-
-
-void filelist::dropData (bool clipboard)
-{
-
-
-    FXuchar *data;
-    FXuint len;
-    FXDNDOrigin origin;
-    if (clipboard)
-	origin = FROM_CLIPBOARD;
-    else
-	origin = FROM_DRAGNDROP;
-
-    // Get uri-list of files being dropped
-    if (getDNDData (origin, urilistType, data, len))
-    {
-  
-	FXRESIZE (&amp;data, FXuchar, len + 1);
-	data[len] = '\0';
-	FXchar *p, *q;
-	p = q = (FXchar *) data;
-
-	vector &lt; string &gt; src;
-
-	while (*p)
-	{
-	    while (*q &amp;&amp; *q != '\r')
-		q++;
-	    FXString url (p, q - p);
-	    FXString filesrc (FXURL::fileFromURL (url));
-	    src.push_back (filesrc.text ());
-	    if (*q == '\r')
-		q += 2;
-	    p = q;
-	    
-	    if(FXFile::directory(filesrc.text ())==path.c_str())
-	    {
-	    FXFREE (&amp;data);
-	    return;
-	    }
-	}
-
-
-	string com_name;
-	if (dropaction == DRAG_MOVE)
-	    com_name = &quot;move&quot;;
-	else if (dropaction == DRAG_COPY)
-	    com_name = &quot;copy&quot;;
-
-    filelist_base *fil = fb;
-    string options;
-    if (this-&gt;type == &quot;local&quot; &amp;&amp; filelist_opposite-&gt;dragfiles!=FXString::null)
-    {
-     options = &quot;upload&quot;;
-     fil = filelist_opposite-&gt;fb;
-
-    }
-    else 
-    {
-    options = &quot;download&quot;;
-    }
-    
-    if(this-&gt;type==&quot;local&quot; || filelist_opposite-&gt;type==&quot;local&quot;)
-    {
-	FXTRACE ((5, &quot;copy/move/remove&quot;));
-	thread_elem *el = new thread_elem (fil, com_name, options, src, path);
-	start_thread (el);
-    }
-    else
-    {
-    FXMessageBox about (this, &quot;error&quot;, &quot;copying/moving beetwen VFS not implemented (yet ;p)&quot;, NULL, MBOX_OK | DECOR_TITLE | DECOR_BORDER);
-    about.execute ();
-    }	
-
-
-	FXFREE (&amp;data);
-
-    }
-dropaction=DRAG_MOVE;
-filelist_opposite-&gt;dropaction=dropaction=DRAG_MOVE;
-
-}
-

Deleted: trunk/src/filelist.h
===================================================================
--- trunk/src/filelist.h	2006-02-12 13:43:28 UTC (rev 245)
+++ trunk/src/filelist.h	2006-02-12 15:36:06 UTC (rev 246)
@@ -1,157 +0,0 @@
-#ifndef FILELIST
-#define FILELIST
-
-#include &quot;filelist_base.h&quot;
-#include &quot;pathtype.h&quot;
-#include &quot;thread_elem.h&quot;
-#include &quot;filetype.h&quot;
-#include &quot;cmddialog.h&quot;
-#include &lt;string&gt;
-#include &lt;map&gt;
-#include &quot;preferences.h&quot;
-using namespace std;
-
-
-//filelist
-class filelist:public FXIconList
-{
-
-
-FXDECLARE (filelist) 
-  
-private:  
-
-    
-    string previous_path;
-    string type;
-    pathtype *pt;
-    
-    FXWindow *notifyparent;
-    FXLabel *label;
-    FXLabel *info;
-    FXMenuPane *popupmenu;
-    FXMenuPane *popupwindow;   
-    FXTextField *textfield;
-    FXOptionMenu *sortmenu;
-    FXPopup *sortpop;
-    FXHorizontalFrame *bottomframe;
-    
-    vector &lt; string &gt; commands_tab;
-    vector &lt; string &gt; key_commands_tab;
-    vector &lt; string &gt; button_commands_tab;
-    vector &lt; FXIcon * &gt;icon_vec;
-    vector &lt; string &gt; header_vec;
-    vector &lt; string &gt; vector_name;
-    vector &lt; int &gt;vector_type;
-    vector &lt; int &gt;vector_width;
-    
-    bool show_hidden_files;	
-    string *fields_name;
-    unsigned int *fields_type;
-    unsigned int *fields_width;
-    int sort_nr;
-    unsigned long thumb_size;
-
-    static bool ascend;
-    static bool strcase;
-
-    bool processing;
-    bool maximize;
-    int popup_x;
-    int popup_y;
-    
-    int icons_size;
-
-    cmddialog *dial;
-    
-    FXDragAction dropaction;	// Drop action
-    FXString dragfiles;		// Dragged files
-
-    void dropData (bool clipboard);
-    void filelist::selectitem (void);
-    void filelist::start_thread (thread_elem * te);
-    
-    void filelist::copymoveremove (string com_name);
-    static void *filelist::thread_func (void *data);
-    static FXint cmp (const FXIconItem * a, const FXIconItem * b);
-    
-    
-    string returnpath(string dirname);
-    string filelist::getdefaultcommand (string name);
-    string filelist::resolvecommand(string command,string name);
-    int filelist::runCommand(string name);
-    static string filelist::getfiletype (string name);
-    long filelist::setKeys (void);
-    
-public:  
-
-     filelist ()
-    {
-    }
-    virtual ~ filelist ();
-
-//==============================================
-    filelist (FXComposite * p, pathtype pt);
-//==============================================
-
-
-objectmanager *objmanager;
-FXIcon **specialicons;
-FXToolBar *toolbar,*toolbar2;
-
-string path;
-bool active;
-filelist_base * fb;
-filelist *filelist_opposite;
-
-enum
-    {
-	ID_ICO = FXIconList::ID_LAST,
-	ID_SORT_CHANGE,
-	ID_TEXTFIELD_RUN,
-	ID_LAST,
-    };
-
-
-    virtual void create ();
-
-    void filelist::refresh (void);
-    bool filelist::init (void);
-    bool filelist::opendir (string dir);
-       
-    long filelist::setFocus (FXObject * obj, FXSelector sel, void *ptr);
-    long filelist::lostFocus (FXObject * obj, FXSelector sel, void *ptr);
-    long filelist::openfile (FXObject *, FXSelector, void *);
-    long filelist::gotoparentdir (FXObject *, FXSelector, void *);
-    long filelist::onPopup (FXObject *, FXSelector, void *);
-    long filelist::file_operation (FXObject *, FXSelector, void *);
-    long filelist::onCmdHeader (FXObject *, FXSelector, void *ptr);
-    long filelist::onCommand (FXObject *, FXSelector, void *ptr);
-    long filelist::onCommandCancel (FXObject *, FXSelector, void *ptr);
-    long filelist::click (FXObject *, FXSelector, void *ptr);
-    long filelist::onCmdResize(FXObject * sender, FXSelector, void *);
-    long filelist::key_shortcut (FXObject * obj, FXSelector sel, void *ptr);
-    long filelist::texfield_run (FXObject * obj, FXSelector sel, void *ptr);
-    
-    long onDNDEnter (FXObject *, FXSelector, void *);
-    long onDNDLeave (FXObject *, FXSelector, void *);
-    long onDNDMotion (FXObject *, FXSelector, void *);
-    long onDNDDrop (FXObject *, FXSelector, void *);
-    long onDNDRequest (FXObject *, FXSelector, void *);
-    long onBeginDrag (FXObject *, FXSelector, void *);
-    long onEndDrag (FXObject *, FXSelector, void *);
-    long onDragged (FXObject *, FXSelector, void *);
-
-    long onClipboardLost (FXObject *, FXSelector, void *);
-    long onClipboardGained (FXObject *, FXSelector, void *);
-    long onClipboardRequest (FXObject *, FXSelector, void *);
-
-
-
-    
-    
-
-};
-
-
-#endif

Deleted: trunk/src/filelist_base.h
===================================================================
--- trunk/src/filelist_base.h	2006-02-12 13:43:28 UTC (rev 245)
+++ trunk/src/filelist_base.h	2006-02-12 15:36:06 UTC (rev 246)
@@ -1,68 +0,0 @@
-#ifndef FILELIST_BASE
-#define FILELIST_BASE
-
-#include &lt;string&gt;
-#include &lt;vector&gt;
-using namespace std;
-
-#include &quot;osfile.h&quot;
-#include &quot;configure.h&quot;
-#include &quot;thread_elem.h&quot;
-#include &quot;pathtype.h&quot;
-
-
-class vfsheader_container
-{
-public:
-string name;
-string type;
-string width;
-vfsheader_container(){}
-vfsheader_container(string n,string t=&quot;&quot;,string w=&quot;100&quot;):name(n),type(t),width(w){}
-
-};
-
-class vfs
-{
-public:
-vector &lt;vfsheader_container&gt; vfsheaders;
-string information;
-string version;
-string type;
-
-};
-
-//filelist plugins need to inherit from this class
-class filelist_base
-{
-  public:
-    virtual int osopendir (string dir) = 0;
-    virtual osfile osreaddir (void) = 0;
-    virtual int mkdir (string dir, int mode = 0) = 0;
-    virtual int copy (thread_elem * te) = 0;
-    virtual int move (thread_elem * te) = 0;
-    virtual int remove (thread_elem * te) = 0;
-    virtual int rename (string orgname, string newname) = 0;
-    virtual int init (vector &lt; string &gt; *vector_name, pathtype pt, configure * conf) = 0;
-    virtual int mode (string file) = 0;
-    virtual string owner (string file) = 0;
-    virtual string group (string file) = 0;
-    virtual bool mode (string file, unsigned int, bool recursive) = 0;
-    virtual bool owner (string file, string, bool recursive) = 0;
-    virtual bool group (string file, string, bool recursive) = 0;
-    virtual string info (void) = 0;
-    virtual void totalsize (string path, unsigned long &amp;size) = 0;
-    virtual string symlink (string path) = 0;
-    virtual bool symlink (string src, string dst) = 0;
-    virtual bool hardlink (string src, string dst) = 0;    
-    virtual int quit (void) = 0;
-    virtual string getinitialdir(void)
-    {
-    return &quot;/&quot;;
-    }
-    
-    virtual vfs setup (void) = 0;
-};
-
-
-#endif

Deleted: trunk/src/filetype.cpp
===================================================================
--- trunk/src/filetype.cpp	2006-02-12 13:43:28 UTC (rev 245)
+++ trunk/src/filetype.cpp	2006-02-12 15:36:06 UTC (rev 246)
@@ -1,16 +0,0 @@
-#include &lt;fx.h&gt;
-#include &quot;filetype.h&quot;
-
-file_type::file_type (FXIcon * ic,FXIcon*ic2, FXColor col, FXColor backcol)
-{
-
-    icon = ic;
-   	 if(ic2!=NULL)
-   	 bigicon=ic2;
- 	 else
-	 bigicon=ic;
-    
-    color = col;
-    backcolor = backcol;
-
-}

Deleted: trunk/src/filetype.h
===================================================================
--- trunk/src/filetype.h	2006-02-12 13:43:28 UTC (rev 245)
+++ trunk/src/filetype.h	2006-02-12 15:36:06 UTC (rev 246)
@@ -1,21 +0,0 @@
-#ifndef filetype
-#define filetype
-
-//icon and colors associated with filetype
-class file_type
-{
-
-  public:
-    FXIcon * icon;
-    FXIcon *bigicon;
-    FXColor color;
-    FXColor backcolor;
-
-     file_type::file_type (FXIcon * ic,FXIcon *ic2, FXColor col, FXColor backcol);
-     file_type::file_type ()
-    {
-    }
-
-};
-
-#endif

Deleted: trunk/src/informationpanel.cpp
===================================================================
--- trunk/src/informationpanel.cpp	2006-02-12 13:43:28 UTC (rev 245)
+++ trunk/src/informationpanel.cpp	2006-02-12 15:36:06 UTC (rev 246)
@@ -1,41 +0,0 @@
-#include &lt;fx.h&gt;
-#include &lt;string&gt;
-using namespace std;
-#include &quot;informationpanel.h&quot;
-
-
-informationpanel::informationpanel (FXComposite * p, string command)
-{
-
-    frame = new FXVerticalFrame (p, LAYOUT_FILL_X | FRAME_THICK, 0, 0, 0, 0, 0, 0);
-
-
-    lab0 = new FXLabel (frame, &quot;NONE&quot;);
-
-    if (command == &quot;copy&quot; || command == &quot;move&quot;)
-    {
-	lab1 = new FXLabel (frame, &quot;NONE&quot;);
-	lab2 = new FXLabel (frame, &quot;NONE&quot;);
-	pbar = new FXProgressBar (frame, NULL, 0, LAYOUT_FILL_X | FRAME_THICK | PROGRESSBAR_PERCENTAGE);
-	pbar2 = new FXProgressBar (frame, NULL, 0, LAYOUT_FILL_X | FRAME_THICK | PROGRESSBAR_PERCENTAGE);
-	bu = new FXButton (frame, &quot;CANCEL&quot;, NULL, NULL, 999, BUTTON_TOOLBAR);
-	bu-&gt;setBackColor (FXRGB (145, 134, 201));
-	pbar-&gt;setBarColor (FXRGB (145, 134, 201));
-	pbar2-&gt;setBarColor (FXRGB (145, 134, 201));
-    }
-    else if (command == &quot;remove&quot;)
-    {
-	lab1 = new FXLabel (frame, &quot;NONE&quot;);
-	bu = new FXButton (frame, &quot;CANCEL&quot;, NULL, NULL, 999, BUTTON_TOOLBAR);
-	bu-&gt;setBackColor (FXRGB (145, 134, 201));
-    }
-    frame-&gt;create ();
-    frame-&gt;recalc ();
-}
-
-informationpanel::~informationpanel ()
-{
-
-    delete frame;
-
-}

Deleted: trunk/src/informationpanel.h
===================================================================
--- trunk/src/informationpanel.h	2006-02-12 13:43:28 UTC (rev 245)
+++ trunk/src/informationpanel.h	2006-02-12 15:36:06 UTC (rev 246)
@@ -1,23 +0,0 @@
-#ifndef INFORMATIONPANEL
-#define INFORMATIONPANEL
-
-//this is information panel, it is shown for example during copying files
-class informationpanel
-{
-
-  public:
-
-    FXVerticalFrame * frame;
-    FXLabel *lab0;
-    FXLabel *lab1;
-    FXLabel *lab2;
-    FXProgressBar *pbar;
-    FXProgressBar *pbar2;
-    FXButton *bu;
-
-     informationpanel::informationpanel (FXComposite * p, string command);
-     informationpanel::~informationpanel (void);
-
-};
-
-#endif

Copied: trunk/src/main.cpp (from rev 245, branches/mloskot-style-refactoring/src/main.cpp)


Property changes on: trunk/src/main.cpp
___________________________________________________________________
Name: svn:keywords
   + Id

Deleted: trunk/src/mainwindow.cpp
===================================================================
--- trunk/src/mainwindow.cpp	2006-02-12 13:43:28 UTC (rev 245)
+++ trunk/src/mainwindow.cpp	2006-02-12 15:36:06 UTC (rev 246)
@@ -1,1336 +0,0 @@
-#include &quot;config.h&quot;
-#include &lt;string&gt;
-#include &lt;vector&gt;
-#include &lt;map&gt;
-using namespace std;
-
-#include &quot;fx.h&quot;
-// #include &quot;FXPNGIcon.h&quot;
-#include &quot;thread_elem.h&quot;
-#include &quot;filelist.h&quot;
-#include &quot;sharedobjects.h&quot;
-#include &quot;mainwindow.h&quot;
-#include &quot;informationpanel.h&quot;
-#include &quot;configure.h&quot;
-#include &quot;oslistitem.h&quot;
-
-#include &quot;FirstRun.h&quot;
-
-#include &lt;sys/types.h&gt;
-#include &lt;sys/stat.h&gt;
-#include &lt;unistd.h&gt;
-#include &lt;dirent.h&gt;
-
-#ifdef WIN32
-#define SEPARATOR &quot;\\&quot;
-#else /*  */
-#include &lt;dlfcn.h&gt;
-#define SEPARATOR &quot;/&quot;
-#endif /*  */
-using namespace FX;
-FXDEFMAP (MainWindow) MainWindowMap[] =
-{
-
-    //________Message_Type_____________________ID____________Message_Handler_______  
-   	FXMAPFUNC (SEL_COMMAND, MainWindow::ID_DIRCH, MainWindow::onChangeDir),
-	// FXMAPFUNC(SEL_ENTER, MainWindow::ID_DIRCH,   MainWindow::onListNextDir),
-	// FXMAPFUNC(SEL_LEAVE, MainWindow::ID_DIRCH,   MainWindow::onListNextDir),
-	FXMAPFUNC (SEL_RIGHTBUTTONRELEASE, MainWindow::ID_DIR, MainWindow::onListDirs), 
-	FXMAPFUNC (SEL_COMMAND, MainWindow::ID_DIR, MainWindow::onOpenDir),
-	FXMAPFUNC (SEL_COMMAND, MainWindow::ID_CONFIGURE, MainWindow::onOpenConfigure),
-	FXMAPFUNC (SEL_COMMAND, MainWindow::ID_ABOUT, MainWindow::onAbout),
-	FXMAPFUNCS (SEL_LEFTBUTTONRELEASE, MainWindow::ID_TOLEFT, MainWindow::ID_TORIGHT, MainWindow::onChangeList),
-	FXMAPFUNCS (SEL_COMMAND, MainWindow::ID_OVERWRITE, MainWindow::ID_SKIP_ALL, MainWindow::onOverwrite),
-	FXMAPFUNC (SEL_COMMAND, MainWindow::ID_NEWFRAME, MainWindow::onNewFrame),
-	FXMAPFUNC (SEL_COMMAND, MainWindow::ID_NEW_NETWORK, MainWindow::onNewNetworkFrame),
-	FXMAPFUNC (SEL_COMMAND, MainWindow::ID_NEW_SEARCH, MainWindow::onNewSearchFrame),
-	FXMAPFUNCS (SEL_COMMAND, 666, 668, MainWindow::onNotify),
-	FXMAPFUNC (SEL_TIMEOUT, MainWindow::ID_TIMER, MainWindow::onTimer),
-	FXMAPFUNC (SEL_COMMAND, MainWindow::ID_COMMANDS_SHOW, MainWindow::commandsShow),
-	FXMAPFUNC (SEL_CONFIGURE, 0, MainWindow::onConfigure),
-	FXMAPFUNC (SEL_COMMAND, MainWindow::ID_CANCEL, MainWindow::cancel), 
-	FXMAPFUNC (SEL_UPDATE, 0, MainWindow::onUpdate)};
-
-FXIMPLEMENT (MainWindow, FXMainWindow, MainWindowMap, ARRAYNUMBER (MainWindowMap))
-
-
-//-----MAIN WINDOW---------------------------------------------------------------------------------------------------------------------------         
-MainWindow::MainWindow (FXApp * a):FXMainWindow (a, &quot;openspace&quot;, NULL, NULL, DECOR_ALL | LAYOUT_FIX_WIDTH, 0, 0, 600, 400, 0, 0)
-{
-    conf = new configure ();
-    
-if(conf-&gt;loadconfig())
-{
- if(conf-&gt;readonestring (&quot;/OpenspaceConfig/version&quot;)==PACKAGE_VERSION)
- {
-
-
-    objmanager=objectmanager::instance(getApp());
-    
-    new FXToolTip (getApp (), TOOLTIP_NORMAL);
-    pane = NULL;
-    filemenu = NULL;
-    pref = NULL;
-   
-   string fontdesc=conf-&gt;readonestring (&quot;/OpenspaceConfig/fonts/normalfont&quot;);
-   FXFont *font=new FXFont(getApp(),fontdesc.c_str());
-   font-&gt;create();
-   getApp()-&gt;setNormalFont(font);
-  
-   
-  getApp()-&gt;setTypingSpeed(FXIntVal(conf-&gt;readonestring (&quot;/OpenspaceConfig/speed_delay/typing_speed&quot;).c_str ()));
-  getApp()-&gt;setClickSpeed(FXIntVal(conf-&gt;readonestring (&quot;/OpenspaceConfig/speed_delay/click_speed&quot;).c_str ()));
-  getApp()-&gt;setScrollSpeed(FXIntVal(conf-&gt;readonestring (&quot;/OpenspaceConfig/speed_delay/scroll_speed&quot;).c_str ()));
-  getApp()-&gt;setScrollDelay(FXIntVal(conf-&gt;readonestring (&quot;/OpenspaceConfig/speed_delay/scroll_delay&quot;).c_str ()));
-  getApp()-&gt;setBlinkSpeed(FXIntVal(conf-&gt;readonestring (&quot;/OpenspaceConfig/speed_delay/blink_speed&quot;).c_str ()));
-  getApp()-&gt;setAnimSpeed(FXIntVal(conf-&gt;readonestring (&quot;/OpenspaceConfig/speed_delay/anim_speed&quot;).c_str ()));
-  getApp()-&gt;setMenuPause(FXIntVal(conf-&gt;readonestring (&quot;/OpenspaceConfig/speed_delay/menu_pause&quot;).c_str ()));
-  getApp()-&gt;setTooltipPause(FXIntVal(conf-&gt;readonestring (&quot;/OpenspaceConfig/speed_delay/tooltip_pause&quot;).c_str ()));
-  getApp()-&gt;setTooltipTime(FXIntVal(conf-&gt;readonestring (&quot;/OpenspaceConfig/speed_delay/tooltip_time&quot;).c_str ()));
-  getApp()-&gt;setDragDelta(FXIntVal(conf-&gt;readonestring (&quot;/OpenspaceConfig/speed_delay/drag_delta&quot;).c_str ()));
-  getApp()-&gt;setWheelLines(FXIntVal(conf-&gt;readonestring (&quot;/OpenspaceConfig/speed_delay/wheel_lines&quot;).c_str ()));
-   
-   getApp()-&gt;setBaseColor(fxcolorfromname(conf-&gt;readonestring (&quot;/OpenspaceConfig/colors/base&quot;).c_str()));
-   getApp()-&gt;setBorderColor(fxcolorfromname(conf-&gt;readonestring (&quot;/OpenspaceConfig/colors/border&quot;).c_str()));
-   getApp()-&gt;setForeColor(fxcolorfromname(conf-&gt;readonestring (&quot;/OpenspaceConfig/colors/fore&quot;).c_str()));
-   getApp()-&gt;setHiliteColor(fxcolorfromname(conf-&gt;readonestring (&quot;/OpenspaceConfig/colors/hilite&quot;).c_str()));
-   getApp()-&gt;setShadowColor(fxcolorfromname(conf-&gt;readonestring (&quot;/OpenspaceConfig/colors/shadow&quot;).c_str()));
-   getApp()-&gt;setSelforeColor(fxcolorfromname(conf-&gt;readonestring (&quot;/OpenspaceConfig/colors/selfore&quot;).c_str()));
-   getApp()-&gt;setSelbackColor(fxcolorfromname(conf-&gt;readonestring (&quot;/OpenspaceConfig/colors/selback&quot;).c_str()));
-   getApp()-&gt;setTipforeColor(fxcolorfromname(conf-&gt;readonestring (&quot;/OpenspaceConfig/colors/tipfore&quot;).c_str()));
-   getApp()-&gt;setTipbackColor(fxcolorfromname(conf-&gt;readonestring (&quot;/OpenspaceConfig/colors/tipback&quot;).c_str()));
-   getApp()-&gt;setSelMenuTextColor(fxcolorfromname(conf-&gt;readonestring (&quot;/OpenspaceConfig/colors/selmenutext&quot;).c_str()));
-   getApp()-&gt;setSelMenuBackColor(fxcolorfromname(conf-&gt;readonestring (&quot;/OpenspaceConfig/colors/selmenuback&quot;).c_str()));
-   
-    string iconsdir=conf-&gt;readonestring (&quot;/OpenspaceConfig/path&quot;) +&quot;icons/&quot;+conf-&gt;readonestring (&quot;/OpenspaceConfig/icons_theme&quot;);
-    
-    if(!FXFile::exists(iconsdir.c_str()))
-   	 iconsdir=FXFile::getUserDirectory (&quot;&quot;).text () +string(&quot;/.openspace/icons/&quot;)+conf-&gt;readonestring (&quot;/OpenspaceConfig/icons_theme&quot;);
-    
-    iconsdir+=string(&quot;/&quot;);
-   
-    loadicons(iconsdir);
-   
-   
-    string res = conf-&gt;readonestring (&quot;/OpenspaceConfig/version&quot;);
-    FXTRACE ((1, &quot;\n openspace version %s\n\n&quot;, res.c_str ()));
-    int w = atoi (conf-&gt;readonestring (&quot;/OpenspaceConfig/mainwindow/width&quot;).c_str ());
-    int h = atoi (conf-&gt;readonestring (&quot;/OpenspaceConfig/mainwindow/height&quot;).c_str ());
-    resize (w, h);
-
-// read icons for file types
-    if (conf-&gt;openxpath (&quot;/OpenspaceConfig/file_types&quot;) != -1)
-    {
-    string res;
-	while (conf-&gt;getnextnode (res))
-	{
-	    loadMimeSettings (&quot;/OpenspaceConfig/file_types/&quot; + res, res);
-	    configure conflocal = *conf;
-	    if (conflocal.openxpath (&quot;/OpenspaceConfig/file_types/&quot; + res + &quot;/types&quot;) != -1)
-	    {
-	    string res2;
-		while (conflocal.getnextnode (res2))
-		{
-		      loadMimeSettings (&quot;/OpenspaceConfig/file_types/&quot; + res + &quot;/types/&quot; + res2, res + &quot;/&quot; + res2);
-		}
-	    }
-	}
-    }
-
-
-
-
-    topdock = new FXDockSite (this, LAYOUT_SIDE_TOP | LAYOUT_FILL_X);
-    bottomdock = new FXDockSite (this, LAYOUT_SIDE_BOTTOM | LAYOUT_FILL_X);
-    leftdock = new FXDockSite (this, LAYOUT_SIDE_LEFT | LAYOUT_FILL_Y);
-    rightdock = new FXDockSite (this, LAYOUT_SIDE_RIGHT | LAYOUT_FILL_Y);
-
-
-
-    FXToolBarShell *dragshell1 = new FXToolBarShell (this, FRAME_RAISED);
-    FXToolBar *toolbar = new FXToolBar (topdock, dragshell1,LAYOUT_DOCK_NEXT | LAYOUT_SIDE_TOP | FRAME_RAISED);
-    new FXToolBarGrip (toolbar, toolbar, FXToolBar::ID_TOOLBARGRIP, TOOLBARGRIP_SINGLE);
-    
-    	
-
-
-    FXVerticalFrame *ff = new FXVerticalFrame (this, LAYOUT_FILL_X | LAYOUT_FILL_Y);
-    controlframe = new FXVerticalFrame (ff, LAYOUT_FILL_X | FRAME_THICK, 0, 0, 0, 0, 0, 0, 0, 0);
-    splitter = new FXSplitter (ff, LAYOUT_FILL_X | SPLITTER_TRACKING | LAYOUT_FILL_Y);
-    left = new FXVerticalFrame (splitter, LAYOUT_FILL_X | LAYOUT_FILL_Y | FRAME_NONE, 0, 0, w / 2, 0, 0, 0, 0);
-    right = new FXVerticalFrame (splitter, LAYOUT_FILL_X | LAYOUT_FILL_Y | FRAME_NONE, 0, 0, w / 2, 0, 0, 0, 0);
-    if (conf-&gt;readonestring (&quot;/OpenspaceConfig/panels&quot;) == &quot;single&quot;)
-	ratio = 0;
-
-    else
-	ratio = 1.0 / 2.0;
-    leftcontrolframe = new FXVerticalFrame (left, LAYOUT_FILL_X);
-    leftframe = new FXVerticalFrame (left, LAYOUT_FILL_X | LAYOUT_FILL_Y);
-    rightcontrolframe = new FXVerticalFrame (right, LAYOUT_FILL_X);
-    rightframe = new FXVerticalFrame (right, LAYOUT_FILL_X | LAYOUT_FILL_Y);
-    //   FXHorizontalFrame * buttonsframe = new FXHorizontalFrame (toolbar, LAYOUT_FILL_X | FRAME_THICK, 0, 0, 0, 0, 0, 0, 0, 0);
-    new FXButton (toolbar, &quot;\thide/show copy/move progress&quot;, objmanager-&gt;osicons[&quot;plus&quot;], this, MainWindow::ID_COMMANDS_SHOW, FRAME_THICK, 0, 0, 0, 0, 0, 0, 0, 0);
-    new FXButton (toolbar, &quot;\topen new panel&quot;, objmanager-&gt;osicons[&quot;directory&quot;], this, MainWindow::ID_NEWFRAME, FRAME_THICK, 0, 0, 0, 0, 0, 0, 0, 0);
-    new FXButton (toolbar, &quot;\tconnect&quot;, objmanager-&gt;osicons[&quot;network&quot;], this, MainWindow::ID_NEW_NETWORK, FRAME_THICK, 0, 0, 0, 0, 0, 0, 0, 0);
-    new FXButton (toolbar, &quot;\tsearch&quot;, objmanager-&gt;osicons[&quot;search&quot;], this, MainWindow::ID_NEW_SEARCH, FRAME_THICK, 0, 0, 0, 0, 0, 0, 0, 0);
-   
-    new FXSeparator (toolbar, SEPARATOR_NONE);
-    new FXSeparator (toolbar, SEPARATOR_GROOVE);
-    new FXSeparator (toolbar, SEPARATOR_NONE);
-    
-    new FXButton (toolbar, &quot;\tconfiguration&quot;, objmanager-&gt;osicons[&quot;configure&quot;], this, MainWindow::ID_CONFIGURE, FRAME_THICK, 0, 0, 0, 0, 0, 0, 0, 0);
-    new FXButton (toolbar, &quot;\tabout&quot;, objmanager-&gt;osicons[&quot;foxmini&quot;], this, MainWindow::ID_ABOUT, FRAME_THICK, 0, 0, 0, 0, 0, 0, 0, 0);
-    toolbar-&gt;dock(rightdock);
-  
-    string dir = parseDir (conf-&gt;readonestring (&quot;/OpenspaceConfig/leftdir/dir&quot;));
-    string type = conf-&gt;readonestring (&quot;/OpenspaceConfig/leftdir/type&quot;);
-    pathtype pt (dir, type);
-    left_frame = new Frame (leftcontrolframe, leftframe, pt, this, -1);
-    left_frame-&gt;f-&gt;toolbar-&gt;dock(topdock);	
-    left_frame-&gt;f-&gt;toolbar-&gt;hide();
-    left_frame-&gt;f-&gt;toolbar2-&gt;dock(rightdock);	
-    left_frame-&gt;f-&gt;toolbar2-&gt;hide();
-    
-    dir = parseDir (conf-&gt;readonestring (&quot;/OpenspaceConfig/rightdir/dir&quot;));
-    type = conf-&gt;readonestring (&quot;/OpenspaceConfig/rightdir/type&quot;);
-    pathtype pt2 (dir, type);
-    right_frame = new Frame (rightcontrolframe, rightframe, pt2, this, -1);
-   
-    right_frame-&gt;f-&gt;toolbar-&gt;dock(topdock);  
-    right_frame-&gt;f-&gt;toolbar2-&gt;dock(rightdock); 
-    
-    left_frame-&gt;f-&gt;filelist_opposite = right_frame-&gt;f;
-    right_frame-&gt;f-&gt;filelist_opposite = left_frame-&gt;f;
-    infoframe = new FXVerticalFrame (ff, LAYOUT_FILL_X);
-    networkframe = NULL;
-    searchframe = NULL;
-    getApp ()-&gt;addTimeout (this, ID_TIMER, 200);
-
-	if(conf-&gt;readonestring (&quot;/OpenspaceConfig/first_run&quot;)==&quot;true&quot;)
-	{
-		conf-&gt;saveonestring (&quot;/OpenspaceConfig/first_run&quot;,&quot;false&quot;);
-		
-		FirstRun* first_run;
-		first_run=new FirstRun(this);
-		first_run-&gt;show (PLACEMENT_SCREEN);
-	}
-  }
-  else
-  {
-  new FXLabel(this,&quot;Configuration file version mismatch&quot;);
-  new FXLabel(this,&quot;Please remove .openspace/openspacerc file in your home directory&quot;);
-  conf-&gt;loadconfig(true);
-  delete conf;
-  conf=NULL;
-  }
-}
-else//configuration file broken
-{
-
-new FXLabel(this,&quot;Configuration file is broken :|&quot;);
-new FXLabel(this,&quot;Restoring last good configuation file, restart program to apply changes&quot;);
-
-conf-&gt;loadconfig(true);
-delete conf;
-conf=NULL;
-}
-
-}
-
-
-//---------------------------------------------------- 
-// open configure window
-long MainWindow::onOpenConfigure (FXObject * sender, FXSelector sel, void *)
-{
-   if(pref==NULL)
-   {
-   pref = new preferences (this);
-   pref-&gt;create();
-   }  
-   pref-&gt;show (PLACEMENT_OWNER);
-}
-
-
-//about
-long MainWindow::onAbout (FXObject * sender, FXSelector sel, void *)
-{
-
-    string msg=&quot;Openspace File Browser &quot; +string(PACKAGE_VERSION)+ &quot;\n\nby Mateusz Dworak (<A HREF="http://openspace.linux.pl">http://openspace.linux.pl</A>)\n\nUsing the FOX C++ GUI Library (<A HREF="http://www.fox-tookit.org">http://www.fox-tookit.org</A>) \n\n icons by Dawn Simon&quot;;
- 
-    FXMessageBox about (this, &quot;About Openspace&quot;, msg.c_str(), objmanager-&gt;osicons[&quot;foxbig&quot;], MBOX_OK | DECOR_TITLE | DECOR_BORDER);
-    about.execute ();
-}
-
-
-
-
-//new frame
-long MainWindow::onNewFrame (FXObject * sender, FXSelector, void *ptr)
-{
-    string dir;
-    string type;
-    string str_server;
-    string str_user;
-    string str_pass;
-    string str_port;
-    if (networkframe == NULL &amp;&amp; searchframe == NULL)
-    {
-	dir = parseDir (conf-&gt;readonestring (&quot;/OpenspaceConfig/defaultdir/dir&quot;));
-	type = conf-&gt;readonestring (&quot;/OpenspaceConfig/defaultdir/type&quot;);
-    }
-    else
-    {
-	
-	
-	if (networkframe == NULL) //search
-	{
-	
-	
-	string s_size_greater=search_size_greater-&gt;getText().text();
-	string s_size_less=search_size_less-&gt;getText().text();
-	string s_dir=search_path-&gt;getText().text();
-	string s_filter=search_filefilter-&gt;getText().text();
-	
-	str_server = &quot;find &quot;+ s_dir;
-	
-	if(s_filter!=&quot;&quot;)
-	str_server+= &quot; -name \&quot;&quot; + s_filter +&quot;\&quot;&quot; ;
-	if(s_size_greater!=&quot;&quot;)
-	str_server+= &quot; -size +&quot; + s_size_greater +&quot;k&quot; ;
-	if(s_size_less!=&quot;&quot;)
-	str_server+= &quot; -size -&quot; + s_size_less +&quot;k&quot; ;
-	
-	 
-	dir = &quot;/&quot;;
-	type= &quot;search&quot;;
-	
-	searchframe-&gt;hide ();
-	delete searchframe;
-	searchframe = NULL;
-	}
-	else			//network
-	{
-	dir = &quot;/&quot;;
-	type = filelisttypecombobox-&gt;getText().text();
-	str_server = server-&gt;getText ().text ();
-	str_user = user-&gt;getText ().text ();
-	str_pass = password-&gt;getText ().text ();
-	str_port=port-&gt;getText().text();
-	networkframe-&gt;hide ();
-	delete networkframe;
-	networkframe = NULL;
-	}
-	
-	
-	controlframe-&gt;recalc ();
-    }
-    pathtype pt (dir, type, str_server, str_user,str_pass,str_port);
-    Frame *fr = new Frame (controlframe, leftframe, pt, this, 0);
-			   			   
-    fr-&gt;frame-&gt;create ();
-    fr-&gt;hf-&gt;create ();
-    fr-&gt;f-&gt;toolbar-&gt;dock(topdock);	
-    fr-&gt;f-&gt;toolbar-&gt;hide();
-    fr-&gt;f-&gt;toolbar2-&gt;dock(rightdock);	
-    fr-&gt;f-&gt;toolbar2-&gt;hide();
-    
- 
- this-&gt;handle (fr-&gt;toleft, FXSEL (SEL_LEFTBUTTONRELEASE,ID_TOLEFT), NULL);
-    
-    controlframe-&gt;recalc ();
-}
-
-
-//show or hide frame where we can set login/pass/etc for connecting do remote filesystem
-long MainWindow::onNewNetworkFrame (FXObject * sender, FXSelector, void *)
-{
-    if (networkframe == NULL)
-    {
-	networkframe = new FXHorizontalFrame (controlframe, LAYOUT_FILL_X | FRAME_THICK, 0, 0, 0, 0, 0, 0, 0, 0);
-	new FXLabel (networkframe, &quot;server:&quot;);
-	server = new FXTextField (networkframe, 20);
-	new FXLabel (networkframe, &quot;user:&quot;, objmanager-&gt;osicons[&quot;user&quot;]);
-	user = new FXTextField (networkframe, 20);
-	new FXLabel (networkframe, &quot;pass:&quot;, objmanager-&gt;osicons[&quot;password&quot;]);
-	password = new FXTextField (networkframe, 20,NULL,0,TEXTFIELD_PASSWD|FRAME_SUNKEN|FRAME_THICK);
-	new FXLabel (networkframe, &quot;port:&quot;, NULL,0,TEXTFIELD_INTEGER );
-	port = new FXTextField (networkframe, 5);
-
-	filelisttypecombobox = new FXComboBox (networkframe, 4, NULL, 0,
-					       FRAME_THICK | LAYOUT_SIDE_TOP | COMBOBOX_STATIC);
-					       
-	int count=0;				       
-	if (conf-&gt;openxpath (&quot;/OpenspaceConfig/filelist&quot;) != -1)
-   	{
-	string res;
-	    while (conf-&gt;getnextnode (res))
-	    {
-	  	string filelist_type = conf-&gt;readonestring (&quot;/OpenspaceConfig/filelist/&quot;+res+&quot;/type&quot;);
-		
-		if(filelist_type==&quot;network&quot;)
-		{
-		filelisttypecombobox-&gt;appendItem (res.c_str());
-		count++;
-		}
-	    }				       
-	}				       
-					       
-					       
-	filelisttypecombobox-&gt;setNumVisible (count);
-
-	new FXButton (networkframe, &quot;connect&quot;, NULL, this, MainWindow::ID_NEWFRAME, FRAME_RAISED, 0, 0, 0, 0, 0, 0, 0, 0);
-	networkframe-&gt;create ();
-	networkframe-&gt;recalc ();
-    }
-
-    else
-    {
-	networkframe-&gt;hide ();
-	delete networkframe;
-	networkframe = NULL;
-	controlframe-&gt;recalc ();
-    }
-}
-
-
-long MainWindow::onNewSearchFrame (FXObject * sender, FXSelector, void *)
-{
-    if (searchframe == NULL)
-    {
-	searchframe = new FXHorizontalFrame (controlframe, LAYOUT_FILL_X | FRAME_THICK, 0, 0, 0, 0, 0, 0, 0, 0);
-	new FXLabel (searchframe, &quot;path: &quot;);
-	search_path=new FXTextField (searchframe, 20);
-		if (left_frame-&gt;f-&gt;active)
-		search_path-&gt;setText(left_frame-&gt;f-&gt;path.c_str());
-		else
-		search_path-&gt;setText(right_frame-&gt;f-&gt;path.c_str());
-	new FXLabel (searchframe, &quot;size&quot;);
-	new FXLabel (searchframe, &quot;greater than(KB):&quot;);
-	search_size_greater=new FXTextField (searchframe, 10);
-	new FXLabel (searchframe, &quot;less than(KB):&quot;);
-	search_size_less=new FXTextField (searchframe, 10);
-		
-		
-	new FXLabel (searchframe, &quot;file filter: &quot;);
-	search_filefilter=new FXTextField (searchframe, 20);
-	search_filefilter-&gt;setText(&quot;*&quot;);
-	new FXButton (searchframe, &quot;search&quot;, NULL, this, MainWindow::ID_NEWFRAME, FRAME_RAISED, 0, 0, 0, 0, 0, 0, 0, 0);
-	searchframe-&gt;create ();
-	searchframe-&gt;recalc ();
-    }
-
-    else
-    {
-	searchframe-&gt;hide ();
-	delete searchframe;
-	searchframe = NULL;
-	controlframe-&gt;recalc ();
-    }
-}
-
-
-//----------------------------------------------------   
-MainWindow::~MainWindow ()
-{
-    delete pref;
-    delete conf;
-}
-
-
-//----------------------------------------------------   
-void MainWindow::create ()
-{
-    FXMainWindow::create ();
-    string position;
-    if(conf)
-    position=conf-&gt;readonestring (&quot;/OpenspaceConfig/position&quot;);
-    
-    if(position==&quot;cursor&quot;)
-    show (PLACEMENT_CURSOR);
-    else
-    show (PLACEMENT_SCREEN);
-}
-
-//---------------------------------------------------- 
-//show or hide frame containing informaitions about copying/moving files
-long MainWindow::commandsShow (FXObject * sender, FXSelector, void *ptr)
-{
-    if (infoframe-&gt;shown ())
-	infoframe-&gt;hide ();
-
-    else
-	infoframe-&gt;show ();
-}
-
-
-//executed when we change directory clicking directory name in popoup window 
-long MainWindow::onChangeDir (FXObject * sender, FXSelector, void *ptr)
-{
-    filelist *fil = current_frame-&gt;f;
-    FXTRACE ((5, &quot;CHANGE DIR\n&quot;, fil-&gt;path.c_str ()));
-    FXMenuCommand *mc = (FXMenuCommand *) sender;
-    FXEvent *event = (FXEvent *) ptr;
-    FXWindow *win = (FXWindow *) mc-&gt;getParent ();
-    int x = win-&gt;getX ();
-    int y = win-&gt;getY ();
-    string p = fil-&gt;path;
-    string current_path = p;
-    
-    if(current_path!=&quot;/&quot;)
-    current_path.append (SEPARATOR);
-       
-    current_path.append (mc-&gt;getText ().text ());
-    current_frame-&gt;f-&gt;path = current_path;
-    current_frame-&gt;f-&gt;opendir (current_path);
-    current_frame-&gt;generate_menu (current_path, this);
-    popupDir (current_frame-&gt;f, current_path, x, y);
-}
-
-//popup with dir names when we click right button in dir path
-int MainWindow::popupDir (filelist * current_filelist, string path, int x, int y)
-{
-    vector &lt; string &gt; vec;
-    for (int i = 0; i &lt; current_filelist-&gt;getNumItems (); i++)
-    {
-	os_ListItem *oslistitem = (os_ListItem *) current_filelist-&gt;getItem (i);
-	if (oslistitem-&gt;osf.type &amp; FOLDER)
-	{
-	    string name = oslistitem-&gt;osf.name;
-	    if (name != &quot;.&quot; &amp;&amp; name != &quot;..&quot; &amp;&amp; name[0] != '.')
-		vec.push_back (name);
-	}
-    }
-
-/*
-
-	if(current_filelist-&gt;fb-&gt;osopendir(path)==-1)
-	{
-	return 0;
-	}
-
-
-
-
-
-	while(1)
-	{
-	osfile os_file=current_filelist-&gt;fb-&gt;osreaddir();
-		if(os_file.name==&quot;&quot;)
-		break;
-	
-		if(os_file.type&amp;FOLDER &amp;&amp; os_file.name!=&quot;.&quot; &amp;&amp; os_file.name!=&quot;..&quot;)
-		vec.push_back (os_file.name);		
-	}
-
-*/
-    unsigned int indx;
-    if (vec.size () &gt; 0)
-    {
-	sort (vec.begin (), vec.end ());
-	if (filemenu)
-	{
-	    filemenu-&gt;popdown ();
-	    delete filemenu;
-	    filemenu = NULL;
-	}
-	filemenu = new FXMenuPane (this);
-	for (indx = 0; indx &lt; vec.size (); indx++)
-	{
-	    new FXMenuCommand (filemenu, vec[indx].c_str (), objmanager-&gt;osicons[&quot;directory&quot;], this, MainWindow::ID_DIRCH);
-	}
-	filemenu-&gt;create ();
-	filemenu-&gt;popup (NULL, x, y, 0, 0);
-    }
-}
-
-
-//currently nothing ;p
-long MainWindow::onListNextDir (FXObject * sender, FXSelector sel, void *ptr)
-{
-}
-
-//popup with directory names when we click right button in path
-long MainWindow::onListDirs (FXObject * sender, FXSelector, void *ptr)
-{
-    FXTRACE ((5, &quot;LIST DIRS\n&quot;));
-    FXButton *bt = (FXButton *) sender;
-    box *boxel = (box *) bt-&gt;getUserData ();
-    box *boxbackup = boxel;
-    current_frame = boxel-&gt;fr;
-    if (boxel-&gt;fr != right_frame &amp;&amp; boxel-&gt;fr != left_frame)
-	return 0;
-    string path = &quot;&quot;;
-    while (boxel-&gt;prebutton != NULL)
-    {
-	boxel = (box *) boxel-&gt;prebutton-&gt;getUserData ();
-    }
-    while (boxel != NULL)
-    {
-	if (boxel == boxbackup)
-	{
-	    path.append (boxel-&gt;bt-&gt;getText ().text ());
-	    break;
-	}
-	path.append (boxel-&gt;bt-&gt;getText ().text ());
-	boxel = (box *) boxel-&gt;nextbutton-&gt;getUserData ();
-    }
-    current_frame-&gt;f-&gt;path = path;
-    current_frame-&gt;f-&gt;opendir (path);
-    FXEvent *event = (FXEvent *) ptr;
-    int x = event-&gt;root_x;
-    int y = event-&gt;root_y;
-    popupDir (current_frame-&gt;f, path, x, y);
-}
-
-//change position or close frame
-long MainWindow::onChangeList (FXObject * sender, FXSelector sel, void *ptr)
-{
-    FXButton *bt = (FXButton *) sender;
-    box *boxel = (box *) bt-&gt;getUserData ();
-    FXushort id = FXSELID (sel);
-    int pos = -1;
-    if (id == ID_TOCLOSE)
-    {
-    bool canclose=true;
-    
-   	 vector &lt; thread_elem * &gt;::iterator iter;
-    	 for (iter = objmanager-&gt;thread_vec.begin (); iter != objmanager-&gt;thread_vec.end (); iter++)
-   	 {	
-		thread_elem *telem = *iter;
-		if(telem-&gt;fb==boxel-&gt;fr-&gt;f-&gt;fb)
-		{
-		canclose=false;
-		}
-   	 }	
-    		if(canclose)
-		{
-    
-		boxel-&gt;fr-&gt;f-&gt;fb-&gt;quit ();
-		delete boxel-&gt;fr-&gt;hf;
-		delete boxel-&gt;fr-&gt;f-&gt;toolbar;
-		delete boxel-&gt;fr-&gt;f-&gt;toolbar2;
-		delete boxel-&gt;fr-&gt;frame;
-		sender = NULL;
-		
-		}
-		else
-		{
-		FXMessageBox about (this, &quot;error&quot;, &quot;There are some processes connected with this filelist,\n finish them all and then you can close this filelist\n(this behavior will change in the next release of program)&quot;, NULL, MBOX_OK | DECOR_TITLE | DECOR_BORDER);
-  		about.execute ();
-		
-		}
-		
-	return 1;	
-		
-    }
-
-    else
-    {
-	if (id == ID_TORIGHT)
-	{
-	    pos = 1;
-	}
-	
-	if(left_frame-&gt;f-&gt;getWidth()==0)
-	pos=1;
-	
-	if(right_frame-&gt;f-&gt;getWidth()==0)
-	pos=-1;
-	
-	
-    }
-    if (pos == -1)
-    {
-	boxel-&gt;fr-&gt;frame-&gt;reparent (leftframe);
-	boxel-&gt;fr-&gt;hf-&gt;reparent (leftcontrolframe);
-	left_frame-&gt;hf-&gt;reparent (controlframe);
-	left_frame-&gt;f-&gt;toolbar-&gt;hide();
-	left_frame-&gt;f-&gt;toolbar2-&gt;hide();
-	left_frame-&gt;toleft-&gt;show ();
-	left_frame-&gt;toright-&gt;show ();
-	left_frame-&gt;toclose-&gt;show ();
-	left_frame-&gt;frame-&gt;hide ();
-	left_frame = boxel-&gt;fr;
-	left_frame-&gt;frame-&gt;show ();
-	
-    }
-
-    else
-    {
-	boxel-&gt;fr-&gt;frame-&gt;reparent (rightframe);
-	boxel-&gt;fr-&gt;hf-&gt;reparent (rightcontrolframe);
-	right_frame-&gt;hf-&gt;reparent (controlframe);
-	right_frame-&gt;f-&gt;toolbar-&gt;hide();
-	right_frame-&gt;f-&gt;toolbar2-&gt;hide();
-	right_frame-&gt;toleft-&gt;show ();
-	right_frame-&gt;toright-&gt;show ();
-	right_frame-&gt;toclose-&gt;show ();
-	right_frame-&gt;frame-&gt;hide ();
-	right_frame = boxel-&gt;fr;
-	right_frame-&gt;frame-&gt;show ();
-    }
-    left_frame-&gt;f-&gt;filelist_opposite = right_frame-&gt;f;
-    right_frame-&gt;f-&gt;filelist_opposite = left_frame-&gt;f;
-    boxel-&gt;fr-&gt;toleft-&gt;hide ();
-    boxel-&gt;fr-&gt;toright-&gt;hide ();
-    boxel-&gt;fr-&gt;toclose-&gt;hide ();
-    boxel-&gt;fr-&gt;f-&gt;handle (this, FXSEL (SEL_FOCUSIN, filelist::ID_ICO), NULL);
-    
-    rightframe-&gt;recalc ();
-    leftframe-&gt;recalc ();
-}
-
-
-//notify from filelist
-long MainWindow::onNotify (FXObject * sender, FXSelector sel, void *ptr)
-{
-    FXTRACE ((5, &quot;NOTIFY\n&quot;));
-    FXushort id = FXSELID (sel);
-    if (id == 667)
-    {
-	string *file_ptr = (string *) ptr;
-	string file = *file_ptr;
-	FXTRACE ((5, &quot;change to directory %s\n&quot;, file.c_str ()));
-	delete file_ptr;
-	string dir;
-	string type;
-	string str_server = file;
-	dir = &quot;/&quot;;
-	type = &quot;archive&quot;;
-	pathtype pt (dir, type, str_server);
-	Frame *fr;
-	if (left_frame-&gt;f-&gt;active)
-	    fr = new Frame (leftcontrolframe, leftframe, pt, this, -1);
-
-	else
-	    fr = new Frame (rightcontrolframe, rightframe, pt, this, -1);
-	if (left_frame-&gt;f-&gt;active)
-	{
-	    left_frame-&gt;hf-&gt;reparent (controlframe);
-	    left_frame-&gt;toleft-&gt;show ();
-	    left_frame-&gt;toright-&gt;show ();
-	    left_frame-&gt;toclose-&gt;show ();
-	    left_frame-&gt;frame-&gt;hide ();
-	    left_frame-&gt;f-&gt;toolbar-&gt;hide();
-	    left_frame-&gt;f-&gt;toolbar2-&gt;hide();
-	    left_frame = fr;
- 
-	}
-
-	else
-	{
-	    right_frame-&gt;hf-&gt;reparent (controlframe);
-	    right_frame-&gt;toleft-&gt;show ();
-	    right_frame-&gt;toright-&gt;show ();
-	    right_frame-&gt;toclose-&gt;show ();
-	    right_frame-&gt;frame-&gt;hide ();
-	    right_frame-&gt;f-&gt;toolbar-&gt;hide();
-	    right_frame-&gt;f-&gt;toolbar2-&gt;hide();
-	    right_frame = fr;
-	
-	    
-	}
-	controlframe-&gt;recalc ();
-	fr-&gt;frame-&gt;create ();
-	fr-&gt;hf-&gt;create ();
-	fr-&gt;frame-&gt;show ();
-	fr-&gt;f-&gt;toolbar-&gt;dock(topdock);  
-        fr-&gt;f-&gt;toolbar2-&gt;dock(rightdock);
-	
-	left_frame-&gt;f-&gt;filelist_opposite = right_frame-&gt;f;
-	right_frame-&gt;f-&gt;filelist_opposite = left_frame-&gt;f;
-	
-	if(left_frame-&gt;f-&gt;active)
-	left_frame-&gt;f-&gt;handle (this, FXSEL (SEL_FOCUSIN, filelist::ID_ICO), NULL);
-	else
-	right_frame-&gt;f-&gt;handle (this, FXSEL (SEL_FOCUSIN, filelist::ID_ICO), NULL);
-	
-	rightframe-&gt;recalc ();
-	leftframe-&gt;recalc ();
-    }
-
-    else if (id == 666)		//directory change, for example user clicked double on direcotry, or clicked with 3rd button to go to parent dir
-    {
-	if (left_frame-&gt;f-&gt;active)
-	    left_frame-&gt;generate_menu (left_frame-&gt;f-&gt;path, this);
-
-	else
-	    right_frame-&gt;generate_menu (right_frame-&gt;f-&gt;path, this);
-    }
-
-    else if (id == 668)
-    {
-	if (left-&gt;getWidth () == 0 || right-&gt;getWidth () == 0)
-	    left-&gt;setWidth (getWidth () / 2);
-
-	else
-	{
-	    if (left_frame-&gt;f == (filelist *) sender)
-		left-&gt;setWidth (right-&gt;getWidth () + left-&gt;getWidth ());
-
-	    else
-		left-&gt;setWidth (0);
-	}
-    }
-}
-
-
-//pressed button in path
-long MainWindow::onOpenDir (FXObject * sender, FXSelector, void *ptr)
-{
-    FXTRACE ((5, &quot;OPEN DIR\n&quot;));
-    FXButton *bt = (FXButton *) sender;
-    box *boxel = (box *) bt-&gt;getUserData ();
-    box *boxbackup = boxel;
-    if (boxel-&gt;fr != right_frame &amp;&amp; boxel-&gt;fr != left_frame)
-	return 0;
-    string path = &quot;&quot;;
-    while (boxel-&gt;prebutton != NULL)
-    {
-	boxel = (box *) boxel-&gt;prebutton-&gt;getUserData ();
-    }
-    while (boxel != NULL)
-    {
-	if (boxel == boxbackup)
-	{
-	    break;
-	}
-	path.append (boxel-&gt;bt-&gt;getText ().text ());
-	boxel = (box *) boxel-&gt;nextbutton-&gt;getUserData ();
-    }
-    if (path == &quot;&quot;)
-	path = &quot;/&quot;;
-    boxbackup-&gt;fr-&gt;f-&gt;path = path;
-    boxbackup-&gt;fr-&gt;f-&gt;opendir (path);
-    boxbackup-&gt;fr-&gt;generate_menu (path, this);
-}
-
-
-//executed cyclically to update informations about progress of copying/moving/deleteing files
-//using vector of special objects thread_elem to read from them information and to write request
-//for example stoping copying.
-long MainWindow::onTimer (FXObject *, FXSelector, void *)
-{
-    vector &lt; thread_elem * &gt;::iterator iter;
-    unsigned int indx;
-    for (iter = objmanager-&gt;thread_vec.begin (); iter != objmanager-&gt;thread_vec.end (); iter++)
-    {
-	bool end = false;
-	informationpanel *infp;
-	thread_elem *telem = *iter;
-	if (telem-&gt;mutex.trylock ())
-	{
-	    if (telem-&gt;gui == NULL)
-	    {
-		infp = new informationpanel (infoframe, telem-&gt;command);
-		telem-&gt;gui = (void *) infp;
-		if (telem-&gt;command == &quot;copy&quot; || telem-&gt;command == &quot;move&quot; || telem-&gt;command == &quot;remove&quot;)
-		{
-		    infp-&gt;bu-&gt;setUserData (telem);
-		    infp-&gt;bu-&gt;setSelector (MainWindow::ID_CANCEL);
-		    infp-&gt;bu-&gt;setTarget (this);
-		}
-
-		else if (telem-&gt;command == &quot;execute&quot;)
-		{
-		    string show_commands = conf-&gt;readonestring (&quot;/OpenspaceConfig/show_commands&quot;);
-		    if (show_commands == &quot;true&quot;)
-		    {
-			FXFont *font = new FXFont (getApp (), &quot;Arial&quot;, 8);
-			if (font)
-			{
-			    font-&gt;create ();
-			    infp-&gt;lab0-&gt;setFont (font);
-			}
-			infp-&gt;lab0-&gt;setText (telem-&gt;src[0].c_str ());
-			infp-&gt;frame-&gt;recalc ();
-		    }
-
-		    else
-			infp-&gt;frame-&gt;hide ();
-		}
-
-		else if (telem-&gt;command == &quot;init&quot;)
-		{
-		    string text = &quot;connecting ... &quot;;
-		    infp-&gt;lab0-&gt;setText (text.c_str ());
-		    infp-&gt;frame-&gt;recalc ();
-		}
-	    }
-	    //popup with question about skipping or overwriting file
-	    if (telem-&gt;question == true)
-	    {
-		telem-&gt;question = false;
-		telem-&gt;pane = new FXMenuPane (this);
-		FXButton *but = new FXButton (telem-&gt;pane, &quot;overwrite&quot;, NULL, this,
-					      ID_OVERWRITE);
-		but-&gt;setUserData (telem);
-		but = new FXButton (telem-&gt;pane, &quot;skip&quot;, NULL, this, ID_SKIP);
-		but-&gt;setUserData (telem);
-		but = new FXButton (telem-&gt;pane, &quot;skip all&quot;, NULL, this, ID_SKIP_ALL);
-		but-&gt;setUserData (telem);
-		but = new FXButton (telem-&gt;pane, &quot;overwrite all&quot;, NULL, this, ID_OVERWRITE_ALL);
-		but-&gt;setUserData (telem);
-		telem-&gt;pane-&gt;create ();
-		telem-&gt;pane-&gt;popup (NULL, this-&gt;getX () + 300, this-&gt;getY () + 300, but-&gt;getWidth (), 100);
-	    }
-	    //when command is copy or move update information about progress
-	    if (telem-&gt;command == &quot;copy&quot; || telem-&gt;command == &quot;move&quot;)
-	    {
-		infp = (informationpanel *) telem-&gt;gui;
-		string info = &quot;total size: &quot; + numtostring (telem-&gt;total_size);
-		infp-&gt;lab0-&gt;setText (info.c_str ());
-		info = &quot;Current file: &quot; + telem-&gt;act_file_name + &quot; size: &quot; + numtostring (telem-&gt;file_size);
-		infp-&gt;lab1-&gt;setText (info.c_str ());
-		double pct2 = 100 * (double) telem-&gt;act_total_size / (double) telem-&gt;total_size;
-		infp-&gt;pbar2-&gt;setProgress ((int) pct2);
-		double pct = 100 * (double) telem-&gt;act_file_size / (double) telem-&gt;file_size;
-		infp-&gt;pbar-&gt;setProgress ((int) pct);
-		double diff = difftime (time (NULL), *telem-&gt;tim);
-		info = &quot;time elapsed: &quot; + ntos ((unsigned int) diff) + &quot; copied size: &quot;;
-		info.append (numtostring (telem-&gt;act_file_size));
-		if (diff == 0)
-		    diff = 0.001;
-		double speed = (double) telem-&gt;act_total_size / diff;
-		info.append (&quot; Speed: &quot; + numtostring ((unsigned int) speed) + &quot;/s&quot;);
-		unsigned int eta = (unsigned int) ((diff * (double) telem-&gt;total_size) / (double) telem-&gt;act_total_size);
-		eta = eta - (unsigned int) diff;
-		info.append (&quot; ETA: &quot; + ntos (eta));
-		infp-&gt;lab2-&gt;setText (info.c_str ());
-	    }
-
-	    else if (telem-&gt;command == &quot;remove&quot;)
-	    {
-		infp = (informationpanel *) telem-&gt;gui;
-		string info = &quot;Removing: &quot; + telem-&gt;act_file_name;
-		//FXTRACE ((5, &quot;remove file %s\n&quot;, telem-&gt;act_file_name.c_str ()));
-		infp-&gt;lab0-&gt;setText (info.c_str ());
-		infp-&gt;frame-&gt;recalc ();
-	    }
-
-	    else if (telem-&gt;command == &quot;execute&quot;)
-	    {
-		string::size_type pos = telem-&gt;options.find (&quot;capture&quot;);
-		if (pos != string::npos)
-		{
-		    char readbuf[80];
-		    int k = 0;
-		    while (read (telem-&gt;p[0], readbuf, 1) &gt; 0 &amp;&amp; k++ &lt; 2000)
-		    {
-			string s = &quot;&quot;;
-			s = s + readbuf[0];
-			if (s == &quot;!&quot;)
-			    telem-&gt;end = true;
-
-			else
-			    telem-&gt;dst = telem-&gt;dst + readbuf[0];
-		    }
-		}
-	    }
-	    end = telem-&gt;end;
-	    telem-&gt;mutex.unlock ();
-	    if (end)		//when telem ended
-	    {
-	    
-		if(telem-&gt;error)
-		{
-		FXMessageBox about (this, &quot;error&quot;, telem-&gt;msg.c_str(), NULL, MBOX_OK | DECOR_TITLE | DECOR_BORDER);
-  		about.execute ();	    
-		}
-		filelist *fil = (filelist*) telem-&gt;filel;
-		
-		string::size_type pos = telem-&gt;options.find (&quot;download&quot;);
-		bool download = false;
-		if (pos != string::npos)
-		{
-		    download = true;
-		
-		}
-
-		if (telem-&gt;command == &quot;init&quot;)
-		{
-		    FXTRACE ((5, &quot;INIT \n&quot;));
-		    if(fil-&gt;init ()!=false)
-		    {
-		   	 if (left_frame-&gt;f-&gt;active)
-	  		  left_frame-&gt;generate_menu (fil-&gt;path, this);
-			  else
-			  right_frame-&gt;generate_menu (fil-&gt;path, this);
-		    }
-		    else
-		    {
-		        FXMessageBox box(getApp (), &quot;error&quot;, &quot;Can't connect :|&quot;, NULL, MBOX_OK | DECOR_TITLE | DECOR_BORDER);
-    			box.execute ();
-		    
-		    
-		    }	  
-		}
-		if (telem-&gt;command == &quot;copy&quot;)
-		{
-		    if ((left_frame-&gt;f-&gt;fb == telem-&gt;fb &amp;&amp; download == true) || (download == false &amp;&amp; right_frame-&gt;f-&gt;fb == telem-&gt;fb))
-			left_frame-&gt;f-&gt;refresh ();
-
-		    else
-			right_frame-&gt;f-&gt;refresh ();
-		}
-
-		else if (telem-&gt;command == &quot;remove&quot;)
-		{
-		    fil-&gt;refresh ();
-		}
-
-		else if (telem-&gt;command == &quot;move&quot;)
-		{
-		    right_frame-&gt;f-&gt;refresh ();
-		    left_frame-&gt;f-&gt;refresh ();
-		}
-		string options = telem-&gt;options;	// get special options
-		pos = options.find (&quot;rescan&quot;);	// when we need to rescan directory after command finish
-		if (pos != string::npos)
-		{
-
-		    fil-&gt;refresh ();
-
-		}
-		pos = telem-&gt;options.find (&quot;capture&quot;);	// when we need to capture data from standard output from executed program
-		if (pos != string::npos)
-		{
-		    telem-&gt;pane = new FXMenuPane (this);
-		    FXLabel *lab = new FXLabel (telem-&gt;pane, telem-&gt;dst.c_str ());
-		    telem-&gt;pane-&gt;create ();
-		    telem-&gt;pane-&gt;popup (NULL, this-&gt;getX (), this-&gt;getY (), lab-&gt;getWidth (), lab-&gt;getHeight ());
-		}
-		//cleanup
-		delete ((informationpanel *) telem-&gt;gui);
-		telem-&gt;gui = NULL;
-		infoframe-&gt;recalc ();
-
-		//erase from vector and delete telem;   
-		objmanager-&gt;thread_vec.erase (iter);
-		delete telem;
-		break;
-	    }
-	}
-    }				//end for
-    getApp ()-&gt;addTimeout (this, ID_TIMER, 200);
-    return 1;
-}
-
-
-//when we choose in popup if we want overwrite or skip
-//notify about this filelist plugin using telem
-long MainWindow::onOverwrite (FXObject * sender, FXSelector sel, void *)
-{
-    FXushort id = FXSELID (sel);
-    FXButton *but = (FXButton *) sender;
-    thread_elem *te = (thread_elem *) but-&gt;getUserData ();
-    te-&gt;mutex.lock ();
-    if (id == ID_OVERWRITE)
-    {
-	te-&gt;overwrite = true;
-    }
-
-    else if (id == ID_SKIP)
-    {
-	te-&gt;overwrite = false;
-    }
-
-    else if (ID_OVERWRITE_ALL)
-    {
-	te-&gt;overwrite = true;
-	te-&gt;all = true;
-    }
-
-    else if (id == ID_SKIP_ALL)
-    {
-	te-&gt;overwrite = false;
-	te-&gt;all = true;
-    }
-    te-&gt;pane-&gt;hide ();
-    delete te-&gt;pane;
-    te-&gt;answer = true;
-    te-&gt;mutex.unlock ();
-}
-
-
-//NEED TO CHANGE THIS
-long MainWindow::onConfigure (FXObject * sender, FXSelector sel, void *ptr)
-{
-if(!conf) return 0;
-
-    FXMainWindow::onConfigure (sender, sel, ptr);
-    float widthpanel = this-&gt;getWidth () * ratio;
-    left-&gt;setWidth ((int) widthpanel);
-
-} 
-long MainWindow::onUpdate (FXObject * sender, FXSelector sel, void *ptr)
-{
-if(!conf)return 0;
-
-    FXMainWindow::onUpdate (sender, sel, ptr);
-    float l = left-&gt;getWidth ();
-    float r = right-&gt;getWidth ();
-    float w = getWidth ();
-    ratio = (float) l / (float) w;
-
-}
-
-//telem is canceled
-long MainWindow::cancel (FXObject * sender, FXSelector, void *)
-{
-    FXButton *but = (FXButton *) sender;
-    thread_elem *te = (thread_elem *) but-&gt;getUserData ();
-    te-&gt;mutex.lock ();
-    te-&gt;cancel = true;
-    te-&gt;mutex.unlock ();
-}
-
-
-
-
-//load icon from file and put in the array
-void MainWindow::loadicons (string icondir)
-{
-
- objmanager=objectmanager::instance(getApp());
-   
-
-FXIconSource *source = new FXIconSource (getApp ());
-FXString fil=icondir.c_str();
-FXString name=fil+conf-&gt;readonestring (&quot;/OpenspaceConfig/file_types/COMMON/types/dir/icon&quot;).c_str() + &quot;.png&quot;;
-objmanager-&gt;specialicons[0] =  source-&gt;loadIcon (name);
-if(objmanager-&gt;specialicons[0])
-objmanager-&gt;specialicons[0]-&gt;create();
-name=fil+&quot;big_&quot;+conf-&gt;readonestring (&quot;/OpenspaceConfig/file_types/COMMON/types/dir/icon&quot;).c_str()+ &quot;.png&quot;;
-objmanager-&gt;specialicons[1] =  source-&gt;loadIcon (name);
-if(objmanager-&gt;specialicons[1])
-objmanager-&gt;specialicons[1]-&gt;create();
-name=fil+conf-&gt;readonestring (&quot;/OpenspaceConfig/file_types/COMMON/types/all/icon&quot;).c_str()+ &quot;.png&quot;;
-objmanager-&gt;specialicons[2] =  source-&gt;loadIcon (name);
-if(objmanager-&gt;specialicons[2])
-objmanager-&gt;specialicons[2]-&gt;create();
-name=fil+&quot;big_&quot;+conf-&gt;readonestring (&quot;/OpenspaceConfig/file_types/COMMON/types/all/icon&quot;).c_str()+ &quot;.png&quot;;
-objmanager-&gt;specialicons[3] =  source-&gt;loadIcon (name);
-if(objmanager-&gt;specialicons[3])
-objmanager-&gt;specialicons[3]-&gt;create();
-name=fil+conf-&gt;readonestring (&quot;/OpenspaceConfig/file_types/COMMON/types/executable/icon&quot;).c_str()+ &quot;.png&quot;;
-objmanager-&gt;specialicons[4] =  source-&gt;loadIcon (name);
-if(objmanager-&gt;specialicons[4])
-objmanager-&gt;specialicons[4]-&gt;create();
-name=fil+conf-&gt;readonestring (&quot;/OpenspaceConfig/file_types/COMMON/types/symlink/icon&quot;).c_str()+ &quot;.png&quot;;
-objmanager-&gt;specialicons[5] =  source-&gt;loadIcon (name);
-if(objmanager-&gt;specialicons[5])
-objmanager-&gt;specialicons[5]-&gt;create();
-
-
-	    struct stat status;
-	    struct dirent *dp;
-	    DIR *dirp;
- 
-	    dirp = opendir (icondir.c_str ());
-	    
-	    if(dirp)	
-	    while ((dp = readdir (dirp)) != NULL)
-	    {
-	 
-		if (dp-&gt;d_name[0] != '.' || (dp-&gt;d_name[1] != '\0' &amp;&amp; (dp-&gt;d_name[1] != '.' || dp-&gt;d_name[2] != '\0')))
-		{
-		string name=dp-&gt;d_name;
-	
-			//if (name.length () &gt;= 3 &amp;&amp; (name.substr (name.length () - 3, 3) == &quot;gif&quot; || name.substr (name.length () - 3, 3) == &quot;png&quot;))
-			{
-		
-		   	 string file = icondir;
-		   	 file.append (name);	
-			string shortname=name.substr (0,name.length () - 4);
-			
-			 FXString fil_name=file.c_str();
-			
-  		    	 objmanager-&gt;osicons[shortname] = source-&gt;loadIcon (fil_name);
-		
-   			 objmanager-&gt;osicons[shortname]-&gt;create ();
-		
-	
-			}
-		    
-		}
-	    }
-
-	    closedir (dirp);
-
-   
-}
-
-
-    // read color definied as FF FF FF and return FXColor  
-FXColor readcolor (string col)
-{
-    if (col == &quot;&quot;)
-	return FXRGB (0, 0, 0);
-	
-return fxcolorfromname(col.c_str());
-
-}
-
-
-//the same as above but defualt color is white
-FXColor readcolor2 (string col)
-{
-    if (col == &quot;&quot;)
-	return FXRGB (255, 255, 255);
-return  fxcolorfromname(col.c_str());
-}
-
-string MainWindow::parseDir (string dir)
-{
-    if (dir == &quot;{homedir}&quot;)
-	return FXFile::getHomeDirectory ().text ();
-
-    else
-	return dir;
-}
-
-bool MainWindow::loadMimeSettings (string path, string type)
-{
-
-    string res2 = conf-&gt;readonestring (path + &quot;/icon&quot;);
-    string colorstr = conf-&gt;readonestring (path + &quot;/color&quot;);
-    FXColor color = readcolor (colorstr);
-    string backcolorstr = conf-&gt;readonestring (path + &quot;/backcolor&quot;);
-    FXColor backcolor = readcolor2 (backcolorstr);
-    if(res2!=&quot;&quot;)
-    objmanager-&gt;file_type_settings[type] = new file_type (objmanager-&gt;osicons[res2],objmanager-&gt;osicons[&quot;big_&quot;+res2], color, backcolor);
-    else
-    return false;
-
-}
-
-
-
-
-//-----FRAME---------------------------------------------------------------------------------------------------------------------------         
-Frame::Frame (FXComposite * cp, FXComposite * p, pathtype pt, FXObject * tgt, int position = 0)
-{
-    this-&gt;pathdir = pt.dir;
-    this-&gt;type = pt.type;
-    string path = pathdir;
-    hf = new FXHorizontalFrame (cp, LAYOUT_FILL_X | FRAME_THICK, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0);
-    pathdir = path;
-
-//generate_menu(path,tgt);
-    int z = 0;
-    FXButton *prebutton = NULL;
-    FXButton *nextbutton = NULL;
-    
-    objectmanager*objmanager=objectmanager::instance(cp-&gt;getApp());
-
-          
-    toleft = new FXButton (hf, &quot;&quot;,objmanager-&gt;osicons[&quot;left&quot;], tgt, MainWindow::ID_TOLEFT, FRAME_THICK, 0, 0, 0, 0, 0, 0, 0, 0);
-    toleft-&gt;setUserData (new box (this, NULL, NULL, NULL));
-    toclose = new FXButton (hf, &quot;&quot;, objmanager-&gt;osicons[&quot;close&quot;], tgt, MainWindow::ID_TOCLOSE, FRAME_THICK, 0, 0, 0, 0, 0, 0, 0, 0);
-    toclose-&gt;setUserData (new box (this, NULL, NULL, NULL));
-    toright = new FXButton (hf, &quot;&quot;, objmanager-&gt;osicons[&quot;right&quot;], tgt, MainWindow::ID_TORIGHT, FRAME_THICK, 0, 0, 0, 0, 0, 0, 0, 0);
-    toright-&gt;setUserData (new box (this, NULL, NULL, NULL));
-    if(pt.server!=&quot;&quot;)
-    {
-    string lab=pt.server+&quot;: &quot;;
-    new FXLabel(hf,lab.c_str());
-    }
-
-//new FXLabel (hf,&quot; &quot;);
-    if (position != 0)
-    {
-	toleft-&gt;hide ();
-	toclose-&gt;hide ();
-	toright-&gt;hide ();
-    }
-    while (z != -1)
-    {
-	string path_element = &quot;&quot;;
-	z = path.find (SEPARATOR, 1);
-	if (z == -1)
-	    path_element.append (path);
-
-	else
-	    path_element.append (path.substr (0, z));
-	path.erase (0, z);
-	FXButton *bt = new FXButton (hf, path_element.c_str (), NULL, tgt,
-				     MainWindow::ID_DIR, FRAME_THICK, 0, 0, 0, 0, 0, 0,
-				     0, 0);
-	bt-&gt;setBackColor (objmanager-&gt;maincolor);
-	if (prebutton != NULL)
-	{
-	    box *boxel = (box *) prebutton-&gt;getUserData ();
-	    boxel-&gt;nextbutton = bt;
-	}
-
-	else
-	    firstbutton = bt;
-	bt-&gt;setUserData (new box (this, prebutton, bt, NULL));
-	prebutton = bt;
-    }
-    
-    frame = new FXVerticalFrame (p, LAYOUT_FILL_X | LAYOUT_FILL_Y | FRAME_SUNKEN, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0);
-    f = new filelist (frame, pt);
-    if (position == 0)
-    {
-	frame-&gt;hide ();
-    }
-}
-
-
-//generate buttons path for given path
-void Frame::generate_menu (string path, FXObject * tgt)
-{
-
-objectmanager*objmanager=objectmanager::instance(hf-&gt;getApp());
-
-    FXTRACE ((5, &quot;GENERATE MENU path %s &quot;, path.c_str ()));
-    if (path[0] == '/' &amp;&amp; path[1] == '/')
-	path.erase (0, 1);
-    box *boxel = (box *) firstbutton-&gt;getUserData ();
-    box *boxbackup = boxel;
-    while (boxel)
-    {
-	box *boxel_del = boxel;
-	if (boxel-&gt;nextbutton != NULL)
-	    boxel = (box *) boxel-&gt;nextbutton-&gt;getUserData ();
-
-	else
-	    boxel = NULL;
-	delete boxel_del-&gt;bt;
-	delete boxel_del;
-	boxel_del-&gt;bt = NULL;
-	boxel_del = NULL;
-    }
-    this-&gt;pathdir = path;
-    int z = 0;
-    FXButton *prebutton = NULL;
-    FXButton *nextbutton = NULL;
-    while (z != -1)
-    {
-	string path_element = &quot;&quot;;
-	z = path.find (SEPARATOR, 1);
-	if (z == -1)
-	    path_element.append (path);
-
-	else
-	    path_element.append (path.substr (0, z));
-	path.erase (0, z);
-	FXButton *bt = new FXButton (hf, path_element.c_str (), NULL, tgt,
-				     MainWindow::ID_DIR, FRAME_THICK, 0, 0, 0, 0, 0, 0,
-				     0, 0);
-	bt-&gt;setBackColor (objmanager-&gt;maincolor);
-	bt-&gt;create ();
-	if (prebutton != NULL)
-	{
-	    box *boxel = (box *) prebutton-&gt;getUserData ();
-	    boxel-&gt;nextbutton = bt;
-	}
-
-	else
-	    firstbutton = bt;
-	bt-&gt;setUserData (new box (this, prebutton, bt, NULL));
-	prebutton = bt;
-    }
-}

Deleted: trunk/src/mainwindow.h
===================================================================
--- trunk/src/mainwindow.h	2006-02-12 13:43:28 UTC (rev 245)
+++ trunk/src/mainwindow.h	2006-02-12 15:36:06 UTC (rev 246)
@@ -1,201 +0,0 @@
-#ifndef MAINWINDOW
-#define MAINWINDOW
-
-#include &lt;map&gt;
-using namespace std;
-
-#include &quot;pathtype.h&quot;
-#include &quot;filelist.h&quot;
-#include &quot;filetype.h&quot;
-
-
-#ifdef WIN32
-#define SEPARATOR &quot;\\&quot;
-#else
-#include &lt;dlfcn.h&gt;
-#define SEPARATOR &quot;/&quot;
-#endif
-
-
-//--------------------------------------------------------------------------------------------------------------------------------------------------    
-
-class box;
-class Frame;
-
-
-//the main application window
-
-class MainWindow:public FXMainWindow
-{
-  FXDECLARE (MainWindow) public:
-    enum
-    {
-	ID_DIR = FXMainWindow::ID_LAST,
-	ID_DIRCH,
-	ID_TOLEFT,
-	ID_TOCLOSE,
-	ID_TORIGHT,
-	ID_NEWFRAME,
-	ID_TIMER,
-	ID_CANCEL,
-	ID_COMMANDS_SHOW,
-	ID_NEW_NETWORK,
-	ID_OVERWRITE,
-	ID_OVERWRITE_ALL,
-	ID_SKIP,
-	ID_SKIP_ALL,
-	ID_ABOUT,
-	ID_CONFIGURE,
-	ID_NEW_SEARCH,
-	ID_LAST,
-    };
-
-    MainWindow (FXApp *);
-    virtual ~ MainWindow ();
-    virtual void create ();
-
-
-
-    long MainWindow::onListDirs (FXObject * sender, FXSelector, void *);
-    long MainWindow::onChangeDir (FXObject * sender, FXSelector, void *);
-    long MainWindow::onChangeList (FXObject * sender, FXSelector, void *);
-    long MainWindow::onNewFrame (FXObject * sender, FXSelector, void *);
-    long MainWindow::onNewNetworkFrame (FXObject * sender, FXSelector, void *);
-    long MainWindow::onNewSearchFrame (FXObject * sender, FXSelector, void *);
-    long MainWindow::onNotify (FXObject * sender, FXSelector, void *);
-    long MainWindow::onOpenDir (FXObject * sender, FXSelector, void *);
-    long MainWindow::onTimer (FXObject *, FXSelector, void *);
-    long MainWindow::cancel (FXObject * sender, FXSelector, void *);
-    long MainWindow::update (FXObject * sender, FXSelector, void *);
-    long MainWindow::commandsShow (FXObject * sender, FXSelector, void *);
-    long MainWindow::onListNextDir (FXObject * sender, FXSelector, void *);
-    long MainWindow::onOverwrite (FXObject * sender, FXSelector, void *);
-    long MainWindow::onAbout (FXObject * sender, FXSelector sel, void *);
-    long MainWindow::onOpenConfigure (FXObject * sender, FXSelector sel, void *);
-    long MainWindow::onUpdate (FXObject * sender, FXSelector sel, void *);
-    long MainWindow::onConfigure (FXObject * sender, FXSelector sel, void *);
-
-    int MainWindow::popupDir (filelist * current_filelist, string path, int x, int y);
-
-    string MainWindow::parseDir (string dir);
-    bool MainWindow::loadMimeSettings (string path, string type);
-
-
-
-  private:
-     MainWindow ()
-    {
-    }
-    void MainWindow::loadicons (string dir);
-
-    FXVerticalFrame *leftframe;
-    FXVerticalFrame *rightframe;
-    FXVerticalFrame *infoframe;
-    FXVerticalFrame *controlframe;
-
-    FXVerticalFrame *rightcontrolframe;
-    FXVerticalFrame *leftcontrolframe;
-    FXVerticalFrame *left;
-    FXVerticalFrame *right;
-    FXHorizontalFrame *networkframe, *searchframe;
-    FXTextField *search_path,*search_filefilter,*search_size_greater,*search_size_less;
-
-    FXSplitter *splitter;
-    FXMenuPane *filemenu;
-
-    FXTextField *server;
-    FXTextField *user;
-    FXTextField *password;
-    FXTextField *port;
-
-    Frame *fr;
-
-    Frame *current_frame;
-    Frame *left_frame;
-    Frame *right_frame;
-    FXMenuPane *pane;
-    preferences *pref;
-    float ratio;
-
-
-    FXToolBarShell *dragshell1;	// Shell for floating menubar
-    FXToolBarShell *dragshell2;	// Shell for floating toolbar
-    FXToolBarShell *dragshell3;	// Shell for floating toolbar
-    FXToolBarShell *dragshell4;	// Shell for floating toolbar
-    FXDockSite *topdock;
-    FXDockSite *bottomdock;
-    FXDockSite *leftdock;
-    FXDockSite *rightdock;
-    
-    FXComboBox *filelisttypecombobox;
-    
-objectmanager *objmanager;
-};
-
-
-
-
-
-
-//--------------------------------------------------------------------------------------------------------------------------------------------------
-
-class Frame;
-
-class box
-{
-
-  public:
-
-    Frame * fr;
-    FXButton *prebutton;
-    FXButton *bt;
-    FXButton *nextbutton;
-
-
-     box (Frame * fr, FXButton * prebutton, FXButton * bt, FXButton * nextbutton)
-    {
-	this-&gt;bt = bt;
-	this-&gt;fr = fr;
-	this-&gt;prebutton = prebutton;
-	this-&gt;nextbutton = nextbutton;
-    }
-
-};
-
-
-class Frame
-{
-  private:
-	
-  public:
-
-    string pathdir;
-    string type;
-    filelist *f;
-    FXButton *toleft;
-    FXButton *toright;
-    FXButton *toclose;
-    FXButton *firstbutton;
-    
-    FXVerticalFrame * frame;
-    FXHorizontalFrame *hf;
-
-    Frame (FXComposite * cp, FXComposite * p, pathtype pt, FXObject * tgt, int position);
-    void generate_menu (string path, FXObject * tgt);
-
-    ~Frame ()
-    {
-	delete hf;
-	delete f;
-	delete frame;
-    }
-
-
-
-};
-
-
-
-
-
-#endif

Deleted: trunk/src/openspace.cpp
===================================================================
--- trunk/src/openspace.cpp	2006-02-12 13:43:28 UTC (rev 245)
+++ trunk/src/openspace.cpp	2006-02-12 15:36:06 UTC (rev 246)
@@ -1,63 +0,0 @@
-#include &quot;fx.h&quot;
-#include &quot;config.h&quot;
-#include &quot;mainwindow.h&quot;
-#include &lt;unistd.h&gt;
-
-//-----MAIN--------------------------------------------------------------------------------------- 
-//nothing special here, create and execute main window,
-//creating needed directoris if doesn't exist
-int main (int argc, char **argv)
-{
-
-	for(int i=0;i&lt;argc;i++)
-	{
-		if(!strcmp(argv[i],&quot;-v&quot;) || !strcmp(argv[i],&quot;--version&quot;) )
-		{
-		fxmessage(&quot;\n%s\n&quot;,PACKAGE_STRING);
-		return 0;
-		}
-		
-		if(!strcmp(argv[i],&quot;-h&quot;) || !strcmp(argv[i],&quot;--help&quot;) )
-		{
-		fxmessage(&quot;\n-h, --help print this help\n&quot;);
-		fxmessage(&quot;-v, --version print version\n&quot;);
-		return 0;
-		}
-	}
-	
-        string tmpdir=&quot;/tmp/openspace&quot;;	
-        if(!FXFile::exists(tmpdir.c_str()))
-	{
-	FXFile::createDirectory(tmpdir.c_str(),493);	
-	}
-	
-        string dir = FXFile::getUserDirectory (&quot;&quot;).text ();
-        dir=dir +  &quot;/.openspace&quot;;
-        string file = dir +  &quot;/openspacerc&quot;;
-	
-	if(!FXFile::exists(file.c_str()))
-	{
-	FXFile::createDirectory(dir.c_str(),493);
-	string dir2=dir+&quot;/icons&quot;;
-	FXFile::createDirectory(dir2.c_str(),493);	
-	dir+=&quot;/plugins&quot;;
-	FXFile::createDirectory(dir.c_str(),493);
-	dir2=dir+&quot;/cmddialog&quot;;
-	FXFile::createDirectory(dir2.c_str(),493);
-	dir2=dir+&quot;/filelist&quot;;
-	FXFile::createDirectory(dir2.c_str(),493);
-	
-		
-	string src=PATH_CFG + string(&quot;/openspacerc&quot;);
-	FXFile::copy(src.c_str(),file.c_str());
-	}
-    fxTraceLevel = 0;
-    FXApp *application = new FXApp (&quot;openspace&quot;, NULL);
-    application-&gt;init (argc, argv);
- 
-    new MainWindow (application);
-    application-&gt;create ();
-    return application-&gt;run ();
-}
-
-//-----MAIN------------------------------------------------------------------------------------------------------------------------------------------       

Deleted: trunk/src/osfile.h
===================================================================
--- trunk/src/osfile.h	2006-02-12 13:43:28 UTC (rev 245)
+++ trunk/src/osfile.h	2006-02-12 15:36:06 UTC (rev 246)
@@ -1,38 +0,0 @@
-#ifndef OSFILE
-#define OSFILE
-
-#include &lt;string&gt;
-#include &lt;vector&gt;
-using namespace std;
-
-enum
-{
-    FOLDER = 64,		// Directory item
-    EXECUTABLE = 128,		// Executable item
-    SYMLINK = 256,		// Symbolic linked item
-    CHARDEV = 512,		// Character special item
-    BLOCKDEV = 1024,		// Block special item
-    FIFO = 2048,		// FIFO item
-    SOCK = 4096			// Socket item
-};
-
-
-//class associated with file
-class osfile
-{
-  public:
-    string name;
-    unsigned int type;
-    unsigned long size;
-    vector &lt;string&gt; attrib;
-    string content;
-
-string mode;
-string user;
-string group;
-string date;
-
-
-};
-
-#endif

Deleted: trunk/src/oslistitem.cpp
===================================================================
--- trunk/src/oslistitem.cpp	2006-02-12 13:43:28 UTC (rev 245)
+++ trunk/src/oslistitem.cpp	2006-02-12 15:36:06 UTC (rev 246)
@@ -1,341 +0,0 @@
-#include &quot;fx.h&quot;
-using namespace FX;
-
-#include &quot;oslistitem.h&quot;
-#include &quot;filelist.h&quot;
-
-//TMP
-#include &quot;sharedobjects.h&quot;
-
-#define SIDE_SPACING             4    // Left or right spacing between items
-#define DETAIL_TEXT_SPACING      2    // Spacing between text and icon in detail icon mode
-#define MINI_TEXT_SPACING        2    // Spacing between text and icon in mini icon mode
-#define BIG_LINE_SPACING         0    // Line spacing in big icon mode
-#define BIG_TEXT_SPACING         0    // Spacing between text and icon in big icon mode
-#define ITEM_SPACE             128    // Default space for item
-
-
-
-FXIMPLEMENT(os_ListItem,FXIconItem,NULL,0)
-
-// Constructor
-
-os_ListItem::os_ListItem(FXIconList *list,osfile osf, FXColor col, FXColor backcol,FXIcon* ic1,FXIcon* ic2):FXIconItem(osf.name.c_str(),ic1,ic2,NULL),osf(osf)
-{
-
-this-&gt;list=list;
-color=col;
-backcolor=backcol;
-state|=FXIconItem::DRAGGABLE;
-}
-
-
-// Draw detail
-void os_ListItem::drawDetails(const FXIconList* list,FXDC&amp; dc,FXint x,FXint y,FXint,FXint h) const {
-
-//=============CHANGES==========================================
-	FXString label=osf.name.c_str();
-	label.append(&quot;\t&quot;);
-		for(int i=0;i&lt;osf.attrib.size();i++)
-		{				
-		label.append(osf.attrib[i].c_str());
-		label.append(&quot;\t&quot;);			
-		}
-//=============CHANGES==========================================
-
-
-
-  register FXHeader *header=list-&gt;getHeader();
-  register FXFont *font=list-&gt;getFont();
-  register FXint iw=0,ih=0,tw=0,th=0,yt,beg,end,hi,drw,space,used,dw,xx;
-  if(header-&gt;getNumItems()==0) return;
-  if(isSelected()){
-    dc.setForeground(list-&gt;getSelBackColor());
-    dc.fillRectangle(x,y,header-&gt;getTotalSize(),h);
-    }
-  if(hasFocus()){
-    dc.drawFocusRectangle(x+1,y+1,header-&gt;getTotalSize()-2,h-2);
-    }
-  xx=x+SIDE_SPACING/2;
-  if(miniIcon){
-
-    iw=miniIcon-&gt;getWidth();
-    ih=miniIcon-&gt;getHeight();
-    dc.setClipRectangle(x,y,header-&gt;getItemSize(0),h);
-    dc.drawIcon(miniIcon,xx,y+(h-ih)/2);
-    dc.clearClipRectangle();
-    xx+=iw+DETAIL_TEXT_SPACING;
-    }
-  if(!label.empty()){
-    th=font-&gt;getFontHeight();
-    dw=font-&gt;getTextWidth(&quot;...&quot;,3);
-    yt=y+(h-th-4)/2;
-    if(!isEnabled())
-      dc.setForeground(makeShadowColor(list-&gt;getBackColor()));
-    else if(isSelected())
-      dc.setForeground(list-&gt;getSelTextColor());
-    else
-      dc.setForeground(color); //CHANGES dc.setForeground(list-&gt;getTextColor());
-    used=iw+DETAIL_TEXT_SPACING+SIDE_SPACING/2;
-    for(hi=beg=0; beg&lt;label.length() &amp;&amp; hi&lt;header-&gt;getNumItems(); hi++,beg=end+1){
-      space=header-&gt;getItemSize(hi)-used;
-      for(end=beg; end&lt;label.length() &amp;&amp; label[end]!='\t'; end++);
-      if(end&gt;beg){
-        drw=end-beg;
-        tw=font-&gt;getTextWidth(&amp;label[beg],drw);
-        if(tw&gt;space-4){
-          while((tw=font-&gt;getTextWidth(&amp;label[beg],drw))+dw&gt;space-4 &amp;&amp; drw&gt;1) drw--;
-          dc.setClipRectangle(xx,y,space,h);
-          dc.drawText(xx+2,yt+font-&gt;getFontAscent()+2,&amp;label[beg],drw);
-          dc.drawText(xx+tw+2,yt+font-&gt;getFontAscent()+2,&quot;...&quot;,3);
-          dc.clearClipRectangle();
-          }
-        else{
-          dc.drawText(xx+2,yt+font-&gt;getFontAscent()+2,&amp;label[beg],drw);
-          }
-        }
-      xx+=space;
-      used=0;
-      }
-    }
-  }
-  
- 
- void os_ListItem::drawBigIcon(const FXIconList* list,FXDC&amp; dc,FXint x,FXint y,FXint w,FXint h) const {
- 
- 
- //=============CHANGES==========================================
-	FXString label=osf.name.c_str();
-	
-		
-//=============CHANGES==========================================
-   FXFont *font=((filelist*)list)-&gt;objmanager-&gt;captionfont1;
-   FXFont *font1=((filelist*)list)-&gt;objmanager-&gt;captionfont2; 
- 
- 
-  register FXint len,dw,s,space,xt,yt,xi,yi;
-  //register FXFont *font=list-&gt;getFont();
-  register FXint iw=0,ih=0,tw=0,th=0,ss=0;
-  space=w-SIDE_SPACING;
-  if(!label.empty()){
-    for(len=0; len&lt;label.length() &amp;&amp; label[len]!='\t'; len++);
-    tw=4+font-&gt;getTextWidth(label.text(),len);
-    
-    
-    
-    
-      if(bigIcon)
-      {
-  	  ih=bigIcon-&gt;getHeight();
-	  iw=bigIcon-&gt;getWidth();
-	   xi=x+(w-iw)/2;
-      }
-    
-    
-    
-    
-    th=4+font-&gt;getFontHeight();
-     //=============CHANGES==========================================    
-      for(int i=0;i&lt;osf.attrib.size();i++)
-		{		
-		th=th+4+font1-&gt;getFontHeight();	   
-		}
-  //=============CHANGES==========================================
-    
-    
-    //yt=y+h-th-BIG_LINE_SPACING/2;   
-    yi=y+BIG_LINE_SPACING/2+(h-th-BIG_LINE_SPACING-ss-ih)/2;
-    yt=y;
-    
-    dw=0;
-    if(tw&gt;space){
-      dw=font-&gt;getTextWidth(&quot;...&quot;,3);
-      s=space-dw;
-      while((tw=4+font-&gt;getTextWidth(label.text(),len))&gt;s &amp;&amp; len&gt;1) --len;
-      if(tw&gt;s) dw=0;
-      }
-    if(tw&lt;=space){         // FIXME as below in drawDetails
-      //xt=x+(w-tw-dw)/2;
-      xt=x+iw;
-      
-      if(isSelected()){
-       // dc.setForeground(list-&gt;getSelBackColor());
-        //dc.fillRectangle(xt,yt,tw+dw,th);
-        }
-	dc.setForeground(backcolor);
-	dc.fillRectangle(x,y,200,93);
-	
-	
-      if(!isEnabled())
-        dc.setForeground(makeShadowColor(list-&gt;getBackColor()));
-      else if(isSelected())
-        dc.setForeground(color); 
-      else
-	 dc.setForeground(color); 
-	
-	
-      dc.drawText(xt+2-iw,yt+font-&gt;getFontAscent()+2,label.text(),len);
-      
-      
-      if(dw) dc.drawText(xt-iw+tw-2,yt+font-&gt;getFontAscent()+2,&quot;...&quot;,3);
-   //=============CHANGES==========================================    
-    dc.setFont(font1);
-      for(int i=0;i&lt;osf.attrib.size();i++)
-		{				
-		
-		dc.drawText(xt+2,yt+(i+2)*font-&gt;getFontAscent()+2,osf.attrib[i].c_str(),osf.attrib[i].length());
-			
-		}
-  //=============CHANGES==========================================
-    dc.setFont(font);   
-      /*if(hasFocus()){
-        dc.drawFocusRectangle(xt+1,yt+1,tw+dw-2,th-2);
-        }*/
-      }
-    ss=0;//BIG_TEXT_SPACING;    // Space between text and icon only added if we have both icon and text
-    }
-  if(bigIcon){
-   
-    //=============CHANGES==========================================    
-    xi=x;
-    //=============CHANGES==========================================    
-    yi=y+BIG_LINE_SPACING/2+(h-th-BIG_LINE_SPACING-ss-ih)/2;
-    if(isSelected()){
-      dc.drawIconShaded(bigIcon,xi,y+4+font-&gt;getFontHeight());
-      }
-    else{
-      dc.drawIcon(bigIcon,xi,y+4+font-&gt;getFontHeight());
-      }
-     if(osf.type&amp;EXECUTABLE &amp;&amp; !(osf.type&amp;FOLDER))
-     {       
-     dc.drawIcon(((filelist*)list)-&gt;specialicons[4],xi,y+4+font-&gt;getFontHeight());
-     }
-     else if(osf.type&amp;SYMLINK)
-     {
-       dc.drawIcon(((filelist*)list)-&gt;specialicons[5],xi,y+4+font-&gt;getFontHeight());
-     }
-     
-     if(osf.content!=&quot;&quot;)
-     {
-     dc.setFont(font1);
-     dc.drawText(xi,y+4+font-&gt;getFontHeight()+font-&gt;getFontAscent()+2,osf.content.c_str(),10);
-     dc.setFont(font);     
-     }
-      
-    }
-  } 
-  
-
-
-FXint os_ListItem::getHeight(const FXIconList* list) const {
-FXFont *font=((filelist*)list)-&gt;objmanager-&gt;captionfont1;
-FXFont *font1=((filelist*)list)-&gt;objmanager-&gt;captionfont2;
-
-  register FXuint options=list-&gt;getListStyle();
-  register FXint ih=0,th=0,h=0,firstth=0;
-  if(options&amp;ICONLIST_BIG_ICONS){
-    if(bigIcon) ih=bigIcon-&gt;getHeight();
-    if(!label.empty()) th=4+font-&gt;getFontHeight();
-    if(ih &amp;&amp; th) ih+=BIG_TEXT_SPACING;
-    firstth=th;
-     //=============CHANGES==========================================    
-      for(int i=0;i&lt;osf.attrib.size();i++)
-		{		
-	       th=th+4+font1-&gt;getFontHeight();           
-		}
-  //=============CHANGES==========================================
-    
-   	 if(ih&gt;th)
-   	 h=BIG_LINE_SPACING+ih+firstth+4;
-	 else
-	 h=BIG_LINE_SPACING+th;
-	
-    }
-  else if(options&amp;ICONLIST_MINI_ICONS){
-    if(miniIcon) ih=miniIcon-&gt;getHeight();
-    if(!label.empty()) th=4+list-&gt;getFont()-&gt;getFontHeight();
-    h=FXMAX(ih,th);
-    }
-  else{
-    if(miniIcon) ih=miniIcon-&gt;getHeight();
-    if(!label.empty()) th=4+list-&gt;getFont()-&gt;getFontHeight();
-    h=FXMAX(ih,th);
-    }
-
-  return h;
-  }
-
-
-FXint os_ListItem::hitItem(const FXIconList* list,FXint rx,FXint ry,FXint rw,FXint rh) const {
-
-FXFont *font=((filelist*)list)-&gt;objmanager-&gt;captionfont1;
-FXFont *font1=((filelist*)list)-&gt;objmanager-&gt;captionfont2;
-
- register FXint iw=0,tw=0,ih=0,th=0,ss=0,ix,iy,tx,ty,w,h,sp,tlen;
-  register FXuint options=list-&gt;getListStyle();
-  //register FXFont *font=list-&gt;getFont();
-  for(tlen=0; tlen&lt;label.length() &amp;&amp; label[tlen]!='\t'; tlen++);
-  if(options&amp;ICONLIST_BIG_ICONS){
-    w=list-&gt;getItemSpace();
-    h=list-&gt;getItemHeight();
-    sp=w-SIDE_SPACING;
-    if(!label.empty()){
-      tw=4+font-&gt;getTextWidth(label.text(),tlen);
-      th=4+font-&gt;getFontHeight();
-      if(tw&gt;sp) tw=sp;
-      if(bigIcon) ss=BIG_TEXT_SPACING;
-      }
-    if(bigIcon){
-      iw=bigIcon-&gt;getWidth();
-      ih=bigIcon-&gt;getHeight();
-      }
-    ty=h-th-BIG_LINE_SPACING/2;
-    iy=4+font-&gt;getFontHeight();
-    ix=0;
-    tx=(w-tw)/2;
-    }
-  else if(options&amp;ICONLIST_MINI_ICONS){
-    sp=list-&gt;getItemSpace()-SIDE_SPACING;
-    ix=SIDE_SPACING/2;
-    tx=SIDE_SPACING/2;
-    if(miniIcon){
-      iw=miniIcon-&gt;getWidth();
-      ih=miniIcon-&gt;getHeight();
-      tx+=iw+MINI_TEXT_SPACING;
-      sp=sp-iw-MINI_TEXT_SPACING;
-      }
-    if(!label.empty()){
-      tw=4+font-&gt;getTextWidth(label.text(),tlen);
-      th=4+font-&gt;getFontHeight();
-      if(tw&gt;sp) tw=sp;
-      }
-    h=list-&gt;getItemHeight();
-    iy=(h-ih)/2;
-    ty=(h-th)/2;
-    }
-  else{
-    ix=SIDE_SPACING/2;
-    tx=SIDE_SPACING/2;
-    if(miniIcon){
-      iw=miniIcon-&gt;getWidth();
-      ih=miniIcon-&gt;getHeight();
-      tx+=iw+DETAIL_TEXT_SPACING;
-      }
-    if(!label.empty()){
-      tw=10000000;
-      th=4+font-&gt;getFontHeight();
-      }
-    h=list-&gt;getItemHeight();
-    iy=(h-ih)/2;
-    ty=(h-th)/2;
-    }
-
-  // In icon?
-  if(ix&lt;=rx+rw &amp;&amp; iy&lt;=ry+rh &amp;&amp; rx&lt;ix+iw &amp;&amp; ry&lt;iy+ih) return 1;
-
-  // In text?
-  if(tx&lt;=rx+rw &amp;&amp; ty&lt;=ry+rh &amp;&amp; rx&lt;tx+tw &amp;&amp; ry&lt;ty+th) return 2;
-
-  // Outside
-  return 0;
-  }

Deleted: trunk/src/oslistitem.h
===================================================================
--- trunk/src/oslistitem.h	2006-02-12 13:43:28 UTC (rev 245)
+++ trunk/src/oslistitem.h	2006-02-12 15:36:06 UTC (rev 246)
@@ -1,36 +0,0 @@
-#ifndef osListItem
-#define osListItem
-
-#include &quot;osfile.h&quot;
-    
-//added some features to standard fxiconitem
-//for example new big icon view
-class os_ListItem:public FXIconItem 
-{
-  FXDECLARE (os_ListItem)  private: protected:void drawDetails (const FXIconList * list, FXDC &amp; dc, FXint x, FXint y, FXint w, FXint h) const;
-    void drawBigIcon (const FXIconList * list, FXDC &amp; dc, FXint x, FXint y, FXint w, FXint h) const;
-    FXint hitItem (const FXIconList * list, FXint rx, FXint ry, FXint rw, FXint rh) const;
-    FXint getHeight (const FXIconList * list) const;
-    
-/*
-  // Overrides the base class version of draw()
- 
-  virtual void drawMiniIcon(const FXIconList* list,FXDC&amp; dc,FXint x,FXint y,FXint w,FXint h) const;
-  virtual void drawBigIcon(const FXIconList* list,FXDC&amp; dc,FXint x,FXint y,FXint w,FXint h) const;
-  virtual FXint hitItem(const FXIconList* list,FXint rx,FXint ry,FXint rw=1,FXint rh=1) const;
-*/ 
-  public:
-	// Constructor
-    os_ListItem (FXIconList * list, osfile osf, FXColor col, FXColor backcol, FXIcon * ic1 = NULL, FXIcon * ic2 = NULL);
-    os_ListItem ()
-    {
-    } 
-    osfile osf;
-    FXColor color;
-    FXColor backcolor;
-    FXIconList * list;
-    
-    
-};
-
-#endif 

Deleted: trunk/src/pathtype.cpp
===================================================================
--- trunk/src/pathtype.cpp	2006-02-12 13:43:28 UTC (rev 245)
+++ trunk/src/pathtype.cpp	2006-02-12 15:36:06 UTC (rev 246)
@@ -1,9 +0,0 @@
-#include &lt;string&gt;
-using namespace std;
-#include &quot;pathtype.h&quot;
-
-pathtype::pathtype (string dir, string type, string server, string user, string password, string port):
-dir (dir), type (type), server (server), user (user), password (password), port (port)
-{
-
-}

Deleted: trunk/src/pathtype.h
===================================================================
--- trunk/src/pathtype.h	2006-02-12 13:43:28 UTC (rev 245)
+++ trunk/src/pathtype.h	2006-02-12 15:36:06 UTC (rev 246)
@@ -1,22 +0,0 @@
-#ifndef PATHTYPE
-#define PATHTYPE
-
-#include &lt;string&gt;
-using namespace std;
-
-//containg informations for remote filelist
-class pathtype
-{
-  public:
-    pathtype (string dir, string type = &quot;local&quot;, string server = &quot;&quot;, string user = &quot;&quot;, string password = &quot;&quot;, string port = &quot;&quot;);
-
-    string dir;
-
-    string type;
-    string server;
-    string user;
-    string password;
-    string port;
-};
-
-#endif


Property changes on: trunk/src/plugins
___________________________________________________________________
Name: svn:ignore
   - Makefile

   + *~
*.cache
*LOG
*log
*.kdev*
*.lo
*.loT
*.o
*.status
*.swp
.deps
.libs
libtool
openspacerc
tags
Doxyfile
Makefile



Property changes on: trunk/src/plugins/Makefile.am
___________________________________________________________________
Name: svn:keywords
   + Id

Modified: trunk/src/plugins/Makefile.in
===================================================================
--- trunk/src/plugins/Makefile.in	2006-02-12 13:43:28 UTC (rev 245)
+++ trunk/src/plugins/Makefile.in	2006-02-12 15:36:06 UTC (rev 246)
@@ -1,8 +1,8 @@
-# Makefile.in generated by automake 1.9.5 from Makefile.am.
+# Makefile.in generated by automake 1.8.5 from Makefile.am.
 # @configure_input@
 
 # Copyright (C) 1994, 1995, 1996, 1997, 1998, 1999, 2000, 2001, 2002,
-# 2003, 2004, 2005  Free Software Foundation, Inc.
+# 2003, 2004  Free Software Foundation, Inc.
 # This Makefile.in is free software; the Free Software Foundation
 # gives unlimited permission to copy and/or distribute it,
 # with or without modifications, as long as this notice is preserved.
@@ -33,7 +33,6 @@
 NORMAL_UNINSTALL = :
 PRE_UNINSTALL = :
 POST_UNINSTALL = :
-build_triplet = @build@
 host_triplet = @host@
 subdir = src/plugins
 DIST_COMMON = $(srcdir)/Makefile.am $(srcdir)/Makefile.in
@@ -41,7 +40,7 @@
 am__aclocal_m4_deps = $(top_srcdir)/configure.ac
 am__configure_deps = $(am__aclocal_m4_deps) $(CONFIGURE_DEPENDENCIES) \
 	$(ACLOCAL_M4)
-mkinstalldirs = $(install_sh) -d
+mkinstalldirs = $(mkdir_p)
 CONFIG_HEADER = $(top_builddir)/src/config.h
 CONFIG_CLEAN_FILES =
 SOURCES =
@@ -124,8 +123,6 @@
 am__include = @am__include@
 am__leading_dot = @am__leading_dot@
 am__quote = @am__quote@
-am__tar = @am__tar@
-am__untar = @am__untar@
 bindir = @bindir@
 build = @build@
 build_alias = @build_alias@
@@ -205,13 +202,7 @@
 #     (which will cause the Makefiles to be regenerated when you run `make');
 # (2) otherwise, pass the desired values on the `make' command line.
 $(RECURSIVE_TARGETS):
-	@failcom='exit 1'; \
-	for f in x $$MAKEFLAGS; do \
-	  case $$f in \
-	    *=* | --[!k]*);; \
-	    *k*) failcom='fail=yes';; \
-	  esac; \
-	done; \
+	@set fnord $$MAKEFLAGS; amf=$$2; \
 	dot_seen=no; \
 	target=`echo $@ | sed s/-recursive//`; \
 	list='$(SUBDIRS)'; for subdir in $$list; do \
@@ -223,7 +214,7 @@
 	    local_target=&quot;$$target&quot;; \
 	  fi; \
 	  (cd $$subdir &amp;&amp; $(MAKE) $(AM_MAKEFLAGS) $$local_target) \
-	  || eval $$failcom; \
+	   || case &quot;$$amf&quot; in *=*) exit 1;; *k*) fail=yes;; *) exit 1;; esac; \
 	done; \
 	if test &quot;$$dot_seen&quot; = &quot;no&quot;; then \
 	  $(MAKE) $(AM_MAKEFLAGS) &quot;$$target-am&quot; || exit 1; \
@@ -231,13 +222,7 @@
 
 mostlyclean-recursive clean-recursive distclean-recursive \
 maintainer-clean-recursive:
-	@failcom='exit 1'; \
-	for f in x $$MAKEFLAGS; do \
-	  case $$f in \
-	    *=* | --[!k]*);; \
-	    *k*) failcom='fail=yes';; \
-	  esac; \
-	done; \
+	@set fnord $$MAKEFLAGS; amf=$$2; \
 	dot_seen=no; \
 	case &quot;$@&quot; in \
 	  distclean-* | maintainer-clean-*) list='$(DIST_SUBDIRS)' ;; \
@@ -258,7 +243,7 @@
 	    local_target=&quot;$$target&quot;; \
 	  fi; \
 	  (cd $$subdir &amp;&amp; $(MAKE) $(AM_MAKEFLAGS) $$local_target) \
-	  || eval $$failcom; \
+	   || case &quot;$$amf&quot; in *=*) exit 1;; *k*) fail=yes;; *) exit 1;; esac; \
 	done &amp;&amp; test -z &quot;$$fail&quot;
 tags-recursive:
 	list='$(SUBDIRS)'; for subdir in $$list; do \
@@ -357,17 +342,15 @@
 	    || exit 1; \
 	  fi; \
 	done
-	list='$(DIST_SUBDIRS)'; for subdir in $$list; do \
+	list='$(SUBDIRS)'; for subdir in $$list; do \
 	  if test &quot;$$subdir&quot; = .; then :; else \
 	    test -d &quot;$(distdir)/$$subdir&quot; \
-	    || $(mkdir_p) &quot;$(distdir)/$$subdir&quot; \
+	    || mkdir &quot;$(distdir)/$$subdir&quot; \
 	    || exit 1; \
-	    distdir=`$(am__cd) $(distdir) &amp;&amp; pwd`; \
-	    top_distdir=`$(am__cd) $(top_distdir) &amp;&amp; pwd`; \
 	    (cd $$subdir &amp;&amp; \
 	      $(MAKE) $(AM_MAKEFLAGS) \
-	        top_distdir=&quot;$$top_distdir&quot; \
-	        distdir=&quot;$$distdir/$$subdir&quot; \
+	        top_distdir=&quot;../$(top_distdir)&quot; \
+	        distdir=&quot;../$(distdir)/$$subdir&quot; \
 	        distdir) \
 	      || exit 1; \
 	  fi; \
@@ -396,7 +379,7 @@
 clean-generic:
 
 distclean-generic:
-	-test -z &quot;$(CONFIG_CLEAN_FILES)&quot; || rm -f $(CONFIG_CLEAN_FILES)
+	-rm -f $(CONFIG_CLEAN_FILES)
 
 maintainer-clean-generic:
 	@echo &quot;This command is intended for maintainers to use&quot;


Property changes on: trunk/src/plugins/Makefile.in
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/src/plugins/cmddialog
___________________________________________________________________
Name: svn:ignore
   - .deps
.libs
Makefile

   + *~
*.cache
*LOG
*log
*.kdev*
*.lo
*.loT
*.o
*.status
*.swp
.deps
.libs
libtool
openspacerc
tags
Doxyfile
Makefile


Modified: trunk/src/plugins/cmddialog/Makefile.am
===================================================================
--- trunk/src/plugins/cmddialog/Makefile.am	2006-02-12 13:43:28 UTC (rev 245)
+++ trunk/src/plugins/cmddialog/Makefile.am	2006-02-12 15:36:06 UTC (rev 246)
@@ -1,27 +1,27 @@
-pkglib_LTLIBRARIES= libaccess.la libmkdir.la librename.la libclone.la libsymlink.la libeditsymlink.la libcompress.la libmd5sum.la
+pkglib_LTLIBRARIES=libOSMkdir.la libOSAccess.la libOSRename.la libOSClone.la libOSSymlink.la libOSEditSymlink.la libOSCompress.la libOSMd5sum.la
 pkglibdir=$(libdir)/openspace/plugins/cmddialog
 INCLUDES = `WANT_FOX=&quot;1.4&quot; fox-config --cflags` `xml2-config  --cflags` 
 
-libaccess_la_SOURCES =access.cpp  ../../thread_elem.cpp ../../thread_elem.h ../../cmddialog.cpp ../../cmddialog.h
-libaccess_la_LDFLAGS = `WANT_FOX=&quot;1.4&quot; fox-config --libs` `xml2-config  --libs`  
+libOSMkdir_la_SOURCES =OSMkdir.cpp  ../../OSThreadExec.cpp ../../OSThreadExec.h ../../OSCMDDialogBox.cpp ../../OSCMDDialogBox.h
+libOSMkdir_la_LDFLAGS = `WANT_FOX=&quot;1.4&quot; fox-config --libs` `xml2-config  --libs` 
 
-libmkdir_la_SOURCES =mkdir.cpp  ../../thread_elem.cpp ../../thread_elem.h ../../cmddialog.cpp ../../cmddialog.h
-libmkdir_la_LDFLAGS = `WANT_FOX=&quot;1.4&quot; fox-config --libs` `xml2-config  --libs` 
+libOSAccess_la_SOURCES =OSAccess.cpp  ../../OSThreadExec.cpp ../../OSThreadExec.h ../../OSCMDDialogBox.cpp ../../OSCMDDialogBox.h
+libOSAccess_la_LDFLAGS = `WANT_FOX=&quot;1.4&quot; fox-config --libs` `xml2-config  --libs`  
 
-librename_la_SOURCES =rename.cpp  ../../thread_elem.cpp ../../thread_elem.h ../../cmddialog.cpp ../../cmddialog.h
-librename_la_LDFLAGS = `WANT_FOX=&quot;1.4&quot; fox-config --libs` `xml2-config  --libs` 
+libOSRename_la_SOURCES =OSRename.cpp  ../../OSThreadExec.cpp ../../OSThreadExec.h ../../OSCMDDialogBox.cpp ../../OSCMDDialogBox.h
+libOSRename_la_LDFLAGS = `WANT_FOX=&quot;1.4&quot; fox-config --libs` `xml2-config  --libs` 
 
-libclone_la_SOURCES =clone.cpp  ../../thread_elem.cpp ../../thread_elem.h  ../../cmddialog.cpp ../../cmddialog.h
-libclone_la_LDFLAGS = `WANT_FOX=&quot;1.4&quot; fox-config --libs` `xml2-config  --libs` 
+libOSClone_la_SOURCES =OSClone.cpp  ../../OSThreadExec.cpp ../../OSThreadExec.h  ../../OSCMDDialogBox.cpp ../../OSCMDDialogBox.h
+libOSClone_la_LDFLAGS = `WANT_FOX=&quot;1.4&quot; fox-config --libs` `xml2-config  --libs` 
 
-libsymlink_la_SOURCES =symlink.cpp  ../../thread_elem.cpp ../../thread_elem.h  ../../cmddialog.cpp ../../cmddialog.h
-libsymlink_la_LDFLAGS = `WANT_FOX=&quot;1.4&quot; fox-config --libs` `xml2-config  --libs` 
+libOSSymlink_la_SOURCES =OSSymlink.cpp  ../../OSThreadExec.cpp ../../OSThreadExec.h  ../../OSCMDDialogBox.cpp ../../OSCMDDialogBox.h
+libOSSymlink_la_LDFLAGS = `WANT_FOX=&quot;1.4&quot; fox-config --libs` `xml2-config  --libs` 
 
-libeditsymlink_la_SOURCES =editsymlink.cpp  ../../thread_elem.cpp ../../thread_elem.h  ../../cmddialog.cpp ../../cmddialog.h
-libeditsymlink_la_LDFLAGS = `WANT_FOX=&quot;1.4&quot; fox-config --libs` `xml2-config  --libs` 
+libOSEditSymlink_la_SOURCES =OSEditSymlink.cpp  ../../OSThreadExec.cpp ../../OSThreadExec.h  ../../OSCMDDialogBox.cpp ../../OSCMDDialogBox.h
+libOSEditSymlink_la_LDFLAGS = `WANT_FOX=&quot;1.4&quot; fox-config --libs` `xml2-config  --libs` 
 
-libcompress_la_SOURCES =compress.cpp  ../../thread_elem.cpp ../../thread_elem.h  ../../cmddialog.cpp ../../cmddialog.h
-libcompress_la_LDFLAGS = `WANT_FOX=&quot;1.4&quot; fox-config --libs` `xml2-config  --libs` 
+libOSCompress_la_SOURCES =OSCompress.cpp  ../../OSThreadExec.cpp ../../OSThreadExec.h  ../../OSCMDDialogBox.cpp ../../OSCMDDialogBox.h
+libOSCompress_la_LDFLAGS = `WANT_FOX=&quot;1.4&quot; fox-config --libs` `xml2-config  --libs` 
 
-libmd5sum_la_SOURCES =md5sum.cpp  ../../thread_elem.cpp ../../thread_elem.h  ../../cmddialog.cpp ../../cmddialog.h
-libmd5sum_la_LDFLAGS = `WANT_FOX=&quot;1.4&quot; fox-config --libs` `xml2-config  --libs` 
+libOSMd5sum_la_SOURCES =OSMd5sum.cpp  ../../OSThreadExec.cpp ../../OSThreadExec.h  ../../OSCMDDialogBox.cpp ../../OSCMDDialogBox.h
+libOSMd5sum_la_LDFLAGS = `WANT_FOX=&quot;1.4&quot; fox-config --libs` `xml2-config  --libs` 

Modified: trunk/src/plugins/cmddialog/Makefile.in
===================================================================
--- trunk/src/plugins/cmddialog/Makefile.in	2006-02-12 13:43:28 UTC (rev 245)
+++ trunk/src/plugins/cmddialog/Makefile.in	2006-02-12 15:36:06 UTC (rev 246)
@@ -1,8 +1,8 @@
-# Makefile.in generated by automake 1.9.5 from Makefile.am.
+# Makefile.in generated by automake 1.8.5 from Makefile.am.
 # @configure_input@
 
 # Copyright (C) 1994, 1995, 1996, 1997, 1998, 1999, 2000, 2001, 2002,
-# 2003, 2004, 2005  Free Software Foundation, Inc.
+# 2003, 2004  Free Software Foundation, Inc.
 # This Makefile.in is free software; the Free Software Foundation
 # gives unlimited permission to copy and/or distribute it,
 # with or without modifications, as long as this notice is preserved.
@@ -14,7 +14,7 @@
 
 @SET_MAKE@
 
-SOURCES = $(libaccess_la_SOURCES) $(libclone_la_SOURCES) $(libcompress_la_SOURCES) $(libeditsymlink_la_SOURCES) $(libmd5sum_la_SOURCES) $(libmkdir_la_SOURCES) $(librename_la_SOURCES) $(libsymlink_la_SOURCES)
+SOURCES = $(libOSAccess_la_SOURCES) $(libOSClone_la_SOURCES) $(libOSCompress_la_SOURCES) $(libOSEditSymlink_la_SOURCES) $(libOSMd5sum_la_SOURCES) $(libOSMkdir_la_SOURCES) $(libOSRename_la_SOURCES) $(libOSSymlink_la_SOURCES)
 
 srcdir = @srcdir@
 top_srcdir = @top_srcdir@
@@ -35,7 +35,6 @@
 NORMAL_UNINSTALL = :
 PRE_UNINSTALL = :
 POST_UNINSTALL = :
-build_triplet = @build@
 host_triplet = @host@
 subdir = src/plugins/cmddialog
 DIST_COMMON = $(srcdir)/Makefile.am $(srcdir)/Makefile.in
@@ -43,70 +42,78 @@
 am__aclocal_m4_deps = $(top_srcdir)/configure.ac
 am__configure_deps = $(am__aclocal_m4_deps) $(CONFIGURE_DEPENDENCIES) \
 	$(ACLOCAL_M4)
-mkinstalldirs = $(install_sh) -d
+mkinstalldirs = $(mkdir_p)
 CONFIG_HEADER = $(top_builddir)/src/config.h
 CONFIG_CLEAN_FILES =
-am__vpath_adj_setup = srcdirstrip=`echo &quot;$(srcdir)&quot; | sed 's|.|.|g'`;
-am__vpath_adj = case $$p in \
-    $(srcdir)/*) f=`echo &quot;$$p&quot; | sed &quot;s|^$$srcdirstrip/||&quot;`;; \
-    *) f=$$p;; \
-  esac;
-am__strip_dir = `echo $$p | sed -e 's|^.*/||'`;
 am__installdirs = &quot;$(DESTDIR)$(pkglibdir)&quot;
 pkglibLTLIBRARIES_INSTALL = $(INSTALL)
 LTLIBRARIES = $(pkglib_LTLIBRARIES)
-libaccess_la_LIBADD =
-am_libaccess_la_OBJECTS = access.lo thread_elem.lo cmddialog.lo
-libaccess_la_OBJECTS = $(am_libaccess_la_OBJECTS)
-libclone_la_LIBADD =
-am_libclone_la_OBJECTS = clone.lo thread_elem.lo cmddialog.lo
-libclone_la_OBJECTS = $(am_libclone_la_OBJECTS)
-libcompress_la_LIBADD =
-am_libcompress_la_OBJECTS = compress.lo thread_elem.lo cmddialog.lo
-libcompress_la_OBJECTS = $(am_libcompress_la_OBJECTS)
-libeditsymlink_la_LIBADD =
-am_libeditsymlink_la_OBJECTS = editsymlink.lo thread_elem.lo \
-	cmddialog.lo
-libeditsymlink_la_OBJECTS = $(am_libeditsymlink_la_OBJECTS)
-libmd5sum_la_LIBADD =
-am_libmd5sum_la_OBJECTS = md5sum.lo thread_elem.lo cmddialog.lo
-libmd5sum_la_OBJECTS = $(am_libmd5sum_la_OBJECTS)
-libmkdir_la_LIBADD =
-am_libmkdir_la_OBJECTS = mkdir.lo thread_elem.lo cmddialog.lo
-libmkdir_la_OBJECTS = $(am_libmkdir_la_OBJECTS)
-librename_la_LIBADD =
-am_librename_la_OBJECTS = rename.lo thread_elem.lo cmddialog.lo
-librename_la_OBJECTS = $(am_librename_la_OBJECTS)
-libsymlink_la_LIBADD =
-am_libsymlink_la_OBJECTS = symlink.lo thread_elem.lo cmddialog.lo
-libsymlink_la_OBJECTS = $(am_libsymlink_la_OBJECTS)
+libOSAccess_la_LIBADD =
+am_libOSAccess_la_OBJECTS = OSAccess.lo OSThreadExec.lo \
+	OSCMDDialogBox.lo
+libOSAccess_la_OBJECTS = $(am_libOSAccess_la_OBJECTS)
+libOSClone_la_LIBADD =
+am_libOSClone_la_OBJECTS = OSClone.lo OSThreadExec.lo \
+	OSCMDDialogBox.lo
+libOSClone_la_OBJECTS = $(am_libOSClone_la_OBJECTS)
+libOSCompress_la_LIBADD =
+am_libOSCompress_la_OBJECTS = OSCompress.lo OSThreadExec.lo \
+	OSCMDDialogBox.lo
+libOSCompress_la_OBJECTS = $(am_libOSCompress_la_OBJECTS)
+libOSEditSymlink_la_LIBADD =
+am_libOSEditSymlink_la_OBJECTS = OSEditSymlink.lo OSThreadExec.lo \
+	OSCMDDialogBox.lo
+libOSEditSymlink_la_OBJECTS = $(am_libOSEditSymlink_la_OBJECTS)
+libOSMd5sum_la_LIBADD =
+am_libOSMd5sum_la_OBJECTS = OSMd5sum.lo OSThreadExec.lo \
+	OSCMDDialogBox.lo
+libOSMd5sum_la_OBJECTS = $(am_libOSMd5sum_la_OBJECTS)
+libOSMkdir_la_LIBADD =
+am_libOSMkdir_la_OBJECTS = OSMkdir.lo OSThreadExec.lo \
+	OSCMDDialogBox.lo
+libOSMkdir_la_OBJECTS = $(am_libOSMkdir_la_OBJECTS)
+libOSRename_la_LIBADD =
+am_libOSRename_la_OBJECTS = OSRename.lo OSThreadExec.lo \
+	OSCMDDialogBox.lo
+libOSRename_la_OBJECTS = $(am_libOSRename_la_OBJECTS)
+libOSSymlink_la_LIBADD =
+am_libOSSymlink_la_OBJECTS = OSSymlink.lo OSThreadExec.lo \
+	OSCMDDialogBox.lo
+libOSSymlink_la_OBJECTS = $(am_libOSSymlink_la_OBJECTS)
 DEFAULT_INCLUDES = -I. -I$(srcdir) -I$(top_builddir)/src
 depcomp = $(SHELL) $(top_srcdir)/depcomp
 am__depfiles_maybe = depfiles
<A HREF="https://lists.berlios.de/mailman/listinfo/openspace-svn">+ at AMDEP_TRUE</A>@DEP_FILES = ./$(DEPDIR)/OSAccess.Plo \
<A HREF="https://lists.berlios.de/mailman/listinfo/openspace-svn">+ at AMDEP_TRUE</A>@	./$(DEPDIR)/OSCMDDialogBox.Plo \
<A HREF="https://lists.berlios.de/mailman/listinfo/openspace-svn">+ at AMDEP_TRUE</A>@	./$(DEPDIR)/OSClone.Plo ./$(DEPDIR)/OSCompress.Plo \
<A HREF="https://lists.berlios.de/mailman/listinfo/openspace-svn">+ at AMDEP_TRUE</A>@	./$(DEPDIR)/OSEditSymlink.Plo \
<A HREF="https://lists.berlios.de/mailman/listinfo/openspace-svn">+ at AMDEP_TRUE</A>@	./$(DEPDIR)/OSMd5sum.Plo ./$(DEPDIR)/OSMkdir.Plo \
<A HREF="https://lists.berlios.de/mailman/listinfo/openspace-svn">+ at AMDEP_TRUE</A>@	./$(DEPDIR)/OSRename.Plo ./$(DEPDIR)/OSSymlink.Plo \
<A HREF="https://lists.berlios.de/mailman/listinfo/openspace-svn">+ at AMDEP_TRUE</A>@	./$(DEPDIR)/OSThreadExec.Plo
 CXXCOMPILE = $(CXX) $(DEFS) $(DEFAULT_INCLUDES) $(INCLUDES) \
 	$(AM_CPPFLAGS) $(CPPFLAGS) $(AM_CXXFLAGS) $(CXXFLAGS)
-LTCXXCOMPILE = $(LIBTOOL) --tag=CXX --mode=compile $(CXX) $(DEFS) \
+LTCXXCOMPILE = $(LIBTOOL) --mode=compile $(CXX) $(DEFS) \
 	$(DEFAULT_INCLUDES) $(INCLUDES) $(AM_CPPFLAGS) $(CPPFLAGS) \
 	$(AM_CXXFLAGS) $(CXXFLAGS)
 CXXLD = $(CXX)
-CXXLINK = $(LIBTOOL) --tag=CXX --mode=link $(CXXLD) $(AM_CXXFLAGS) \
-	$(CXXFLAGS) $(AM_LDFLAGS) $(LDFLAGS) -o $@
+CXXLINK = $(LIBTOOL) --mode=link $(CXXLD) $(AM_CXXFLAGS) $(CXXFLAGS) \
+	$(AM_LDFLAGS) $(LDFLAGS) -o $@
 COMPILE = $(CC) $(DEFS) $(DEFAULT_INCLUDES) $(INCLUDES) $(AM_CPPFLAGS) \
 	$(CPPFLAGS) $(AM_CFLAGS) $(CFLAGS)
-LTCOMPILE = $(LIBTOOL) --tag=CC --mode=compile $(CC) $(DEFS) \
+LTCOMPILE = $(LIBTOOL) --mode=compile $(CC) $(DEFS) \
 	$(DEFAULT_INCLUDES) $(INCLUDES) $(AM_CPPFLAGS) $(CPPFLAGS) \
 	$(AM_CFLAGS) $(CFLAGS)
 CCLD = $(CC)
-LINK = $(LIBTOOL) --tag=CC --mode=link $(CCLD) $(AM_CFLAGS) $(CFLAGS) \
+LINK = $(LIBTOOL) --mode=link $(CCLD) $(AM_CFLAGS) $(CFLAGS) \
 	$(AM_LDFLAGS) $(LDFLAGS) -o $@
-SOURCES = $(libaccess_la_SOURCES) $(libclone_la_SOURCES) \
-	$(libcompress_la_SOURCES) $(libeditsymlink_la_SOURCES) \
-	$(libmd5sum_la_SOURCES) $(libmkdir_la_SOURCES) \
-	$(librename_la_SOURCES) $(libsymlink_la_SOURCES)
-DIST_SOURCES = $(libaccess_la_SOURCES) $(libclone_la_SOURCES) \
-	$(libcompress_la_SOURCES) $(libeditsymlink_la_SOURCES) \
-	$(libmd5sum_la_SOURCES) $(libmkdir_la_SOURCES) \
-	$(librename_la_SOURCES) $(libsymlink_la_SOURCES)
+SOURCES = $(libOSAccess_la_SOURCES) $(libOSClone_la_SOURCES) \
+	$(libOSCompress_la_SOURCES) $(libOSEditSymlink_la_SOURCES) \
+	$(libOSMd5sum_la_SOURCES) $(libOSMkdir_la_SOURCES) \
+	$(libOSRename_la_SOURCES) $(libOSSymlink_la_SOURCES)
+DIST_SOURCES = $(libOSAccess_la_SOURCES) $(libOSClone_la_SOURCES) \
+	$(libOSCompress_la_SOURCES) $(libOSEditSymlink_la_SOURCES) \
+	$(libOSMd5sum_la_SOURCES) $(libOSMkdir_la_SOURCES) \
+	$(libOSRename_la_SOURCES) $(libOSSymlink_la_SOURCES)
 ETAGS = etags
 CTAGS = ctags
 DISTFILES = $(DIST_COMMON) $(DIST_SOURCES) $(TEXINFOS) $(EXTRA_DIST)
@@ -179,8 +186,6 @@
 am__include = @am__include@
 am__leading_dot = @am__leading_dot@
 am__quote = @am__quote@
-am__tar = @am__tar@
-am__untar = @am__untar@
 bindir = @bindir@
 build = @build@
 build_alias = @build_alias@
@@ -209,24 +214,24 @@
 sharedstatedir = @sharedstatedir@
 sysconfdir = @sysconfdir@
 target_alias = @target_alias@
-pkglib_LTLIBRARIES = libaccess.la libmkdir.la librename.la libclone.la libsymlink.la libeditsymlink.la libcompress.la libmd5sum.la
+pkglib_LTLIBRARIES = libOSMkdir.la libOSAccess.la libOSRename.la libOSClone.la libOSSymlink.la libOSEditSymlink.la libOSCompress.la libOSMd5sum.la
 INCLUDES = `WANT_FOX=&quot;1.4&quot; fox-config --cflags` `xml2-config  --cflags` 
-libaccess_la_SOURCES = access.cpp  ../../thread_elem.cpp ../../thread_elem.h ../../cmddialog.cpp ../../cmddialog.h
-libaccess_la_LDFLAGS = `WANT_FOX=&quot;1.4&quot; fox-config --libs` `xml2-config  --libs`  
-libmkdir_la_SOURCES = mkdir.cpp  ../../thread_elem.cpp ../../thread_elem.h ../../cmddialog.cpp ../../cmddialog.h
-libmkdir_la_LDFLAGS = `WANT_FOX=&quot;1.4&quot; fox-config --libs` `xml2-config  --libs` 
-librename_la_SOURCES = rename.cpp  ../../thread_elem.cpp ../../thread_elem.h ../../cmddialog.cpp ../../cmddialog.h
-librename_la_LDFLAGS = `WANT_FOX=&quot;1.4&quot; fox-config --libs` `xml2-config  --libs` 
-libclone_la_SOURCES = clone.cpp  ../../thread_elem.cpp ../../thread_elem.h  ../../cmddialog.cpp ../../cmddialog.h
-libclone_la_LDFLAGS = `WANT_FOX=&quot;1.4&quot; fox-config --libs` `xml2-config  --libs` 
-libsymlink_la_SOURCES = symlink.cpp  ../../thread_elem.cpp ../../thread_elem.h  ../../cmddialog.cpp ../../cmddialog.h
-libsymlink_la_LDFLAGS = `WANT_FOX=&quot;1.4&quot; fox-config --libs` `xml2-config  --libs` 
-libeditsymlink_la_SOURCES = editsymlink.cpp  ../../thread_elem.cpp ../../thread_elem.h  ../../cmddialog.cpp ../../cmddialog.h
-libeditsymlink_la_LDFLAGS = `WANT_FOX=&quot;1.4&quot; fox-config --libs` `xml2-config  --libs` 
-libcompress_la_SOURCES = compress.cpp  ../../thread_elem.cpp ../../thread_elem.h  ../../cmddialog.cpp ../../cmddialog.h
-libcompress_la_LDFLAGS = `WANT_FOX=&quot;1.4&quot; fox-config --libs` `xml2-config  --libs` 
-libmd5sum_la_SOURCES = md5sum.cpp  ../../thread_elem.cpp ../../thread_elem.h  ../../cmddialog.cpp ../../cmddialog.h
-libmd5sum_la_LDFLAGS = `WANT_FOX=&quot;1.4&quot; fox-config --libs` `xml2-config  --libs` 
+libOSMkdir_la_SOURCES = OSMkdir.cpp  ../../OSThreadExec.cpp ../../OSThreadExec.h ../../OSCMDDialogBox.cpp ../../OSCMDDialogBox.h
+libOSMkdir_la_LDFLAGS = `WANT_FOX=&quot;1.4&quot; fox-config --libs` `xml2-config  --libs` 
+libOSAccess_la_SOURCES = OSAccess.cpp  ../../OSThreadExec.cpp ../../OSThreadExec.h ../../OSCMDDialogBox.cpp ../../OSCMDDialogBox.h
+libOSAccess_la_LDFLAGS = `WANT_FOX=&quot;1.4&quot; fox-config --libs` `xml2-config  --libs`  
+libOSRename_la_SOURCES = OSRename.cpp  ../../OSThreadExec.cpp ../../OSThreadExec.h ../../OSCMDDialogBox.cpp ../../OSCMDDialogBox.h
+libOSRename_la_LDFLAGS = `WANT_FOX=&quot;1.4&quot; fox-config --libs` `xml2-config  --libs` 
+libOSClone_la_SOURCES = OSClone.cpp  ../../OSThreadExec.cpp ../../OSThreadExec.h  ../../OSCMDDialogBox.cpp ../../OSCMDDialogBox.h
+libOSClone_la_LDFLAGS = `WANT_FOX=&quot;1.4&quot; fox-config --libs` `xml2-config  --libs` 
+libOSSymlink_la_SOURCES = OSSymlink.cpp  ../../OSThreadExec.cpp ../../OSThreadExec.h  ../../OSCMDDialogBox.cpp ../../OSCMDDialogBox.h
+libOSSymlink_la_LDFLAGS = `WANT_FOX=&quot;1.4&quot; fox-config --libs` `xml2-config  --libs` 
+libOSEditSymlink_la_SOURCES = OSEditSymlink.cpp  ../../OSThreadExec.cpp ../../OSThreadExec.h  ../../OSCMDDialogBox.cpp ../../OSCMDDialogBox.h
+libOSEditSymlink_la_LDFLAGS = `WANT_FOX=&quot;1.4&quot; fox-config --libs` `xml2-config  --libs` 
+libOSCompress_la_SOURCES = OSCompress.cpp  ../../OSThreadExec.cpp ../../OSThreadExec.h  ../../OSCMDDialogBox.cpp ../../OSCMDDialogBox.h
+libOSCompress_la_LDFLAGS = `WANT_FOX=&quot;1.4&quot; fox-config --libs` `xml2-config  --libs` 
+libOSMd5sum_la_SOURCES = OSMd5sum.cpp  ../../OSThreadExec.cpp ../../OSThreadExec.h  ../../OSCMDDialogBox.cpp ../../OSCMDDialogBox.h
+libOSMd5sum_la_LDFLAGS = `WANT_FOX=&quot;1.4&quot; fox-config --libs` `xml2-config  --libs` 
 all: all-am
 
 .SUFFIXES:
@@ -265,7 +270,7 @@
 	test -z &quot;$(pkglibdir)&quot; || $(mkdir_p) &quot;$(DESTDIR)$(pkglibdir)&quot;
 	@list='$(pkglib_LTLIBRARIES)'; for p in $$list; do \
 	  if test -f $$p; then \
-	    f=$(am__strip_dir) \
+	    f=&quot;`echo $$p | sed -e 's|^.*/||'`&quot;; \
 	    echo &quot; $(LIBTOOL) --mode=install $(pkglibLTLIBRARIES_INSTALL) $(INSTALL_STRIP_FLAG) '$$p' '$(DESTDIR)$(pkglibdir)/$$f'&quot;; \
 	    $(LIBTOOL) --mode=install $(pkglibLTLIBRARIES_INSTALL) $(INSTALL_STRIP_FLAG) &quot;$$p&quot; &quot;$(DESTDIR)$(pkglibdir)/$$f&quot;; \
 	  else :; fi; \
@@ -273,8 +278,8 @@
 
 uninstall-pkglibLTLIBRARIES:
 	@$(NORMAL_UNINSTALL)
-	@set -x; list='$(pkglib_LTLIBRARIES)'; for p in $$list; do \
-	  p=$(am__strip_dir) \
+	@list='$(pkglib_LTLIBRARIES)'; for p in $$list; do \
+	    p=&quot;`echo $$p | sed -e 's|^.*/||'`&quot;; \
 	  echo &quot; $(LIBTOOL) --mode=uninstall rm -f '$(DESTDIR)$(pkglibdir)/$$p'&quot;; \
 	  $(LIBTOOL) --mode=uninstall rm -f &quot;$(DESTDIR)$(pkglibdir)/$$p&quot;; \
 	done
@@ -287,22 +292,22 @@
 	  echo &quot;rm -f \&quot;$${dir}/so_locations\&quot;&quot;; \
 	  rm -f &quot;$${dir}/so_locations&quot;; \
 	done
-libaccess.la: $(libaccess_la_OBJECTS) $(libaccess_la_DEPENDENCIES) 
-	$(CXXLINK) -rpath $(pkglibdir) $(libaccess_la_LDFLAGS) $(libaccess_la_OBJECTS) $(libaccess_la_LIBADD) $(LIBS)
-libclone.la: $(libclone_la_OBJECTS) $(libclone_la_DEPENDENCIES) 
-	$(CXXLINK) -rpath $(pkglibdir) $(libclone_la_LDFLAGS) $(libclone_la_OBJECTS) $(libclone_la_LIBADD) $(LIBS)
-libcompress.la: $(libcompress_la_OBJECTS) $(libcompress_la_DEPENDENCIES) 
-	$(CXXLINK) -rpath $(pkglibdir) $(libcompress_la_LDFLAGS) $(libcompress_la_OBJECTS) $(libcompress_la_LIBADD) $(LIBS)
-libeditsymlink.la: $(libeditsymlink_la_OBJECTS) $(libeditsymlink_la_DEPENDENCIES) 
-	$(CXXLINK) -rpath $(pkglibdir) $(libeditsymlink_la_LDFLAGS) $(libeditsymlink_la_OBJECTS) $(libeditsymlink_la_LIBADD) $(LIBS)
-libmd5sum.la: $(libmd5sum_la_OBJECTS) $(libmd5sum_la_DEPENDENCIES) 
-	$(CXXLINK) -rpath $(pkglibdir) $(libmd5sum_la_LDFLAGS) $(libmd5sum_la_OBJECTS) $(libmd5sum_la_LIBADD) $(LIBS)
-libmkdir.la: $(libmkdir_la_OBJECTS) $(libmkdir_la_DEPENDENCIES) 
-	$(CXXLINK) -rpath $(pkglibdir) $(libmkdir_la_LDFLAGS) $(libmkdir_la_OBJECTS) $(libmkdir_la_LIBADD) $(LIBS)
-librename.la: $(librename_la_OBJECTS) $(librename_la_DEPENDENCIES) 
-	$(CXXLINK) -rpath $(pkglibdir) $(librename_la_LDFLAGS) $(librename_la_OBJECTS) $(librename_la_LIBADD) $(LIBS)
-libsymlink.la: $(libsymlink_la_OBJECTS) $(libsymlink_la_DEPENDENCIES) 
-	$(CXXLINK) -rpath $(pkglibdir) $(libsymlink_la_LDFLAGS) $(libsymlink_la_OBJECTS) $(libsymlink_la_LIBADD) $(LIBS)
+libOSAccess.la: $(libOSAccess_la_OBJECTS) $(libOSAccess_la_DEPENDENCIES) 
+	$(CXXLINK) -rpath $(pkglibdir) $(libOSAccess_la_LDFLAGS) $(libOSAccess_la_OBJECTS) $(libOSAccess_la_LIBADD) $(LIBS)
+libOSClone.la: $(libOSClone_la_OBJECTS) $(libOSClone_la_DEPENDENCIES) 
+	$(CXXLINK) -rpath $(pkglibdir) $(libOSClone_la_LDFLAGS) $(libOSClone_la_OBJECTS) $(libOSClone_la_LIBADD) $(LIBS)
+libOSCompress.la: $(libOSCompress_la_OBJECTS) $(libOSCompress_la_DEPENDENCIES) 
+	$(CXXLINK) -rpath $(pkglibdir) $(libOSCompress_la_LDFLAGS) $(libOSCompress_la_OBJECTS) $(libOSCompress_la_LIBADD) $(LIBS)
+libOSEditSymlink.la: $(libOSEditSymlink_la_OBJECTS) $(libOSEditSymlink_la_DEPENDENCIES) 
+	$(CXXLINK) -rpath $(pkglibdir) $(libOSEditSymlink_la_LDFLAGS) $(libOSEditSymlink_la_OBJECTS) $(libOSEditSymlink_la_LIBADD) $(LIBS)
+libOSMd5sum.la: $(libOSMd5sum_la_OBJECTS) $(libOSMd5sum_la_DEPENDENCIES) 
+	$(CXXLINK) -rpath $(pkglibdir) $(libOSMd5sum_la_LDFLAGS) $(libOSMd5sum_la_OBJECTS) $(libOSMd5sum_la_LIBADD) $(LIBS)
+libOSMkdir.la: $(libOSMkdir_la_OBJECTS) $(libOSMkdir_la_DEPENDENCIES) 
+	$(CXXLINK) -rpath $(pkglibdir) $(libOSMkdir_la_LDFLAGS) $(libOSMkdir_la_OBJECTS) $(libOSMkdir_la_LIBADD) $(LIBS)
+libOSRename.la: $(libOSRename_la_OBJECTS) $(libOSRename_la_DEPENDENCIES) 
+	$(CXXLINK) -rpath $(pkglibdir) $(libOSRename_la_LDFLAGS) $(libOSRename_la_OBJECTS) $(libOSRename_la_LIBADD) $(LIBS)
+libOSSymlink.la: $(libOSSymlink_la_OBJECTS) $(libOSSymlink_la_DEPENDENCIES) 
+	$(CXXLINK) -rpath $(pkglibdir) $(libOSSymlink_la_LDFLAGS) $(libOSSymlink_la_OBJECTS) $(libOSSymlink_la_LIBADD) $(LIBS)
 
 mostlyclean-compile:
 	-rm -f *.$(OBJEXT)
@@ -310,52 +315,89 @@
 distclean-compile:
 	-rm -f *.tab.c
 
<A HREF="https://lists.berlios.de/mailman/listinfo/openspace-svn">- at AMDEP_TRUE</A>@@am__include@ @<A HREF="https://lists.berlios.de/mailman/listinfo/openspace-svn">am__quote at .</A>/$(DEPDIR)/<A HREF="https://lists.berlios.de/mailman/listinfo/openspace-svn">access.Plo at am__quote</A>@
<A HREF="https://lists.berlios.de/mailman/listinfo/openspace-svn">- at AMDEP_TRUE</A>@@am__include@ @<A HREF="https://lists.berlios.de/mailman/listinfo/openspace-svn">am__quote at .</A>/$(DEPDIR)/<A HREF="https://lists.berlios.de/mailman/listinfo/openspace-svn">clone.Plo at am__quote</A>@
<A HREF="https://lists.berlios.de/mailman/listinfo/openspace-svn">- at AMDEP_TRUE</A>@@am__include@ @<A HREF="https://lists.berlios.de/mailman/listinfo/openspace-svn">am__quote at .</A>/$(DEPDIR)/<A HREF="https://lists.berlios.de/mailman/listinfo/openspace-svn">cmddialog.Plo at am__quote</A>@
<A HREF="https://lists.berlios.de/mailman/listinfo/openspace-svn">- at AMDEP_TRUE</A>@@am__include@ @<A HREF="https://lists.berlios.de/mailman/listinfo/openspace-svn">am__quote at .</A>/$(DEPDIR)/<A HREF="https://lists.berlios.de/mailman/listinfo/openspace-svn">compress.Plo at am__quote</A>@
<A HREF="https://lists.berlios.de/mailman/listinfo/openspace-svn">- at AMDEP_TRUE</A>@@am__include@ @<A HREF="https://lists.berlios.de/mailman/listinfo/openspace-svn">am__quote at .</A>/$(DEPDIR)/<A HREF="https://lists.berlios.de/mailman/listinfo/openspace-svn">editsymlink.Plo at am__quote</A>@
<A HREF="https://lists.berlios.de/mailman/listinfo/openspace-svn">- at AMDEP_TRUE</A>@@am__include@ @<A HREF="https://lists.berlios.de/mailman/listinfo/openspace-svn">am__quote at .</A>/$(DEPDIR)/<A HREF="https://lists.berlios.de/mailman/listinfo/openspace-svn">md5sum.Plo at am__quote</A>@
<A HREF="https://lists.berlios.de/mailman/listinfo/openspace-svn">- at AMDEP_TRUE</A>@@am__include@ @<A HREF="https://lists.berlios.de/mailman/listinfo/openspace-svn">am__quote at .</A>/$(DEPDIR)/<A HREF="https://lists.berlios.de/mailman/listinfo/openspace-svn">mkdir.Plo at am__quote</A>@
<A HREF="https://lists.berlios.de/mailman/listinfo/openspace-svn">- at AMDEP_TRUE</A>@@am__include@ @<A HREF="https://lists.berlios.de/mailman/listinfo/openspace-svn">am__quote at .</A>/$(DEPDIR)/<A HREF="https://lists.berlios.de/mailman/listinfo/openspace-svn">rename.Plo at am__quote</A>@
<A HREF="https://lists.berlios.de/mailman/listinfo/openspace-svn">- at AMDEP_TRUE</A>@@am__include@ @<A HREF="https://lists.berlios.de/mailman/listinfo/openspace-svn">am__quote at .</A>/$(DEPDIR)/<A HREF="https://lists.berlios.de/mailman/listinfo/openspace-svn">symlink.Plo at am__quote</A>@
<A HREF="https://lists.berlios.de/mailman/listinfo/openspace-svn">- at AMDEP_TRUE</A>@@am__include@ @<A HREF="https://lists.berlios.de/mailman/listinfo/openspace-svn">am__quote at .</A>/$(DEPDIR)/<A HREF="https://lists.berlios.de/mailman/listinfo/openspace-svn">thread_elem.Plo at am__quote</A>@
<A HREF="https://lists.berlios.de/mailman/listinfo/openspace-svn">+ at AMDEP_TRUE</A>@@am__include@ @<A HREF="https://lists.berlios.de/mailman/listinfo/openspace-svn">am__quote at .</A>/$(DEPDIR)/<A HREF="https://lists.berlios.de/mailman/listinfo/openspace-svn">OSAccess.Plo at am__quote</A>@
<A HREF="https://lists.berlios.de/mailman/listinfo/openspace-svn">+ at AMDEP_TRUE</A>@@am__include@ @<A HREF="https://lists.berlios.de/mailman/listinfo/openspace-svn">am__quote at .</A>/$(DEPDIR)/<A HREF="https://lists.berlios.de/mailman/listinfo/openspace-svn">OSCMDDialogBox.Plo at am__quote</A>@
<A HREF="https://lists.berlios.de/mailman/listinfo/openspace-svn">+ at AMDEP_TRUE</A>@@am__include@ @<A HREF="https://lists.berlios.de/mailman/listinfo/openspace-svn">am__quote at .</A>/$(DEPDIR)/<A HREF="https://lists.berlios.de/mailman/listinfo/openspace-svn">OSClone.Plo at am__quote</A>@
<A HREF="https://lists.berlios.de/mailman/listinfo/openspace-svn">+ at AMDEP_TRUE</A>@@am__include@ @<A HREF="https://lists.berlios.de/mailman/listinfo/openspace-svn">am__quote at .</A>/$(DEPDIR)/<A HREF="https://lists.berlios.de/mailman/listinfo/openspace-svn">OSCompress.Plo at am__quote</A>@
<A HREF="https://lists.berlios.de/mailman/listinfo/openspace-svn">+ at AMDEP_TRUE</A>@@am__include@ @<A HREF="https://lists.berlios.de/mailman/listinfo/openspace-svn">am__quote at .</A>/$(DEPDIR)/<A HREF="https://lists.berlios.de/mailman/listinfo/openspace-svn">OSEditSymlink.Plo at am__quote</A>@
<A HREF="https://lists.berlios.de/mailman/listinfo/openspace-svn">+ at AMDEP_TRUE</A>@@am__include@ @<A HREF="https://lists.berlios.de/mailman/listinfo/openspace-svn">am__quote at .</A>/$(DEPDIR)/<A HREF="https://lists.berlios.de/mailman/listinfo/openspace-svn">OSMd5sum.Plo at am__quote</A>@
<A HREF="https://lists.berlios.de/mailman/listinfo/openspace-svn">+ at AMDEP_TRUE</A>@@am__include@ @<A HREF="https://lists.berlios.de/mailman/listinfo/openspace-svn">am__quote at .</A>/$(DEPDIR)/<A HREF="https://lists.berlios.de/mailman/listinfo/openspace-svn">OSMkdir.Plo at am__quote</A>@
<A HREF="https://lists.berlios.de/mailman/listinfo/openspace-svn">+ at AMDEP_TRUE</A>@@am__include@ @<A HREF="https://lists.berlios.de/mailman/listinfo/openspace-svn">am__quote at .</A>/$(DEPDIR)/<A HREF="https://lists.berlios.de/mailman/listinfo/openspace-svn">OSRename.Plo at am__quote</A>@
<A HREF="https://lists.berlios.de/mailman/listinfo/openspace-svn">+ at AMDEP_TRUE</A>@@am__include@ @<A HREF="https://lists.berlios.de/mailman/listinfo/openspace-svn">am__quote at .</A>/$(DEPDIR)/<A HREF="https://lists.berlios.de/mailman/listinfo/openspace-svn">OSSymlink.Plo at am__quote</A>@
<A HREF="https://lists.berlios.de/mailman/listinfo/openspace-svn">+ at AMDEP_TRUE</A>@@am__include@ @<A HREF="https://lists.berlios.de/mailman/listinfo/openspace-svn">am__quote at .</A>/$(DEPDIR)/<A HREF="https://lists.berlios.de/mailman/listinfo/openspace-svn">OSThreadExec.Plo at am__quote</A>@
 
 .cpp.o:
 @am__fastdepCXX_TRUE@	if $(CXXCOMPILE) -MT $@ -MD -MP -MF &quot;$(DEPDIR)/$*.Tpo&quot; -c -o $@ $&lt;; \
 @am__fastdepCXX_TRUE@	then mv -f &quot;$(DEPDIR)/$*.Tpo&quot; &quot;$(DEPDIR)/$*.Po&quot;; else rm -f &quot;$(DEPDIR)/$*.Tpo&quot;; exit 1; fi
 @AMDEP_TRUE@@am__fastdepCXX_FALSE@	source='$&lt;' object='$@' libtool=no @AMDEPBACKSLASH@
<A HREF="https://lists.berlios.de/mailman/listinfo/openspace-svn">- at AMDEP_TRUE</A>@@am__fastdepCXX_FALSE@	DEPDIR=$(DEPDIR) $(CXXDEPMODE) $(depcomp) @AMDEPBACKSLASH@
<A HREF="https://lists.berlios.de/mailman/listinfo/openspace-svn">+ at AMDEP_TRUE</A>@@am__fastdepCXX_FALSE@	depfile='$(DEPDIR)/$*.Po' tmpdepfile='$(DEPDIR)/$*.TPo' @AMDEPBACKSLASH@
<A HREF="https://lists.berlios.de/mailman/listinfo/openspace-svn">+ at AMDEP_TRUE</A>@@am__fastdepCXX_FALSE@	$(CXXDEPMODE) $(depcomp) @AMDEPBACKSLASH@
 @am__fastdepCXX_FALSE@	$(CXXCOMPILE) -c -o $@ $&lt;
 
 .cpp.obj:
 @am__fastdepCXX_TRUE@	if $(CXXCOMPILE) -MT $@ -MD -MP -MF &quot;$(DEPDIR)/$*.Tpo&quot; -c -o $@ `$(CYGPATH_W) '$&lt;'`; \
 @am__fastdepCXX_TRUE@	then mv -f &quot;$(DEPDIR)/$*.Tpo&quot; &quot;$(DEPDIR)/$*.Po&quot;; else rm -f &quot;$(DEPDIR)/$*.Tpo&quot;; exit 1; fi
 @AMDEP_TRUE@@am__fastdepCXX_FALSE@	source='$&lt;' object='$@' libtool=no @AMDEPBACKSLASH@
<A HREF="https://lists.berlios.de/mailman/listinfo/openspace-svn">- at AMDEP_TRUE</A>@@am__fastdepCXX_FALSE@	DEPDIR=$(DEPDIR) $(CXXDEPMODE) $(depcomp) @AMDEPBACKSLASH@
<A HREF="https://lists.berlios.de/mailman/listinfo/openspace-svn">+ at AMDEP_TRUE</A>@@am__fastdepCXX_FALSE@	depfile='$(DEPDIR)/$*.Po' tmpdepfile='$(DEPDIR)/$*.TPo' @AMDEPBACKSLASH@
<A HREF="https://lists.berlios.de/mailman/listinfo/openspace-svn">+ at AMDEP_TRUE</A>@@am__fastdepCXX_FALSE@	$(CXXDEPMODE) $(depcomp) @AMDEPBACKSLASH@
 @am__fastdepCXX_FALSE@	$(CXXCOMPILE) -c -o $@ `$(CYGPATH_W) '$&lt;'`
 
 .cpp.lo:
 @am__fastdepCXX_TRUE@	if $(LTCXXCOMPILE) -MT $@ -MD -MP -MF &quot;$(DEPDIR)/$*.Tpo&quot; -c -o $@ $&lt;; \
 @am__fastdepCXX_TRUE@	then mv -f &quot;$(DEPDIR)/$*.Tpo&quot; &quot;$(DEPDIR)/$*.Plo&quot;; else rm -f &quot;$(DEPDIR)/$*.Tpo&quot;; exit 1; fi
 @AMDEP_TRUE@@am__fastdepCXX_FALSE@	source='$&lt;' object='$@' libtool=yes @AMDEPBACKSLASH@
<A HREF="https://lists.berlios.de/mailman/listinfo/openspace-svn">- at AMDEP_TRUE</A>@@am__fastdepCXX_FALSE@	DEPDIR=$(DEPDIR) $(CXXDEPMODE) $(depcomp) @AMDEPBACKSLASH@
<A HREF="https://lists.berlios.de/mailman/listinfo/openspace-svn">+ at AMDEP_TRUE</A>@@am__fastdepCXX_FALSE@	depfile='$(DEPDIR)/$*.Plo' tmpdepfile='$(DEPDIR)/$*.TPlo' @AMDEPBACKSLASH@
<A HREF="https://lists.berlios.de/mailman/listinfo/openspace-svn">+ at AMDEP_TRUE</A>@@am__fastdepCXX_FALSE@	$(CXXDEPMODE) $(depcomp) @AMDEPBACKSLASH@
 @am__fastdepCXX_FALSE@	$(LTCXXCOMPILE) -c -o $@ $&lt;
 
-thread_elem.lo: ../../thread_elem.cpp
<A HREF="https://lists.berlios.de/mailman/listinfo/openspace-svn">- at am__fastdepCXX_TRUE</A>@	if $(LIBTOOL) --tag=CXX --mode=compile $(CXX) $(DEFS) $(DEFAULT_INCLUDES) $(INCLUDES) $(AM_CPPFLAGS) $(CPPFLAGS) $(AM_CXXFLAGS) $(CXXFLAGS) -MT thread_elem.lo -MD -MP -MF &quot;$(DEPDIR)/thread_elem.Tpo&quot; -c -o thread_elem.lo `test -f '../../thread_elem.cpp' || echo '$(srcdir)/'`../../thread_elem.cpp; \
<A HREF="https://lists.berlios.de/mailman/listinfo/openspace-svn">- at am__fastdepCXX_TRUE</A>@	then mv -f &quot;$(DEPDIR)/thread_elem.Tpo&quot; &quot;$(DEPDIR)/thread_elem.Plo&quot;; else rm -f &quot;$(DEPDIR)/thread_elem.Tpo&quot;; exit 1; fi
<A HREF="https://lists.berlios.de/mailman/listinfo/openspace-svn">- at AMDEP_TRUE</A>@@am__fastdepCXX_FALSE@	source='../../thread_elem.cpp' object='thread_elem.lo' libtool=yes @AMDEPBACKSLASH@
<A HREF="https://lists.berlios.de/mailman/listinfo/openspace-svn">- at AMDEP_TRUE</A>@@am__fastdepCXX_FALSE@	DEPDIR=$(DEPDIR) $(CXXDEPMODE) $(depcomp) @AMDEPBACKSLASH@
<A HREF="https://lists.berlios.de/mailman/listinfo/openspace-svn">- at am__fastdepCXX_FALSE</A>@	$(LIBTOOL) --tag=CXX --mode=compile $(CXX) $(DEFS) $(DEFAULT_INCLUDES) $(INCLUDES) $(AM_CPPFLAGS) $(CPPFLAGS) $(AM_CXXFLAGS) $(CXXFLAGS) -c -o thread_elem.lo `test -f '../../thread_elem.cpp' || echo '$(srcdir)/'`../../thread_elem.cpp
+OSThreadExec.o: ../../OSThreadExec.cpp
<A HREF="https://lists.berlios.de/mailman/listinfo/openspace-svn">+ at am__fastdepCXX_TRUE</A>@	if $(CXX) $(DEFS) $(DEFAULT_INCLUDES) $(INCLUDES) $(AM_CPPFLAGS) $(CPPFLAGS) $(AM_CXXFLAGS) $(CXXFLAGS) -MT OSThreadExec.o -MD -MP -MF &quot;$(DEPDIR)/OSThreadExec.Tpo&quot; -c -o OSThreadExec.o `test -f '../../OSThreadExec.cpp' || echo '$(srcdir)/'`../../OSThreadExec.cpp; \
<A HREF="https://lists.berlios.de/mailman/listinfo/openspace-svn">+ at am__fastdepCXX_TRUE</A>@	then mv -f &quot;$(DEPDIR)/OSThreadExec.Tpo&quot; &quot;$(DEPDIR)/OSThreadExec.Po&quot;; else rm -f &quot;$(DEPDIR)/OSThreadExec.Tpo&quot;; exit 1; fi
<A HREF="https://lists.berlios.de/mailman/listinfo/openspace-svn">+ at AMDEP_TRUE</A>@@am__fastdepCXX_FALSE@	source='../../OSThreadExec.cpp' object='OSThreadExec.o' libtool=no @AMDEPBACKSLASH@
<A HREF="https://lists.berlios.de/mailman/listinfo/openspace-svn">+ at AMDEP_TRUE</A>@@am__fastdepCXX_FALSE@	depfile='$(DEPDIR)/OSThreadExec.Po' tmpdepfile='$(DEPDIR)/OSThreadExec.TPo' @AMDEPBACKSLASH@
<A HREF="https://lists.berlios.de/mailman/listinfo/openspace-svn">+ at AMDEP_TRUE</A>@@am__fastdepCXX_FALSE@	$(CXXDEPMODE) $(depcomp) @AMDEPBACKSLASH@
<A HREF="https://lists.berlios.de/mailman/listinfo/openspace-svn">+ at am__fastdepCXX_FALSE</A>@	$(CXX) $(DEFS) $(DEFAULT_INCLUDES) $(INCLUDES) $(AM_CPPFLAGS) $(CPPFLAGS) $(AM_CXXFLAGS) $(CXXFLAGS) -c -o OSThreadExec.o `test -f '../../OSThreadExec.cpp' || echo '$(srcdir)/'`../../OSThreadExec.cpp
 
-cmddialog.lo: ../../cmddialog.cpp
<A HREF="https://lists.berlios.de/mailman/listinfo/openspace-svn">- at am__fastdepCXX_TRUE</A>@	if $(LIBTOOL) --tag=CXX --mode=compile $(CXX) $(DEFS) $(DEFAULT_INCLUDES) $(INCLUDES) $(AM_CPPFLAGS) $(CPPFLAGS) $(AM_CXXFLAGS) $(CXXFLAGS) -MT cmddialog.lo -MD -MP -MF &quot;$(DEPDIR)/cmddialog.Tpo&quot; -c -o cmddialog.lo `test -f '../../cmddialog.cpp' || echo '$(srcdir)/'`../../cmddialog.cpp; \
<A HREF="https://lists.berlios.de/mailman/listinfo/openspace-svn">- at am__fastdepCXX_TRUE</A>@	then mv -f &quot;$(DEPDIR)/cmddialog.Tpo&quot; &quot;$(DEPDIR)/cmddialog.Plo&quot;; else rm -f &quot;$(DEPDIR)/cmddialog.Tpo&quot;; exit 1; fi
<A HREF="https://lists.berlios.de/mailman/listinfo/openspace-svn">- at AMDEP_TRUE</A>@@am__fastdepCXX_FALSE@	source='../../cmddialog.cpp' object='cmddialog.lo' libtool=yes @AMDEPBACKSLASH@
<A HREF="https://lists.berlios.de/mailman/listinfo/openspace-svn">- at AMDEP_TRUE</A>@@am__fastdepCXX_FALSE@	DEPDIR=$(DEPDIR) $(CXXDEPMODE) $(depcomp) @AMDEPBACKSLASH@
<A HREF="https://lists.berlios.de/mailman/listinfo/openspace-svn">- at am__fastdepCXX_FALSE</A>@	$(LIBTOOL) --tag=CXX --mode=compile $(CXX) $(DEFS) $(DEFAULT_INCLUDES) $(INCLUDES) $(AM_CPPFLAGS) $(CPPFLAGS) $(AM_CXXFLAGS) $(CXXFLAGS) -c -o cmddialog.lo `test -f '../../cmddialog.cpp' || echo '$(srcdir)/'`../../cmddialog.cpp
+OSThreadExec.obj: ../../OSThreadExec.cpp
<A HREF="https://lists.berlios.de/mailman/listinfo/openspace-svn">+ at am__fastdepCXX_TRUE</A>@	if $(CXX) $(DEFS) $(DEFAULT_INCLUDES) $(INCLUDES) $(AM_CPPFLAGS) $(CPPFLAGS) $(AM_CXXFLAGS) $(CXXFLAGS) -MT OSThreadExec.obj -MD -MP -MF &quot;$(DEPDIR)/OSThreadExec.Tpo&quot; -c -o OSThreadExec.obj `if test -f '../../OSThreadExec.cpp'; then $(CYGPATH_W) '../../OSThreadExec.cpp'; else $(CYGPATH_W) '$(srcdir)/../../OSThreadExec.cpp'; fi`; \
<A HREF="https://lists.berlios.de/mailman/listinfo/openspace-svn">+ at am__fastdepCXX_TRUE</A>@	then mv -f &quot;$(DEPDIR)/OSThreadExec.Tpo&quot; &quot;$(DEPDIR)/OSThreadExec.Po&quot;; else rm -f &quot;$(DEPDIR)/OSThreadExec.Tpo&quot;; exit 1; fi
<A HREF="https://lists.berlios.de/mailman/listinfo/openspace-svn">+ at AMDEP_TRUE</A>@@am__fastdepCXX_FALSE@	source='../../OSThreadExec.cpp' object='OSThreadExec.obj' libtool=no @AMDEPBACKSLASH@
<A HREF="https://lists.berlios.de/mailman/listinfo/openspace-svn">+ at AMDEP_TRUE</A>@@am__fastdepCXX_FALSE@	depfile='$(DEPDIR)/OSThreadExec.Po' tmpdepfile='$(DEPDIR)/OSThreadExec.TPo' @AMDEPBACKSLASH@
<A HREF="https://lists.berlios.de/mailman/listinfo/openspace-svn">+ at AMDEP_TRUE</A>@@am__fastdepCXX_FALSE@	$(CXXDEPMODE) $(depcomp) @AMDEPBACKSLASH@
<A HREF="https://lists.berlios.de/mailman/listinfo/openspace-svn">+ at am__fastdepCXX_FALSE</A>@	$(CXX) $(DEFS) $(DEFAULT_INCLUDES) $(INCLUDES) $(AM_CPPFLAGS) $(CPPFLAGS) $(AM_CXXFLAGS) $(CXXFLAGS) -c -o OSThreadExec.obj `if test -f '../../OSThreadExec.cpp'; then $(CYGPATH_W) '../../OSThreadExec.cpp'; else $(CYGPATH_W) '$(srcdir)/../../OSThreadExec.cpp'; fi`
 
+OSThreadExec.lo: ../../OSThreadExec.cpp
<A HREF="https://lists.berlios.de/mailman/listinfo/openspace-svn">+ at am__fastdepCXX_TRUE</A>@	if $(LIBTOOL) --mode=compile $(CXX) $(DEFS) $(DEFAULT_INCLUDES) $(INCLUDES) $(AM_CPPFLAGS) $(CPPFLAGS) $(AM_CXXFLAGS) $(CXXFLAGS) -MT OSThreadExec.lo -MD -MP -MF &quot;$(DEPDIR)/OSThreadExec.Tpo&quot; -c -o OSThreadExec.lo `test -f '../../OSThreadExec.cpp' || echo '$(srcdir)/'`../../OSThreadExec.cpp; \
<A HREF="https://lists.berlios.de/mailman/listinfo/openspace-svn">+ at am__fastdepCXX_TRUE</A>@	then mv -f &quot;$(DEPDIR)/OSThreadExec.Tpo&quot; &quot;$(DEPDIR)/OSThreadExec.Plo&quot;; else rm -f &quot;$(DEPDIR)/OSThreadExec.Tpo&quot;; exit 1; fi
<A HREF="https://lists.berlios.de/mailman/listinfo/openspace-svn">+ at AMDEP_TRUE</A>@@am__fastdepCXX_FALSE@	source='../../OSThreadExec.cpp' object='OSThreadExec.lo' libtool=yes @AMDEPBACKSLASH@
<A HREF="https://lists.berlios.de/mailman/listinfo/openspace-svn">+ at AMDEP_TRUE</A>@@am__fastdepCXX_FALSE@	depfile='$(DEPDIR)/OSThreadExec.Plo' tmpdepfile='$(DEPDIR)/OSThreadExec.TPlo' @AMDEPBACKSLASH@
<A HREF="https://lists.berlios.de/mailman/listinfo/openspace-svn">+ at AMDEP_TRUE</A>@@am__fastdepCXX_FALSE@	$(CXXDEPMODE) $(depcomp) @AMDEPBACKSLASH@
<A HREF="https://lists.berlios.de/mailman/listinfo/openspace-svn">+ at am__fastdepCXX_FALSE</A>@	$(LIBTOOL) --mode=compile $(CXX) $(DEFS) $(DEFAULT_INCLUDES) $(INCLUDES) $(AM_CPPFLAGS) $(CPPFLAGS) $(AM_CXXFLAGS) $(CXXFLAGS) -c -o OSThreadExec.lo `test -f '../../OSThreadExec.cpp' || echo '$(srcdir)/'`../../OSThreadExec.cpp
+
+OSCMDDialogBox.o: ../../OSCMDDialogBox.cpp
<A HREF="https://lists.berlios.de/mailman/listinfo/openspace-svn">+ at am__fastdepCXX_TRUE</A>@	if $(CXX) $(DEFS) $(DEFAULT_INCLUDES) $(INCLUDES) $(AM_CPPFLAGS) $(CPPFLAGS) $(AM_CXXFLAGS) $(CXXFLAGS) -MT OSCMDDialogBox.o -MD -MP -MF &quot;$(DEPDIR)/OSCMDDialogBox.Tpo&quot; -c -o OSCMDDialogBox.o `test -f '../../OSCMDDialogBox.cpp' || echo '$(srcdir)/'`../../OSCMDDialogBox.cpp; \
<A HREF="https://lists.berlios.de/mailman/listinfo/openspace-svn">+ at am__fastdepCXX_TRUE</A>@	then mv -f &quot;$(DEPDIR)/OSCMDDialogBox.Tpo&quot; &quot;$(DEPDIR)/OSCMDDialogBox.Po&quot;; else rm -f &quot;$(DEPDIR)/OSCMDDialogBox.Tpo&quot;; exit 1; fi
<A HREF="https://lists.berlios.de/mailman/listinfo/openspace-svn">+ at AMDEP_TRUE</A>@@am__fastdepCXX_FALSE@	source='../../OSCMDDialogBox.cpp' object='OSCMDDialogBox.o' libtool=no @AMDEPBACKSLASH@
<A HREF="https://lists.berlios.de/mailman/listinfo/openspace-svn">+ at AMDEP_TRUE</A>@@am__fastdepCXX_FALSE@	depfile='$(DEPDIR)/OSCMDDialogBox.Po' tmpdepfile='$(DEPDIR)/OSCMDDialogBox.TPo' @AMDEPBACKSLASH@
<A HREF="https://lists.berlios.de/mailman/listinfo/openspace-svn">+ at AMDEP_TRUE</A>@@am__fastdepCXX_FALSE@	$(CXXDEPMODE) $(depcomp) @AMDEPBACKSLASH@
<A HREF="https://lists.berlios.de/mailman/listinfo/openspace-svn">+ at am__fastdepCXX_FALSE</A>@	$(CXX) $(DEFS) $(DEFAULT_INCLUDES) $(INCLUDES) $(AM_CPPFLAGS) $(CPPFLAGS) $(AM_CXXFLAGS) $(CXXFLAGS) -c -o OSCMDDialogBox.o `test -f '../../OSCMDDialogBox.cpp' || echo '$(srcdir)/'`../../OSCMDDialogBox.cpp
+
+OSCMDDialogBox.obj: ../../OSCMDDialogBox.cpp
<A HREF="https://lists.berlios.de/mailman/listinfo/openspace-svn">+ at am__fastdepCXX_TRUE</A>@	if $(CXX) $(DEFS) $(DEFAULT_INCLUDES) $(INCLUDES) $(AM_CPPFLAGS) $(CPPFLAGS) $(AM_CXXFLAGS) $(CXXFLAGS) -MT OSCMDDialogBox.obj -MD -MP -MF &quot;$(DEPDIR)/OSCMDDialogBox.Tpo&quot; -c -o OSCMDDialogBox.obj `if test -f '../../OSCMDDialogBox.cpp'; then $(CYGPATH_W) '../../OSCMDDialogBox.cpp'; else $(CYGPATH_W) '$(srcdir)/../../OSCMDDialogBox.cpp'; fi`; \
<A HREF="https://lists.berlios.de/mailman/listinfo/openspace-svn">+ at am__fastdepCXX_TRUE</A>@	then mv -f &quot;$(DEPDIR)/OSCMDDialogBox.Tpo&quot; &quot;$(DEPDIR)/OSCMDDialogBox.Po&quot;; else rm -f &quot;$(DEPDIR)/OSCMDDialogBox.Tpo&quot;; exit 1; fi
<A HREF="https://lists.berlios.de/mailman/listinfo/openspace-svn">+ at AMDEP_TRUE</A>@@am__fastdepCXX_FALSE@	source='../../OSCMDDialogBox.cpp' object='OSCMDDialogBox.obj' libtool=no @AMDEPBACKSLASH@
<A HREF="https://lists.berlios.de/mailman/listinfo/openspace-svn">+ at AMDEP_TRUE</A>@@am__fastdepCXX_FALSE@	depfile='$(DEPDIR)/OSCMDDialogBox.Po' tmpdepfile='$(DEPDIR)/OSCMDDialogBox.TPo' @AMDEPBACKSLASH@
<A HREF="https://lists.berlios.de/mailman/listinfo/openspace-svn">+ at AMDEP_TRUE</A>@@am__fastdepCXX_FALSE@	$(CXXDEPMODE) $(depcomp) @AMDEPBACKSLASH@
<A HREF="https://lists.berlios.de/mailman/listinfo/openspace-svn">+ at am__fastdepCXX_FALSE</A>@	$(CXX) $(DEFS) $(DEFAULT_INCLUDES) $(INCLUDES) $(AM_CPPFLAGS) $(CPPFLAGS) $(AM_CXXFLAGS) $(CXXFLAGS) -c -o OSCMDDialogBox.obj `if test -f '../../OSCMDDialogBox.cpp'; then $(CYGPATH_W) '../../OSCMDDialogBox.cpp'; else $(CYGPATH_W) '$(srcdir)/../../OSCMDDialogBox.cpp'; fi`
+
+OSCMDDialogBox.lo: ../../OSCMDDialogBox.cpp
<A HREF="https://lists.berlios.de/mailman/listinfo/openspace-svn">+ at am__fastdepCXX_TRUE</A>@	if $(LIBTOOL) --mode=compile $(CXX) $(DEFS) $(DEFAULT_INCLUDES) $(INCLUDES) $(AM_CPPFLAGS) $(CPPFLAGS) $(AM_CXXFLAGS) $(CXXFLAGS) -MT OSCMDDialogBox.lo -MD -MP -MF &quot;$(DEPDIR)/OSCMDDialogBox.Tpo&quot; -c -o OSCMDDialogBox.lo `test -f '../../OSCMDDialogBox.cpp' || echo '$(srcdir)/'`../../OSCMDDialogBox.cpp; \
<A HREF="https://lists.berlios.de/mailman/listinfo/openspace-svn">+ at am__fastdepCXX_TRUE</A>@	then mv -f &quot;$(DEPDIR)/OSCMDDialogBox.Tpo&quot; &quot;$(DEPDIR)/OSCMDDialogBox.Plo&quot;; else rm -f &quot;$(DEPDIR)/OSCMDDialogBox.Tpo&quot;; exit 1; fi
<A HREF="https://lists.berlios.de/mailman/listinfo/openspace-svn">+ at AMDEP_TRUE</A>@@am__fastdepCXX_FALSE@	source='../../OSCMDDialogBox.cpp' object='OSCMDDialogBox.lo' libtool=yes @AMDEPBACKSLASH@
<A HREF="https://lists.berlios.de/mailman/listinfo/openspace-svn">+ at AMDEP_TRUE</A>@@am__fastdepCXX_FALSE@	depfile='$(DEPDIR)/OSCMDDialogBox.Plo' tmpdepfile='$(DEPDIR)/OSCMDDialogBox.TPlo' @AMDEPBACKSLASH@
<A HREF="https://lists.berlios.de/mailman/listinfo/openspace-svn">+ at AMDEP_TRUE</A>@@am__fastdepCXX_FALSE@	$(CXXDEPMODE) $(depcomp) @AMDEPBACKSLASH@
<A HREF="https://lists.berlios.de/mailman/listinfo/openspace-svn">+ at am__fastdepCXX_FALSE</A>@	$(LIBTOOL) --mode=compile $(CXX) $(DEFS) $(DEFAULT_INCLUDES) $(INCLUDES) $(AM_CPPFLAGS) $(CPPFLAGS) $(AM_CXXFLAGS) $(CXXFLAGS) -c -o OSCMDDialogBox.lo `test -f '../../OSCMDDialogBox.cpp' || echo '$(srcdir)/'`../../OSCMDDialogBox.cpp
+
 mostlyclean-libtool:
 	-rm -f *.lo
 
@@ -467,7 +509,7 @@
 clean-generic:
 
 distclean-generic:
-	-test -z &quot;$(CONFIG_CLEAN_FILES)&quot; || rm -f $(CONFIG_CLEAN_FILES)
+	-rm -f $(CONFIG_CLEAN_FILES)
 
 maintainer-clean-generic:
 	@echo &quot;This command is intended for maintainers to use&quot;

Copied: trunk/src/plugins/cmddialog/OSAccess.cpp (from rev 245, branches/mloskot-style-refactoring/src/plugins/cmddialog/OSAccess.cpp)


Property changes on: trunk/src/plugins/cmddialog/OSAccess.cpp
___________________________________________________________________
Name: svn:keywords
   + Id

Copied: trunk/src/plugins/cmddialog/OSClone.cpp (from rev 245, branches/mloskot-style-refactoring/src/plugins/cmddialog/OSClone.cpp)


Property changes on: trunk/src/plugins/cmddialog/OSClone.cpp
___________________________________________________________________
Name: svn:keywords
   + Id

Copied: trunk/src/plugins/cmddialog/OSCompress.cpp (from rev 245, branches/mloskot-style-refactoring/src/plugins/cmddialog/OSCompress.cpp)


Property changes on: trunk/src/plugins/cmddialog/OSCompress.cpp
___________________________________________________________________
Name: svn:keywords
   + Id

Copied: trunk/src/plugins/cmddialog/OSEditSymlink.cpp (from rev 245, branches/mloskot-style-refactoring/src/plugins/cmddialog/OSEditSymlink.cpp)


Property changes on: trunk/src/plugins/cmddialog/OSEditSymlink.cpp
___________________________________________________________________
Name: svn:keywords
   + Id

Copied: trunk/src/plugins/cmddialog/OSMd5sum.cpp (from rev 245, branches/mloskot-style-refactoring/src/plugins/cmddialog/OSMd5sum.cpp)


Property changes on: trunk/src/plugins/cmddialog/OSMd5sum.cpp
___________________________________________________________________
Name: svn:keywords
   + Id

Copied: trunk/src/plugins/cmddialog/OSMkdir.cpp (from rev 245, branches/mloskot-style-refactoring/src/plugins/cmddialog/OSMkdir.cpp)


Property changes on: trunk/src/plugins/cmddialog/OSMkdir.cpp
___________________________________________________________________
Name: svn:keywords
   + Id

Copied: trunk/src/plugins/cmddialog/OSRename.cpp (from rev 245, branches/mloskot-style-refactoring/src/plugins/cmddialog/OSRename.cpp)


Property changes on: trunk/src/plugins/cmddialog/OSRename.cpp
___________________________________________________________________
Name: svn:keywords
   + Id

Copied: trunk/src/plugins/cmddialog/OSSymlink.cpp (from rev 245, branches/mloskot-style-refactoring/src/plugins/cmddialog/OSSymlink.cpp)


Property changes on: trunk/src/plugins/cmddialog/OSSymlink.cpp
___________________________________________________________________
Name: svn:keywords
   + Id

Deleted: trunk/src/plugins/cmddialog/access.cpp
===================================================================
--- trunk/src/plugins/cmddialog/access.cpp	2006-02-12 13:43:28 UTC (rev 245)
+++ trunk/src/plugins/cmddialog/access.cpp	2006-02-12 15:36:06 UTC (rev 246)
@@ -1,228 +0,0 @@
-#include &lt;fx.h&gt;
-#include &quot;../../cmddialog.h&quot;
-
-#include &lt;string&gt;
-using namespace std;
-#include &lt;sys/types.h&gt;
-#include &lt;grp.h&gt;
-#include &lt;pwd.h&gt;
-#include &lt;sys/types.h&gt;
-#include &lt;sys/stat.h&gt;
-#include &lt;unistd.h&gt;
-
-
-
-#ifdef WIN32
-#define EXPORTFUNCTION extern &quot;C&quot; __declspec(dllexport)
-#else
-#define EXPORTFUNCTION extern &quot;C&quot;
-#endif
-
-
-class access_cmddialog:public cmddialog
-{
-  FXDECLARE (access_cmddialog) protected:
-
-    access_cmddialog (const access_cmddialog &amp;)
-    {
-    }
-
-  private:
-  
-    FXCheckButton *ur;
-    FXCheckButton *uw;
-    FXCheckButton *ux;
-    FXCheckButton *gr;
-    FXCheckButton *gw;
-    FXCheckButton *gx;
-    FXCheckButton *or_;
-    FXCheckButton *ow;
-    FXCheckButton *ox;
-    FXDataTarget radiotarget;
-    FXRadioButton *set;
-    FXRadioButton *clear;
-    FXRadioButton *add;
-    FXint cmd;
-    FXCheckButton *rec;
-    FXCheckButton *dironly;
-    FXComboBox *user;
-    FXComboBox *userbis;
-    FXComboBox *grp;
-    FXTextField *text;
-
-
-
-  public:
-  
-    enum
-    {
-	ID_PRESS = cmddialog::ID_LAST,
-	ID_RUSR,
-	ID_WUSR,
-	ID_XUSR,
-	ID_RGRP,
-	ID_WGRP,
-	ID_XGRP,
-	ID_ROTH,
-	ID_WOTH,
-	ID_XOTH,
-	ID_LAST
-    };
-
-
-
-    
-    access_cmddialog ()
-    {
-    }
-    access_cmddialog (FXWindow * w, filelist_base * fb, vector &lt; string &gt; src);
-
-    virtual int access_cmddialog::exec (void)
-    {
-
-	unsigned int mode = 0;
-	if (ur-&gt;getCheck ())
-	    mode = mode | S_IRUSR;
-	if (uw-&gt;getCheck ())
-	    mode = mode | S_IWUSR;
-	if (ux-&gt;getCheck ())
-	    mode = mode | S_IXUSR;
-	if (gr-&gt;getCheck ())
-	    mode = mode | S_IRGRP;
-	if (gw-&gt;getCheck ())
-	    mode = mode | S_IWGRP;
-	if (gx-&gt;getCheck ())
-	    mode = mode | S_IXGRP;
-	if (or_-&gt;getCheck ())
-	    mode = mode | S_IROTH;
-	if (ow-&gt;getCheck ())
-	    mode = mode | S_IWOTH;
-	if (ox-&gt;getCheck ())
-	    mode = mode | S_IXOTH;
-
-	bool recursive = false;
-	if (rec-&gt;getCheck ())
-	    recursive = true;
-	
-	vector &lt; string &gt;::iterator iter;
-
-    	for (iter = src.begin (); iter != src.end(); iter++)
-   	{
-	
-	    fb-&gt;mode (*iter, mode, recursive);
-	   
-	    fb-&gt;owner (*iter, user-&gt;getText ().text (), recursive);
-	    fb-&gt;group (*iter, grp-&gt;getText ().text (), recursive);
-	
-	}
-
-    }
-
-
-    long access_cmddialog::press (FXObject * sender, FXSelector, void *);
-
-};
-
-FXDEFMAP (access_cmddialog) access_cmddialogMap[] =
-{
-FXMAPFUNC (SEL_COMMAND, access_cmddialog::ID_PRESS, access_cmddialog::press),};
-FXIMPLEMENT (access_cmddialog, cmddialog, access_cmddialogMap, ARRAYNUMBER (access_cmddialogMap)) 
-
-access_cmddialog::access_cmddialog (FXWindow * w, filelist_base * fb, vector &lt; string &gt; src):
-cmddialog (w, fb, src)
-{
-
-   vector &lt; string &gt;::iterator iter;
-    for (iter = src.begin (); iter != src.end(); iter++)
-    {
-	new FXLabel (contents, iter-&gt;c_str ());
-    }
-
-    FXHorizontalFrame *accessframe = new FXHorizontalFrame (contents, LAYOUT_FILL_X | LAYOUT_FILL_Y);
-    FXHorizontalFrame *chmodframe = new FXHorizontalFrame (contents, PACK_UNIFORM_WIDTH | PACK_UNIFORM_HEIGHT | LAYOUT_FILL_X | LAYOUT_FILL_Y);
-    FXGroupBox *group1 = new FXGroupBox (accessframe, &quot;User&quot;, GROUPBOX_TITLE_LEFT | FRAME_GROOVE | LAYOUT_FILL_X);
-    ur = new FXCheckButton (group1, &quot;Read&quot;, this, ID_RUSR);
-    uw = new FXCheckButton (group1, &quot;Write&quot;, this, ID_WUSR);
-    ux = new FXCheckButton (group1, &quot;Execute&quot;, this, ID_XUSR);
-    FXGroupBox *group2 = new FXGroupBox (accessframe, &quot;Group&quot;, GROUPBOX_TITLE_LEFT | FRAME_GROOVE | LAYOUT_FILL_X);
-    gr = new FXCheckButton (group2, &quot;Read&quot;, this, ID_RGRP);
-    gw = new FXCheckButton (group2, &quot;Write&quot;, this, ID_WGRP);
-    gx = new FXCheckButton (group2, &quot;Execute&quot;, this, ID_XGRP);
-    FXGroupBox *group3 = new FXGroupBox (accessframe, &quot;Others&quot;, GROUPBOX_TITLE_LEFT | FRAME_GROOVE | LAYOUT_FILL_X);
-    or_ = new FXCheckButton (group3, &quot;Read&quot;, this, ID_ROTH);
-    ow = new FXCheckButton (group3, &quot;Write&quot;, this, ID_WOTH);
-    ox = new FXCheckButton (group3, &quot;Execute&quot;, this, ID_XOTH);
-
-    FXGroupBox *group4 = new FXGroupBox (chmodframe, &quot;Options&quot;, GROUPBOX_TITLE_LEFT | FRAME_GROOVE | LAYOUT_FILL_X | LAYOUT_FILL_Y);
-
-    rec = new FXCheckButton (group4, &quot;Recursive folders&quot;, NULL, 0);
-
-
-    FXGroupBox *group5 = new FXGroupBox (chmodframe, &quot;Owner&quot;, GROUPBOX_TITLE_LEFT | FRAME_GROOVE | LAYOUT_FILL_X | LAYOUT_FILL_Y);
-    new FXLabel (group5, &quot;User&quot;);
-    user = new FXComboBox (group5, 10, NULL, 0, COMBOBOX_NO_REPLACE | FRAME_SUNKEN | FRAME_THICK);
-    user-&gt;setNumVisible (5);
-    new FXLabel (group5, &quot;Group&quot;);
-    grp = new FXComboBox (group5, 10, NULL, 0, COMBOBOX_NO_REPLACE | FRAME_SUNKEN | FRAME_THICK);
-    grp-&gt;setNumVisible (5);
-
-
-    if (fb-&gt;mode (src[0]) &amp; S_IRUSR)
-	ur-&gt;setCheck ();
-    if (fb-&gt;mode (src[0]) &amp; S_IWUSR)
-	uw-&gt;setCheck ();
-    if (fb-&gt;mode (src[0]) &amp; S_IXUSR)
-	ux-&gt;setCheck ();
-    if (fb-&gt;mode (src[0]) &amp; S_IRGRP)
-	gr-&gt;setCheck ();
-    if (fb-&gt;mode (src[0]) &amp; S_IWGRP)
-	gw-&gt;setCheck ();
-    if (fb-&gt;mode (src[0]) &amp; S_IXGRP)
-	gx-&gt;setCheck ();
-
-
-    if (fb-&gt;mode (src[0]) &amp; S_IROTH)
-	or_-&gt;setCheck ();
-    if (fb-&gt;mode (src[0]) &amp; S_IWOTH)
-	ow-&gt;setCheck ();
-    if (fb-&gt;mode (src[0]) &amp; S_IXOTH)
-	ox-&gt;setCheck ();
-
-
-
-    // User names (sorted in ascending order)
-    struct passwd *pwde;
-    while ((pwde = getpwent ()))
-    {
-	user-&gt;appendItem (pwde-&gt;pw_name);
-
-    }
-    endpwent ();
-    user-&gt;setSortFunc (FXList::ascending);
-    user-&gt;sortItems ();
-    string own = fb-&gt;owner (src[0]);
-    user-&gt;setCurrentItem (user-&gt;findItem (own.c_str ()));
-
-    // Group names (sorted in ascending order)
-    struct group *grpe;
-    while ((grpe = getgrent ()))
-    {
-	grp-&gt;appendItem (grpe-&gt;gr_name);
-    }
-    endgrent ();
-    grp-&gt;setSortFunc (FXList::ascending);
-    grp-&gt;sortItems ();
-    string grou = fb-&gt;group (src[0]);
-    grp-&gt;setCurrentItem (grp-&gt;findItem (grou.c_str ()));
-
-}
-
-long access_cmddialog::press (FXObject * sender, FXSelector, void *)
-{
-}
-
-
-EXPORTFUNCTION cmddialog *get_cmddialog (FXWindow * w, filelist_base * fb, vector &lt; string &gt; src)
-{
-    return new access_cmddialog (w, fb, src);
-}

Deleted: trunk/src/plugins/cmddialog/clone.cpp
===================================================================
--- trunk/src/plugins/cmddialog/clone.cpp	2006-02-12 13:43:28 UTC (rev 245)
+++ trunk/src/plugins/cmddialog/clone.cpp	2006-02-12 15:36:06 UTC (rev 246)
@@ -1,147 +0,0 @@
-#include &lt;fx.h&gt;
-#include &quot;../../cmddialog.h&quot;
-
-#include &lt;string&gt;
-using namespace std;
-
-#ifdef WIN32
-#define EXPORTFUNCTION extern &quot;C&quot; __declspec(dllexport)
-#else
-#define EXPORTFUNCTION extern &quot;C&quot;
-#endif
-
-
-#ifdef WIN32
-#define SEPARATOR &quot;\\&quot;
-#else
-#include &lt;dlfcn.h&gt;
-#define SEPARATOR &quot;/&quot;
-#endif
-
-class clone_cmddialog:public cmddialog
-{
-  FXDECLARE (clone_cmddialog) protected:
-
-    clone_cmddialog (const clone_cmddialog &amp;)
-    {
-    }
-
-  private:
-    vector &lt; FXTextField * &gt;vec;
-    string dir;
-
-  public:
-
-    enum
-    {
-	ID_ENTER = cmddialog::ID_LAST,
-    };
-
-
-    clone_cmddialog ()
-    {
-    }
-    clone_cmddialog (FXWindow * w, filelist_base * fb, vector &lt; string &gt; src);
-
-
-    virtual int clone_cmddialog::exec (void)
-    {
-	int error = 0;
-	vector &lt; string &gt;::iterator iter;
-	int i=0;
-    	for (iter = src.begin (); iter != src.end(); iter++)
-    	{
-	    string newname = dir + SEPARATOR + vec[i]-&gt;getText ().text ();
-	    string newonlyname= vec[i]-&gt;getText ().text ();
-	    
-	    string destdir=&quot;/tmp/openspace&quot;;
-	    string filename=FXFile::name(iter-&gt;c_str()).text();
-	    string dirname=FXFile::directory(iter-&gt;c_str()).text();
-	    
-	    thread_elem *el2 = new thread_elem (fb, &quot;copy&quot;, &quot;upload&quot;, *iter,destdir);
-	    fb-&gt;copy (el2);
-	    delete el2;
-	    
-	    	    
-	    
-	    if (fb-&gt;rename (destdir+&quot;/&quot;+filename,destdir+&quot;/&quot;+newonlyname) == false)
-	    {
-		error = -1;
-		string err = &quot;can't clone &quot; + *iter + &quot; to &quot; + newname;
-
-		FXLabel *lab = new FXLabel (contents, err.c_str ());
-		lab-&gt;create ();
-		this-&gt;layout ();
-		this-&gt;resize (this-&gt;getWidth (), this-&gt;getHeight () + lab-&gt;getHeight ());
-
-	    }
-	    else
-	    {
-	    
-	    el2 = new thread_elem (fb, &quot;move&quot;, &quot;upload&quot;, destdir+&quot;/&quot;+newonlyname,dirname);
-	    fb-&gt;copy (el2);
-	    delete el2;
-	    
-	    }
-	    
-	    
-	i++;
-	}
-
-
-	return error;
-
-    }
-
-
-    long clone_cmddialog::press (FXObject * sender, FXSelector, void *);
-
-};
-
-FXDEFMAP (clone_cmddialog) clone_cmddialogMap[] =
-{
-FXMAPFUNC (SEL_COMMAND, clone_cmddialog::ID_ENTER, clone_cmddialog::press),};
-FXIMPLEMENT (clone_cmddialog, cmddialog, clone_cmddialogMap, ARRAYNUMBER (clone_cmddialogMap)) 
-
-clone_cmddialog::clone_cmddialog (FXWindow * w, filelist_base * fb, vector &lt; string &gt; src):
-cmddialog (w, fb, src)
-{
-
-
-    vector &lt; string &gt;::iterator iter;
-
-    for (iter = src.begin (); iter != src.end(); iter++)
-    {
-  
-
-	dir = FXFile::directory (iter-&gt;c_str ()).text ();
-
-	FXString name = FXFile::name (iter-&gt;c_str ());
-	new FXLabel (contents, name);
-	FXTextField *text = new FXTextField (contents, 25, this, ID_ENTER);
-	text-&gt;setFocus ();
-	text-&gt;setText (name);
-	vec.push_back (text);
-
-    }
-
-
-
-}
-
-long clone_cmddialog::press (FXObject * sender, FXSelector, void *)
-{
-
-    FXObject *target = (FXObject *) ok-&gt;getTarget ();
-    target-&gt;handle (ok, FXSEL (SEL_COMMAND, ID_COMMAND), NULL);
-
-}
-
-
-
-
-
-EXPORTFUNCTION cmddialog *get_cmddialog (FXWindow * w, filelist_base * fb, vector &lt; string &gt; src)
-{
-    return new clone_cmddialog (w, fb, src);
-}

Deleted: trunk/src/plugins/cmddialog/compress.cpp
===================================================================
--- trunk/src/plugins/cmddialog/compress.cpp	2006-02-12 13:43:28 UTC (rev 245)
+++ trunk/src/plugins/cmddialog/compress.cpp	2006-02-12 15:36:06 UTC (rev 246)
@@ -1,119 +0,0 @@
-#include &lt;fx.h&gt;
-#include &quot;../../cmddialog.h&quot;
-
-#include &lt;string&gt;
-using namespace std;
-
-#ifdef WIN32
-#define EXPORTFUNCTION extern &quot;C&quot; __declspec(dllexport)
-#else
-#define EXPORTFUNCTION extern &quot;C&quot;
-#endif
-
-
-#ifdef WIN32
-#define SEPARATOR &quot;\\&quot;
-#else
-#include &lt;dlfcn.h&gt;
-#define SEPARATOR &quot;/&quot;
-#endif
-
-class compress_cmddialog:public cmddialog
-{
-  FXDECLARE (compress_cmddialog) protected:
-
-    compress_cmddialog (const compress_cmddialog &amp;)
-    {
-    }
-
-  private:
-   
-    string dir;
-    FXTextField *textfield;
-    FXComboBox* combo;
-
-  public:
-
-
-    enum
-    {
-	ID_ENTER = cmddialog::ID_LAST,
-    };
-
-
-       compress_cmddialog ()
-    {
-    }
-    compress_cmddialog (FXWindow * w, filelist_base * fb, vector &lt; string &gt; src);
-
-
-    virtual int compress_cmddialog::exec (void)
-    {
-	int error = 0;
-	vector &lt; string &gt;::iterator iter;
-	string file_list;
-	string arch_filename=textfield-&gt;getText().text();
-	string type=combo-&gt;getText().text();
-	
-    	for (iter = src.begin (); iter != src.end(); iter++)
-    	{
-		string sr = (*iter);
-		sr=FXFile::name(sr.c_str()).text();
-		file_list+=&quot; \&quot;&quot; +  sr + &quot;\&quot;&quot;;
-	}
-
-	string command;
-	if(type==&quot;tar.bz2&quot;)
-	command=&quot;tar cjf &quot; + arch_filename +&quot;.tar.bz2 &quot;+ file_list;
-	else
-	command=&quot;tar czf &quot; + arch_filename +&quot;.tar.gz &quot;+ file_list;
-	
-	system(command.c_str());
-
-
-    }
-
-
-    long compress_cmddialog::press (FXObject * sender, FXSelector, void *);
-
-};
-
-FXDEFMAP (compress_cmddialog) compress_cmddialogMap[] =
-{
-FXMAPFUNC (SEL_COMMAND, compress_cmddialog::ID_ENTER, compress_cmddialog::press),};
-FXIMPLEMENT (compress_cmddialog, cmddialog, compress_cmddialogMap, ARRAYNUMBER (compress_cmddialogMap)) 
-
-compress_cmddialog::compress_cmddialog (FXWindow * w, filelist_base * fb, vector &lt; string &gt; src):
-cmddialog (w, fb, src)
-{
-
-  new FXLabel(contents,&quot;archive type: &quot;);
-
-    combo = new FXComboBox (contents, 10, NULL, 0, COMBOBOX_NO_REPLACE | FRAME_SUNKEN | FRAME_THICK);
-    combo-&gt;setNumVisible (3);
-    combo-&gt;appendItem(&quot;tar.bz2&quot;);
-    combo-&gt;appendItem(&quot;tar.gz&quot;);
-
-	new FXLabel(contents,&quot;archive filename: &quot;);
-	textfield = new FXTextField (contents, 25, this, ID_ENTER);
-	textfield-&gt;setFocus ();
-
-
-}
-
-long compress_cmddialog::press (FXObject * sender, FXSelector, void *)
-{
-
-    FXObject *target = (FXObject *) ok-&gt;getTarget ();
-    target-&gt;handle (ok, FXSEL (SEL_COMMAND, ID_COMMAND), NULL);
-
-}
-
-
-
-
-
-EXPORTFUNCTION cmddialog *get_cmddialog (FXWindow * w, filelist_base * fb, vector &lt; string &gt; src)
-{
-    return new compress_cmddialog (w, fb, src);
-}

Deleted: trunk/src/plugins/cmddialog/editsymlink.cpp
===================================================================
--- trunk/src/plugins/cmddialog/editsymlink.cpp	2006-02-12 13:43:28 UTC (rev 245)
+++ trunk/src/plugins/cmddialog/editsymlink.cpp	2006-02-12 15:36:06 UTC (rev 246)
@@ -1,140 +0,0 @@
-#include &lt;fx.h&gt;
-#include &quot;../../cmddialog.h&quot;
-
-#include &lt;string&gt;
-using namespace std;
-
-#ifdef WIN32
-#define EXPORTFUNCTION extern &quot;C&quot; __declspec(dllexport)
-#else
-#define EXPORTFUNCTION extern &quot;C&quot;
-#endif
-
-
-#ifdef WIN32
-#define SEPARATOR &quot;\\&quot;
-#else
-#include &lt;dlfcn.h&gt;
-#define SEPARATOR &quot;/&quot;
-#endif
-
-class editsymlink_cmddialog:public cmddialog
-{
-  FXDECLARE (editsymlink_cmddialog) protected:
-
-    editsymlink_cmddialog (const editsymlink_cmddialog &amp;)
-    {
-    }
-    
-  private:
-   
-    vector &lt; FXTextField * &gt;vec;
-    string dir;
-    FXCheckButton *hardlink;  
-
-  public:
-
-    enum
-    {
-	ID_ENTER = cmddialog::ID_LAST,
-    };
-
-    editsymlink_cmddialog ()
-    {
-    }
-    editsymlink_cmddialog (FXWindow * w, filelist_base * fb, vector &lt; string &gt; src);
-
-
-    virtual int editsymlink_cmddialog::exec (void)
-    {
-	int error = 0;
-	vector &lt; string &gt;::iterator iter;
-	int i=0;
-    	for (iter = src.begin (); iter != src.end(); iter++)
-    	{
-	
-	string newname = vec[i]-&gt;getText ().text ();
-	delete vec[i];
-	i++;
-	if(newname==&quot;&quot;)
-	continue;
-
-	    
-  
-	int error = 0;
-	    vector&lt;string&gt; srcfile;
-	    srcfile.push_back(*iter);
-	    thread_elem *el = new thread_elem (fb, &quot;remove&quot;, &quot;&quot;,srcfile);
-	    fb-&gt;remove(el);
-	
-           bool ret=fb-&gt;symlink ( newname,*iter);	
-	
-	    if ( ret== false)
-	    {
-		error = -1;
-		string err = &quot;can't symlink &quot; + *iter + &quot; to &quot; + newname;
-
-		FXLabel *lab = new FXLabel (contents, err.c_str ());
-		lab-&gt;create ();
-		this-&gt;layout ();
-		this-&gt;resize (this-&gt;getWidth (), this-&gt;getHeight () + lab-&gt;getHeight ());
-
-	    }
-	
-	}
-
-
-	return error;
-
-    }
-
-
-
-    long editsymlink_cmddialog::press (FXObject * sender, FXSelector, void *);
-
-};
-
-FXDEFMAP (editsymlink_cmddialog) editsymlink_cmddialogMap[] =
-{
-FXMAPFUNC (SEL_COMMAND, editsymlink_cmddialog::ID_ENTER, editsymlink_cmddialog::press),};
-FXIMPLEMENT (editsymlink_cmddialog, cmddialog, editsymlink_cmddialogMap, ARRAYNUMBER (editsymlink_cmddialogMap)) 
-
-editsymlink_cmddialog::editsymlink_cmddialog (FXWindow * w, filelist_base * fb, vector &lt; string &gt; src):
-cmddialog (w, fb, src)
-{
-
-
-    vector &lt; string &gt;::iterator iter;
-
-    for (iter = src.begin (); iter != src.end(); iter++)
-    {
-	string sym=fb-&gt;symlink(*iter);
-	if(sym==&quot;&quot;)
-	continue;
-
-	new FXLabel(contents,&quot;source: &quot;);
-	new FXLabel (contents, iter-&gt;c_str ());
-	new FXLabel(contents,&quot;link: &quot;);
-	FXTextField *text = new FXTextField (contents, 25, this, ID_ENTER);
-	text-&gt;setFocus ();
-	text-&gt;setText (sym.c_str());
-	vec.push_back (text);
-
-    }
-
-
-}
-
-long editsymlink_cmddialog::press (FXObject * sender, FXSelector, void *)
-{
-
-    FXObject *target = (FXObject *) ok-&gt;getTarget ();
-    //target-&gt;handle (ok, FXSEL (SEL_COMMAND, ID_COMMAND), NULL);
-
-}
-
-
-EXPORTFUNCTION cmddialog *get_cmddialog (FXWindow * w, filelist_base * fb, vector &lt; string &gt; src)
-{
-    return new editsymlink_cmddialog (w, fb, src);
-}

Deleted: trunk/src/plugins/cmddialog/md5sum.cpp
===================================================================
--- trunk/src/plugins/cmddialog/md5sum.cpp	2006-02-12 13:43:28 UTC (rev 245)
+++ trunk/src/plugins/cmddialog/md5sum.cpp	2006-02-12 15:36:06 UTC (rev 246)
@@ -1,112 +0,0 @@
-#include &lt;fx.h&gt;
-#include &quot;../../cmddialog.h&quot;
-
-#include &lt;string&gt;
-#include &lt;fstream&gt;
-#include &lt;sstream&gt;
-using namespace std;
-
-#ifdef WIN32
-#define EXPORTFUNCTION extern &quot;C&quot; __declspec(dllexport)
-#else
-#define EXPORTFUNCTION extern &quot;C&quot;
-#endif
-
-
-#ifdef WIN32
-#define SEPARATOR &quot;\\&quot;
-#else
-#include &lt;dlfcn.h&gt;
-#define SEPARATOR &quot;/&quot;
-#endif
-
-class md5sum_cmddialog:public cmddialog
-{
-  FXDECLARE (md5sum_cmddialog) protected:
-
-    md5sum_cmddialog (const md5sum_cmddialog &amp;)
-    {
-    }
-    
-  private:
-
- 
-
-  public:
-
-    enum
-    {
-	ID_ENTER = cmddialog::ID_LAST,
-    };
-
-    md5sum_cmddialog ()
-    {
-    }
-    md5sum_cmddialog (FXWindow * w, filelist_base * fb, vector &lt; string &gt; src);
-
-
-    virtual int md5sum_cmddialog::exec (void)
-    {
-	
-    }
-
-
-    long md5sum_cmddialog::press (FXObject * sender, FXSelector, void *);
-
-};
-
-FXDEFMAP (md5sum_cmddialog) md5sum_cmddialogMap[] =
-{
-FXMAPFUNC (SEL_COMMAND, md5sum_cmddialog::ID_ENTER, md5sum_cmddialog::press),};
-FXIMPLEMENT (md5sum_cmddialog, cmddialog, md5sum_cmddialogMap, ARRAYNUMBER (md5sum_cmddialogMap)) 
-
-md5sum_cmddialog::md5sum_cmddialog (FXWindow * w, filelist_base * fb, vector &lt; string &gt; src):
-cmddialog (w, fb, src)
-{
-FILE *pipe;
-char readbuf[1024];
-
-    vector &lt; string &gt;::iterator iter;
-FXPacker *vv = new FXGroupBox (contents, &quot;info&quot;, LAYOUT_SIDE_TOP | FRAME_GROOVE | LAYOUT_FILL_X, 0, 0, 0, 0); 
-new FXLabel(vv,&quot;MD5SUM additional plugin - Mateusz Dworak - GPL &quot;);
-new FXSeparator(contents);
-    for (iter = src.begin (); iter != src.end(); iter++)
-    {
-  
-	string cmd=&quot;md5sum &quot;+*iter;
-	pipe = popen (cmd.c_str(), &quot;r&quot;);
-
-    	if (pipe != NULL)
-   	{
-		string line;
-		while (fgets (readbuf, sizeof (readbuf), pipe) != NULL)
-		{
-		std::stringstream parser (readbuf);
-		string md5;	
-		parser &gt;&gt; md5;
-		
-		new FXLabel(contents,iter-&gt;c_str());
-		FXTextField*textfield = new FXTextField (contents, 31);
-		textfield-&gt;setText(md5.c_str());
-		}
-	}
-
-    }
-
-
-
-}
-
-long md5sum_cmddialog::press (FXObject * sender, FXSelector, void *)
-{
-
- 
-
-}
-
-
-
-EXPORTFUNCTION cmddialog *get_cmddialog (FXWindow * w, filelist_base * fb, vector &lt; string &gt; src)
-{
-    return new md5sum_cmddialog (w, fb, src);
-}

Deleted: trunk/src/plugins/cmddialog/mkdir.cpp
===================================================================
--- trunk/src/plugins/cmddialog/mkdir.cpp	2006-02-12 13:43:28 UTC (rev 245)
+++ trunk/src/plugins/cmddialog/mkdir.cpp	2006-02-12 15:36:06 UTC (rev 246)
@@ -1,75 +0,0 @@
-#include &lt;fx.h&gt;
-#include &quot;../../cmddialog.h&quot;
-
-#include &lt;string&gt;
-using namespace std;
-
-#ifdef WIN32
-#define EXPORTFUNCTION extern &quot;C&quot; __declspec(dllexport)
-#else
-#define EXPORTFUNCTION extern &quot;C&quot;
-#endif
-
-
-class special_cmddialog:public cmddialog
-{
-  FXDECLARE (special_cmddialog) protected:
-
-    special_cmddialog (const special_cmddialog &amp;)
-    {
-    }
-  private:
-  FXTextField *text;
-
-  public:
-
-    enum
-    {
-	ID_ENTER = cmddialog::ID_LAST,
-    };
-
-    special_cmddialog ()
-    {
-    }
-    special_cmddialog (FXWindow * w, filelist_base * fb, vector &lt; string &gt; src);
-
-    virtual int special_cmddialog::exec (void)
-    {
-	string s = text-&gt;getText ().text ();
-	fb-&gt;mkdir (s, 493);
-    }
-
-
-    long special_cmddialog::press (FXObject * sender, FXSelector, void *);
-
-};
-
-FXDEFMAP (special_cmddialog) special_cmddialogMap[] =
-{
-FXMAPFUNC (SEL_COMMAND, special_cmddialog::ID_ENTER, special_cmddialog::press),};
-FXIMPLEMENT (special_cmddialog, cmddialog, special_cmddialogMap, ARRAYNUMBER (special_cmddialogMap)) 
-
-special_cmddialog::special_cmddialog (FXWindow * w, filelist_base * fb, vector &lt; string &gt; src):
-cmddialog (w, fb, src)
-{
-
-
-    text = new FXTextField (contents, 25, this, ID_ENTER);
-    text-&gt;setFocus ();
-
-}
-
-long special_cmddialog::press (FXObject * sender, FXSelector, void *)
-{
-
-    FXObject *target = (FXObject *) ok-&gt;getTarget ();
-    target-&gt;handle (ok, FXSEL (SEL_COMMAND, ID_COMMAND), NULL);
-
-}
-
-
-
-EXPORTFUNCTION cmddialog *get_cmddialog (FXWindow * w, filelist_base * fb, vector &lt; string &gt; src)
-{
-    return new special_cmddialog (w, fb, src);
-}

Deleted: trunk/src/plugins/cmddialog/rename.cpp
===================================================================
--- trunk/src/plugins/cmddialog/rename.cpp	2006-02-12 13:43:28 UTC (rev 245)
+++ trunk/src/plugins/cmddialog/rename.cpp	2006-02-12 15:36:06 UTC (rev 246)
@@ -1,124 +0,0 @@
-#include &lt;fx.h&gt;
-#include &quot;../../cmddialog.h&quot;
-
-#include &lt;string&gt;
-using namespace std;
-
-#ifdef WIN32
-#define EXPORTFUNCTION extern &quot;C&quot; __declspec(dllexport)
-#else
-#define EXPORTFUNCTION extern &quot;C&quot;
-#endif
-
-
-#ifdef WIN32
-#define SEPARATOR &quot;\\&quot;
-#else
-#include &lt;dlfcn.h&gt;
-#define SEPARATOR &quot;/&quot;
-#endif
-
-class rename_cmddialog:public cmddialog
-{
-  FXDECLARE (rename_cmddialog) protected:
-
-    rename_cmddialog (const rename_cmddialog &amp;)
-    {
-    }
-    
-  private:
-
-    vector &lt; FXTextField * &gt;vec;
-    string dir;  
-
-  public:
-
-    enum
-    {
-	ID_ENTER = cmddialog::ID_LAST,
-    };
-
-    rename_cmddialog ()
-    {
-    }
-    rename_cmddialog (FXWindow * w, filelist_base * fb, vector &lt; string &gt; src);
-
-
-    virtual int rename_cmddialog::exec (void)
-    {
-	int error = 0;
-	vector &lt; string &gt;::iterator iter;
-	int i=0;
-    	for (iter = src.begin (); iter != src.end(); iter++)
-    	{
-	    string newname = dir + SEPARATOR + vec[i]-&gt;getText ().text ();
-	    if (fb-&gt;rename (*iter, newname) == false)
-	    {
-		error = -1;
-		string err = &quot;can't rename &quot; + *iter + &quot; to &quot; + newname;
-
-		FXLabel *lab = new FXLabel (contents, err.c_str ());
-		lab-&gt;create ();
-		this-&gt;layout ();
-		this-&gt;resize (this-&gt;getWidth (), this-&gt;getHeight () + lab-&gt;getHeight ());
-
-	    }
-	i++;
-	}
-
-
-	return error;
-
-    }
-
-
-    long rename_cmddialog::press (FXObject * sender, FXSelector, void *);
-
-};
-
-FXDEFMAP (rename_cmddialog) rename_cmddialogMap[] =
-{
-FXMAPFUNC (SEL_COMMAND, rename_cmddialog::ID_ENTER, rename_cmddialog::press),};
-FXIMPLEMENT (rename_cmddialog, cmddialog, rename_cmddialogMap, ARRAYNUMBER (rename_cmddialogMap)) 
-
-rename_cmddialog::rename_cmddialog (FXWindow * w, filelist_base * fb, vector &lt; string &gt; src):
-cmddialog (w, fb, src)
-{
-
-
-    vector &lt; string &gt;::iterator iter;
-
-    for (iter = src.begin (); iter != src.end(); iter++)
-    {
-  
-
-	dir = FXFile::directory (iter-&gt;c_str ()).text ();
-	//fxmessage(dir.c_str());
-	//fxmessage(&quot;\n woho&quot;);
-	FXString name = FXFile::name (iter-&gt;c_str ());
-	new FXLabel (contents, name);
-	FXTextField *text = new FXTextField (contents, 25, this, ID_ENTER);
-	text-&gt;setFocus ();
-	text-&gt;setText (name);
-	vec.push_back (text);
-
-    }
-
-
-
-}
-
-long rename_cmddialog::press (FXObject * sender, FXSelector, void *)
-{
-
-    FXObject *target = (FXObject *) ok-&gt;getTarget ();
-    target-&gt;handle (ok, FXSEL (SEL_COMMAND, ID_COMMAND), NULL);
-
-}
-
-
-
-EXPORTFUNCTION cmddialog *get_cmddialog (FXWindow * w, filelist_base * fb, vector &lt; string &gt; src)
-{
-    return new rename_cmddialog (w, fb, src);
-}

Deleted: trunk/src/plugins/cmddialog/symlink.cpp
===================================================================
--- trunk/src/plugins/cmddialog/symlink.cpp	2006-02-12 13:43:28 UTC (rev 245)
+++ trunk/src/plugins/cmddialog/symlink.cpp	2006-02-12 15:36:06 UTC (rev 246)
@@ -1,129 +0,0 @@
-#include &lt;fx.h&gt;
-#include &quot;../../cmddialog.h&quot;
-
-#include &lt;string&gt;
-using namespace std;
-
-#ifdef WIN32
-#define EXPORTFUNCTION extern &quot;C&quot; __declspec(dllexport)
-#else
-#define EXPORTFUNCTION extern &quot;C&quot;
-#endif
-
-
-#ifdef WIN32
-#define SEPARATOR &quot;\\&quot;
-#else
-#include &lt;dlfcn.h&gt;
-#define SEPARATOR &quot;/&quot;
-#endif
-
-class symlink_cmddialog:public cmddialog
-{
-  FXDECLARE (symlink_cmddialog) protected:
-
-    symlink_cmddialog (const symlink_cmddialog &amp;)
-    {
-    }
-
-  private:
-  
-    vector &lt; FXTextField * &gt;vec;
-    string dir;
-    FXCheckButton *hardlink;
-
-  public:
-
-    enum
-    {
-	ID_ENTER = cmddialog::ID_LAST,
-    };
-
-    symlink_cmddialog ()
-    {
-    }
-    symlink_cmddialog (FXWindow * w, filelist_base * fb, vector &lt; string &gt; src);
-
-
-    virtual int symlink_cmddialog::exec (void)
-    {
-	int error = 0;
-	vector &lt; string &gt;::iterator iter;
-	int i=0;
-    	for (iter = src.begin (); iter != src.end(); iter++)
-    	{
-	    string newname =  vec[i]-&gt;getText ().text ();
-	    
-	    bool ret;
-	    if (hardlink-&gt;getCheck ())
-	    	ret=fb-&gt;hardlink (*iter, newname);
-	    else
-	        ret=fb-&gt;symlink (*iter, newname);	
-			
-	    if ( ret== false)
-	    {
-		error = -1;
-		string err = &quot;can't symlink &quot; + *iter + &quot; to &quot; + newname;
-
-		FXLabel *lab = new FXLabel (contents, err.c_str ());
-		lab-&gt;create ();
-		this-&gt;layout ();
-		this-&gt;resize (this-&gt;getWidth (), this-&gt;getHeight () + lab-&gt;getHeight ());
-
-	    }
-	i++;
-	}
-
-
-	return error;
-
-    }
-
-
-    long symlink_cmddialog::press (FXObject * sender, FXSelector, void *);
-
-};
-
-FXDEFMAP (symlink_cmddialog) symlink_cmddialogMap[] =
-{
-FXMAPFUNC (SEL_COMMAND, symlink_cmddialog::ID_ENTER, symlink_cmddialog::press),};
-FXIMPLEMENT (symlink_cmddialog, cmddialog, symlink_cmddialogMap, ARRAYNUMBER (symlink_cmddialogMap)) 
-
-symlink_cmddialog::symlink_cmddialog (FXWindow * w, filelist_base * fb, vector &lt; string &gt; src):
-cmddialog (w, fb, src)
-{
-
-
-    vector &lt; string &gt;::iterator iter;
-
-    for (iter = src.begin (); iter != src.end(); iter++)
-    {
-  
-
-	new FXLabel(contents,&quot;source: &quot;);
-	new FXLabel (contents, iter-&gt;c_str ());
-	new FXLabel(contents,&quot;link: &quot;);
-	FXTextField *text = new FXTextField (contents, 25, this, ID_ENTER);
-	text-&gt;setFocus ();
-	text-&gt;setText (iter-&gt;c_str ());
-	vec.push_back (text);
-
-    }
-
-hardlink = new FXCheckButton (contents, &quot;hardlink&quot;);
-
-}
-
-long symlink_cmddialog::press (FXObject * sender, FXSelector, void *)
-{
-
-    FXObject *target = (FXObject *) ok-&gt;getTarget ();
-    //target-&gt;handle (ok, FXSEL (SEL_COMMAND, ID_COMMAND), NULL);
-
-}
-
-
-EXPORTFUNCTION cmddialog *get_cmddialog (FXWindow * w, filelist_base * fb, vector &lt; string &gt; src)
-{
-    return new symlink_cmddialog (w, fb, src);
-}


Property changes on: trunk/src/plugins/filelist
___________________________________________________________________
Name: svn:ignore
   - .deps
.libs
Makefile

   + *~
*.cache
*LOG
*log
*.kdev*
*.lo
*.loT
*.o
*.status
*.swp
.deps
.libs
libtool
openspacerc
tags
Doxyfile
Makefile


Modified: trunk/src/plugins/filelist/Makefile.am
===================================================================
--- trunk/src/plugins/filelist/Makefile.am	2006-02-12 13:43:28 UTC (rev 245)
+++ trunk/src/plugins/filelist/Makefile.am	2006-02-12 15:36:06 UTC (rev 246)
@@ -1,14 +1,18 @@
-pkglib_LTLIBRARIES= libfilelistlocal.la  libfilelistsearch.la  libfilelistarchive.la libfilelistftp.la libfilelistsftp.la
+pkglib_LTLIBRARIES= libOSVfsLocal.la libOSVfsSearch.la libOSVfsArchive.la libOSVfsFtp.la   
 pkglibdir=$(libdir)/openspace/plugins/filelist
 INCLUDES = `WANT_FOX=&quot;1.4&quot; fox-config --cflags` `xml2-config  --cflags` 
 
-libfilelistlocal_la_LDFLAGS = `WANT_FOX=&quot;1.4&quot; fox-config --libs` `xml2-config  --libs`  
-libfilelistlocal_la_SOURCES =filelist_local.cpp filelist_local.h OSFXFile.cpp OSFXFile.h ../../thread_elem.cpp ../../thread_elem.h  ../../configure.h ../../sharedFunctions.cpp ../../sharedFunctions.h 
-libfilelistsearch_la_LDFLAGS = `WANT_FOX=1.4 fox-config --libs` `xml2-config  --libs`
-libfilelistsearch_la_SOURCES =filelist_search.cpp filelist_search.h OSFXFile.cpp OSFXFile.h ../../thread_elem.cpp ../../thread_elem.h  ../../configure.h 
-libfilelistarchive_la_LDFLAGS = `WANT_FOX=1.4 fox-config --libs` `xml2-config  --libs`
-libfilelistarchive_la_SOURCES =filelist_archive.cpp filelist_archive.h ../../thread_elem.cpp ../../thread_elem.h  ../../configure.h 
-libfilelistsftp_la_LDFLAGS = `WANT_FOX=1.4 fox-config --libs` `xml2-config  --libs`
-libfilelistsftp_la_SOURCES =filelist_sftp.cpp filelist_sftp.h  ../../thread_elem.cpp ../../thread_elem.h  ../../configure.h 
-libfilelistftp_la_LDFLAGS = `WANT_FOX=1.4 fox-config --libs` `xml2-config  --libs`
-libfilelistftp_la_SOURCES =filelist_ftp.cpp filelist_ftp.h  pftp.cpp pftp.h  ../../thread_elem.cpp ../../thread_elem.h ../../configure.h 
+libOSVfsLocal_la_LDFLAGS = `WANT_FOX=&quot;1.4&quot; fox-config --libs` `xml2-config  --libs`  
+libOSVfsLocal_la_SOURCES =OSVfsLocal.cpp OSVfsLocal.h OSFXFile.cpp OSFXFile.h ../../OSThreadExec.cpp ../../OSThreadExec.h  ../../OSConfigure.h ../../OSUtils.cpp ../../OSUtils.h 
+
+libOSVfsSearch_la_LDFLAGS = `WANT_FOX=1.4 fox-config --libs` `xml2-config  --libs`
+libOSVfsSearch_la_SOURCES =OSVfsSearch.cpp OSVfsSearch.h OSFXFile.cpp OSFXFile.h ../../OSThreadExec.cpp ../../OSThreadExec.h  ../../OSConfigure.h 
+libOSVfsArchive_la_LDFLAGS = `WANT_FOX=1.4 fox-config --libs` `xml2-config  --libs`
+libOSVfsArchive_la_SOURCES =OSVfsArchive.cpp OSVfsArchive.h ../../OSThreadExec.cpp ../../OSThreadExec.h  ../../OSConfigure.h 
+libOSVfsFtp_la_LDFLAGS = `WANT_FOX=1.4 fox-config --libs` `xml2-config  --libs`
+libOSVfsFtp_la_SOURCES =OSVfsFtp.cpp OSVfsFtp.h  pftp.cpp pftp.h  ../../OSThreadExec.cpp ../../OSThreadExec.h ../../OSConfigure.h 
+
+
+#libfilelistsftp_la_LDFLAGS = `WANT_FOX=1.4 fox-config --libs` `xml2-config  --libs`
+#libfilelistsftp_la_SOURCES =filelist_sftp.cpp filelist_sftp.h  ../../OSThreadExec.cpp ../../OSThreadExec.h  ../../OSConfigure.h 
+

Modified: trunk/src/plugins/filelist/Makefile.in
===================================================================
--- trunk/src/plugins/filelist/Makefile.in	2006-02-12 13:43:28 UTC (rev 245)
+++ trunk/src/plugins/filelist/Makefile.in	2006-02-12 15:36:06 UTC (rev 246)
@@ -1,8 +1,8 @@
-# Makefile.in generated by automake 1.9.5 from Makefile.am.
+# Makefile.in generated by automake 1.8.5 from Makefile.am.
 # @configure_input@
 
 # Copyright (C) 1994, 1995, 1996, 1997, 1998, 1999, 2000, 2001, 2002,
-# 2003, 2004, 2005  Free Software Foundation, Inc.
+# 2003, 2004  Free Software Foundation, Inc.
 # This Makefile.in is free software; the Free Software Foundation
 # gives unlimited permission to copy and/or distribute it,
 # with or without modifications, as long as this notice is preserved.
@@ -14,7 +14,7 @@
 
 @SET_MAKE@
 
-SOURCES = $(libfilelistarchive_la_SOURCES) $(libfilelistftp_la_SOURCES) $(libfilelistlocal_la_SOURCES) $(libfilelistsearch_la_SOURCES) $(libfilelistsftp_la_SOURCES)
+SOURCES = $(libOSVfsArchive_la_SOURCES) $(libOSVfsFtp_la_SOURCES) $(libOSVfsLocal_la_SOURCES) $(libOSVfsSearch_la_SOURCES)
 
 srcdir = @srcdir@
 top_srcdir = @top_srcdir@
@@ -35,7 +35,6 @@
 NORMAL_UNINSTALL = :
 PRE_UNINSTALL = :
 POST_UNINSTALL = :
-build_triplet = @build@
 host_triplet = @host@
 subdir = src/plugins/filelist
 DIST_COMMON = $(srcdir)/Makefile.am $(srcdir)/Makefile.in
@@ -43,60 +42,56 @@
 am__aclocal_m4_deps = $(top_srcdir)/configure.ac
 am__configure_deps = $(am__aclocal_m4_deps) $(CONFIGURE_DEPENDENCIES) \
 	$(ACLOCAL_M4)
-mkinstalldirs = $(install_sh) -d
+mkinstalldirs = $(mkdir_p)
 CONFIG_HEADER = $(top_builddir)/src/config.h
 CONFIG_CLEAN_FILES =
-am__vpath_adj_setup = srcdirstrip=`echo &quot;$(srcdir)&quot; | sed 's|.|.|g'`;
-am__vpath_adj = case $$p in \
-    $(srcdir)/*) f=`echo &quot;$$p&quot; | sed &quot;s|^$$srcdirstrip/||&quot;`;; \
-    *) f=$$p;; \
-  esac;
-am__strip_dir = `echo $$p | sed -e 's|^.*/||'`;
 am__installdirs = &quot;$(DESTDIR)$(pkglibdir)&quot;
 pkglibLTLIBRARIES_INSTALL = $(INSTALL)
 LTLIBRARIES = $(pkglib_LTLIBRARIES)
-libfilelistarchive_la_LIBADD =
-am_libfilelistarchive_la_OBJECTS = filelist_archive.lo thread_elem.lo
-libfilelistarchive_la_OBJECTS = $(am_libfilelistarchive_la_OBJECTS)
-libfilelistftp_la_LIBADD =
-am_libfilelistftp_la_OBJECTS = filelist_ftp.lo pftp.lo thread_elem.lo
-libfilelistftp_la_OBJECTS = $(am_libfilelistftp_la_OBJECTS)
-libfilelistlocal_la_LIBADD =
-am_libfilelistlocal_la_OBJECTS = filelist_local.lo OSFXFile.lo \
-	thread_elem.lo sharedFunctions.lo
-libfilelistlocal_la_OBJECTS = $(am_libfilelistlocal_la_OBJECTS)
-libfilelistsearch_la_LIBADD =
-am_libfilelistsearch_la_OBJECTS = filelist_search.lo OSFXFile.lo \
-	thread_elem.lo
-libfilelistsearch_la_OBJECTS = $(am_libfilelistsearch_la_OBJECTS)
-libfilelistsftp_la_LIBADD =
-am_libfilelistsftp_la_OBJECTS = filelist_sftp.lo thread_elem.lo
-libfilelistsftp_la_OBJECTS = $(am_libfilelistsftp_la_OBJECTS)
+libOSVfsArchive_la_LIBADD =
+am_libOSVfsArchive_la_OBJECTS = OSVfsArchive.lo OSThreadExec.lo
+libOSVfsArchive_la_OBJECTS = $(am_libOSVfsArchive_la_OBJECTS)
+libOSVfsFtp_la_LIBADD =
+am_libOSVfsFtp_la_OBJECTS = OSVfsFtp.lo pftp.lo OSThreadExec.lo
+libOSVfsFtp_la_OBJECTS = $(am_libOSVfsFtp_la_OBJECTS)
+libOSVfsLocal_la_LIBADD =
+am_libOSVfsLocal_la_OBJECTS = OSVfsLocal.lo OSFXFile.lo \
+	OSThreadExec.lo OSUtils.lo
+libOSVfsLocal_la_OBJECTS = $(am_libOSVfsLocal_la_OBJECTS)
+libOSVfsSearch_la_LIBADD =
+am_libOSVfsSearch_la_OBJECTS = OSVfsSearch.lo OSFXFile.lo \
+	OSThreadExec.lo
+libOSVfsSearch_la_OBJECTS = $(am_libOSVfsSearch_la_OBJECTS)
 DEFAULT_INCLUDES = -I. -I$(srcdir) -I$(top_builddir)/src
 depcomp = $(SHELL) $(top_srcdir)/depcomp
 am__depfiles_maybe = depfiles
<A HREF="https://lists.berlios.de/mailman/listinfo/openspace-svn">+ at AMDEP_TRUE</A>@DEP_FILES = ./$(DEPDIR)/OSFXFile.Plo \
<A HREF="https://lists.berlios.de/mailman/listinfo/openspace-svn">+ at AMDEP_TRUE</A>@	./$(DEPDIR)/OSThreadExec.Plo \
<A HREF="https://lists.berlios.de/mailman/listinfo/openspace-svn">+ at AMDEP_TRUE</A>@	./$(DEPDIR)/OSUtils.Plo \
<A HREF="https://lists.berlios.de/mailman/listinfo/openspace-svn">+ at AMDEP_TRUE</A>@	./$(DEPDIR)/OSVfsArchive.Plo \
<A HREF="https://lists.berlios.de/mailman/listinfo/openspace-svn">+ at AMDEP_TRUE</A>@	./$(DEPDIR)/OSVfsFtp.Plo \
<A HREF="https://lists.berlios.de/mailman/listinfo/openspace-svn">+ at AMDEP_TRUE</A>@	./$(DEPDIR)/OSVfsLocal.Plo \
<A HREF="https://lists.berlios.de/mailman/listinfo/openspace-svn">+ at AMDEP_TRUE</A>@	./$(DEPDIR)/OSVfsSearch.Plo ./$(DEPDIR)/pftp.Plo
 CXXCOMPILE = $(CXX) $(DEFS) $(DEFAULT_INCLUDES) $(INCLUDES) \
 	$(AM_CPPFLAGS) $(CPPFLAGS) $(AM_CXXFLAGS) $(CXXFLAGS)
-LTCXXCOMPILE = $(LIBTOOL) --tag=CXX --mode=compile $(CXX) $(DEFS) \
+LTCXXCOMPILE = $(LIBTOOL) --mode=compile $(CXX) $(DEFS) \
 	$(DEFAULT_INCLUDES) $(INCLUDES) $(AM_CPPFLAGS) $(CPPFLAGS) \
 	$(AM_CXXFLAGS) $(CXXFLAGS)
 CXXLD = $(CXX)
-CXXLINK = $(LIBTOOL) --tag=CXX --mode=link $(CXXLD) $(AM_CXXFLAGS) \
-	$(CXXFLAGS) $(AM_LDFLAGS) $(LDFLAGS) -o $@
+CXXLINK = $(LIBTOOL) --mode=link $(CXXLD) $(AM_CXXFLAGS) $(CXXFLAGS) \
+	$(AM_LDFLAGS) $(LDFLAGS) -o $@
 COMPILE = $(CC) $(DEFS) $(DEFAULT_INCLUDES) $(INCLUDES) $(AM_CPPFLAGS) \
 	$(CPPFLAGS) $(AM_CFLAGS) $(CFLAGS)
-LTCOMPILE = $(LIBTOOL) --tag=CC --mode=compile $(CC) $(DEFS) \
+LTCOMPILE = $(LIBTOOL) --mode=compile $(CC) $(DEFS) \
 	$(DEFAULT_INCLUDES) $(INCLUDES) $(AM_CPPFLAGS) $(CPPFLAGS) \
 	$(AM_CFLAGS) $(CFLAGS)
 CCLD = $(CC)
-LINK = $(LIBTOOL) --tag=CC --mode=link $(CCLD) $(AM_CFLAGS) $(CFLAGS) \
+LINK = $(LIBTOOL) --mode=link $(CCLD) $(AM_CFLAGS) $(CFLAGS) \
 	$(AM_LDFLAGS) $(LDFLAGS) -o $@
-SOURCES = $(libfilelistarchive_la_SOURCES) \
-	$(libfilelistftp_la_SOURCES) $(libfilelistlocal_la_SOURCES) \
-	$(libfilelistsearch_la_SOURCES) $(libfilelistsftp_la_SOURCES)
-DIST_SOURCES = $(libfilelistarchive_la_SOURCES) \
-	$(libfilelistftp_la_SOURCES) $(libfilelistlocal_la_SOURCES) \
-	$(libfilelistsearch_la_SOURCES) $(libfilelistsftp_la_SOURCES)
+SOURCES = $(libOSVfsArchive_la_SOURCES) $(libOSVfsFtp_la_SOURCES) \
+	$(libOSVfsLocal_la_SOURCES) $(libOSVfsSearch_la_SOURCES)
+DIST_SOURCES = $(libOSVfsArchive_la_SOURCES) $(libOSVfsFtp_la_SOURCES) \
+	$(libOSVfsLocal_la_SOURCES) $(libOSVfsSearch_la_SOURCES)
 ETAGS = etags
 CTAGS = ctags
 DISTFILES = $(DIST_COMMON) $(DIST_SOURCES) $(TEXINFOS) $(EXTRA_DIST)
@@ -169,8 +164,6 @@
 am__include = @am__include@
 am__leading_dot = @am__leading_dot@
 am__quote = @am__quote@
-am__tar = @am__tar@
-am__untar = @am__untar@
 bindir = @bindir@
 build = @build@
 build_alias = @build_alias@
@@ -199,18 +192,16 @@
 sharedstatedir = @sharedstatedir@
 sysconfdir = @sysconfdir@
 target_alias = @target_alias@
-pkglib_LTLIBRARIES = libfilelistlocal.la  libfilelistsearch.la  libfilelistarchive.la libfilelistftp.la libfilelistsftp.la
+pkglib_LTLIBRARIES = libOSVfsLocal.la libOSVfsSearch.la libOSVfsArchive.la libOSVfsFtp.la   
 INCLUDES = `WANT_FOX=&quot;1.4&quot; fox-config --cflags` `xml2-config  --cflags` 
-libfilelistlocal_la_LDFLAGS = `WANT_FOX=&quot;1.4&quot; fox-config --libs` `xml2-config  --libs`  
-libfilelistlocal_la_SOURCES = filelist_local.cpp filelist_local.h OSFXFile.cpp OSFXFile.h ../../thread_elem.cpp ../../thread_elem.h  ../../configure.h ../../sharedFunctions.cpp ../../sharedFunctions.h 
-libfilelistsearch_la_LDFLAGS = `WANT_FOX=1.4 fox-config --libs` `xml2-config  --libs`
-libfilelistsearch_la_SOURCES = filelist_search.cpp filelist_search.h OSFXFile.cpp OSFXFile.h ../../thread_elem.cpp ../../thread_elem.h  ../../configure.h 
-libfilelistarchive_la_LDFLAGS = `WANT_FOX=1.4 fox-config --libs` `xml2-config  --libs`
-libfilelistarchive_la_SOURCES = filelist_archive.cpp filelist_archive.h ../../thread_elem.cpp ../../thread_elem.h  ../../configure.h 
-libfilelistsftp_la_LDFLAGS = `WANT_FOX=1.4 fox-config --libs` `xml2-config  --libs`
-libfilelistsftp_la_SOURCES = filelist_sftp.cpp filelist_sftp.h  ../../thread_elem.cpp ../../thread_elem.h  ../../configure.h 
-libfilelistftp_la_LDFLAGS = `WANT_FOX=1.4 fox-config --libs` `xml2-config  --libs`
-libfilelistftp_la_SOURCES = filelist_ftp.cpp filelist_ftp.h  pftp.cpp pftp.h  ../../thread_elem.cpp ../../thread_elem.h ../../configure.h 
+libOSVfsLocal_la_LDFLAGS = `WANT_FOX=&quot;1.4&quot; fox-config --libs` `xml2-config  --libs`  
+libOSVfsLocal_la_SOURCES = OSVfsLocal.cpp OSVfsLocal.h OSFXFile.cpp OSFXFile.h ../../OSThreadExec.cpp ../../OSThreadExec.h  ../../OSConfigure.h ../../OSUtils.cpp ../../OSUtils.h 
+libOSVfsSearch_la_LDFLAGS = `WANT_FOX=1.4 fox-config --libs` `xml2-config  --libs`
+libOSVfsSearch_la_SOURCES = OSVfsSearch.cpp OSVfsSearch.h OSFXFile.cpp OSFXFile.h ../../OSThreadExec.cpp ../../OSThreadExec.h  ../../OSConfigure.h 
+libOSVfsArchive_la_LDFLAGS = `WANT_FOX=1.4 fox-config --libs` `xml2-config  --libs`
+libOSVfsArchive_la_SOURCES = OSVfsArchive.cpp OSVfsArchive.h ../../OSThreadExec.cpp ../../OSThreadExec.h  ../../OSConfigure.h 
+libOSVfsFtp_la_LDFLAGS = `WANT_FOX=1.4 fox-config --libs` `xml2-config  --libs`
+libOSVfsFtp_la_SOURCES = OSVfsFtp.cpp OSVfsFtp.h  pftp.cpp pftp.h  ../../OSThreadExec.cpp ../../OSThreadExec.h ../../OSConfigure.h 
 all: all-am
 
 .SUFFIXES:
@@ -249,7 +240,7 @@
 	test -z &quot;$(pkglibdir)&quot; || $(mkdir_p) &quot;$(DESTDIR)$(pkglibdir)&quot;
 	@list='$(pkglib_LTLIBRARIES)'; for p in $$list; do \
 	  if test -f $$p; then \
-	    f=$(am__strip_dir) \
+	    f=&quot;`echo $$p | sed -e 's|^.*/||'`&quot;; \
 	    echo &quot; $(LIBTOOL) --mode=install $(pkglibLTLIBRARIES_INSTALL) $(INSTALL_STRIP_FLAG) '$$p' '$(DESTDIR)$(pkglibdir)/$$f'&quot;; \
 	    $(LIBTOOL) --mode=install $(pkglibLTLIBRARIES_INSTALL) $(INSTALL_STRIP_FLAG) &quot;$$p&quot; &quot;$(DESTDIR)$(pkglibdir)/$$f&quot;; \
 	  else :; fi; \
@@ -257,8 +248,8 @@
 
 uninstall-pkglibLTLIBRARIES:
 	@$(NORMAL_UNINSTALL)
-	@set -x; list='$(pkglib_LTLIBRARIES)'; for p in $$list; do \
-	  p=$(am__strip_dir) \
+	@list='$(pkglib_LTLIBRARIES)'; for p in $$list; do \
+	    p=&quot;`echo $$p | sed -e 's|^.*/||'`&quot;; \
 	  echo &quot; $(LIBTOOL) --mode=uninstall rm -f '$(DESTDIR)$(pkglibdir)/$$p'&quot;; \
 	  $(LIBTOOL) --mode=uninstall rm -f &quot;$(DESTDIR)$(pkglibdir)/$$p&quot;; \
 	done
@@ -271,16 +262,14 @@
 	  echo &quot;rm -f \&quot;$${dir}/so_locations\&quot;&quot;; \
 	  rm -f &quot;$${dir}/so_locations&quot;; \
 	done
-libfilelistarchive.la: $(libfilelistarchive_la_OBJECTS) $(libfilelistarchive_la_DEPENDENCIES) 
-	$(CXXLINK) -rpath $(pkglibdir) $(libfilelistarchive_la_LDFLAGS) $(libfilelistarchive_la_OBJECTS) $(libfilelistarchive_la_LIBADD) $(LIBS)
-libfilelistftp.la: $(libfilelistftp_la_OBJECTS) $(libfilelistftp_la_DEPENDENCIES) 
-	$(CXXLINK) -rpath $(pkglibdir) $(libfilelistftp_la_LDFLAGS) $(libfilelistftp_la_OBJECTS) $(libfilelistftp_la_LIBADD) $(LIBS)
-libfilelistlocal.la: $(libfilelistlocal_la_OBJECTS) $(libfilelistlocal_la_DEPENDENCIES) 
-	$(CXXLINK) -rpath $(pkglibdir) $(libfilelistlocal_la_LDFLAGS) $(libfilelistlocal_la_OBJECTS) $(libfilelistlocal_la_LIBADD) $(LIBS)
-libfilelistsearch.la: $(libfilelistsearch_la_OBJECTS) $(libfilelistsearch_la_DEPENDENCIES) 
-	$(CXXLINK) -rpath $(pkglibdir) $(libfilelistsearch_la_LDFLAGS) $(libfilelistsearch_la_OBJECTS) $(libfilelistsearch_la_LIBADD) $(LIBS)
-libfilelistsftp.la: $(libfilelistsftp_la_OBJECTS) $(libfilelistsftp_la_DEPENDENCIES) 
-	$(CXXLINK) -rpath $(pkglibdir) $(libfilelistsftp_la_LDFLAGS) $(libfilelistsftp_la_OBJECTS) $(libfilelistsftp_la_LIBADD) $(LIBS)
+libOSVfsArchive.la: $(libOSVfsArchive_la_OBJECTS) $(libOSVfsArchive_la_DEPENDENCIES) 
+	$(CXXLINK) -rpath $(pkglibdir) $(libOSVfsArchive_la_LDFLAGS) $(libOSVfsArchive_la_OBJECTS) $(libOSVfsArchive_la_LIBADD) $(LIBS)
+libOSVfsFtp.la: $(libOSVfsFtp_la_OBJECTS) $(libOSVfsFtp_la_DEPENDENCIES) 
+	$(CXXLINK) -rpath $(pkglibdir) $(libOSVfsFtp_la_LDFLAGS) $(libOSVfsFtp_la_OBJECTS) $(libOSVfsFtp_la_LIBADD) $(LIBS)
+libOSVfsLocal.la: $(libOSVfsLocal_la_OBJECTS) $(libOSVfsLocal_la_DEPENDENCIES) 
+	$(CXXLINK) -rpath $(pkglibdir) $(libOSVfsLocal_la_LDFLAGS) $(libOSVfsLocal_la_OBJECTS) $(libOSVfsLocal_la_LIBADD) $(LIBS)
+libOSVfsSearch.la: $(libOSVfsSearch_la_OBJECTS) $(libOSVfsSearch_la_DEPENDENCIES) 
+	$(CXXLINK) -rpath $(pkglibdir) $(libOSVfsSearch_la_LDFLAGS) $(libOSVfsSearch_la_OBJECTS) $(libOSVfsSearch_la_LIBADD) $(LIBS)
 
 mostlyclean-compile:
 	-rm -f *.$(OBJEXT)
@@ -289,50 +278,86 @@
 	-rm -f *.tab.c
 
 @AMDEP_TRUE@@am__include@ @<A HREF="https://lists.berlios.de/mailman/listinfo/openspace-svn">am__quote at .</A>/$(DEPDIR)/<A HREF="https://lists.berlios.de/mailman/listinfo/openspace-svn">OSFXFile.Plo at am__quote</A>@
<A HREF="https://lists.berlios.de/mailman/listinfo/openspace-svn">- at AMDEP_TRUE</A>@@am__include@ @<A HREF="https://lists.berlios.de/mailman/listinfo/openspace-svn">am__quote at .</A>/$(DEPDIR)/<A HREF="https://lists.berlios.de/mailman/listinfo/openspace-svn">filelist_archive.Plo at am__quote</A>@
<A HREF="https://lists.berlios.de/mailman/listinfo/openspace-svn">- at AMDEP_TRUE</A>@@am__include@ @<A HREF="https://lists.berlios.de/mailman/listinfo/openspace-svn">am__quote at .</A>/$(DEPDIR)/<A HREF="https://lists.berlios.de/mailman/listinfo/openspace-svn">filelist_ftp.Plo at am__quote</A>@
<A HREF="https://lists.berlios.de/mailman/listinfo/openspace-svn">- at AMDEP_TRUE</A>@@am__include@ @<A HREF="https://lists.berlios.de/mailman/listinfo/openspace-svn">am__quote at .</A>/$(DEPDIR)/<A HREF="https://lists.berlios.de/mailman/listinfo/openspace-svn">filelist_local.Plo at am__quote</A>@
<A HREF="https://lists.berlios.de/mailman/listinfo/openspace-svn">- at AMDEP_TRUE</A>@@am__include@ @<A HREF="https://lists.berlios.de/mailman/listinfo/openspace-svn">am__quote at .</A>/$(DEPDIR)/<A HREF="https://lists.berlios.de/mailman/listinfo/openspace-svn">filelist_search.Plo at am__quote</A>@
<A HREF="https://lists.berlios.de/mailman/listinfo/openspace-svn">- at AMDEP_TRUE</A>@@am__include@ @<A HREF="https://lists.berlios.de/mailman/listinfo/openspace-svn">am__quote at .</A>/$(DEPDIR)/<A HREF="https://lists.berlios.de/mailman/listinfo/openspace-svn">filelist_sftp.Plo at am__quote</A>@
<A HREF="https://lists.berlios.de/mailman/listinfo/openspace-svn">+ at AMDEP_TRUE</A>@@am__include@ @<A HREF="https://lists.berlios.de/mailman/listinfo/openspace-svn">am__quote at .</A>/$(DEPDIR)/<A HREF="https://lists.berlios.de/mailman/listinfo/openspace-svn">OSThreadExec.Plo at am__quote</A>@
<A HREF="https://lists.berlios.de/mailman/listinfo/openspace-svn">+ at AMDEP_TRUE</A>@@am__include@ @<A HREF="https://lists.berlios.de/mailman/listinfo/openspace-svn">am__quote at .</A>/$(DEPDIR)/<A HREF="https://lists.berlios.de/mailman/listinfo/openspace-svn">OSUtils.Plo at am__quote</A>@
<A HREF="https://lists.berlios.de/mailman/listinfo/openspace-svn">+ at AMDEP_TRUE</A>@@am__include@ @<A HREF="https://lists.berlios.de/mailman/listinfo/openspace-svn">am__quote at .</A>/$(DEPDIR)/<A HREF="https://lists.berlios.de/mailman/listinfo/openspace-svn">OSVfsArchive.Plo at am__quote</A>@
<A HREF="https://lists.berlios.de/mailman/listinfo/openspace-svn">+ at AMDEP_TRUE</A>@@am__include@ @<A HREF="https://lists.berlios.de/mailman/listinfo/openspace-svn">am__quote at .</A>/$(DEPDIR)/<A HREF="https://lists.berlios.de/mailman/listinfo/openspace-svn">OSVfsFtp.Plo at am__quote</A>@
<A HREF="https://lists.berlios.de/mailman/listinfo/openspace-svn">+ at AMDEP_TRUE</A>@@am__include@ @<A HREF="https://lists.berlios.de/mailman/listinfo/openspace-svn">am__quote at .</A>/$(DEPDIR)/<A HREF="https://lists.berlios.de/mailman/listinfo/openspace-svn">OSVfsLocal.Plo at am__quote</A>@
<A HREF="https://lists.berlios.de/mailman/listinfo/openspace-svn">+ at AMDEP_TRUE</A>@@am__include@ @<A HREF="https://lists.berlios.de/mailman/listinfo/openspace-svn">am__quote at .</A>/$(DEPDIR)/<A HREF="https://lists.berlios.de/mailman/listinfo/openspace-svn">OSVfsSearch.Plo at am__quote</A>@
 @AMDEP_TRUE@@am__include@ @<A HREF="https://lists.berlios.de/mailman/listinfo/openspace-svn">am__quote at .</A>/$(DEPDIR)/<A HREF="https://lists.berlios.de/mailman/listinfo/openspace-svn">pftp.Plo at am__quote</A>@
<A HREF="https://lists.berlios.de/mailman/listinfo/openspace-svn">- at AMDEP_TRUE</A>@@am__include@ @<A HREF="https://lists.berlios.de/mailman/listinfo/openspace-svn">am__quote at .</A>/$(DEPDIR)/<A HREF="https://lists.berlios.de/mailman/listinfo/openspace-svn">sharedFunctions.Plo at am__quote</A>@
<A HREF="https://lists.berlios.de/mailman/listinfo/openspace-svn">- at AMDEP_TRUE</A>@@am__include@ @<A HREF="https://lists.berlios.de/mailman/listinfo/openspace-svn">am__quote at .</A>/$(DEPDIR)/<A HREF="https://lists.berlios.de/mailman/listinfo/openspace-svn">thread_elem.Plo at am__quote</A>@
 
 .cpp.o:
 @am__fastdepCXX_TRUE@	if $(CXXCOMPILE) -MT $@ -MD -MP -MF &quot;$(DEPDIR)/$*.Tpo&quot; -c -o $@ $&lt;; \
 @am__fastdepCXX_TRUE@	then mv -f &quot;$(DEPDIR)/$*.Tpo&quot; &quot;$(DEPDIR)/$*.Po&quot;; else rm -f &quot;$(DEPDIR)/$*.Tpo&quot;; exit 1; fi
 @AMDEP_TRUE@@am__fastdepCXX_FALSE@	source='$&lt;' object='$@' libtool=no @AMDEPBACKSLASH@
<A HREF="https://lists.berlios.de/mailman/listinfo/openspace-svn">- at AMDEP_TRUE</A>@@am__fastdepCXX_FALSE@	DEPDIR=$(DEPDIR) $(CXXDEPMODE) $(depcomp) @AMDEPBACKSLASH@
<A HREF="https://lists.berlios.de/mailman/listinfo/openspace-svn">+ at AMDEP_TRUE</A>@@am__fastdepCXX_FALSE@	depfile='$(DEPDIR)/$*.Po' tmpdepfile='$(DEPDIR)/$*.TPo' @AMDEPBACKSLASH@
<A HREF="https://lists.berlios.de/mailman/listinfo/openspace-svn">+ at AMDEP_TRUE</A>@@am__fastdepCXX_FALSE@	$(CXXDEPMODE) $(depcomp) @AMDEPBACKSLASH@
 @am__fastdepCXX_FALSE@	$(CXXCOMPILE) -c -o $@ $&lt;
 
 .cpp.obj:
 @am__fastdepCXX_TRUE@	if $(CXXCOMPILE) -MT $@ -MD -MP -MF &quot;$(DEPDIR)/$*.Tpo&quot; -c -o $@ `$(CYGPATH_W) '$&lt;'`; \
 @am__fastdepCXX_TRUE@	then mv -f &quot;$(DEPDIR)/$*.Tpo&quot; &quot;$(DEPDIR)/$*.Po&quot;; else rm -f &quot;$(DEPDIR)/$*.Tpo&quot;; exit 1; fi
 @AMDEP_TRUE@@am__fastdepCXX_FALSE@	source='$&lt;' object='$@' libtool=no @AMDEPBACKSLASH@
<A HREF="https://lists.berlios.de/mailman/listinfo/openspace-svn">- at AMDEP_TRUE</A>@@am__fastdepCXX_FALSE@	DEPDIR=$(DEPDIR) $(CXXDEPMODE) $(depcomp) @AMDEPBACKSLASH@
<A HREF="https://lists.berlios.de/mailman/listinfo/openspace-svn">+ at AMDEP_TRUE</A>@@am__fastdepCXX_FALSE@	depfile='$(DEPDIR)/$*.Po' tmpdepfile='$(DEPDIR)/$*.TPo' @AMDEPBACKSLASH@
<A HREF="https://lists.berlios.de/mailman/listinfo/openspace-svn">+ at AMDEP_TRUE</A>@@am__fastdepCXX_FALSE@	$(CXXDEPMODE) $(depcomp) @AMDEPBACKSLASH@
 @am__fastdepCXX_FALSE@	$(CXXCOMPILE) -c -o $@ `$(CYGPATH_W) '$&lt;'`
 
 .cpp.lo:
 @am__fastdepCXX_TRUE@	if $(LTCXXCOMPILE) -MT $@ -MD -MP -MF &quot;$(DEPDIR)/$*.Tpo&quot; -c -o $@ $&lt;; \
 @am__fastdepCXX_TRUE@	then mv -f &quot;$(DEPDIR)/$*.Tpo&quot; &quot;$(DEPDIR)/$*.Plo&quot;; else rm -f &quot;$(DEPDIR)/$*.Tpo&quot;; exit 1; fi
 @AMDEP_TRUE@@am__fastdepCXX_FALSE@	source='$&lt;' object='$@' libtool=yes @AMDEPBACKSLASH@
<A HREF="https://lists.berlios.de/mailman/listinfo/openspace-svn">- at AMDEP_TRUE</A>@@am__fastdepCXX_FALSE@	DEPDIR=$(DEPDIR) $(CXXDEPMODE) $(depcomp) @AMDEPBACKSLASH@
<A HREF="https://lists.berlios.de/mailman/listinfo/openspace-svn">+ at AMDEP_TRUE</A>@@am__fastdepCXX_FALSE@	depfile='$(DEPDIR)/$*.Plo' tmpdepfile='$(DEPDIR)/$*.TPlo' @AMDEPBACKSLASH@
<A HREF="https://lists.berlios.de/mailman/listinfo/openspace-svn">+ at AMDEP_TRUE</A>@@am__fastdepCXX_FALSE@	$(CXXDEPMODE) $(depcomp) @AMDEPBACKSLASH@
 @am__fastdepCXX_FALSE@	$(LTCXXCOMPILE) -c -o $@ $&lt;
 
-thread_elem.lo: ../../thread_elem.cpp
<A HREF="https://lists.berlios.de/mailman/listinfo/openspace-svn">- at am__fastdepCXX_TRUE</A>@	if $(LIBTOOL) --tag=CXX --mode=compile $(CXX) $(DEFS) $(DEFAULT_INCLUDES) $(INCLUDES) $(AM_CPPFLAGS) $(CPPFLAGS) $(AM_CXXFLAGS) $(CXXFLAGS) -MT thread_elem.lo -MD -MP -MF &quot;$(DEPDIR)/thread_elem.Tpo&quot; -c -o thread_elem.lo `test -f '../../thread_elem.cpp' || echo '$(srcdir)/'`../../thread_elem.cpp; \
<A HREF="https://lists.berlios.de/mailman/listinfo/openspace-svn">- at am__fastdepCXX_TRUE</A>@	then mv -f &quot;$(DEPDIR)/thread_elem.Tpo&quot; &quot;$(DEPDIR)/thread_elem.Plo&quot;; else rm -f &quot;$(DEPDIR)/thread_elem.Tpo&quot;; exit 1; fi
<A HREF="https://lists.berlios.de/mailman/listinfo/openspace-svn">- at AMDEP_TRUE</A>@@am__fastdepCXX_FALSE@	source='../../thread_elem.cpp' object='thread_elem.lo' libtool=yes @AMDEPBACKSLASH@
<A HREF="https://lists.berlios.de/mailman/listinfo/openspace-svn">- at AMDEP_TRUE</A>@@am__fastdepCXX_FALSE@	DEPDIR=$(DEPDIR) $(CXXDEPMODE) $(depcomp) @AMDEPBACKSLASH@
<A HREF="https://lists.berlios.de/mailman/listinfo/openspace-svn">- at am__fastdepCXX_FALSE</A>@	$(LIBTOOL) --tag=CXX --mode=compile $(CXX) $(DEFS) $(DEFAULT_INCLUDES) $(INCLUDES) $(AM_CPPFLAGS) $(CPPFLAGS) $(AM_CXXFLAGS) $(CXXFLAGS) -c -o thread_elem.lo `test -f '../../thread_elem.cpp' || echo '$(srcdir)/'`../../thread_elem.cpp
+OSThreadExec.o: ../../OSThreadExec.cpp
<A HREF="https://lists.berlios.de/mailman/listinfo/openspace-svn">+ at am__fastdepCXX_TRUE</A>@	if $(CXX) $(DEFS) $(DEFAULT_INCLUDES) $(INCLUDES) $(AM_CPPFLAGS) $(CPPFLAGS) $(AM_CXXFLAGS) $(CXXFLAGS) -MT OSThreadExec.o -MD -MP -MF &quot;$(DEPDIR)/OSThreadExec.Tpo&quot; -c -o OSThreadExec.o `test -f '../../OSThreadExec.cpp' || echo '$(srcdir)/'`../../OSThreadExec.cpp; \
<A HREF="https://lists.berlios.de/mailman/listinfo/openspace-svn">+ at am__fastdepCXX_TRUE</A>@	then mv -f &quot;$(DEPDIR)/OSThreadExec.Tpo&quot; &quot;$(DEPDIR)/OSThreadExec.Po&quot;; else rm -f &quot;$(DEPDIR)/OSThreadExec.Tpo&quot;; exit 1; fi
<A HREF="https://lists.berlios.de/mailman/listinfo/openspace-svn">+ at AMDEP_TRUE</A>@@am__fastdepCXX_FALSE@	source='../../OSThreadExec.cpp' object='OSThreadExec.o' libtool=no @AMDEPBACKSLASH@
<A HREF="https://lists.berlios.de/mailman/listinfo/openspace-svn">+ at AMDEP_TRUE</A>@@am__fastdepCXX_FALSE@	depfile='$(DEPDIR)/OSThreadExec.Po' tmpdepfile='$(DEPDIR)/OSThreadExec.TPo' @AMDEPBACKSLASH@
<A HREF="https://lists.berlios.de/mailman/listinfo/openspace-svn">+ at AMDEP_TRUE</A>@@am__fastdepCXX_FALSE@	$(CXXDEPMODE) $(depcomp) @AMDEPBACKSLASH@
<A HREF="https://lists.berlios.de/mailman/listinfo/openspace-svn">+ at am__fastdepCXX_FALSE</A>@	$(CXX) $(DEFS) $(DEFAULT_INCLUDES) $(INCLUDES) $(AM_CPPFLAGS) $(CPPFLAGS) $(AM_CXXFLAGS) $(CXXFLAGS) -c -o OSThreadExec.o `test -f '../../OSThreadExec.cpp' || echo '$(srcdir)/'`../../OSThreadExec.cpp
 
-sharedFunctions.lo: ../../sharedFunctions.cpp
<A HREF="https://lists.berlios.de/mailman/listinfo/openspace-svn">- at am__fastdepCXX_TRUE</A>@	if $(LIBTOOL) --tag=CXX --mode=compile $(CXX) $(DEFS) $(DEFAULT_INCLUDES) $(INCLUDES) $(AM_CPPFLAGS) $(CPPFLAGS) $(AM_CXXFLAGS) $(CXXFLAGS) -MT sharedFunctions.lo -MD -MP -MF &quot;$(DEPDIR)/sharedFunctions.Tpo&quot; -c -o sharedFunctions.lo `test -f '../../sharedFunctions.cpp' || echo '$(srcdir)/'`../../sharedFunctions.cpp; \
<A HREF="https://lists.berlios.de/mailman/listinfo/openspace-svn">- at am__fastdepCXX_TRUE</A>@	then mv -f &quot;$(DEPDIR)/sharedFunctions.Tpo&quot; &quot;$(DEPDIR)/sharedFunctions.Plo&quot;; else rm -f &quot;$(DEPDIR)/sharedFunctions.Tpo&quot;; exit 1; fi
<A HREF="https://lists.berlios.de/mailman/listinfo/openspace-svn">- at AMDEP_TRUE</A>@@am__fastdepCXX_FALSE@	source='../../sharedFunctions.cpp' object='sharedFunctions.lo' libtool=yes @AMDEPBACKSLASH@
<A HREF="https://lists.berlios.de/mailman/listinfo/openspace-svn">- at AMDEP_TRUE</A>@@am__fastdepCXX_FALSE@	DEPDIR=$(DEPDIR) $(CXXDEPMODE) $(depcomp) @AMDEPBACKSLASH@
<A HREF="https://lists.berlios.de/mailman/listinfo/openspace-svn">- at am__fastdepCXX_FALSE</A>@	$(LIBTOOL) --tag=CXX --mode=compile $(CXX) $(DEFS) $(DEFAULT_INCLUDES) $(INCLUDES) $(AM_CPPFLAGS) $(CPPFLAGS) $(AM_CXXFLAGS) $(CXXFLAGS) -c -o sharedFunctions.lo `test -f '../../sharedFunctions.cpp' || echo '$(srcdir)/'`../../sharedFunctions.cpp
+OSThreadExec.obj: ../../OSThreadExec.cpp
<A HREF="https://lists.berlios.de/mailman/listinfo/openspace-svn">+ at am__fastdepCXX_TRUE</A>@	if $(CXX) $(DEFS) $(DEFAULT_INCLUDES) $(INCLUDES) $(AM_CPPFLAGS) $(CPPFLAGS) $(AM_CXXFLAGS) $(CXXFLAGS) -MT OSThreadExec.obj -MD -MP -MF &quot;$(DEPDIR)/OSThreadExec.Tpo&quot; -c -o OSThreadExec.obj `if test -f '../../OSThreadExec.cpp'; then $(CYGPATH_W) '../../OSThreadExec.cpp'; else $(CYGPATH_W) '$(srcdir)/../../OSThreadExec.cpp'; fi`; \
<A HREF="https://lists.berlios.de/mailman/listinfo/openspace-svn">+ at am__fastdepCXX_TRUE</A>@	then mv -f &quot;$(DEPDIR)/OSThreadExec.Tpo&quot; &quot;$(DEPDIR)/OSThreadExec.Po&quot;; else rm -f &quot;$(DEPDIR)/OSThreadExec.Tpo&quot;; exit 1; fi
<A HREF="https://lists.berlios.de/mailman/listinfo/openspace-svn">+ at AMDEP_TRUE</A>@@am__fastdepCXX_FALSE@	source='../../OSThreadExec.cpp' object='OSThreadExec.obj' libtool=no @AMDEPBACKSLASH@
<A HREF="https://lists.berlios.de/mailman/listinfo/openspace-svn">+ at AMDEP_TRUE</A>@@am__fastdepCXX_FALSE@	depfile='$(DEPDIR)/OSThreadExec.Po' tmpdepfile='$(DEPDIR)/OSThreadExec.TPo' @AMDEPBACKSLASH@
<A HREF="https://lists.berlios.de/mailman/listinfo/openspace-svn">+ at AMDEP_TRUE</A>@@am__fastdepCXX_FALSE@	$(CXXDEPMODE) $(depcomp) @AMDEPBACKSLASH@
<A HREF="https://lists.berlios.de/mailman/listinfo/openspace-svn">+ at am__fastdepCXX_FALSE</A>@	$(CXX) $(DEFS) $(DEFAULT_INCLUDES) $(INCLUDES) $(AM_CPPFLAGS) $(CPPFLAGS) $(AM_CXXFLAGS) $(CXXFLAGS) -c -o OSThreadExec.obj `if test -f '../../OSThreadExec.cpp'; then $(CYGPATH_W) '../../OSThreadExec.cpp'; else $(CYGPATH_W) '$(srcdir)/../../OSThreadExec.cpp'; fi`
 
+OSThreadExec.lo: ../../OSThreadExec.cpp
<A HREF="https://lists.berlios.de/mailman/listinfo/openspace-svn">+ at am__fastdepCXX_TRUE</A>@	if $(LIBTOOL) --mode=compile $(CXX) $(DEFS) $(DEFAULT_INCLUDES) $(INCLUDES) $(AM_CPPFLAGS) $(CPPFLAGS) $(AM_CXXFLAGS) $(CXXFLAGS) -MT OSThreadExec.lo -MD -MP -MF &quot;$(DEPDIR)/OSThreadExec.Tpo&quot; -c -o OSThreadExec.lo `test -f '../../OSThreadExec.cpp' || echo '$(srcdir)/'`../../OSThreadExec.cpp; \
<A HREF="https://lists.berlios.de/mailman/listinfo/openspace-svn">+ at am__fastdepCXX_TRUE</A>@	then mv -f &quot;$(DEPDIR)/OSThreadExec.Tpo&quot; &quot;$(DEPDIR)/OSThreadExec.Plo&quot;; else rm -f &quot;$(DEPDIR)/OSThreadExec.Tpo&quot;; exit 1; fi
<A HREF="https://lists.berlios.de/mailman/listinfo/openspace-svn">+ at AMDEP_TRUE</A>@@am__fastdepCXX_FALSE@	source='../../OSThreadExec.cpp' object='OSThreadExec.lo' libtool=yes @AMDEPBACKSLASH@
<A HREF="https://lists.berlios.de/mailman/listinfo/openspace-svn">+ at AMDEP_TRUE</A>@@am__fastdepCXX_FALSE@	depfile='$(DEPDIR)/OSThreadExec.Plo' tmpdepfile='$(DEPDIR)/OSThreadExec.TPlo' @AMDEPBACKSLASH@
<A HREF="https://lists.berlios.de/mailman/listinfo/openspace-svn">+ at AMDEP_TRUE</A>@@am__fastdepCXX_FALSE@	$(CXXDEPMODE) $(depcomp) @AMDEPBACKSLASH@
<A HREF="https://lists.berlios.de/mailman/listinfo/openspace-svn">+ at am__fastdepCXX_FALSE</A>@	$(LIBTOOL) --mode=compile $(CXX) $(DEFS) $(DEFAULT_INCLUDES) $(INCLUDES) $(AM_CPPFLAGS) $(CPPFLAGS) $(AM_CXXFLAGS) $(CXXFLAGS) -c -o OSThreadExec.lo `test -f '../../OSThreadExec.cpp' || echo '$(srcdir)/'`../../OSThreadExec.cpp
+
+OSUtils.o: ../../OSUtils.cpp
<A HREF="https://lists.berlios.de/mailman/listinfo/openspace-svn">+ at am__fastdepCXX_TRUE</A>@	if $(CXX) $(DEFS) $(DEFAULT_INCLUDES) $(INCLUDES) $(AM_CPPFLAGS) $(CPPFLAGS) $(AM_CXXFLAGS) $(CXXFLAGS) -MT OSUtils.o -MD -MP -MF &quot;$(DEPDIR)/OSUtils.Tpo&quot; -c -o OSUtils.o `test -f '../../OSUtils.cpp' || echo '$(srcdir)/'`../../OSUtils.cpp; \
<A HREF="https://lists.berlios.de/mailman/listinfo/openspace-svn">+ at am__fastdepCXX_TRUE</A>@	then mv -f &quot;$(DEPDIR)/OSUtils.Tpo&quot; &quot;$(DEPDIR)/OSUtils.Po&quot;; else rm -f &quot;$(DEPDIR)/OSUtils.Tpo&quot;; exit 1; fi
<A HREF="https://lists.berlios.de/mailman/listinfo/openspace-svn">+ at AMDEP_TRUE</A>@@am__fastdepCXX_FALSE@	source='../../OSUtils.cpp' object='OSUtils.o' libtool=no @AMDEPBACKSLASH@
<A HREF="https://lists.berlios.de/mailman/listinfo/openspace-svn">+ at AMDEP_TRUE</A>@@am__fastdepCXX_FALSE@	depfile='$(DEPDIR)/OSUtils.Po' tmpdepfile='$(DEPDIR)/OSUtils.TPo' @AMDEPBACKSLASH@
<A HREF="https://lists.berlios.de/mailman/listinfo/openspace-svn">+ at AMDEP_TRUE</A>@@am__fastdepCXX_FALSE@	$(CXXDEPMODE) $(depcomp) @AMDEPBACKSLASH@
<A HREF="https://lists.berlios.de/mailman/listinfo/openspace-svn">+ at am__fastdepCXX_FALSE</A>@	$(CXX) $(DEFS) $(DEFAULT_INCLUDES) $(INCLUDES) $(AM_CPPFLAGS) $(CPPFLAGS) $(AM_CXXFLAGS) $(CXXFLAGS) -c -o OSUtils.o `test -f '../../OSUtils.cpp' || echo '$(srcdir)/'`../../OSUtils.cpp
+
+OSUtils.obj: ../../OSUtils.cpp
<A HREF="https://lists.berlios.de/mailman/listinfo/openspace-svn">+ at am__fastdepCXX_TRUE</A>@	if $(CXX) $(DEFS) $(DEFAULT_INCLUDES) $(INCLUDES) $(AM_CPPFLAGS) $(CPPFLAGS) $(AM_CXXFLAGS) $(CXXFLAGS) -MT OSUtils.obj -MD -MP -MF &quot;$(DEPDIR)/OSUtils.Tpo&quot; -c -o OSUtils.obj `if test -f '../../OSUtils.cpp'; then $(CYGPATH_W) '../../OSUtils.cpp'; else $(CYGPATH_W) '$(srcdir)/../../OSUtils.cpp'; fi`; \
<A HREF="https://lists.berlios.de/mailman/listinfo/openspace-svn">+ at am__fastdepCXX_TRUE</A>@	then mv -f &quot;$(DEPDIR)/OSUtils.Tpo&quot; &quot;$(DEPDIR)/OSUtils.Po&quot;; else rm -f &quot;$(DEPDIR)/OSUtils.Tpo&quot;; exit 1; fi
<A HREF="https://lists.berlios.de/mailman/listinfo/openspace-svn">+ at AMDEP_TRUE</A>@@am__fastdepCXX_FALSE@	source='../../OSUtils.cpp' object='OSUtils.obj' libtool=no @AMDEPBACKSLASH@
<A HREF="https://lists.berlios.de/mailman/listinfo/openspace-svn">+ at AMDEP_TRUE</A>@@am__fastdepCXX_FALSE@	depfile='$(DEPDIR)/OSUtils.Po' tmpdepfile='$(DEPDIR)/OSUtils.TPo' @AMDEPBACKSLASH@
<A HREF="https://lists.berlios.de/mailman/listinfo/openspace-svn">+ at AMDEP_TRUE</A>@@am__fastdepCXX_FALSE@	$(CXXDEPMODE) $(depcomp) @AMDEPBACKSLASH@
<A HREF="https://lists.berlios.de/mailman/listinfo/openspace-svn">+ at am__fastdepCXX_FALSE</A>@	$(CXX) $(DEFS) $(DEFAULT_INCLUDES) $(INCLUDES) $(AM_CPPFLAGS) $(CPPFLAGS) $(AM_CXXFLAGS) $(CXXFLAGS) -c -o OSUtils.obj `if test -f '../../OSUtils.cpp'; then $(CYGPATH_W) '../../OSUtils.cpp'; else $(CYGPATH_W) '$(srcdir)/../../OSUtils.cpp'; fi`
+
+OSUtils.lo: ../../OSUtils.cpp
<A HREF="https://lists.berlios.de/mailman/listinfo/openspace-svn">+ at am__fastdepCXX_TRUE</A>@	if $(LIBTOOL) --mode=compile $(CXX) $(DEFS) $(DEFAULT_INCLUDES) $(INCLUDES) $(AM_CPPFLAGS) $(CPPFLAGS) $(AM_CXXFLAGS) $(CXXFLAGS) -MT OSUtils.lo -MD -MP -MF &quot;$(DEPDIR)/OSUtils.Tpo&quot; -c -o OSUtils.lo `test -f '../../OSUtils.cpp' || echo '$(srcdir)/'`../../OSUtils.cpp; \
<A HREF="https://lists.berlios.de/mailman/listinfo/openspace-svn">+ at am__fastdepCXX_TRUE</A>@	then mv -f &quot;$(DEPDIR)/OSUtils.Tpo&quot; &quot;$(DEPDIR)/OSUtils.Plo&quot;; else rm -f &quot;$(DEPDIR)/OSUtils.Tpo&quot;; exit 1; fi
<A HREF="https://lists.berlios.de/mailman/listinfo/openspace-svn">+ at AMDEP_TRUE</A>@@am__fastdepCXX_FALSE@	source='../../OSUtils.cpp' object='OSUtils.lo' libtool=yes @AMDEPBACKSLASH@
<A HREF="https://lists.berlios.de/mailman/listinfo/openspace-svn">+ at AMDEP_TRUE</A>@@am__fastdepCXX_FALSE@	depfile='$(DEPDIR)/OSUtils.Plo' tmpdepfile='$(DEPDIR)/OSUtils.TPlo' @AMDEPBACKSLASH@
<A HREF="https://lists.berlios.de/mailman/listinfo/openspace-svn">+ at AMDEP_TRUE</A>@@am__fastdepCXX_FALSE@	$(CXXDEPMODE) $(depcomp) @AMDEPBACKSLASH@
<A HREF="https://lists.berlios.de/mailman/listinfo/openspace-svn">+ at am__fastdepCXX_FALSE</A>@	$(LIBTOOL) --mode=compile $(CXX) $(DEFS) $(DEFAULT_INCLUDES) $(INCLUDES) $(AM_CPPFLAGS) $(CPPFLAGS) $(AM_CXXFLAGS) $(CXXFLAGS) -c -o OSUtils.lo `test -f '../../OSUtils.cpp' || echo '$(srcdir)/'`../../OSUtils.cpp
+
 mostlyclean-libtool:
 	-rm -f *.lo
 
@@ -444,7 +469,7 @@
 clean-generic:
 
 distclean-generic:
-	-test -z &quot;$(CONFIG_CLEAN_FILES)&quot; || rm -f $(CONFIG_CLEAN_FILES)
+	-rm -f $(CONFIG_CLEAN_FILES)
 
 maintainer-clean-generic:
 	@echo &quot;This command is intended for maintainers to use&quot;
@@ -513,6 +538,9 @@
 	tags uninstall uninstall-am uninstall-info-am \
 	uninstall-pkglibLTLIBRARIES
 
+
+#libfilelistsftp_la_LDFLAGS = `WANT_FOX=1.4 fox-config --libs` `xml2-config  --libs`
+#libfilelistsftp_la_SOURCES =filelist_sftp.cpp filelist_sftp.h  ../../OSThreadExec.cpp ../../OSThreadExec.h  ../../OSConfigure.h 
 # Tell versions [3.59,3.63) of GNU make to not export all variables.
 # Otherwise a system limit (for SysV at least) may be exceeded.
 .NOEXPORT:

Modified: trunk/src/plugins/filelist/OSFXFile.cpp
===================================================================
--- trunk/src/plugins/filelist/OSFXFile.cpp	2006-02-12 13:43:28 UTC (rev 245)
+++ trunk/src/plugins/filelist/OSFXFile.cpp	2006-02-12 15:36:06 UTC (rev 246)
@@ -1,6 +1,7 @@
-#include &quot;fx.h&quot;
-#include &quot;../../thread_elem.h&quot;
+
+#include &quot;../../OSThreadExec.h&quot;
 #include &quot;OSFXFile.h&quot;
+#include &lt;fx.h&gt;
 
 #include &lt;sys/types.h&gt;
 #include &lt;sys/stat.h&gt;
@@ -10,8 +11,6 @@
 #include &lt;errno.h&gt;
 
 
-
-
 #define FOX_THREAD_SAFE
 
 struct fxdirent:dirent
@@ -19,8 +18,6 @@
     char buffer[256];
 };
 
-
-
 // Read bytes
 static long fullread (int fd, unsigned char *ptr, long len)
 {
@@ -61,9 +58,8 @@
 }
 
 
-
 // Copy ordinary file
-static FXbool copyfile (const FXString &amp; oldfile, const FXString &amp; newfile, thread_elem * te)
+static FXbool copyfile (const FXString &amp; oldfile, const FXString &amp; newfile, OSThreadExec* te)
 {
     unsigned char buffer[4096];
     struct stat status;
@@ -74,14 +70,10 @@
     {
 	if (::stat (oldfile.text (), &amp;status) == 0)
 	{
-
-
 	    te-&gt;act_file_name = oldfile.text ();
 	    te-&gt;act_file_size = 1;
 	    te-&gt;file_size = status.st_size;
 
-
-
 	    if ((dst = open (newfile.text (), O_WRONLY | O_CREAT | O_TRUNC, status.st_mode)) &gt;= 0)
 	    {
 		while (1)
@@ -92,9 +84,6 @@
 		    if (nread == 0)
 			break;
 
-
-
-
 		    if (te-&gt;cancel == true)
 		    {
 			fxmessage (&quot;CANCEL CANCEL CANCEL CANCEL !!!\n\n\n\n\n&quot;);
@@ -106,8 +95,6 @@
 		    te-&gt;act_file_size += nread;
 		    te-&gt;act_total_size += nread;
 
-
-
 		    nwritten = fullwrite (dst, buffer, nread);
 		    if (nwritten &lt; 0)
 			goto err;
@@ -131,11 +118,11 @@
 
 
 // Forward declararion
-static FXbool copyrec (const FXString &amp; oldfile, const FXString &amp; newfile, FXbool overwrite, inodelist * inodes, thread_elem * te);
+static FXbool copyrec (const FXString &amp; oldfile, const FXString &amp; newfile, FXbool overwrite, inodelist * inodes, OSThreadExec* te);
 
 
 // Copy directory
-static FXbool copydir (const FXString &amp; oldfile, const FXString &amp; newfile, FXbool overwrite, struct stat &amp;parentstatus, inodelist * inodes, thread_elem * te)
+static FXbool copydir (const FXString &amp; oldfile, const FXString &amp; newfile, FXbool overwrite, struct stat &amp;parentstatus, inodelist * inodes, OSThreadExec* te)
 {
     FXString oldchild, newchild;
     struct stat status;
@@ -201,11 +188,8 @@
     return TRUE;
 }
 
-
-
-
 // Recursive copy
-static FXbool copyrec (const FXString &amp; oldfile, const FXString &amp; newfile, FXbool overwrite, inodelist * inodes, thread_elem * te)
+static FXbool copyrec (const FXString &amp; oldfile, const FXString &amp; newfile, FXbool overwrite, inodelist * inodes, OSThreadExec* te)
 {
     struct stat status1, status2;
 
@@ -276,16 +260,10 @@
 }
 
 
-
-
-
 //====================================OSFXFile================================================================
 
-
-
-
 // Copy file
-FXbool OSFXFile::copy (const FXString &amp; oldfile, const FXString &amp; newfile, thread_elem * te, FXbool overwrite)
+FXbool OSFXFile::copy (const FXString &amp; oldfile, const FXString &amp; newfile, OSThreadExec* te, FXbool overwrite)
 {
     if (newfile != oldfile)
     {
@@ -301,7 +279,7 @@
 
 
 // Remove file or directory
-FXbool OSFXFile::remove (const FXString &amp; file, thread_elem * te)
+FXbool OSFXFile::remove (const FXString &amp; file, OSThreadExec* te)
 {
 
 
@@ -401,7 +379,7 @@
 
 
 // Rename or move file, or copy and delete old if different file systems
-FXbool OSFXFile::move (const FXString &amp; oldfile, const FXString &amp; newfile, thread_elem * te, FXbool overwrite)
+FXbool OSFXFile::move (const FXString &amp; oldfile, const FXString &amp; newfile, OSThreadExec* te, FXbool overwrite)
 {
 
     if (newfile != oldfile)


Property changes on: trunk/src/plugins/filelist/OSFXFile.cpp
___________________________________________________________________
Name: svn:keywords
   + Id

Modified: trunk/src/plugins/filelist/OSFXFile.h
===================================================================
--- trunk/src/plugins/filelist/OSFXFile.h	2006-02-12 13:43:28 UTC (rev 245)
+++ trunk/src/plugins/filelist/OSFXFile.h	2006-02-12 15:36:06 UTC (rev 246)
@@ -1,30 +1,30 @@
 #ifndef OSFXFILE_H
 #define OSFXFILE_H
 
+#include &lt;fx.h&gt;
 
+class OSThreadExec;
+
 /// Declared as &quot;C&quot; so as to not clash tag-names
 extern &quot;C&quot;
 {
     struct stat;
 }
 
-
-
-
 namespace OSFXFile
 {
 
 
 /// Remove file or directory, recursively.
-    FXbool remove (const FXString &amp; file, thread_elem * te);
+    FXbool remove (const FXString &amp; file, OSThreadExec* te);
 
 /// Copy file or directory, recursively
-    FXbool copy (const FXString &amp; srcfile, const FXString &amp; dstfile, thread_elem * te, FXbool overwrite = FALSE);
+    FXbool copy (const FXString &amp; srcfile, const FXString &amp; dstfile, OSThreadExec * te, FXbool overwrite = FALSE);
 
 /// Rename or move file or directory
-    FXbool move (const FXString &amp; srcfile, const FXString &amp; dstfile, thread_elem * te, FXbool overwrite = FALSE);
+    FXbool move (const FXString &amp; srcfile, const FXString &amp; dstfile, OSThreadExec* te, FXbool overwrite = FALSE);
 
 }
 
+#endif
 
-#endif


Property changes on: trunk/src/plugins/filelist/OSFXFile.h
___________________________________________________________________
Name: svn:keywords
   + Id

Copied: trunk/src/plugins/filelist/OSVfsArchive.cpp (from rev 245, branches/mloskot-style-refactoring/src/plugins/filelist/OSVfsArchive.cpp)


Property changes on: trunk/src/plugins/filelist/OSVfsArchive.cpp
___________________________________________________________________
Name: svn:keywords
   + Id

Copied: trunk/src/plugins/filelist/OSVfsArchive.h (from rev 245, branches/mloskot-style-refactoring/src/plugins/filelist/OSVfsArchive.h)


Property changes on: trunk/src/plugins/filelist/OSVfsArchive.h
___________________________________________________________________
Name: svn:keywords
   + Id

Copied: trunk/src/plugins/filelist/OSVfsFtp.cpp (from rev 245, branches/mloskot-style-refactoring/src/plugins/filelist/OSVfsFtp.cpp)


Property changes on: trunk/src/plugins/filelist/OSVfsFtp.cpp
___________________________________________________________________
Name: svn:keywords
   + Id

Copied: trunk/src/plugins/filelist/OSVfsFtp.h (from rev 245, branches/mloskot-style-refactoring/src/plugins/filelist/OSVfsFtp.h)


Property changes on: trunk/src/plugins/filelist/OSVfsFtp.h
___________________________________________________________________
Name: svn:keywords
   + Id

Copied: trunk/src/plugins/filelist/OSVfsLocal.cpp (from rev 245, branches/mloskot-style-refactoring/src/plugins/filelist/OSVfsLocal.cpp)


Property changes on: trunk/src/plugins/filelist/OSVfsLocal.cpp
___________________________________________________________________
Name: svn:keywords
   + Id

Copied: trunk/src/plugins/filelist/OSVfsLocal.h (from rev 245, branches/mloskot-style-refactoring/src/plugins/filelist/OSVfsLocal.h)


Property changes on: trunk/src/plugins/filelist/OSVfsLocal.h
___________________________________________________________________
Name: svn:keywords
   + Id

Copied: trunk/src/plugins/filelist/OSVfsSearch.cpp (from rev 245, branches/mloskot-style-refactoring/src/plugins/filelist/OSVfsSearch.cpp)


Property changes on: trunk/src/plugins/filelist/OSVfsSearch.cpp
___________________________________________________________________
Name: svn:keywords
   + Id

Copied: trunk/src/plugins/filelist/OSVfsSearch.h (from rev 245, branches/mloskot-style-refactoring/src/plugins/filelist/OSVfsSearch.h)


Property changes on: trunk/src/plugins/filelist/OSVfsSearch.h
___________________________________________________________________
Name: svn:keywords
   + Id

Deleted: trunk/src/plugins/filelist/filelist_archive.cpp
===================================================================
--- trunk/src/plugins/filelist/filelist_archive.cpp	2006-02-12 13:43:28 UTC (rev 245)
+++ trunk/src/plugins/filelist/filelist_archive.cpp	2006-02-12 15:36:06 UTC (rev 246)
@@ -1,395 +0,0 @@
-#ifdef WIN32
-#define EXPORTFUNCTION extern &quot;C&quot; __declspec(dllexport)
-#else
-#define EXPORTFUNCTION extern &quot;C&quot;
-#endif
-#include &quot;filelist_archive.h&quot;
-
-
-vfs filelist_archive::setup (void)
-{
-	vfs v;
-	
-	v.vfsheaders.push_back(vfsheader_container(&quot;name&quot;));
-	v.information=&quot;tar.bz2 and tar.gz archive - default plugin&quot;;
-	v.version=&quot;1&quot;;
-	v.type=&quot;vfs&quot;;
-return v;	
-	
-}
-
-
-int filelist_archive::osopendir (string dir)
-{
-
-this-&gt;dir=dir;
-iter=files.begin();
-}
-osfile filelist_archive::osreaddir (void)
-{
-
-osfile os_file;
-
-while(iter!=files.end())
-{
-os_file.name=*iter;
-	string modfile=os_file.name.substr(0,os_file.name.length () - 1);
-	
-	string::size_type pos=modfile.rfind(&quot;/&quot;);
-	if (pos != string::npos)
-	{
-		string dirf=&quot;/&quot;+os_file.name.substr(0,pos);
-		
-		
-		if(dirf!=dir)
-		{
-		iter++;
-		continue;
-		}
-		else
-		os_file.name=os_file.name.substr(pos+1);
-		
-		
-		
-	}
-	else if(dir!=&quot;/&quot;)
-	{
-	iter++;
-	continue;
-	}
-
-	    os_file.type = 0;
-	    os_file.size = 300;
-	  
-	    
-	    string s = os_file.name.substr (os_file.name.length () - 1, 1);
-
-	    if (s == &quot;/&quot;)
-	    {
-	        os_file.name = os_file.name.substr (0,os_file.name.length () - 1);
-		os_file.type = FOLDER;
-	    }
-	    else
-		os_file.type = 0;
-	    
-	    iter++;
-	  
-	    return os_file;
-}		    
-
-
-    
-    os_file.name = &quot;&quot;;
-    return os_file;
-
-}
-int filelist_archive::mkdir (string dir, int mode)
-{
-}
-int filelist_archive::copy (thread_elem * te)
-{
-filesoperation(&quot;copy&quot;,te);
-}
-
-int filelist_archive::move (thread_elem * te)
-{
-filesoperation(&quot;move&quot;,te);
-}
-int filelist_archive::remove (thread_elem * te)
-{
-filesoperation(&quot;remove&quot;,te);
-}
-
-int filelist_archive::filesoperation(string typeoperation,thread_elem * te)
-{
-
- vector &lt; string &gt;::iterator iter;
- 
-	string::size_type pos = te-&gt;options.find (&quot;upload&quot;);
-	if (pos != string::npos &amp;&amp; typeoperation!=&quot;remove&quot;)
-	{
-		
-		string file_list;
-		vector &lt;string&gt; file_list_vec;
-   		 for (iter = te-&gt;src.begin (); iter != te-&gt;src.end(); iter++)
-   		 {
-			string sr = (*iter);
-			file_list_vec.push_back(sr);
-			sr=sr.substr(1,sr.length()-1);
-			file_list+=&quot; \&quot;&quot; +  sr + &quot;\&quot;&quot;;
-			
-			
-		 }	
-			if(dir==&quot;/&quot;)
-			{
-			string command=&quot;cd &quot; +te-&gt;dst +&quot; &amp;&amp; tar xf&quot; + type + &quot; &quot; + archive_filename + &quot; &quot; + file_list;
-			system(command.c_str());
-			
-			}
-			else
-			{
-			
-			string tmpdir;
-			string destdir;
-			tmpdir=FXFile::time (&quot;%S%H%M%d%m%y&quot;, FXFile::now()).text ();
-			destdir=string(&quot;/tmp/openspace/tmp&quot;) + tmpdir;
-			FXFile::createDirectory(destdir.c_str(),0);
-			
-			
-			string command=&quot;cd &quot; +destdir +&quot; &amp;&amp; tar xf&quot; + type + &quot; &quot; + archive_filename + &quot; &quot; + file_list;
-			system(command.c_str());
-			
-				for (iter = te-&gt;src.begin (); iter != te-&gt;src.end(); iter++)
-   				{	
-				string sr = (*iter);
-				sr=sr.substr(1,sr.length()-1);
-				string tmpfile=destdir+&quot;/&quot;+sr;
-				string d=te-&gt;dst.c_str() + string(&quot;/&quot;)+FXFile::name(iter-&gt;c_str()).text();
-				FXFile::move(tmpfile.c_str(),d.c_str());				
-				}	
-			FXFile::remove(destdir.c_str());	
-			}
-		
-		if(typeoperation==&quot;move&quot;)
-		{
-		
-		thread_elem *el2 = new thread_elem (this, &quot;remove&quot;, &quot;&quot;, file_list_vec);
-		this-&gt;remove(el2);
-		delete el2;
-		
-		}
-		
-		
-	}
-	else //download
-	{
-		string decompress,compress,archive_filename_decompressed;
-		if(type==&quot;z&quot;)
-		{
-			decompress=&quot;gunzip&quot;;
-			compress=&quot;gzip&quot;;
-			archive_filename_decompressed=archive_filename.substr(0,archive_filename.length()-3);
-		}
-		else //bzip2
-		{
-			decompress=&quot;bunzip2&quot;;
-			compress=&quot;bzip2&quot;;
-			archive_filename_decompressed=archive_filename.substr(0,archive_filename.length()-4);
-		}
-		
-		string command=decompress + &quot; &quot; + archive_filename;
-		system(command.c_str());
-		
-		if(typeoperation==&quot;remove&quot;)
-		{
-			string file_list;
-		
-   			 for (iter = te-&gt;src.begin (); iter != te-&gt;src.end(); iter++)
-   			 {
-			string sr = (*iter);
-			sr=sr.substr(1,sr.length()-1);
-			file_list+=&quot; \&quot;&quot; +  sr + &quot;\&quot;&quot;;	
-			
-			vector &lt;string&gt;::iterator searchit=find(files.begin(), files.end(), sr);
-				if (files.end()!=searchit)// Search the list.
-					{
-					files.erase(searchit);	
-					}
-					
-			 }	
-			command=&quot;tar --delete -f &quot; + archive_filename_decompressed + &quot; &quot; +file_list;
-		
-			system(command.c_str());
-		
-		}
-		else
-		{
-		
-			 for (iter = te-&gt;src.begin (); iter != te-&gt;src.end(); iter++)
-   			 {
-			 string file;
-			 string sr = (*iter);
-			 string dir=FXFile::directory(sr.c_str()).text();
-			 
-
-			 
-			 
-				if(this-&gt;dir==&quot;/&quot;)
-				{
-				file=FXFile::name(sr.c_str()).text();
-				
-					if (files.end()==find(files.begin(), files.end(), file))// Search the list.
-					{
-					string dirtest=dir+&quot;/&quot;+FXFile::name(file.c_str()).text();
-					
-					
-						
-						if(FXFile::isDirectory(dirtest.c_str()))						
-						files.push_back(file+&quot;/&quot;);
-						else
-						files.push_back(file);	
-					}
-					else	
-					{
-					command=&quot;cd &quot; +dir + &quot; &amp;&amp; tar --delete -f &quot; + archive_filename_decompressed + &quot; &quot; +file;
-					
-					system(command.c_str());
-					}
-				
-				command=&quot;cd &quot; +dir + &quot; &amp;&amp; tar rf &quot; + archive_filename_decompressed + &quot; &quot; +file;
-				system(command.c_str());
-				
-				}
-				else
-				{
-			 			
-				string reldir=this-&gt;dir.substr(1,this-&gt;dir.length()-1);
-				file=reldir +&quot;/&quot;+ FXFile::name(sr.c_str()).text();	
-				
-				string tmpdir;
-				string destdir;
-				tmpdir=FXFile::time (&quot;%S%H%M%d%m%y&quot;, FXFile::now()).text ();
-				destdir=string(&quot;/tmp/openspace/tmp&quot;) + tmpdir;
-			
-				FXFile::createDirectory(destdir.c_str(),0);
-				command=&quot;cd &quot;+destdir + &quot; &amp;&amp; mkdir -p &quot; + reldir;
-				system(command.c_str());
-				string d=destdir+&quot;/&quot; + reldir + &quot;/&quot; + FXFile::name(sr.c_str()).text();
-				
-				if(typeoperation==&quot;copy&quot;)
-				FXFile::copy(sr.c_str(),d.c_str());
-				else if(typeoperation==&quot;move&quot;)
-				{
-				
-				FXFile::move(sr.c_str(),d.c_str());
-				}
-
-				
-				
-					if (files.end()==find(files.begin(), files.end(), file))// Search the list.
-					{
-					string dirtest=dir+&quot;/&quot;+FXFile::name(file.c_str()).text();
-					
-					
-						
-						if(FXFile::isDirectory(dirtest.c_str()))						
-						files.push_back(file+&quot;/&quot;);
-						else
-						files.push_back(file);	
-					}
-					else
-					{	
-					command=&quot;cd &quot; +destdir + &quot; &amp;&amp; tar --delete -f &quot; + archive_filename_decompressed + &quot; &quot; +file;
-					
-					system(command.c_str());
-					}
-				
-				command=&quot;cd &quot; + destdir + &quot; &amp;&amp; tar rf &quot; + archive_filename_decompressed + &quot; &quot; +file;
-				system(command.c_str());
-				
-				
-	
-				FXFile::remove(destdir.c_str());
-				
-				}
-				
-							
-		 	}
-		}	
-		command=compress + &quot; &quot; + archive_filename_decompressed;
-		system(command.c_str());
-		
-			
-	}
-	
-te-&gt;end=true;
-
-
-}
-
-
-int filelist_archive::rename (string orgname, string newname)
-{
-}
-int filelist_archive::init (vector &lt; string &gt; *vector_name, pathtype pt, configure * conf)
-{
-archive_filename = pt.server;
-
-
-string  command;
-
-if ((archive_filename.length () &gt;= 6 &amp;&amp; archive_filename.substr (archive_filename.length () - 6, 6) == &quot;tar.gz&quot;) ||(archive_filename.length () &gt;= 3 &amp;&amp; archive_filename.substr (archive_filename.length () - 3, 3) == &quot;tgz&quot;))
-type=&quot;z&quot;;
-else
-type=&quot;j&quot;;
-
-command=&quot;tar tf&quot; + type + &quot; &quot; + archive_filename;
-
-
-pipe = popen(command.c_str(), &quot;r&quot;);
-
-if (pipe != NULL)
-    {
-	string line;
-	while (fgets (readbuf, sizeof (readbuf), pipe) != NULL)
-	{
-
-
-	    string path = readbuf;
-	    path = path.substr (0, path.length () - 1);
-	    files.push_back(path);
-	   
-	}
-
-	pclose (pipe);
-    }
-    
-iter=files.begin();
-
-}
-int filelist_archive::mode (string file)
-{
-}
-string filelist_archive::owner (string file)
-{
-return &quot;&quot;;
-}
-string filelist_archive::group (string file)
-{
-return &quot;&quot;;
-}
-bool filelist_archive::mode (string file, unsigned int, bool recursive)
-{
-}
-bool filelist_archive::owner (string file, string, bool recursive)
-{
-}
-bool filelist_archive::group (string file, string, bool recursive)
-{
-}
-string filelist_archive::info (void)
-{
-return &quot;&quot;;
-}
-void filelist_archive::totalsize (string path, unsigned long &amp;size)
-{
-}
-string filelist_archive::symlink (string path)
-{
-return &quot;&quot;;
-}
-bool filelist_archive::symlink (string src, string dst)
-{
-}
-bool filelist_archive::hardlink (string src, string dst)
-{
-}
-
-int filelist_archive::quit (void)
-{
-}
-EXPORTFUNCTION filelist_base *get_filelist (void)
-{
-    FXTRACE ((5, &quot;PLUGIN LOAD\n&quot;));
-    return new filelist_archive ();
-}

Deleted: trunk/src/plugins/filelist/filelist_archive.h
===================================================================
--- trunk/src/plugins/filelist/filelist_archive.h	2006-02-12 13:43:28 UTC (rev 245)
+++ trunk/src/plugins/filelist/filelist_archive.h	2006-02-12 15:36:06 UTC (rev 246)
@@ -1,40 +0,0 @@
-#ifndef FILELIST_archive
-#define FILELIST_archive
-#include &quot;../../filelist_base.h&quot;
-class filelist_archive:public filelist_base
-{
- 
-private:  
-    string archive_filename;
-    FILE *pipe;
-    char readbuf[1024];
-    vector &lt; string &gt; files;
-    vector &lt; string &gt;::iterator iter;
-    string dir;
-    string type;
- public:    
-    int filelist_archive::osopendir (string dir);
-    osfile filelist_archive::osreaddir (void);
-    int filelist_archive::mkdir (string dir, int mode = 0);
-    int filelist_archive::copy (thread_elem * te);
-    int filelist_archive::move (thread_elem * te);
-    int filelist_archive::remove (thread_elem * te);
-    int filelist_archive::rename (string orgname, string newname);
-    int filelist_archive::init (vector &lt; string &gt; *vector_name, pathtype pt, configure * conf);
-    int filelist_archive::mode (string file);
-    string filelist_archive::owner (string file);
-    string filelist_archive::group (string file);
-    bool filelist_archive::mode (string file, unsigned int, bool recursive);
-    bool filelist_archive::owner (string file, string, bool recursive);
-    bool filelist_archive::group (string file, string, bool recursive);
-    string filelist_archive::info (void);
-    void filelist_archive::totalsize (string path, unsigned long &amp;size);
-    string filelist_archive::symlink (string path);
-    bool filelist_archive::symlink (string src, string dst);
-    bool filelist_archive::hardlink (string src, string dst);
-    vfs filelist_archive::setup (void);
-    int filelist_archive::quit (void);
-    
-    int filelist_archive::filesoperation(string type,thread_elem * te);
-};
-#endif

Deleted: trunk/src/plugins/filelist/filelist_ftp.cpp
===================================================================
--- trunk/src/plugins/filelist/filelist_ftp.cpp	2006-02-12 13:43:28 UTC (rev 245)
+++ trunk/src/plugins/filelist/filelist_ftp.cpp	2006-02-12 15:36:06 UTC (rev 246)
@@ -1,739 +0,0 @@
-#ifdef WIN32
-#define EXPORTFUNCTION extern &quot;C&quot; __declspec(dllexport)
-#else
-#define EXPORTFUNCTION extern &quot;C&quot;
-#endif
-#include &quot;filelist_ftp.h&quot;
-
-#include &lt;sstream&gt;
-#include &lt;sys/types.h&gt;
-#include &lt;sys/stat.h&gt;
-#include &lt;unistd.h&gt;
-#include &lt;sys/types.h&gt;
-#include &lt;dirent.h&gt;
-
-    SimpleLogger::SimpleLogger()
-    {
-    te=NULL;
-    }
-    
-    void SimpleLogger::start(uint32_t bytes, const FXString &amp; name,uint32_t size)
-    {
-    	if(te!=NULL &amp;&amp; name!=&quot;&quot;)
-   	{
-		te-&gt;act_file_size=0;
-		te-&gt;act_file_name = name.text ();
-		if(size!=0)
-		te-&gt;file_size = size;
-	}
-    }
-    bool SimpleLogger::update(uint32_t bytes, const FXString &amp; s)
-    {
-     if(te!=NULL)
-     {
-	te-&gt;act_file_size+=bytes;	
-	te-&gt;act_total_size+=bytes;
-	
-	if(te-&gt;cancel==true)
-	return false;
-     }	
-    return true;
-    }
-    void SimpleLogger::end(uint32_t bytes, const FXString &amp; )
-    {
-
-    }
-
-    void SimpleLogger::choke()
-    {
-
-    }
-
-    void SimpleLogger::error(int error)
-    {
-
-    }
-
-    void SimpleLogger::logLine(FXString &amp; line)
-    {
-     fxmessage(&quot;LOG=%s\n&quot;,line.text());
-    }
-    void SimpleLogger::error(FXString &amp; error)
-    {
-     fxmessage(&quot;ERROR=%s\n&quot;,error.text());
-    }
-
-vfs filelist_ftp::setup (void)
-{
-	vfs v;
-	
-	v.vfsheaders.push_back(vfsheader_container(&quot;name&quot;));
-	v.vfsheaders.push_back(vfsheader_container(&quot;size&quot;,&quot;size&quot;));
-	v.vfsheaders.push_back(vfsheader_container(&quot;owner&quot;));
-	v.vfsheaders.push_back(vfsheader_container(&quot;group&quot;));
-	v.information=&quot;FTP - default plugin&quot;;
-	v.version=&quot;1&quot;;
-	v.type=&quot;network&quot;;
-return v;	
-	
-}
-
-
-int filelist_ftp::priv_osopendir (string dir,string prefix,map &lt;string,osfile&gt; &amp; filesMap,map &lt;string,osfile&gt;::iterator &amp; iter)
-{
-
-filesMap.clear();
-
-
-	FXString di=dir.c_str();	
-	pftp-&gt;setDir(di);
-	FXString di2;
-	pftp-&gt;pwd(di2);
-
-	if(FXFile::name(di)!=FXFile::name(di2) || di2==&quot;&quot;)
-	return -1;
-
-
-	
-    FXMemoryStream str;
-    str.open(FXStreamSave, NULL);
-
-
-    pftp-&gt;list(str);
-
-    // nil terminate the buffer
-    FXuchar nil = 0;
-    str.save(&amp;nil, 1);
-
-    // and get it
-    FXuchar* buffer;
-    unsigned long sp;
-    str.takeBuffer(buffer, sp);
-
-    char * ptr = reinterpret_cast&lt;char *&gt;(buffer);
-    char * next = strchr(ptr, '\n');
-    char * start = ptr;
-
-
-    //get attributes # user group size date =(3 or 4? fields) name
-    while(next &amp;&amp; (ptr-start &lt; (int)sp))
-    {
-
-        next[0] = 0;
-        if(next[-1] == '\r')
-            next[-1] = 0;
-
-        // Some FTP servers send other lines than raw directory
-        if(ptr[0] != 'd' &amp;&amp; ptr[0] != '-')
-        {
-            ptr = next+1;
-            next = strchr(ptr, '\n');
-            continue;
-        }
-
-
-
-       osfile os_file;
-       os_file.type=0;
-       if(ptr[0]=='d')
-           os_file.type = os_file.type | FOLDER; 
-       else	   
-           os_file.type=0;
-
-std::stringstream parser (ptr);
-std::string field;
-
-   string user;
-   string group;
-   string size;
-   string date;
-   string attrib;
-   string name;
-   
-parser&gt;&gt;attrib; 
-
-attrib=attrib.substr(1,attrib.length()-1);
-
-parser&gt;&gt;field;
-parser&gt;&gt;user;
-parser&gt;&gt;group;
-parser&gt;&gt;size;
-os_file.size=atoi(size.c_str());
-
-
-parser&gt;&gt;date;
-parser&gt;&gt;date;
-parser&gt;&gt;date;
-
-
-os_file.user=user;
-os_file.group=group;
-os_file.mode=attrib;
-
-
-
-string n;
-while(parser&gt;&gt;n)
-{
-if(name!=&quot;&quot;)
-name=name+&quot; &quot;+n;
-else
-name=n;
-}
- 
-        os_file.name = prefix+name;
-	
-
-if(prefix==&quot;&quot;)
-{	
-	
-	
-    for (int i = 0; i &lt; fieldsnum - 1; i++)
-    {
-
-	if (fields[i + 1] == &quot;size&quot;)
-	    os_file.attrib.push_back(size);
-	else if (fields[i + 1] == &quot;owner&quot;)
-	   os_file.attrib.push_back(user);
-	else if (fields[i + 1] == &quot;group&quot;)
-	   os_file.attrib.push_back(group);
-        else if (fields[i + 1] == &quot;mode&quot;)
-        os_file.attrib.push_back(attrib);
-
-
-    }
-	
-}	
-filesMap[os_file.name]=os_file;	
-	
-	
-	
-	if(prefix!=&quot;&quot;)
-	{
-	filesMapGlobal[os_file.name]=os_file;
-	}
-        ptr = next+1;
-        next = strchr(ptr, '\n');
-    }
- FXFREE(&amp;buffer);
-
-iter=filesMap.begin();
-
-}
-
-
-
-int filelist_ftp::osopendir (string dir)
-{
-
-
-this-&gt;dir=dir;
-
-return priv_osopendir(dir,&quot;&quot;,filesMap,iter);
- 
-
-
-}
-
-osfile filelist_ftp::priv_osreaddir (map &lt;string,osfile&gt; &amp; filesMap,map &lt;string,osfile&gt;::iterator &amp; iter)
-{
-osfile os_file;
-
-if(iter!=filesMap.end())
-{
-	  os_file=iter-&gt;second;
-	   
-	    iter++;
-	    return os_file;
-}		    
-
-
-    
-    os_file.name = &quot;&quot;;
-    return os_file;
-
-}
-
-
-osfile filelist_ftp::osreaddir (void)
-{
-
-  return priv_osreaddir(filesMap,iter);  
-}
-int filelist_ftp::mkdir (string dir, int mode)
-{
-	pftp-&gt;mkDir(dir.c_str());
-}
-
-
-static const int BUCKETSIZE = 128;
-struct Bucket {
-    uint8_t bucket[BUCKETSIZE];
-};
-
-
-
-
-
-
-
-
-void filelist_ftp::local_totalsize (string path, unsigned long &amp;size)
-{
-
-    if (FXFile::isDirectory (path.c_str ()))
-    {
-	struct stat status;
-	struct dirent *dp;
-	DIR *dirp;
-
-
-	dirp = opendir (path.c_str ());
-
-	while ((dp = readdir (dirp)) != NULL)
-	{
-	    if (dp-&gt;d_name[0] != '.' || (dp-&gt;d_name[1] != '\0' &amp;&amp; (dp-&gt;d_name[1] != '.' || dp-&gt;d_name[2] != '\0')))
-	    {
-
-		string file = path;
-		file.append (dp-&gt;d_name);
-#ifndef WIN32
-		lstat (file.c_str (), &amp;status);
-#else
-		stat (file.c_str (), &amp;status);
-#endif
-		if (S_ISDIR (status.st_mode))
-		{
-		    size = size + (unsigned int) status.st_size;
-		    file.append (&quot;/&quot;);
-		    totalsize (file, size);
-
-		}
-		else
-		{
-		    size = size + status.st_size;
-		}
-	    }
-	}
-
-	closedir (dirp);
-    }
-    else
-    {
-	size += FXFile::size (path.c_str ());
-
-    }
-
-}
-
-
-
-
-
-
-
-int filelist_ftp::copy (thread_elem * te)
-{
- log-&gt;te=te;
-  unsigned long size = 0;
-    
-    string::size_type pos = te-&gt;options.find (&quot;upload&quot;);
-	if (pos == string::npos)
-	{
-	
-	string dir_copy=this-&gt;dir;
-	
-	 vector &lt; string &gt;::iterator iter;
-	 
-	 for (iter = te-&gt;src.begin (); iter != te-&gt;src.end(); iter++)
-   	 {
-	 string sr = (*iter);
-	 if (FXFile::isDirectory (sr.c_str ()))
-	    sr.append (&quot;/&quot;);
-	 local_totalsize (sr, size);
-	 }
-
-	te-&gt;total_size = size; 
-	 
-    for (iter = te-&gt;src.begin (); iter != te-&gt;src.end(); iter++)
-    {
-	
-        FXString file=iter-&gt;c_str();	
-	goLocalRecursive(file.text(),&quot;&quot;,te);
-	pftp-&gt;setDir(dir_copy.c_str());
-	
-    }
-	this-&gt;dir=dir_copy;
-	
-	}
-	else 
-	{
-
-
-
-getRecursiveFiles(te-&gt;src,size);
-
-te-&gt;total_size = size; 
-for (iterGlobal=--filesMapGlobal.end();; iterGlobal--)
-    {   
-    if(te-&gt;cancel==true)
-    break;  
-   	
-	if(iterGlobal-&gt;second.type&amp;FOLDER)
-	{
-	
-	string filename=te-&gt;dst+&quot;/&quot;+iterGlobal-&gt;first;
-	FXFile::createDirectory(filename.c_str(),str_mode_int(iterGlobal-&gt;second.mode));
-	
-	}
-	else
-	{
-	string filename=te-&gt;dst+&quot;/&quot;+iterGlobal-&gt;first;
-	FXFile::createDirectory(FXFile::directory(filename.c_str()),str_mode_int(iterGlobal-&gt;second.mode));
-	te-&gt;file_size = iterGlobal-&gt;second.size;
-	
-	pftp-&gt;download(iterGlobal-&gt;first.c_str(),filename.c_str(),false);
-	
-	FXFile::mode(filename.c_str(),str_mode_int(iterGlobal-&gt;second.mode));
-	}
-	te-&gt;act_file_name=iterGlobal-&gt;first;
-	if( iterGlobal == filesMapGlobal.begin())break;
-	
-    }
-
-
-	
-
-   
-	}		
- log-&gt;te=NULL;   
-}
-
-
-void filelist_ftp::goLocalRecursive (string path,string prefix,thread_elem *te)
-{
-
-    if(te-&gt;cancel==true)
-    return; 
-
-    if (FXFile::isDirectory (path.c_str ()))
-    {
-	struct stat status;
-	struct dirent *dp;
-	DIR *dirp;
-
-     prefix=prefix+ FXFile::name(path.c_str()).text();
-     string fulldir=this-&gt;dir+&quot;/&quot;+prefix;
-     
-     pftp-&gt;mkDir(fulldir.c_str());
-     this-&gt;mode (fulldir,FXFile::mode(path.c_str()),false);
-     pftp-&gt;setDir(fulldir.c_str()); 
-
-	dirp = opendir (path.c_str ());
-
-	while ((dp = readdir (dirp)) != NULL)
-	{
-	    if (dp-&gt;d_name[0] != '.' || (dp-&gt;d_name[1] != '\0' &amp;&amp; (dp-&gt;d_name[1] != '.' || dp-&gt;d_name[2] != '\0')))
-	    {
-
-		string file = path+&quot;/&quot;;
-		file.append (dp-&gt;d_name);
-		goLocalRecursive(file,prefix+&quot;/&quot;,te);
-	    }
-	}
-
-	closedir (dirp);
-    }
-    else
-    {
-    string pre=this-&gt;dir+&quot;/&quot;+prefix.substr(0,prefix.length()-1);
-    if(this-&gt;dir!=pre)
-    {
-     pftp-&gt;setDir(pre.c_str()); 
-     this-&gt;dir=pre;
-    }
-  
-		FXString fil=path.c_str();
-		pftp-&gt;upload(fil,0,false);
-		this-&gt;mode (path,FXFile::mode(fil),false);   
-		 
-
-    }
-
-}
-
-
-
-
-
-
-
-
-int filelist_ftp::move (thread_elem * te)
-{
-}
-
-
-void filelist_ftp::gorecursive(string file,unsigned long &amp;size)
-{
-
-
-		map &lt;string,osfile&gt; filesMap;
-		map &lt;string,osfile&gt;::iterator iter;
-		
-	   	if(priv_osopendir(file,file+&quot;/&quot;,filesMap,iter)!=-1)
-		{
-		
-		 while (1)
-   		 {	
-		 osfile os_file = priv_osreaddir (filesMap,iter);
-		 	if (os_file.name == &quot;&quot;)
-	   		break;
-			
-			if(os_file.type&amp;FOLDER)
-			{
-			gorecursive(os_file.name,size);
-			}
-			else
-			size = size + os_file.size;
-		 }
-
-	    }
-
-
-}
-
-void filelist_ftp::getRecursiveFiles(vector &lt; string &gt;src,unsigned long &amp;size)
-{
-
-filesMapGlobal.clear();
-
-
-    vector &lt; string &gt;::iterator iter_files;
-
-    for (iter_files = src.begin (); iter_files != src.end(); iter_files++)
-    {     
-
-    string name=FXFile::name(iter_files-&gt;c_str()).text();
-    	osfile os_file;
-	os_file.name=name;
-	os_file.type=filesMap[name].type;
-	os_file.size=filesMap[name].size;
-	os_file.mode=filesMap[name].mode;
-	os_file.group=filesMap[name].user;
-	os_file.user=filesMap[name].group;
-	filesMapGlobal[name]=os_file;
-
-    }
-
-
-   for (iterGlobal=filesMapGlobal.begin();iterGlobal!=filesMapGlobal.end(); iterGlobal++)
-   {
-
-   
-        if(iterGlobal-&gt;second.type&amp;FOLDER)
-	{
- 	gorecursive(iterGlobal-&gt;first,size);
-	FXString di=this-&gt;dir.c_str();
-	pftp-&gt;setDir(di);
-	}
-	else
-	size = size + iterGlobal-&gt;second.size;
-
-   }
-}
-
-int filelist_ftp::remove (thread_elem * te)
-{
-unsigned long size;
-getRecursiveFiles(te-&gt;src,size);
-
-for (iterGlobal=--filesMapGlobal.end();; iterGlobal--)
-    {     
-  
-	
-	if(iterGlobal-&gt;second.type&amp;FOLDER)
-	pftp-&gt;rmDir(iterGlobal-&gt;first.c_str());
-	else
-	pftp-&gt;del(iterGlobal-&gt;first.c_str());
-	
-	te-&gt;act_file_name=iterGlobal-&gt;first;
-	if( iterGlobal == filesMapGlobal.begin())break;
-	
-    }
-
-
-
-}
-int filelist_ftp::rename (string orgname, string newname)
-{
-
-FXString tmp;
-pftp-&gt;sendCmd(&quot;RNFR &quot;, FXFile::name(orgname.c_str()), tmp);
-pftp-&gt;sendCmd(&quot;RNTO &quot;, FXFile::name(newname.c_str()), tmp);
-
-}
-int filelist_ftp::init (vector &lt; string &gt; *vector_name, pathtype pt, configure * conf)
-{
-
-    fieldsnum = vector_name-&gt;size ();
-    fields = (*vector_name);
-
-log=new SimpleLogger;
-pftp=new PFTP(pt.server.c_str(),pt.user.c_str(),pt.password.c_str(),&quot;&quot;,log);
-
-	if(pftp-&gt;isConnected() &amp;&amp; getinitialdir()!=&quot;&quot;)
-        {	
-
-	}
-	else return -1;
-}
-
-int filelist_ftp::str_mode_int(string per)
-{
-unsigned int mode = 0;
-	if (per[0]=='r')
-	    mode = mode | S_IRUSR;
-	if (per[1]=='w')
-	    mode = mode | S_IWUSR;
-	if (per[2]=='x')
-	    mode = mode | S_IXUSR;
-	if (per[3]=='r')
-	    mode = mode | S_IRGRP;
-	if (per[4]=='w')
-	    mode = mode | S_IWGRP;
-	if (per[5]=='x')
-	    mode = mode | S_IXGRP;
-	if (per[6]=='r')
-	    mode = mode | S_IROTH;
-	if (per[7]=='w')
-	    mode = mode | S_IWOTH;
-	if (per[8]=='x')
-	    mode = mode | S_IXOTH;
-return mode;
-}
-
-int filelist_ftp::mode (string file)
-{
-
-string per=filesMap[FXFile::name(file.c_str()).text()].mode;
-
-return str_mode_int(per);
-
-}
-string filelist_ftp::owner (string file)
-{
-return filesMap[FXFile::name(file.c_str()).text()].user; 
-}
-string filelist_ftp::group (string file)
-{
-return filesMap[FXFile::name(file.c_str()).text()].group;
-}
-bool filelist_ftp::mode (string file, unsigned int per, bool recursive)
-{
-
-unsigned int mode=per;
-
-int x=((mode &amp; S_IRUSR) | (mode &amp; S_IWUSR) | (mode &amp; S_IXUSR))/64;
-int y=((mode &amp; S_IRGRP) | (mode &amp; S_IWGRP) | (mode &amp; S_IXGRP))/8;
-int z=((mode &amp; S_IROTH) | (mode &amp; S_IWOTH) | (mode &amp; S_IXOTH));	
-
-file=FXFile::name(file.c_str()).text();
-
-FXString tmp;
-char chstr[20];
-sprintf (chstr, &quot;%d%d%d&quot;, x,y,z);
-
-	if(recursive==false)
-	{
-	string cmd=&quot;CHMOD &quot;+string(chstr)+&quot; &quot;+ file;
-	pftp-&gt;sendCmd(&quot;SITE &quot;,cmd.c_str(),tmp );
-	}
-	else
-	{
-	unsigned long size;
-	vector &lt; string &gt;src;
-	src.push_back(file);
-	getRecursiveFiles(src,size);
-
-		for (iterGlobal=--filesMapGlobal.end();; iterGlobal--)
-  		  {     
-   			
-			
-			string cmd=&quot;CHMOD &quot;+string(chstr)+&quot; &quot;+ iterGlobal-&gt;first;
-			pftp-&gt;sendCmd(&quot;SITE &quot;,cmd.c_str(),tmp );
-			
-			
-			if( iterGlobal == filesMapGlobal.begin())break;
-	
-   		  }
-
-	
-	}
-
-
-
-}
-bool filelist_ftp::owner (string file, string, bool recursive)
-{
-}
-bool filelist_ftp::group (string file, string, bool recursive)
-{
-}
-string filelist_ftp::info (void)
-{
-return &quot;&quot;;
-}
-void filelist_ftp::totalsize (string path, unsigned long &amp;size)
-{
-size=0;
-	
-	string file=FXFile::name(path.c_str()).text();
-	if(file==&quot;&quot;)
-	file=FXFile::name(path.substr(0,path.length()-1).c_str()).text();
-	
-	
-
-	if(filesMap[file].type&amp;FOLDER)
-	{
-	vector &lt; string &gt;src;
-	src.push_back(file);
-	getRecursiveFiles(src,size);
-	}
-	else
-	size=filesMap[file].size;
-
-
-	
-}
-string filelist_ftp::symlink (string path)
-{
-return &quot;&quot;;
-}
-bool filelist_ftp::symlink (string src, string dst)
-{
-}
-bool filelist_ftp::hardlink (string src, string dst)
-{
-}
-
-int filelist_ftp::quit (void)
-{
-pftp-&gt;logout();
-}
-
-string filelist_ftp::getinitialdir(void)
-{
-	FXString base;
-	pftp-&gt;pwd(base);
-
-return base.text();
-}
-
-
-
-EXPORTFUNCTION filelist_base *get_filelist (void)
-{
-    FXTRACE ((5, &quot;PLUGIN LOAD\n&quot;));
-    return new filelist_ftp ();
-}

Deleted: trunk/src/plugins/filelist/filelist_ftp.h
===================================================================
--- trunk/src/plugins/filelist/filelist_ftp.h	2006-02-12 13:43:28 UTC (rev 245)
+++ trunk/src/plugins/filelist/filelist_ftp.h	2006-02-12 15:36:06 UTC (rev 246)
@@ -1,79 +0,0 @@
-#ifndef FILELIST_ftp
-#define FILELIST_ftp
-#include &quot;../../filelist_base.h&quot;
-#include &quot;pftp.h&quot;
-#include &lt;map&gt;
-
-
-
-class SimpleLogger : public Logger 
-{
-public:
-    thread_elem *te;
-    
-    SimpleLogger::SimpleLogger();
-    void SimpleLogger::start(uint32_t bytes, const FXString &amp; name,uint32_t size);
-    bool SimpleLogger::update(uint32_t bytes, const FXString &amp; s);
-    void SimpleLogger::end(uint32_t bytes, const FXString &amp; );
-    void SimpleLogger::choke();
-    void SimpleLogger::error(int error);
-    void SimpleLogger::logLine(FXString &amp; line);
-    void SimpleLogger::error(FXString &amp; error);
-
-};
-
-
-class filelist_ftp:public filelist_base
-{
-
-private:
-
-PFTP *pftp;
-SimpleLogger *log;
-string dir;
-
-
-map &lt;string,osfile&gt; filesMap;
-map &lt;string,osfile&gt;::iterator iter;
-
-map &lt;string,osfile&gt; filesMapGlobal;
-map &lt;string,osfile&gt;::iterator iterGlobal;
-
-    int fieldsnum;
-    vector &lt; string &gt; fields;
-
-    int filelist_ftp::priv_osopendir (string dir,string prefix,map &lt;string,osfile&gt; &amp; filesMap,map &lt;string,osfile&gt;::iterator &amp; iter);
-    void filelist_ftp::gorecursive(string file,unsigned long &amp;size);
-    osfile filelist_ftp::priv_osreaddir (map &lt;string,osfile&gt; &amp; filesMap,map &lt;string,osfile&gt;::iterator &amp; iter2);
-    void filelist_ftp::getRecursiveFiles(vector &lt; string &gt;src,unsigned long &amp;size);
-    void filelist_ftp::goLocalRecursive (string path,string prefix,thread_elem *te);
-    void filelist_ftp::local_totalsize (string path, unsigned long &amp;size);
-    int filelist_ftp::str_mode_int(string per);
-
-  public:
-    int filelist_ftp::osopendir (string dir);
-    osfile filelist_ftp::osreaddir (void);
-    int filelist_ftp::mkdir (string dir, int mode = 0);
-    int filelist_ftp::copy (thread_elem * te);
-    int filelist_ftp::move (thread_elem * te);
-    int filelist_ftp::remove (thread_elem * te);
-    int filelist_ftp::rename (string orgname, string newname);
-    int filelist_ftp::init (vector &lt; string &gt; *vector_name, pathtype pt, configure * conf);
-    int filelist_ftp::mode (string file);
-    string filelist_ftp::owner (string file);
-    string filelist_ftp::group (string file);
-    bool filelist_ftp::mode (string file, unsigned int, bool recursive);
-    bool filelist_ftp::owner (string file, string, bool recursive);
-    bool filelist_ftp::group (string file, string, bool recursive);
-    string filelist_ftp::info (void);
-    void filelist_ftp::totalsize (string path, unsigned long &amp;size);
-    string filelist_ftp::symlink (string path);
-    bool filelist_ftp::symlink (string src, string dst);
-    bool filelist_ftp::hardlink (string src, string dst);
-    vfs filelist_ftp::setup (void);
-    int filelist_ftp::quit (void);
-    string filelist_ftp::getinitialdir(void);
-    
-    
-};
-#endif

Deleted: trunk/src/plugins/filelist/filelist_local.cpp
===================================================================
--- trunk/src/plugins/filelist/filelist_local.cpp	2006-02-12 13:43:28 UTC (rev 245)
+++ trunk/src/plugins/filelist/filelist_local.cpp	2006-02-12 15:36:06 UTC (rev 246)
@@ -1,611 +0,0 @@
-
-#ifdef WIN32
-#define EXPORTFUNCTION extern &quot;C&quot; __declspec(dllexport)
-#else
-#define EXPORTFUNCTION extern &quot;C&quot;
-#endif
-
-#include &lt;fx.h&gt;
-#include &lt;errno.h&gt;
-#include &quot;filelist_local.h&quot;
-#include &quot;../../sharedFunctions.h&quot;
-#include &quot;OSFXFile.h&quot;
-
-#ifdef WIN32
-#define SEPARATOR &quot;\\&quot;
-#else
-#include &lt;dlfcn.h&gt;
-#define SEPARATOR &quot;/&quot;
-#endif
-
-#include &lt;fstream&gt;
-#include &lt;sstream&gt;
-#include &lt;sys/mount.h&gt;
-
-#include &lt;sys/types.h&gt;
-#include &lt;pwd.h&gt;
-#include &lt;grp.h&gt;
-
-
-vector &lt; string &gt; name;
-
-
-vfs filelist_local::setup (void)
-{
-	vfs v;
-	
-	v.vfsheaders.push_back(vfsheader_container(&quot;name&quot;));
-	v.vfsheaders.push_back(vfsheader_container(&quot;size&quot;,&quot;size&quot;));
-	v.vfsheaders.push_back(vfsheader_container(&quot;owner&quot;));
-	v.vfsheaders.push_back(vfsheader_container(&quot;group&quot;));
-	v.vfsheaders.push_back(vfsheader_container(&quot;accessed&quot;,&quot;date&quot;));
-	v.vfsheaders.push_back(vfsheader_container(&quot;modified&quot;,&quot;date&quot;));
-	v.information=&quot;Local file list - default plugin&quot;;
-	v.version=&quot;1&quot;;
-	
-return v;	
-	
-}
-
-int filelist_local::init (vector &lt; string &gt; *vector_name,pathtype pt, configure * conf)
-{
-
-    fieldsnum = vector_name-&gt;size ();
-    fields = (*vector_name);
-
-    return 0;
-}
-
-
-osfile filelist_local::osreaddir ()
-{
-
-    osfile os_file;
-    if (dp == NULL)
-    {
-	os_file.name = &quot;&quot;;
-	return os_file;
-    }
-    if ((dirrec = readdir (dp)) == NULL)
-    {
-	closedir (dp);
-	os_file.name = &quot;&quot;;
-	return os_file;
-    }
-
-    os_file.name = dirrec-&gt;d_name;
-    os_file.type = 0;
-
-    os_file.size = FXFile::size (os_file.name.c_str ());
-
-    if (stat (dirrec-&gt;d_name, &amp;status) != -1)
-    {
-
-	struct stat status2;
-	if (lstat (dirrec-&gt;d_name, &amp;status2) != -1)
-	{
-	    if (S_ISLNK (status2.st_mode))
-	    {
-		os_file.type = os_file.type | SYMLINK;
-	    }
-
-	}
-
-
-	if (S_ISDIR (status.st_mode))
-	{
-	    os_file.type = os_file.type | FOLDER;
-	}
-	else
-	{
-	    /*
-	       char line[20];
-	       FILE *fr;    
-	       fr = fopen (dirrec-&gt;d_name, &quot;rt&quot;); 
-	       fgets(line, sizeof(line), fr);   
-	       fclose(fr);  
-	       string con=line;
-
-	       os_file.content=con.substr(0,con.size()-1);
-	     */
-	}
-
-
-
-
-	if (S_ISCHR (status.st_mode))
-	    os_file.type = os_file.type | CHARDEV;
-
-	if (S_ISBLK (status.st_mode))
-	    os_file.type = os_file.type | BLOCKDEV;
-
-	if (access (dirrec-&gt;d_name, X_OK) == 0)
-	    os_file.type = os_file.type | EXECUTABLE;
-    }
-
-
-
-
-
-    for (int i = 0; i &lt; fieldsnum - 1; i++)
-    {
-
-	if (fields[i + 1] == &quot;size&quot;)
-	    os_file.attrib.push_back(numtostring (os_file.size));
-	else if (fields[i + 1] == &quot;owner&quot;)
-	   os_file.attrib.push_back(FXFile::owner (os_file.name.c_str ()).text ());
-	else if (fields[i + 1] == &quot;group&quot;)
-	   os_file.attrib.push_back(FXFile::group (os_file.name.c_str ()).text ());
-	else if (fields[i + 1] == &quot;accessed&quot;)
-	    os_file.attrib.push_back(FXFile::time (&quot;%H:%M %d/%m/%y&quot;, FXFile::accessed (os_file.name.c_str ())).text ());
-	else if (fields[i + 1] == &quot;created&quot;)
-	    os_file.attrib.push_back(FXFile::time (&quot;%H:%M %d/%m/%y&quot;, FXFile::created (os_file.name.c_str ())).text ()); 
-	else if (fields[i + 1] == &quot;modified&quot;)
- 	    os_file.attrib.push_back(FXFile::time (&quot;%H:%M %d/%m/%y&quot;, FXFile::modified (os_file.name.c_str ())).text ());       
-	else if (fields[i + 1] == &quot;mode&quot;)
-	{
-
-	    struct stat info;
-	    string str = &quot;---------&quot;;
-	    if (lstat (os_file.name.c_str (), &amp;info) == 0)
-	    {
-
-		(info.st_mode &amp; S_IRUSR) ? str[0] = 'r' : str[0] = '-';
-		(info.st_mode &amp; S_IWUSR) ? str[1] = 'w' : str[1] = '-';
-		(info.st_mode &amp; S_IXUSR) ? str[2] = 'x' : str[2] = '-';
-		(info.st_mode &amp; S_IRGRP) ? str[3] = 'r' : str[3] = '-';
-		(info.st_mode &amp; S_IWGRP) ? str[4] = 'w' : str[4] = '-';
-		(info.st_mode &amp; S_IXGRP) ? str[5] = 'x' : str[5] = '-';
-		(info.st_mode &amp; S_IROTH) ? str[6] = 'r' : str[6] = '-';
-		(info.st_mode &amp; S_IWOTH) ? str[7] = 'w' : str[7] = '-';
-		(info.st_mode &amp; S_IXOTH) ? str[8] = 'x' : str[8] = '-';
-
-	    }
-
-
-	    os_file.attrib.push_back(str);
-
-	}
-
-    }
-
-
-
-    return os_file;
-
-
-}
-
-
-int filelist_local::osopendir (string dir)
-{
-    this-&gt;dir = dir;
-
-#ifndef WIN32
-    std::string line;
-    std::ifstream infile (&quot;/etc/fstab&quot;);
-
-    while (std::getline (infile, line))
-    {
-
-	std::stringstream parser (line);
-	std::string command;
-	std::string field;
-	string partition;
-	parser &gt;&gt; partition;
-
-	string type;
-
-	if (partition[0] != '#')
-	{
-
-	    parser &gt;&gt; command;
-
-	    if (command == dir)
-	    {
-
-		parser &gt;&gt; type;
-		parser &gt;&gt; field;
-		string::size_type pos = field.find (&quot;noauto&quot;, 0);
-		if (pos != string::npos)
-		{
-
-		    if (mount (partition.c_str (), command.c_str (), type.c_str (), MS_RDONLY, &quot;&quot;) == 0)
-			FXTRACE ((5, &quot;MOUNT\n&quot;));
-
-		}
-	    }
-
-	}
-    }
-
-#endif
-
-    dp = opendir (dir.c_str ());
-    if (dp == NULL)
-	return -1;
-
-    chdir (dir.c_str ());
-
-
-}
-
-int filelist_local::mkdir (string dir, int mode)
-{
-    FXTRACE ((5, &quot;MKDIR\n&quot;));
-    string d = this-&gt;dir + SEPARATOR + dir;
-
-    return FXFile::createDirectory (d.c_str (), mode);
-    return 0;
-}
-
-int filelist_local::copy (thread_elem * te)
-{
-    copymove (te, true);
-}
-
-int filelist_local::move (thread_elem * te)
-{
-    copymove (te, false);
-}
-
-
-int filelist_local::remove (thread_elem * te)
-{
-
-    bool canc = false;
-
-    vector &lt; string &gt;::iterator iter;
-
-    for (iter = te-&gt;src.begin (); iter != te-&gt;src.end(); iter++)
-    {
-  
-	if (!canc)
-	{
-
-	    string sr = (*iter);
-	    if (FXFile::isDirectory (sr.c_str ()))
-		sr.append (SEPARATOR);
-	    FXTRACE ((5, &quot;REMOVE: %s&quot;, sr.c_str ()));
-
-	    if (OSFXFile::remove (sr.c_str (), te) == FALSE)
-		canc = true;
-		
-	}
-
-
-    }
-    if(canc)
-    {
-    te-&gt;error=true;
-    te-&gt;msg=&quot;operation failed&quot;;
-    }
-    
-
-
-}
-
-int filelist_local::rename (string orgname, string newname)
-{
-
-    FXString newfile = newname.c_str ();
-    FXString oldfile = orgname.c_str ();
-
-#ifndef WIN32
-    if (!FXFile::exists (oldfile))
-	return false;
-    if (FXFile::exists (newfile))
-    {
-	return false;
-
-    }
-
-    if (::rename (oldfile.text (), newfile.text ()) == 0)
-	return true;
-    if (errno != EXDEV)
-	return false;
-	
-#else
-    if (!FXFile::exists (oldfile))
-	return false;
-    if (FXFile::exists (newfile))
-    {
-	return false;
-
-    }
-
-    if (::MoveFile (oldfile.text (), newfile.text ()) != 0)
-	return true;
-#endif
-}
-
-
-int filelist_local::copymove (thread_elem * te, bool copy)
-{
-
-    unsigned long size = 0;
-
- 
-     vector &lt; string &gt;::iterator iter;
-
-    for (iter = te-&gt;src.begin (); iter != te-&gt;src.end(); iter++)
-    {
-	string sr = (*iter);
-	if (FXFile::isDirectory (sr.c_str ()))
-	    sr.append (SEPARATOR);
-	totalsize (sr, size);
-
-    }
-
-    te-&gt;total_size = size;
-
-    bool canc = false;
-
-
-
-    for (iter = te-&gt;src.begin (); iter != te-&gt;src.end(); iter++)
-    {
-	if (!canc)
-	{
-	    string ds = te-&gt;dst;
-	    ds.append (SEPARATOR);
-	    ds.append (FXFile::name (iter-&gt;c_str ()).text ());
-
-
-	    string sr = (*iter);
-	    if (FXFile::isDirectory (sr.c_str ()))
-		sr.append (SEPARATOR);
-
-
-
-	    if (copy)
-	    {
-		if (OSFXFile::copy (sr.c_str (), ds.c_str (), te) == FALSE)
-		    canc = true;
-	    }
-	    else
-	    {
-		FXTRACE ((5, &quot;MOVE;]&quot;));
-		if (OSFXFile::move (sr.c_str (), ds.c_str (), te) == FALSE)
-		    canc = true;
-	    }
-
-	}
-
-    }
-    if(canc)
-    {
-    te-&gt;error=true;
-    te-&gt;msg=&quot;operation failed&quot;;
-    }
-
-}
-
-
-
-void filelist_local::totalsize (string path, unsigned long &amp;size)
-{
-
-    if (FXFile::isDirectory (path.c_str ()))
-    {
-	struct stat status;
-	struct dirent *dp;
-	DIR *dirp;
-
-
-	dirp = opendir (path.c_str ());
-
-	while ((dp = readdir (dirp)) != NULL)
-	{
-	    if (dp-&gt;d_name[0] != '.' || (dp-&gt;d_name[1] != '\0' &amp;&amp; (dp-&gt;d_name[1] != '.' || dp-&gt;d_name[2] != '\0')))
-	    {
-
-		string file = path;
-		file.append (dp-&gt;d_name);
-#ifndef WIN32
-		lstat (file.c_str (), &amp;status);
-#else
-		stat (file.c_str (), &amp;status);
-#endif
-		if (S_ISDIR (status.st_mode))
-		{
-		    size = size + (unsigned int) status.st_size;
-		    file.append (&quot;/&quot;);
-		    totalsize (file, size);
-
-		}
-		else
-		{
-		    size = size + status.st_size;
-		}
-	    }
-	}
-
-	closedir (dirp);
-    }
-    else
-    {
-	size += FXFile::size (path.c_str ());
-
-    }
-
-}
-
-string filelist_local::info (void)
-{
-    return &quot;&quot;;
-}
-
-
-int filelist_local::mode (string file)
-{
-    struct stat status;
-    return !file.empty () &amp;&amp; (::stat (file.c_str (), &amp;status) == 0) ? status.st_mode : 0;
-}
-
-bool filelist_local::mode (string file, unsigned int mod, bool recursive)
-{
-    FXTRACE ((5, &quot;MODE&quot;));
-    if (!recursive)
-    {
-	return FXFile::mode (file.c_str (), mod);
-    }
-    else
-    {
-	FXFile::mode (file.c_str (), mod);
-	string path = file + SEPARATOR;
-
-	if (FXFile::isDirectory (path.c_str ()))
-	{
-
-	    struct stat status;
-	    struct dirent *dp;
-	    DIR *dirp;
-
-
-	    dirp = opendir (path.c_str ());
-
-	    while ((dp = readdir (dirp)) != NULL)
-	    {
-		if (dp-&gt;d_name[0] != '.' || (dp-&gt;d_name[1] != '\0' &amp;&amp; (dp-&gt;d_name[1] != '.' || dp-&gt;d_name[2] != '\0')))
-		{
-
-		    string file = path;
-		    file.append (dp-&gt;d_name);
-		    mode (file, mod, true);
-
-		}
-	    }
-
-	    closedir (dirp);
-	}
-
-
-    }
-}
-
-string filelist_local::owner (string file)
-{
-    return FXFile::owner (file.c_str ()).text ();
-}
-string filelist_local::group (string file)
-{
-    return FXFile::group (file.c_str ()).text ();
-}
-
-bool filelist_local::owner (string file, string ownername, bool recursive)
-{
-    FXTRACE ((5, &quot;MODE&quot;));
-    if (!recursive)
-    {
-
-
-	passwd *p = getpwnam (ownername.c_str ());
-	return chown (file.c_str (), p-&gt;pw_uid, -1);
-
-    }
-    else
-    {
-	passwd *p = getpwnam (ownername.c_str ());
-	chown (file.c_str (), p-&gt;pw_uid, -1);
-
-	string path = file + SEPARATOR;
-
-	if (FXFile::isDirectory (path.c_str ()))
-	{
-
-	    struct stat status;
-	    struct dirent *dp;
-	    DIR *dirp;
-
-
-	    dirp = opendir (path.c_str ());
-
-	    while ((dp = readdir (dirp)) != NULL)
-	    {
-		if (dp-&gt;d_name[0] != '.' || (dp-&gt;d_name[1] != '\0' &amp;&amp; (dp-&gt;d_name[1] != '.' || dp-&gt;d_name[2] != '\0')))
-		{
-
-		    string file = path;
-		    file.append (dp-&gt;d_name);
-		    owner (file, ownername, true);
-
-		}
-	    }
-
-	    closedir (dirp);
-	}
-
-
-    }
-}
-
-bool filelist_local::group (string file, string groupname, bool recursive)
-{
-    FXTRACE ((5, &quot;MODE&quot;));
-    if (!recursive)
-    {
-	::group * grp = getgrnam (groupname.c_str ());
-	return chown (file.c_str (), -1, grp-&gt;gr_gid);
-
-
-    }
-    else
-    {
-	::group * grp = getgrnam (groupname.c_str ());
-	chown (file.c_str (), -1, grp-&gt;gr_gid);
-	string path = file + SEPARATOR;
-
-	if (FXFile::isDirectory (path.c_str ()))
-	{
-
-	    struct stat status;
-	    struct dirent *dp;
-	    DIR *dirp;
-
-
-	    dirp = opendir (path.c_str ());
-
-	    while ((dp = readdir (dirp)) != NULL)
-	    {
-		if (dp-&gt;d_name[0] != '.' || (dp-&gt;d_name[1] != '\0' &amp;&amp; (dp-&gt;d_name[1] != '.' || dp-&gt;d_name[2] != '\0')))
-		{
-
-		    string file = path;
-		    file.append (dp-&gt;d_name);
-		    group (file, groupname, true);
-
-		}
-	    }
-
-	    closedir (dirp);
-	}
-
-
-    }
-}
-
-string filelist_local::symlink (string path)
-{
-    return FXFile::symlink (path.c_str ()).text ();
-}
-bool filelist_local::symlink (string src, string dst)
-{
-    return FXFile::symlink (src.c_str (), dst.c_str ());
-}
-bool filelist_local::hardlink (string src, string dst)
-{
-    return FXFile::link (src.c_str (), dst.c_str ());
-}
-
-
-int filelist_local::quit (void)
-{
-    return 0;
-}
-
-EXPORTFUNCTION filelist_base *get_filelist (void)
-{
-    FXTRACE ((5, &quot;PLUGIN LOAD\n&quot;));
-    return new filelist_local ();
-}

Deleted: trunk/src/plugins/filelist/filelist_local.h
===================================================================
--- trunk/src/plugins/filelist/filelist_local.h	2006-02-12 13:43:28 UTC (rev 245)
+++ trunk/src/plugins/filelist/filelist_local.h	2006-02-12 15:36:06 UTC (rev 246)
@@ -1,56 +0,0 @@
-#ifndef FILELIST_LOCAL
-#define FILELIST_LOCAL
-
-#include&quot;../../filelist_base.h&quot;
-
-#include &lt;sys/types.h&gt;
-#include &lt;sys/stat.h&gt;
-#include &lt;dirent.h&gt;
-#include &lt;unistd.h&gt;
-
-
-
-
-class filelist_local:public filelist_base
-{
-
-private:
-
-    DIR *dp;
-    dirent *dirrec;
-    struct stat status;
-    string dir;
-    string display_size;
-    int fieldsnum;
-     vector &lt; string &gt; fields;
-
-int copymove (thread_elem * te, bool copy = true);
-
-  public:
-
-    int osopendir (string dir);
-    osfile osreaddir (void);
-    int mkdir (string dir, int mode);
-    int copy (thread_elem * te);
-    int move (thread_elem * te);
-    int remove (thread_elem * te);
-    int rename (string orgname, string newname);
-    int init (vector &lt; string &gt; *vector_name, pathtype pt, configure * conf);
-    int mode (string file);
-    string owner (string file);
-    string group (string file);
-    bool mode (string file, unsigned int, bool recursive = false);
-    bool owner (string file, string ownername, bool recursive = false);
-    bool group (string file, string groupname, bool recursive = false);
-    string info (void);
-    int quit (void);
-    string symlink (string path);
-    bool symlink (string src, string dst);
-    bool hardlink (string src, string dst);
-    vfs setup (void);
-    void totalsize (string path, unsigned long &amp;size);
-    
-};
-
-
-#endif

Modified: trunk/src/plugins/filelist/filelist_scp.cpp
===================================================================
--- trunk/src/plugins/filelist/filelist_scp.cpp	2006-02-12 13:43:28 UTC (rev 245)
+++ trunk/src/plugins/filelist/filelist_scp.cpp	2006-02-12 15:36:06 UTC (rev 246)
@@ -7,7 +7,7 @@
 
 #include &lt;fx.h&gt;
 #include &quot;filelist_scp.h&quot;
-#include &quot;../../sharedobjects.h&quot;
+#include &quot;../../OSObjectManager.h&quot;
 
 
 #include &lt;fstream&gt;


Property changes on: trunk/src/plugins/filelist/filelist_scp.cpp
___________________________________________________________________
Name: svn:keywords
   + Id

Modified: trunk/src/plugins/filelist/filelist_scp.h
===================================================================
--- trunk/src/plugins/filelist/filelist_scp.h	2006-02-12 13:43:28 UTC (rev 245)
+++ trunk/src/plugins/filelist/filelist_scp.h	2006-02-12 15:36:06 UTC (rev 246)
@@ -1,7 +1,7 @@
 #ifndef FILELIST_SCP
 #define FILELIST_SCP
 
-#include&quot;../../filelist_base.h&quot;
+#include&quot;../../OSVirtualFileSystemBase.h&quot;
 
 #include &lt;stdio.h&gt;
 
@@ -12,49 +12,44 @@
 #include &lt;iostream&gt;
 
 
-
-
 class filelist_scp:public filelist_base
 {
-    string dir;
-    string display_size;
-    int fieldsnum;
-    string *fields;
+  string dir;
+  string display_size;
+  int fieldsnum;
+  string *fields;
 
+  int p[2];
+  int o[2];
 
-    int p[2];
-    int o[2];
+  char readbuffer[20];
 
-    char readbuffer[20];
+  int nbytes;
+  int end;
+  string prompt;
 
-    int nbytes;
+public:
 
-    int end;
+  int osopendir (string dir);
+  osfile osreaddir (void);
+  int mkdir (string dir, int mode);
+  int copy (thread_elem * te);
+  int move (thread_elem * te);
+  int remove (thread_elem * te);
+  int rename (string orgname, string newname);
+  int init (string ** name, unsigned int **type, unsigned int **width,
+	    pathtype pt, configure * conf);
+  unsigned int mode (string file);
+  bool mode (string file, unsigned int, bool recursive = false);
+  string info (void);
+  int quit (void);
 
-    string prompt;
+  void totalsize (string path, unsigned long &amp;size);
+  int copymove (thread_elem * te, bool copy = true);
 
+  bool getprompt (void);
 
-  public:
 
-    int osopendir (string dir);
-    osfile osreaddir (void);
-    int mkdir (string dir, int mode);
-    int copy (thread_elem * te);
-    int move (thread_elem * te);
-    int remove (thread_elem * te);
-    int rename (string orgname, string newname);
-    int init (string ** name, unsigned int **type, unsigned int **width, pathtype pt, configure * conf);
-    unsigned int mode (string file);
-    bool mode (string file, unsigned int, bool recursive = false);
-    string info (void);
-    int quit (void);
-
-    void totalsize (string path, unsigned long &amp;size);
-    int copymove (thread_elem * te, bool copy = true);
-
-    bool getprompt (void);
-
-
 };
 
 


Property changes on: trunk/src/plugins/filelist/filelist_scp.h
___________________________________________________________________
Name: svn:keywords
   + Id

Deleted: trunk/src/plugins/filelist/filelist_search.cpp
===================================================================
--- trunk/src/plugins/filelist/filelist_search.cpp	2006-02-12 13:43:28 UTC (rev 245)
+++ trunk/src/plugins/filelist/filelist_search.cpp	2006-02-12 15:36:06 UTC (rev 246)
@@ -1,180 +0,0 @@
-#ifdef WIN32
-#define EXPORTFUNCTION extern &quot;C&quot; __declspec(dllexport)
-#else
-#define EXPORTFUNCTION extern &quot;C&quot;
-#endif
-#include &quot;filelist_search.h&quot;
-
-vfs filelist_search::setup (void)
-{
-	vfs v;
-	
-	v.vfsheaders.push_back(vfsheader_container(&quot;name&quot;));
-	v.information=&quot;search vfs - default plugin&quot;;
-	v.version=&quot;1&quot;;
-	v.type=&quot;search&quot;;
-return v;	
-	
-}
-
-
-int filelist_search::osopendir (string dir)
-{
-
-  iter=files.begin(); 
-
-}
-osfile filelist_search::osreaddir (void)
-{
-    osfile os_file;
-
-if(iter!=files.end())
-{
-
-	    os_file.type = 0;
-	    os_file.name = *iter;
-	    os_file.size = 300;
-	
-	    iter++;
-	 
-	    return os_file;
-}		    
-
-
-    
-    os_file.name = &quot;&quot;;
-    return os_file;
-    
-
-
-}
-int filelist_search::mkdir (string dir, int mode)
-{
-}
-int filelist_search::copy (thread_elem * te)
-{
-
-	string::size_type pos = te-&gt;options.find (&quot;download&quot;);
-	if (pos == string::npos) //upload only supported
-	{
-	return fil_local-&gt;copy(te);
-	}
-	else
-	{
-	 te-&gt;error=true;
-         te-&gt;msg=&quot;operation not allowed&quot;;
-	}
-
-}
-int filelist_search::move (thread_elem * te)
-{
-
-	string::size_type pos = te-&gt;options.find (&quot;download&quot;);
-	if (pos == string::npos) //upload only supported
-	{
-	return fil_local-&gt;move(te);
-	}
-	else
-	{
-	 te-&gt;error=true;
-         te-&gt;msg=&quot;operation not allowed&quot;;
-	}
-
-}
-int filelist_search::remove (thread_elem * te)
-{
-return fil_local-&gt;remove(te);
-}
-int filelist_search::rename (string orgname, string newname)
-{
-
-	int ret=fil_local-&gt;rename(orgname,newname);
-	if(ret)
-	{
-		vector &lt; string &gt;::iterator iter = find(files.begin(), files.end(), orgname.substr(1,orgname.length()-1)); // Search the list.
-		if (iter != files.end())
-		{
-  		(*iter)=newname.substr(1,newname.length()-1);
-		}
-	}
-
-	return ret;
-}
-int filelist_search::init (vector &lt; string &gt; *vector_name, pathtype pt, configure * conf)
-{
-
-
-fil_local=new filelist_local();
-
-
-    pipe = popen (pt.server.c_str(), &quot;r&quot;);
-
-    if (pipe != NULL)
-    {
-	string line;
-	while (fgets (readbuf, sizeof (readbuf), pipe) != NULL)
-	{
-
-
-	    string path = readbuf;
-	    path = path.substr (1, path.length () - 2);
-	    files.push_back(path);
-	   
-	}
-
-	pclose (pipe);
-    }
-    
-iter=files.begin();
-    
-
-}
-int filelist_search::mode (string file)
-{
-return fil_local-&gt;mode(file);
-}
-string filelist_search::owner (string file)
-{
-return fil_local-&gt;owner(file);
-}
-string filelist_search::group (string file)
-{
-return fil_local-&gt;group(file);
-}
-bool filelist_search::mode (string file, unsigned int mod, bool recursive)
-{
-return fil_local-&gt;mode(file,mod,recursive);
-}
-bool filelist_search::owner (string file, string ow, bool recursive)
-{
-return fil_local-&gt;owner(file,ow,recursive);
-}
-bool filelist_search::group (string file, string gr, bool recursive)
-{
-return fil_local-&gt;group(file,gr,recursive);
-}
-string filelist_search::info (void)
-{
-return &quot;&quot;;
-}
-void filelist_search::totalsize (string path, unsigned long &amp;size)
-{
-}
-string filelist_search::symlink (string path)
-{
-}
-bool filelist_search::symlink (string src, string dst)
-{
-}
-bool filelist_search::hardlink (string src, string dst)
-{
-}
-
-int filelist_search::quit (void)
-{
-}
-EXPORTFUNCTION filelist_base *get_filelist (void)
-{
-    FXTRACE ((5, &quot;PLUGIN SEARCH LOAD\n&quot;));
-    return new filelist_search ();
-}

Deleted: trunk/src/plugins/filelist/filelist_search.h
===================================================================
--- trunk/src/plugins/filelist/filelist_search.h	2006-02-12 13:43:28 UTC (rev 245)
+++ trunk/src/plugins/filelist/filelist_search.h	2006-02-12 15:36:06 UTC (rev 246)
@@ -1,42 +0,0 @@
-#ifndef FILELIST_search
-#define FILELIST_search
-#include &quot;../../filelist_base.h&quot;
-#include &quot;filelist_local.h&quot;
-
-class filelist_search:public filelist_base
-{
-  
-private:
-  
-  FILE *pipe;
-  char readbuf[1024];
-  vector &lt; string &gt; files;
-  vector &lt; string &gt;::iterator iter;
-
-  filelist_local *fil_local;
-  
-public:
-  
-    int filelist_search::osopendir (string dir);
-    osfile filelist_search::osreaddir (void);
-    int filelist_search::mkdir (string dir, int mode = 0);
-    int filelist_search::copy (thread_elem * te);
-    int filelist_search::move (thread_elem * te);
-    int filelist_search::remove (thread_elem * te);
-    int filelist_search::rename (string orgname, string newname);
-    int filelist_search::init (vector &lt; string &gt; *vector_name, pathtype pt, configure * conf);
-    int filelist_search::mode (string file);
-    string filelist_search::owner (string file);
-    string filelist_search::group (string file);
-    bool filelist_search::mode (string file, unsigned int, bool recursive);
-    bool filelist_search::owner (string file, string, bool recursive);
-    bool filelist_search::group (string file, string, bool recursive);
-    string filelist_search::info (void);
-    void filelist_search::totalsize (string path, unsigned long &amp;size);
-    string filelist_search::symlink (string path);
-    bool filelist_search::symlink (string src, string dst);
-    bool filelist_search::hardlink (string src, string dst);
-    vfs filelist_search::setup (void);
-    int filelist_search::quit (void);
-};
-#endif


Property changes on: trunk/src/plugins/filelist/filelist_sftp.cpp
___________________________________________________________________
Name: svn:keywords
   + Id

Modified: trunk/src/plugins/filelist/filelist_sftp.h
===================================================================
--- trunk/src/plugins/filelist/filelist_sftp.h	2006-02-12 13:43:28 UTC (rev 245)
+++ trunk/src/plugins/filelist/filelist_sftp.h	2006-02-12 15:36:06 UTC (rev 246)
@@ -1,6 +1,6 @@
 #ifndef FILELIST_sftp
 #define FILELIST_sftp
-#include &quot;../../filelist_base.h&quot;
+#include &quot;../../OSVirtualFileSystemBase.h&quot;
 class filelist_sftp:public filelist_base
 {
     string dir;  


Property changes on: trunk/src/plugins/filelist/filelist_sftp.h
___________________________________________________________________
Name: svn:keywords
   + Id


Property changes on: trunk/src/plugins/filelist/pftp.cpp
___________________________________________________________________
Name: svn:keywords
   + Id

Modified: trunk/src/plugins/filelist/pftp.h
===================================================================
--- trunk/src/plugins/filelist/pftp.h	2006-02-12 13:43:28 UTC (rev 245)
+++ trunk/src/plugins/filelist/pftp.h	2006-02-12 15:36:06 UTC (rev 246)
@@ -1,5 +1,5 @@
 /* pftp.h : passive-capable FTP class.
-   Copyright 2002 Mr. Tines &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/openspace-svn">Tines at RavnaAndTines.com</A>&gt;
+  Copyright 2002 Mr. Tines &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/openspace-svn">Tines at RavnaAndTines.com</A>&gt;
 
 This program is free software; you can redistribute it and/or modify it
 under the terms of the GNU Library General Public License as published by the
@@ -27,7 +27,8 @@
 #endif
 
 
-namespace FX {
+namespace FX
+{
     class FXString;
     class FXMemoryStream;
 }
@@ -55,45 +56,61 @@
 
 #define PASSIVE_FTP_PRODUCT_VERSION &quot;1.7.1955.38236&quot;
 
-class Logger {
+/**
+ * Logger class.
+ * 
+ * @todo Add virtual destructor - this class is a base class!
+ */
+class Logger
+{
 public:
-    virtual void start(uint32_t bytes, const FXString &amp; name,uint32_t size=0) = 0;
-    virtual bool update(uint32_t bytes, const FXString &amp; name) = 0;
-    virtual void end(uint32_t bytes, const FXString &amp; name) = 0;
-    virtual void error(int error) = 0;
-    virtual void error(FXString &amp; error) = 0;
+    virtual void start( uint32_t bytes, const FXString &amp; name, uint32_t size = 0 ) = 0;
+    virtual bool update( uint32_t bytes, const FXString &amp; name ) = 0;
+    virtual void end( uint32_t bytes, const FXString &amp; name ) = 0;
+    virtual void error( int error ) = 0;
+    virtual void error( FXString &amp; error ) = 0;
     virtual void choke() = 0;
-    virtual void logLine(FXString &amp; line) = 0;
+    virtual void logLine( FXString &amp; line ) = 0;
 };
 
-class PFTP 
+/**
+ * FTP class.
+ */
+class PFTP
 {
 public:
-    PFTP(const FXString &amp; server, const FXString &amp; user, const FXString &amp; pass, const FXString &amp; proxy, Logger * feedback);
+    
+    /**
+     * Constructor.
+     */
+    PFTP( const FXString&amp; server, const FXString&amp; user, const FXString&amp; pass, const FXString&amp; proxy, Logger* feedback );
 
+    /**
+     * Destructor.
+     */
+    ~PFTP( void );
+    
     // need to provide a feedback callback
-    void download(const FXString &amp; file,FXString dst, bool asc=false);
-    void upload(const FXString &amp; file, int throttle, bool asc=false);
+    void download( const FXString &amp; file, FXString dst, bool asc = false );
+    void upload( const FXString &amp; file, int throttle, bool asc = false );
 
-    void setDir(const FXString &amp; dir);
-    void mkDir(const FXString &amp; dir);
-    void del(const FXString &amp; file);
-    void rmDir(const FXString &amp; dir);
-    void pwd(FXString &amp; dir);
-    void list(FXMemoryStream &amp; stream);
-    void nlist(FXMemoryStream &amp; stream);
-    void logout(void);
+    void setDir( const FXString &amp; dir );
+    void mkDir( const FXString &amp; dir );
+    void del( const FXString &amp; file );
+    void rmDir( const FXString &amp; dir );
+    void pwd( FXString &amp; dir );
+    void list( FXMemoryStream &amp; stream );
+    void nlist( FXMemoryStream &amp; stream );
+    void logout( void );
 
     bool isConnected() const;
 
-    ~PFTP();
+    void sendCmd( const FXString cmd, const FXString &amp; value, FXString &amp; response );
 
-void sendCmd(const FXString cmd, const FXString &amp; value, FXString &amp; response);
-
-
 private:
 
-    enum {
+    enum
+    {
         CNTRL_PORT = 21,
         BUCKET = 4096
     };
@@ -103,32 +120,30 @@
     SOCKET dsock;
 
     bool pauser;  // it's a hack. We're going to
-          // stall (refuse further requests) till we get a reply back
-          // from server for the current request.
+    // stall (refuse further requests) till we get a reply back
+    // from server for the current request.
 
-    char lineBuffer[BUCKET];
+    char lineBuffer[ BUCKET ];
     int buffered;
-	char * proxyServer;
-	int proxyPort;
+    char * proxyServer;
+    int proxyPort;
 
 
-    int connect(const FXString &amp; server);
-    void getAsBytes(const FXString &amp; file, SOCKET sock, FXMemoryStream &amp; buffer);
-    void login(const FXString &amp; user, const FXString &amp; pass);
-    void setTransferType(bool asc);
+    int connect( const FXString &amp; server );
+    void getAsBytes( const FXString &amp; file, SOCKET sock, FXMemoryStream &amp; buffer );
+    void login( const FXString &amp; user, const FXString &amp; pass );
+    void setTransferType( bool asc );
 
-    void getDataSock(void);
-    
-    void responseHandler(const FXString &amp; cmd, FXString &amp; result);
+    void getDataSock( void );
 
+    void responseHandler( const FXString &amp; cmd, FXString &amp; result );
+
     // responseParser: check first digit of first line of response
     // and take action based on it; set up to read an extra line
     // if the response starts with &quot;1&quot;
-    bool responseParser(const FXString &amp; resp);
-    void readLine(FXString &amp; line, bool pureFTP=true);
+    bool responseParser( const FXString &amp; resp );
+    void readLine( FXString &amp; line, bool pureFTP = true );
 
-
 };
 
 #endif
-


Property changes on: trunk/src/plugins/filelist/pftp.h
___________________________________________________________________
Name: svn:keywords
   + Id

Deleted: trunk/src/preferences.cpp
===================================================================
--- trunk/src/preferences.cpp	2006-02-12 13:43:28 UTC (rev 245)
+++ trunk/src/preferences.cpp	2006-02-12 15:36:06 UTC (rev 246)
@@ -1,2158 +0,0 @@
-#include &quot;fx.h&quot;
-#include &quot;preferences.h&quot;
-#include &quot;MimeType.h&quot;
-#include &lt;sys/types.h&gt;
-#include &lt;sys/stat.h&gt;
-#include &lt;unistd.h&gt;
-#include &lt;dirent.h&gt;
-#include &lt;stdlib.h&gt;
-
-#include &quot;FXDLL.h&quot;
-#include &quot;filelist_base.h&quot;
-#include &lt;fstream&gt;
-#include &lt;sstream&gt;
-#include &quot;config.h&quot;
-
-FXDEFMAP (preferences) preferencesMap[] =
-{
-    //________Message_Type_____________________ID____________Message_Handler_______  
-	//FXMAPFUNC (SEL_COMMAND, preferences::ID_SAVE, preferences::onSave),
-	FXMAPFUNC (SEL_COMMAND, preferences::ID_COMMAND_CHANGE, preferences::onCommandChange),
-	FXMAPFUNC (SEL_COMMAND, preferences::ID_FILETYPE_CHANGE, preferences::onFileTypeChange), 
-	FXMAPFUNC (SEL_COMMAND, preferences::ID_SHUTTER_CHANGE, preferences::onShutterChange),	
-	FXMAPFUNC (SEL_COMMAND, preferences::ID_TOOLBAR_CHANGE, preferences::onToolbarChange),
-	FXMAPFUNC (SEL_COMMAND, preferences::ID_VFS_CHANGE, preferences::onVfsChange),	
-	FXMAPFUNC (SEL_COMMAND, preferences::ID_NEW_COMMAND, preferences::onNewCommand), 
-	FXMAPFUNC (SEL_COMMAND, preferences::ID_REMOVE_COMMAND, preferences::onRemoveCommand),
-	FXMAPFUNC (SEL_COMMAND, preferences::ID_NEW_SHUTTER, preferences::onNewShutter), 
-	FXMAPFUNC (SEL_COMMAND, preferences::ID_REMOVE_SHUTTER, preferences::onRemoveShutter),
-	FXMAPFUNCS (SEL_COMMAND, preferences::ID_MIME_APP, preferences::ID_MIME_APP_AUTO, preferences::onOpenMimeApp),
-	FXMAPFUNC (SEL_COMMAND, preferences::ID_ADD_FILETYPE, preferences::onAddFiletype),
-	FXMAPFUNCS (SEL_COMMAND, preferences::ID_CHOOSE_COLOR,preferences::ID_CHOOSE_BACKCOLOR, preferences::onChooseColor),
-	FXMAPFUNCS (SEL_COMMAND, preferences::ID_ADD_COMMAND_ADDITIONAL,preferences::ID_DEL_COMMAND_ADDITIONAL, preferences::onAdditionalCommandChange),
-	FXMAPFUNCS (SEL_COMMAND, preferences::ID_ADD_BUTTON_COMMAND,preferences::ID_DEL_BUTTON_COMMAND, preferences::onAddButtonCommand),
-	FXMAPFUNCS (SEL_COMMAND, preferences::ID_ADD_SHUTTER_COMMAND,preferences::ID_DEL_SHUTTER_COMMAND, preferences::onAddShutterCommand),
-	FXMAPFUNCS (SEL_COMMAND, preferences::ID_ADD_HEADER,preferences::ID_DEL_HEADER, preferences::onAddHeader),
-	FXMAPFUNC(SEL_CLOSE,0,preferences::close),
-	FXMAPFUNCS (SEL_COMMAND, preferences::ID_DOWNLOAD_INSTALL_CMD_PLUGIN,preferences::ID_DOWNLOAD_INSTALL_VFS_PLUGIN, preferences::downloadInstallPlugin),
-	FXMAPFUNCS (SEL_COMMAND, preferences::ID_UPDATE_CMD_PLUGIN_LIST,preferences::ID_UPDATE_VFS_PLUGIN_LIST, preferences::updatePluginList),
-	FXMAPFUNC(SEL_COMMAND,preferences::ID_COLORS,preferences::onColorChanged),
-	FXMAPFUNC(SEL_CHANGED,preferences::ID_COLORS,preferences::onColorChanged),
-	FXMAPFUNCS(SEL_COMMAND,preferences::ID_CHOOSE_FONT,preferences::ID_CHOOSE_CAPTIONFONT3,preferences::onChooseFont),
-	FXMAPFUNC(SEL_COMMAND,preferences::ID_UPDATE_WINDOW_SIZE,preferences::updateWindowSize),
-	FXMAPFUNCS(SEL_COMMAND,preferences::ID_UP_BUTTON_COMMAND,preferences::ID_DOWN_SHUTTER_COMMAND,preferences::onUpDown),
-	FXMAPFUNCS(SEL_COMMAND,preferences::ID_UP_VFS_HEADER,preferences::ID_DOWN_VFS_HEADER,preferences::onUpDownVfsHeader),
-	FXMAPFUNCS(SEL_COMMAND,preferences::ID_UP_COMMAND,preferences::ID_DOWN_COMMAND,preferences::onUpDownCommand),
-
-	
-	
-	
-};
-
-
-FXIMPLEMENT (preferences, FXDialogBox, preferencesMap, ARRAYNUMBER (preferencesMap))
-
-long preferences::onUpDownCommand(FXObject * sender, FXSelector sel, void *)
-{
-if(additionalCommands-&gt;getNumItems ()==0)
-return 0;
-
-FXushort id=FXSELID(sel);
-	if(id==ID_UP_COMMAND)
-	{
-		if(additionalCommands-&gt;getCurrentItem()!=0)
-		additionalCommands-&gt;moveItem(additionalCommands-&gt;getCurrentItem()-1,additionalCommands-&gt;getCurrentItem());
-	}
-	else
-	{
-		if(additionalCommands-&gt;getCurrentItem()!=additionalCommands-&gt;getNumItems ()-1)
-		additionalCommands-&gt;moveItem(additionalCommands-&gt;getCurrentItem()+1,additionalCommands-&gt;getCurrentItem());
-	}
-
-filetype_container *ct_prev=&amp;filetypesMap[currentFileType];
-ct_prev-&gt;commands.clear();
-
-	for (int i = 0; i &lt; additionalCommands-&gt;getNumItems (); i++)
-	{
-	ct_prev-&gt;commands.push_back(additionalCommands-&gt;getItemText(i).text());
-	}
-
-
-
-}
-
-long preferences::onUpDownVfsHeader(FXObject * sender, FXSelector sel, void *)
-{
-
-if(headersList-&gt;getNumItems ()==0)
-return 0;
-
-	FXushort id=FXSELID(sel);
-	if(id==ID_UP_VFS_HEADER)
-	{
-		if(headersList-&gt;getCurrentItem()!=0)
-		headersList-&gt;moveItem(headersList-&gt;getCurrentItem()-1,headersList-&gt;getCurrentItem());
-	}
-	else
-	{
-		if(headersList-&gt;getCurrentItem()!=headersList-&gt;getNumItems ()-1)
-		headersList-&gt;moveItem(headersList-&gt;getCurrentItem()+1,headersList-&gt;getCurrentItem());
-	}
-
-this-&gt;onVfsChange(NULL,0,NULL);
-
-}
-
-long preferences::onUpDown(FXObject * sender, FXSelector sel, void *)
-{
-
-
-
-
-FXList*updownlist;
-FXListBox * box;
-bool up;
-
-FXushort id=FXSELID(sel);
-if(id==ID_UP_BUTTON_COMMAND)
-{
-updownlist=buttonsList;
-box=toolbarList;
-up=true;
-}
-else if(id==ID_DOWN_BUTTON_COMMAND)
-{
-updownlist=buttonsList;
-box=toolbarList;
-up=false;
-}
-else if(id==ID_UP_SHUTTER_COMMAND)
-{
-updownlist=shutterCommands;
-box=shutterList;
-up=true;
-}
-else if(id==ID_DOWN_SHUTTER_COMMAND)
-{
-updownlist=shutterCommands;
-box=shutterList;
-up=false;
-}
-
-if(updownlist-&gt;getNumItems ()==0)
-return 0;
-
-	if(up)
-	{
-		if(updownlist-&gt;getCurrentItem()!=0)
-		updownlist-&gt;moveItem(updownlist-&gt;getCurrentItem()-1,updownlist-&gt;getCurrentItem());
-	}
-	else
-	{
-		if(updownlist-&gt;getCurrentItem()!=updownlist-&gt;getNumItems ()-1)
-		updownlist-&gt;moveItem(updownlist-&gt;getCurrentItem()+1,updownlist-&gt;getCurrentItem());
-	}
-
-string actual_box=box-&gt;getItem(box-&gt;getCurrentItem()).text();
-
-if(id==ID_UP_BUTTON_COMMAND || id==ID_DOWN_BUTTON_COMMAND )
-{
-	vector &lt;toolbar_container&gt;::iterator iter;	
-	for(iter=toolbarVector.begin();iter!=toolbarVector.end(); iter++)
-		{
-			if(iter-&gt;toolbar==actual_box)
-			{
-			toolbarVector.erase(iter);
-			iter=toolbarVector.begin();
-			}
-		}
-			
-	for (int i = 0; i &lt; updownlist-&gt;getNumItems (); i++)
-	{
-	string cmd=updownlist-&gt;getItem(i)-&gt;getText().text();
-	toolbarVector.push_back(toolbar_container(actual_box,cmd));
-	}
-}	
-else if(id==ID_DOWN_SHUTTER_COMMAND || id==ID_UP_SHUTTER_COMMAND )
-{
-	vector &lt;shutter_container&gt;::iterator iter;	
-	for(iter=shutterVector.begin();iter!=shutterVector.end(); iter++)
-		{
-			if(iter-&gt;shutter==actual_box)
-			{
-			shutterVector.erase(iter);
-			iter=shutterVector.begin();
-			}
-		}
-			
-	for (int i = 0; i &lt; updownlist-&gt;getNumItems (); i++)
-	{
-	string cmd=updownlist-&gt;getItem(i)-&gt;getText().text();
-	shutterVector.push_back(shutter_container(actual_box,cmd));
-	}
-}	
-	
-}
-
-
-long preferences::updateWindowSize(FXObject * sender, FXSelector sel, void *)
-{
-mainwindow_width-&gt;setValue(getOwner ()-&gt;getWidth());
-mainwindow_height-&gt;setValue(getOwner ()-&gt;getHeight());
-}
-
-preferences::preferences (FXWindow * owner):FXDialogBox (owner, &quot;Preferences&quot;, DECOR_ALL, 0, 0, 0, 0, 0, 0, 0, 0, 4, 4)
-{
-
-objmanager=objectmanager::instance(getApp());
-  getApp()-&gt;getNormalFont()-&gt;create();
-  FXFontDesc fontdescription;
-  getApp()-&gt;getNormalFont()-&gt;getFontDesc(fontdescription);
-
-  font[0] = new FXFont(getApp(),fontdescription);
-  font[0]-&gt;create();
-  objmanager-&gt;captionfont1-&gt;getFontDesc(fontdescription);
-  font[1]= new FXFont(getApp(),fontdescription);
-  font[1]-&gt;create();
-  objmanager-&gt;captionfont2-&gt;getFontDesc(fontdescription);
-  font[2]= new FXFont(getApp(),fontdescription);
-  font[2]-&gt;create();
-   objmanager-&gt;captionfont3-&gt;getFontDesc(fontdescription);
-  font[3]= new FXFont(getApp(),fontdescription);
-  font[3]-&gt;create();
-  
-  typingSpeed =getApp()-&gt;getTypingSpeed();
-  clickSpeed  =getApp()-&gt;getClickSpeed();
-  scrollSpeed =getApp()-&gt;getScrollSpeed();
-  scrollDelay =getApp()-&gt;getScrollDelay();
-  blinkSpeed  =getApp()-&gt;getBlinkSpeed();
-  animSpeed   =getApp()-&gt;getAnimSpeed();
-  menuPause   =getApp()-&gt;getMenuPause();
-  tooltipPause=getApp()-&gt;getTooltipPause();
-  tooltipTime =getApp()-&gt;getTooltipTime();
-  dragDelta   =getApp()-&gt;getDragDelta();
-  wheelLines  =getApp()-&gt;getWheelLines();
-
-
-  target_typingspeed.connect(typingSpeed);
-  target_clickspeed.connect(clickSpeed);
-  target_scrollspeed.connect(scrollSpeed);
-  target_scrolldelay.connect(scrollDelay);
-  target_blinkspeed.connect(blinkSpeed);
-  target_animspeed.connect(animSpeed);
-  target_menupause.connect(menuPause);
-  target_tooltippause.connect(tooltipPause);
-  target_tooltiptime.connect(tooltipTime);
-  target_dragdelta.connect(dragDelta);
-  target_wheellines.connect(wheelLines);
-
-   tooltip = new FXToolTip(getApp());
-
-  /// Retrieve Current Color Settings
-  hilite  = getApp()-&gt;getHiliteColor();
-  shadow  = getApp()-&gt;getShadowColor();  
-  base    = getApp()-&gt;getBaseColor();
-  back    = getApp()-&gt;getBackColor();
-  border  = getApp()-&gt;getBorderColor();
-  fore    = getApp()-&gt;getForeColor();
-  selfore = getApp()-&gt;getSelforeColor();
-  selback = getApp()-&gt;getSelbackColor();
-  tipfore = getApp()-&gt;getTipforeColor();
-  tipback = getApp()-&gt;getTipbackColor();
-  menufore= getApp()-&gt;getSelMenuTextColor();
-  menuback= getApp()-&gt;getSelMenuBackColor();
-  main=fxcolorfromname(conf-&gt;readonestring (&quot;/OpenspaceConfig/colors/main&quot;).c_str());
-  
-  target_base.connect(base);
-  target_back.connect(back);
-  target_border.connect(border);
-  target_fore.connect(fore);
-  target_hilite.connect(hilite);
-  target_shadow.connect(shadow);
-  target_selfore.connect(selfore);
-  target_selback.connect(selback);
-  target_tipfore.connect(tipfore);
-  target_tipback.connect(tipback);
-  target_menufore.connect(menufore);
-  target_menuback.connect(menuback);  
-  target_main.connect(main);
-
-  target_base.setTarget(this);
-  target_back.setTarget(this);
-  target_border.setTarget(this);
-  target_fore.setTarget(this);
-  target_hilite.setTarget(this);
-  target_shadow.setTarget(this);
-  target_selfore.setTarget(this);
-  target_selback.setTarget(this);
-  target_tipfore.setTarget(this);
-  target_tipback.setTarget(this);
-  target_menufore.setTarget(this);
-  target_menuback.setTarget(this);
-  target_main.setTarget(this);
-
-  target_base.setSelector(ID_COLORS);
-  target_back.setSelector(ID_COLORS);
-  target_border.setSelector(ID_COLORS);
-  target_fore.setSelector(ID_COLORS);
-  target_hilite.setSelector(ID_COLORS);
-  target_shadow.setSelector(ID_COLORS);
-  target_selfore.setSelector(ID_COLORS);
-  target_selback.setSelector(ID_COLORS);
-  target_tipfore.setSelector(ID_COLORS);
-  target_tipback.setSelector(ID_COLORS);
-  target_menufore.setSelector(ID_COLORS);
-  target_menuback.setSelector(ID_COLORS);
-  target_main.setSelector(ID_COLORS);
-
-    mimeapp=NULL;
-    saveconfiguration=true;
-
-    
-    colordlg=new FXColorDialog(this,&quot;Color Dialog&quot;);
-    
-    FXVerticalFrame *vertical = new FXVerticalFrame (this, LAYOUT_SIDE_TOP | LAYOUT_FILL_X | LAYOUT_FILL_Y);
-    FXHorizontalFrame *horizontal = new FXHorizontalFrame (vertical, LAYOUT_FILL_X | LAYOUT_FILL_Y);
-    FXVerticalFrame *buttons = new FXVerticalFrame (horizontal, LAYOUT_LEFT | LAYOUT_FILL_Y | FRAME_SUNKEN | PACK_UNIFORM_WIDTH | LAYOUT_FIX_HEIGHT, 0, 0, 0, 500, 0, 0, 0, 0, 0, 0);
-    FXSwitcher *switcher = new FXSwitcher (horizontal, LAYOUT_FILL_X | LAYOUT_FILL_Y, 0, 0, 0, 0, 0, 0, 0, 0);
-
-
-    FXVerticalFrame *mainpane = new FXVerticalFrame (switcher, LAYOUT_FILL_X | LAYOUT_FILL_Y);
-
-    new FXButton (buttons, &quot;Main Settings&quot;, NULL, switcher, FXSwitcher::ID_OPEN_FIRST, FRAME_RAISED | ICON_ABOVE_TEXT | LAYOUT_FILL_Y);
-    new FXLabel (mainpane, &quot;Let program to autoconfigure file type associacion settings&quot;);
-    FXHorizontalFrame *hoz1 = new FXHorizontalFrame (mainpane, LAYOUT_FILL_X , 0, 0, 0, 0, 0, 0, 0, 0, 0, 0);
-    new FXButton (hoz1, &quot;Semi-Auto configure&quot;, NULL, this, preferences::ID_MIME_APP);
-    new FXButton (hoz1, &quot;Full-Auto configure&quot;, NULL, this, preferences::ID_MIME_APP_AUTO);
-    new	FXSeparator(mainpane);
-    
-
-    
-    FXHorizontalFrame *hoz2 = new FXHorizontalFrame (mainpane, LAYOUT_FILL_X);
-    new FXLabel (hoz2, &quot;width:&quot;);
-    mainwindow_width=new FXSpinner(hoz2,4);
-    mainwindow_width-&gt;setRange(1,2000);
-    mainwindow_width-&gt;setIncrement(1);
-    mainwindow_width-&gt;setValue(atoi(conf-&gt;readonestring (&quot;/OpenspaceConfig/mainwindow/width&quot;).c_str ()));
-    new FXLabel (hoz2, &quot;height:&quot;);
-    mainwindow_height=new FXSpinner(hoz2,4);
-    mainwindow_height-&gt;setRange(1,2000);
-    mainwindow_height-&gt;setIncrement(1);
-    mainwindow_height-&gt;setValue(atoi(conf-&gt;readonestring (&quot;/OpenspaceConfig/mainwindow/height&quot;).c_str ()));
-    
-    new FXButton (hoz2, &quot;get current openspace size&quot;, NULL, this, preferences:: ID_UPDATE_WINDOW_SIZE);
-   
-    new	FXSeparator(mainpane);
-    
-    new FXLabel (mainpane, &quot;left directory:&quot;);
-    leftdir = new FXTextField (mainpane, 50);
-    leftdir-&gt;setText(conf-&gt;readonestring (&quot;/OpenspaceConfig/leftdir/dir&quot;).c_str ());
-
-    new FXLabel (mainpane, &quot;right directory (in single directory window mode this is default window):&quot;);
-    rightdir = new FXTextField (mainpane, 50);
-    rightdir-&gt;setText(conf-&gt;readonestring (&quot;/OpenspaceConfig/rightdir/dir&quot;).c_str ());
-    
-    new FXLabel (mainpane, &quot;default new opened directory:&quot;);
-    defaultdir = new FXTextField (mainpane, 50);
-    defaultdir-&gt;setText(conf-&gt;readonestring (&quot;/OpenspaceConfig/defaultdir/dir&quot;).c_str ());
-    
-    new	FXSeparator(mainpane);
-    
-    new FXLabel (mainpane, &quot;maximum size of image file for generating thumbnails (in Bytes)&quot;);
-    
-    thumbsize=new FXSpinner(mainpane,8);
-    thumbsize-&gt;setRange(0,10000000);
-    thumbsize-&gt;setIncrement(1000);
-    thumbsize-&gt;setValue(atoi(conf-&gt;readonestring (&quot;/OpenspaceConfig/filelist/local/thumbs/size&quot;).c_str ()));
-    
-    new FXLabel (mainpane, &quot;icons theme:&quot;);
-    iconsTheme=new FXListBox (mainpane);
-    iconsTheme-&gt;setNumVisible(5);
-
-    new FXLabel (mainpane, &quot;openspace placement on startup&quot;);
-    placement=new FXListBox (mainpane);
-    placement-&gt;setNumVisible(2);
-    placement-&gt;appendItem(&quot;centered&quot;);
-    placement-&gt;appendItem(&quot;cursor&quot;);
-
- string iconsdir=conf-&gt;readonestring (&quot;/OpenspaceConfig/path&quot;) +&quot;/icons&quot;;
-	    struct dirent *dp;
-	    DIR *dirp;
-dirp = opendir (iconsdir.c_str ());
-	    if(dirp)
-	    while ((dp = readdir (dirp)) != NULL)
-	    {
-		if (dp-&gt;d_name[0] != '.' || (dp-&gt;d_name[1] != '\0' &amp;&amp; (dp-&gt;d_name[1] != '.' || dp-&gt;d_name[2] != '\0')))
-		{
-		string name=dp-&gt;d_name;
-		iconsTheme-&gt;appendItem(name.c_str());   
-		}
-	    }
-	    closedir (dirp);
-iconsdir=FXFile::getUserDirectory (&quot;&quot;).text () +string(&quot;/.openspace/icons&quot;);
-
-dirp = opendir (iconsdir.c_str ());
-	    if(dirp)
-	    while ((dp = readdir (dirp)) != NULL)
-	    {
-		if (dp-&gt;d_name[0] != '.' || (dp-&gt;d_name[1] != '\0' &amp;&amp; (dp-&gt;d_name[1] != '.' || dp-&gt;d_name[2] != '\0')))
-		{
-		string name=dp-&gt;d_name;
-		iconsTheme-&gt;appendItem(name.c_str());   
-		}
-	    }
-	    closedir (dirp);
-
-iconsTheme-&gt;setCurrentItem(iconsTheme-&gt;findItem(conf-&gt;readonestring (&quot;/OpenspaceConfig/icons_theme&quot;).c_str()));
-
-
-
-
-//======================================================BUTTONS===========================================================
-
- FXVerticalFrame *buttonsPane = new FXVerticalFrame (switcher, LAYOUT_FILL_X | LAYOUT_FILL_Y, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0);
-   
-    new FXButton (buttons, &quot;Menu and Buttons Settings&quot;, NULL, switcher, FXSwitcher::ID_OPEN_SECOND, FRAME_RAISED | ICON_ABOVE_TEXT | LAYOUT_FILL_Y);
-
- new FXLabel (buttonsPane, &quot;Buttons in configurable toolbox:&quot;, NULL, LAYOUT_LEFT);
-
-	toolbarList=new FXListBox (buttonsPane, this, ID_TOOLBAR_CHANGE);
-        toolbarList-&gt;setNumVisible(10);
-
-FXHorizontalFrame *hfx = new FXHorizontalFrame (buttonsPane,LAYOUT_FILL_X, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0);
-
-	buttonsList=new FXList (hfx,NULL, 0,LIST_NORMAL| LAYOUT_FIX_WIDTH, 0, 0,250);
-	buttonsList-&gt;setNumVisible(5);
-
- 	new FXLabel(hfx,&quot; &quot;);
-	new FXArrowButton(hfx,this,ID_UP_BUTTON_COMMAND,FRAME_RAISED|FRAME_THICK|ARROW_UP);
-	new FXArrowButton(hfx,this,ID_DOWN_BUTTON_COMMAND,FRAME_RAISED|FRAME_THICK|ARROW_DOWN);   
-	       	
-	     if(conf-&gt;openxpath(&quot;/OpenspaceConfig/toolbars&quot;)!=-1)
-	       {
-	       string commandstr;
-	      	 while(conf-&gt;getnextnode(commandstr))
-	      	 {     	 
-	     	 toolbarList-&gt;appendItem(commandstr.c_str());
-		 buttonsList-&gt;clearItems();
-		 
-		 configure conflocal=*conf;		 
-		 
-		  if(conflocal.openxpath(&quot;/OpenspaceConfig/toolbars/&quot;+commandstr+&quot;/command&quot;)!=-1)
-	     	  {
-	      	 string commandstr2;
-	      		 while(conflocal.getnextstring(commandstr2))
-	      		 {     	 
-			 string icon=conflocal.readonestring (&quot;/OpenspaceConfig/commands/&quot; + commandstr2 + &quot;/icon&quot;);
-	     		 buttonsList-&gt;appendItem(commandstr2.c_str(),objmanager-&gt;osicons[icon]);
-			 toolbarVector.push_back(toolbar_container(commandstr,commandstr2));
-			 }
-	     	  }
-		 
-		 
-	     	 }
-	       }	  
-toolbarList-&gt;setCurrentItem (toolbarList-&gt;getNumItems () - 1);	       
-	        
-	FXHorizontalFrame *buttonsHframe = new FXHorizontalFrame (buttonsPane, LAYOUT_FILL_X, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0);  
-
-	new FXLabel(buttonsHframe,&quot; &quot;);
-	new FXLabel(buttonsHframe,&quot; &quot;);
-	new FXArrowButton(buttonsHframe,this,ID_ADD_BUTTON_COMMAND,FRAME_RAISED|FRAME_THICK|ARROW_UP);
-	new FXArrowButton(buttonsHframe,this,ID_DEL_BUTTON_COMMAND,FRAME_RAISED|FRAME_THICK|ARROW_DOWN);
-	
-	
-	new FXLabel (buttonsPane, &quot;All available commands:&quot;, NULL, LAYOUT_LEFT);
-	
-	additionalCommandsAvailableForButtons=new FXList (buttonsPane,NULL, 0,LIST_NORMAL| LAYOUT_FIX_WIDTH, 0, 0,250);
-	additionalCommandsAvailableForButtons-&gt;setNumVisible(8);
-	additionalCommandsAvailableForButtons-&gt;appendItem(&quot;SEPARATOR&quot;);
-FXHorizontalFrame *buttonsHframe2 = new FXHorizontalFrame (buttonsPane, LAYOUT_FILL_X, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0);  
-
-	new FXLabel(buttonsHframe2,&quot; &quot;);
-	new FXLabel(buttonsHframe2,&quot; &quot;);
-new FXArrowButton(buttonsHframe2,this,ID_DEL_SHUTTER_COMMAND,FRAME_RAISED|FRAME_THICK|ARROW_UP);
-new FXArrowButton(buttonsHframe2,this,ID_ADD_SHUTTER_COMMAND,FRAME_RAISED|FRAME_THICK|ARROW_DOWN);
-new FXLabel (buttonsPane, &quot;Shutter:&quot;, NULL, LAYOUT_LEFT);
-
-
-       shutterList=new FXListBox (buttonsPane, this, ID_SHUTTER_CHANGE);
-       shutterList-&gt;setNumVisible(10);
-
-	hfx = new FXHorizontalFrame (buttonsPane,LAYOUT_FILL_X, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0);
-
-
-	shutterCommands=new FXList (hfx,NULL, 0,LIST_NORMAL| LAYOUT_FIX_WIDTH, 0, 0,250);
-	shutterCommands-&gt;setNumVisible(5);
-
- 	new FXLabel(hfx,&quot; &quot;);
-	  
-	new FXArrowButton(hfx,this,ID_UP_SHUTTER_COMMAND,FRAME_RAISED|FRAME_THICK|ARROW_UP);
-	new FXArrowButton(hfx,this,ID_DOWN_SHUTTER_COMMAND,FRAME_RAISED|FRAME_THICK|ARROW_DOWN);   
-
-
-	new FXSeparator(buttonsPane);
-	FXHorizontalFrame *hfr=new FXHorizontalFrame (buttonsPane, LAYOUT_FILL_X | LAYOUT_FILL_Y);
-	new FXButton (hfr, &quot;Remove shutter&quot;, NULL, this, ID_REMOVE_SHUTTER, FRAME_RAISED | ICON_ABOVE_TEXT );
-	new FXButton (hfr, &quot;New shutter&quot;, NULL, this, ID_NEW_SHUTTER, FRAME_RAISED | ICON_ABOVE_TEXT);
-	newShutterEdit = new FXTextField (hfr, 20);
-
-
- if(conf-&gt;openxpath(&quot;/OpenspaceConfig/shutter&quot;)!=-1)
-	       {
-	       string commandstr;
-	      	 while(conf-&gt;getnextnode(commandstr))
-	      	 {     	 
-	     	 shutterList-&gt;appendItem(commandstr.c_str());
-		 shutterCommands-&gt;clearItems();
-		 
-		 configure conflocal=*conf;		 
-		 
-		  if(conflocal.openxpath(&quot;/OpenspaceConfig/shutter/&quot;+commandstr+&quot;/command&quot;)!=-1)
-	     	  {
-	      	 string commandstr2;
-	      		 while(conflocal.getnextstring(commandstr2))
-	      		 {     	 
-	     		 shutterCommands-&gt;appendItem(commandstr2.c_str());
-			 shutterVector.push_back(shutter_container(commandstr,commandstr2));
-			 }
-	     	  }
-		 
-		 
-	     	 }
-	       }	
-	       
-shutterList-&gt;setCurrentItem (shutterList-&gt;getNumItems () - 1);
-
-
-//======================================================COMMANDS===========================================================
-
-
-    FXVerticalFrame *commandPluginsPane = new FXVerticalFrame (switcher, LAYOUT_FILL_X | LAYOUT_FILL_Y, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0);
-    
-    new FXButton (buttons, &quot;Command plugins Settings&quot;, NULL, switcher, FXSwitcher::ID_OPEN_THIRD, FRAME_RAISED | ICON_ABOVE_TEXT | LAYOUT_FILL_Y);
-
- new FXLabel (commandPluginsPane, &quot;installed plugins&quot;);
-commandPluginsList=new FXListBox (commandPluginsPane, this, ID_COMMANDPLUGIN_CHANGE);
-commandPluginsList-&gt;setNumVisible(30);
-
-
-FXPacker *vv = new FXGroupBox (commandPluginsPane, &quot;available plugins - download from internet&quot;, LAYOUT_SIDE_TOP | FRAME_GROOVE | LAYOUT_FILL_X, 0, 0, 0, 0); 
-
-hfr=new FXHorizontalFrame (vv, LAYOUT_FILL_X , 0, 0, 0, 0, 0, 0, 0, 0, 0, 0);
-availableCommandPluginsList=new FXListBox (hfr);
-availableCommandPluginsList-&gt;setNumVisible(30);
-new FXButton (hfr, &quot;Download and Install&quot;, NULL, this, ID_DOWNLOAD_INSTALL_CMD_PLUGIN, FRAME_RAISED | ICON_ABOVE_TEXT );
-new FXButton (vv, &quot;Update available plugins list&quot;, NULL, this, ID_UPDATE_CMD_PLUGIN_LIST, FRAME_RAISED | ICON_ABOVE_TEXT );
-
-
-
-string plugin_path = string(PATH_LIBDIR) + &quot;/openspace/plugins/cmddialog&quot;;
-
-
-
-
-	    dirp = opendir (plugin_path.c_str ());
-	    if(dirp)
-	    while ((dp = readdir (dirp)) != NULL)
-	    {
-		if (dp-&gt;d_name[0] != '.' || (dp-&gt;d_name[1] != '\0' &amp;&amp; (dp-&gt;d_name[1] != '.' || dp-&gt;d_name[2] != '\0')))
-		{
-		string name=dp-&gt;d_name;
-			if(name.substr(name.length()-3,3)==&quot;.so&quot;)
-			{
-			name=name.substr(0,name.length()-3);
-			name=name.substr(3,name.length()-3);
-			commandPluginsList-&gt;appendItem(name.c_str());
-			}
-			
-		    
-		}
-	    }
-
-	closedir (dirp);
-
-plugin_path = FXFile::getUserDirectory (&quot;&quot;).text ()+string(&quot;/.openspace/plugins/cmddialog&quot;);
-	
-	dirp = opendir (plugin_path.c_str ());
-	    if(dirp)
-	    while ((dp = readdir (dirp)) != NULL)
-	    {
-		if (dp-&gt;d_name[0] != '.' || (dp-&gt;d_name[1] != '\0' &amp;&amp; (dp-&gt;d_name[1] != '.' || dp-&gt;d_name[2] != '\0')))
-		{
-		string name=dp-&gt;d_name;
-			if(name.substr(name.length()-3,3)==&quot;.so&quot;)
-			{
-			name=name.substr(0,name.length()-3);
-			name=name.substr(3,name.length()-3);
-			commandPluginsList-&gt;appendItem(name.c_str());
-			}
-			
-		    
-		}
-	    }
-
-	    closedir (dirp);
-
-    
-
-
-
-
-    commandsPane = new FXVerticalFrame (switcher, LAYOUT_FILL_X | LAYOUT_FILL_Y, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0);
-    new FXLabel (commandsPane, &quot;Commands settings&quot;, NULL, LAYOUT_LEFT);
-
-    new FXButton (buttons, &quot;Commands Settings&quot;, NULL, switcher, FXSwitcher::ID_OPEN_FOURTH, FRAME_RAISED | ICON_ABOVE_TEXT | LAYOUT_FILL_Y);
-
-    commandsCombo=new FXListBox (commandsPane, this, ID_COMMAND_CHANGE);
-    new FXLabel (commandsPane, &quot;icon: &quot;, NULL, LAYOUT_LEFT);
-    iconsList=new FXListBox (commandsPane);
-    commandsCombo-&gt;setNumVisible(30);
-    iconsList-&gt;setNumVisible(30);
-    new FXLabel (commandsPane, &quot;exec: &quot;, NULL, LAYOUT_LEFT);
-    commandsTextfield = new FXTextField (commandsPane, 20);
-    
-    
-    
-    new FXLabel (commandsPane, &quot;shortuct mask: &quot;, NULL, LAYOUT_LEFT);
-    shortcutMaskList=new FXListBox (commandsPane);
-    shortcutMaskList-&gt;setNumVisible(3);
-    shortcutMaskList-&gt;appendItem(&quot;&quot;);
-    shortcutMaskList-&gt;appendItem(&quot;control&quot;);
-    shortcutMaskList-&gt;appendItem(&quot;alt&quot;);
-    
-    
-    new FXLabel (commandsPane, &quot;shortuct: &quot;, NULL, LAYOUT_LEFT);
-    shortcutList=new FXListBox (commandsPane);
-    shortcutList-&gt;setNumVisible(30);
-    
-    
-   	map&lt;string,unsigned int&gt;::iterator s_iter;
-	
-	shortcutList-&gt;appendItem(&quot;&quot;);
-	for(s_iter=objmanager-&gt;key_map.begin();s_iter!=objmanager-&gt;key_map.end();s_iter++)
-	{
-	shortcutList-&gt;appendItem(s_iter-&gt;first.c_str());
-	}
-	
-    new FXLabel (commandsPane, &quot;text: &quot;, NULL, LAYOUT_LEFT);
-    commandsTextfieldText = new FXTextField (commandsPane, 20);
-    commandsType=new FXLabel (commandsPane, &quot;&quot;, NULL, LAYOUT_LEFT);
-    
-    
-    vv = new FXGroupBox (commandsPane, &quot;Options&quot;, LAYOUT_SIDE_TOP | FRAME_GROOVE | LAYOUT_FILL_X, 0, 0, 0, 0);
-    commandsRescan = new FXCheckButton (vv, &quot;rescan&quot;, NULL, 0, JUSTIFY_LEFT | JUSTIFY_TOP | ICON_BEFORE_TEXT | LAYOUT_SIDE_TOP);
-    commandsCapture = new FXCheckButton (vv, &quot;capture&quot;, NULL, 0, JUSTIFY_LEFT | JUSTIFY_TOP | ICON_BEFORE_TEXT | LAYOUT_SIDE_TOP);
-   
-
-    if (conf-&gt;openxpath (&quot;/OpenspaceConfig/commands&quot;) != -1)
-    {
-	
-
-
-command_container *ctlast;
-string res;
-	while (conf-&gt;getnextnode (res))
-	{
-		
-	    command_container ct;
-	    ctlast=&ct;
-	    commandsCombo-&gt;appendItem(res.c_str (),objmanager-&gt;osicons[&quot;execute&quot;]);
-	    ct.name = res;
-	    configure conflocal = *conf;
-	    ct.exec = conflocal.readonestring (&quot;/OpenspaceConfig/commands/&quot; + res + &quot;/exec&quot;);
-	    
-	    string options = conflocal.readonestring (&quot;/OpenspaceConfig/commands/&quot; + res + &quot;/options&quot;);
-
-	    string::size_type pos = options.find (&quot;capture&quot;);
-	    if (pos != string::npos)
-		ct.capture=true;
-	    else
-		ct.capture=false;
-
-
-	    pos = options.find (&quot;rescan&quot;);
-	    if (pos != string::npos)
-		ct.rescan=true;
-	    else
-		ct.rescan=false;
-		
-		ct.text=conflocal.readonestring (&quot;/OpenspaceConfig/commands/&quot; + res + &quot;/text&quot;);
-		ct.icon=conflocal.readonestring (&quot;/OpenspaceConfig/commands/&quot; + res + &quot;/icon&quot;);
-		ct.type=conflocal.readonestring (&quot;/OpenspaceConfig/commands/&quot; + res + &quot;/type&quot;);
-		ct.key=conflocal.readonestring (&quot;/OpenspaceConfig/commands/&quot; + res + &quot;/key&quot;);
-		ct.key_mask=conflocal.readonestring (&quot;/OpenspaceConfig/commands/&quot; + res + &quot;/key_mask&quot;);
-		
-	    commandsMap[ct.name]=ct;
-
-	}
-
-	    commandsRescan-&gt;setCheck(ctlast-&gt;rescan);
-	    commandsCapture-&gt;setCheck(ctlast-&gt;capture);
-	    commandsTextfield-&gt;setText (ctlast-&gt;exec.c_str ());
-            commandsCombo-&gt;setCurrentItem (commandsCombo-&gt;getNumItems () - 1);
-	    currentCommandName=ctlast-&gt;name;
-	    
-	    string str;
-	    if(ctlast-&gt;type==&quot;&quot;)
-	    str=&quot;command type: EXTERNAL&quot;;
-	    else
-	    str=&quot;command type: &quot; + ctlast-&gt;type;
-	    
-	    commandsType-&gt;setText(str.c_str());
-	    string shorticonname;
-	    
-	    
-	
-	   map &lt; string, FXIcon * &gt;::iterator iter;
-	   
-    iconsList-&gt;appendItem(&quot;&quot;,NULL);
-    for (iter = objmanager-&gt;osicons.begin (); iter != objmanager-&gt;osicons.end (); iter++)
-    {
-	FXIcon *icon = iter-&gt;second;
-	if(icon!=NULL)
-	iconsList-&gt;appendItem(iter-&gt;first.c_str(),icon);
-    }	
-	if(ctlast-&gt;icon!=&quot;&quot;)
-	iconsList-&gt;setCurrentItem(iconsList-&gt;findItem(ctlast-&gt;icon.c_str()));
-	
-	if(ctlast-&gt;key!=&quot;&quot;)
-	shortcutList-&gt;setCurrentItem(shortcutList-&gt;findItem(ctlast-&gt;key.c_str()));
-
-	if(ctlast-&gt;key_mask!=&quot;&quot;)
-	shortcutMaskList-&gt;setCurrentItem(shortcutMaskList-&gt;findItem(ctlast-&gt;key_mask.c_str()));
-	
-	
-	
-	new FXSeparator(commandsPane);
-	FXHorizontalFrame *hfr=new FXHorizontalFrame (commandsPane, LAYOUT_FILL_X | LAYOUT_FILL_Y, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0);
-	removeCommandButton=new FXButton (hfr, &quot;Remove&quot;, NULL, this, ID_REMOVE_COMMAND, FRAME_RAISED | ICON_ABOVE_TEXT );
-	new FXButton (hfr, &quot;New Command&quot;, NULL, this, ID_NEW_COMMAND, FRAME_RAISED | ICON_ABOVE_TEXT);
-	newCommandEdit = new FXTextField (hfr, 20);
-
-	if(ctlast-&gt;type==&quot;INTERNAL&quot; || ctlast-&gt;type==&quot;PLUGIN&quot;)
-	{
-	commandsTextfield-&gt;disable();
-	commandsRescan-&gt;disable();
-	commandsCapture-&gt;disable();
-	removeCommandButton-&gt;disable();
-	}
-
-    }
-
-
-    filetypePane = new FXVerticalFrame (switcher, LAYOUT_FILL_X | LAYOUT_FILL_Y, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0);
-    
-    new FXButton (buttons, &quot;File types Settings&quot;, NULL, switcher, FXSwitcher::ID_OPEN_FIFTH, FRAME_RAISED | ICON_ABOVE_TEXT | LAYOUT_FILL_Y);
-
-
-
-    if (conf-&gt;openxpath (&quot;/OpenspaceConfig/file_types&quot;) != -1)
-    {
-	filetype_container *ctlast;
-	new FXLabel(filetypePane,&quot;File Type:&quot;);
-	fileTypeList=new FXListBox (filetypePane, this, ID_FILETYPE_CHANGE);
-	fileTypeList-&gt;setNumVisible(30);
-	
-	
-	FXGroupBox *filetypeGroup=new FXGroupBox(filetypePane,&quot;commands&quot;,GROUPBOX_TITLE_CENTER|FRAME_RIDGE|LAYOUT_FILL_X);
-	
-	
-	new FXLabel(filetypeGroup,&quot;default command:&quot;);
-	fileTypeDefaultBox = new FXListBox (filetypeGroup);
-	fileTypeDefaultBox-&gt;setNumVisible(30);
-	
-	
-	
-	FXHorizontalFrame* hzframe=new FXHorizontalFrame (filetypeGroup, LAYOUT_FILL_X , 0, 0, 0, 0, 0, 0, 0, 0, 0, 0);
-	FXVerticalFrame* vframe0=new FXVerticalFrame (hzframe, LAYOUT_FILL_X, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0);
-	new FXLabel(vframe0,&quot;additional commands:&quot;);
-        additionalCommands=new FXList (vframe0,NULL, 0,LIST_NORMAL| LAYOUT_FIX_WIDTH, 0, 0,250);
-	additionalCommands-&gt;setNumVisible(5);
-	FXVerticalFrame* vframe=new FXVerticalFrame (hzframe, LAYOUT_FILL_X , 0, 0, 0, 0, 0, 0, 0, 0, 0, 0);
-	new FXLabel(vframe,&quot;\n&quot;);
-	new FXArrowButton(vframe,this,ID_UP_COMMAND,FRAME_RAISED|FRAME_THICK|ARROW_UP);
-	new FXArrowButton(vframe,this,ID_DOWN_COMMAND,FRAME_RAISED|FRAME_THICK|ARROW_DOWN); 
-	new FXArrowButton(vframe,this,ID_ADD_COMMAND_ADDITIONAL,FRAME_RAISED|FRAME_THICK|ARROW_LEFT);
-	new FXArrowButton(vframe,this,ID_DEL_COMMAND_ADDITIONAL,FRAME_RAISED|FRAME_THICK|ARROW_RIGHT);
-	FXVerticalFrame* vframe1=new FXVerticalFrame (hzframe, LAYOUT_FILL_X , 0, 0, 0, 0, 0, 0, 0, 0, 0, 0);
-	new FXLabel(vframe1,&quot;all available commands:&quot;);
-	additionalCommandsAvailable=new FXList (vframe1,NULL, 0,LIST_NORMAL| LAYOUT_FIX_WIDTH, 0, 0,250);
-	additionalCommandsAvailable-&gt;setNumVisible(5);
-
-	filetypeGroup=new FXGroupBox(filetypePane,&quot;colors and icon&quot;,GROUPBOX_TITLE_CENTER|FRAME_RIDGE|LAYOUT_FILL_X);
-	FXHorizontalFrame* hf0=new FXHorizontalFrame (filetypeGroup, LAYOUT_FILL_X , 0, 0, 0, 0, 0, 0, 0, 0, 10, 10);
-	
-	iconsList2=new FXListBox (hf0);
-        iconsList2-&gt;setNumVisible(30);
-	//new FXLabel(hf0,&quot;  &quot;);
-	vframe1=new FXVerticalFrame (hf0, 0 , 0, 0, 0, 0, 0, 0, 0, 0, 0, 0);
-	new FXLabel(vframe1,&quot;text color:&quot;);
-	colorbutton=new FXButton(vframe1,&quot;Color&quot;,NULL,this,ID_CHOOSE_COLOR);
-	vframe1=new FXVerticalFrame (hf0, 0 , 0, 0, 0, 0, 0, 0, 0, 0, 0, 0);
-	new FXLabel(vframe1,&quot;back color:&quot;);
-	backcolorbutton=new FXButton(vframe1,&quot;Back Color&quot;,NULL,this,ID_CHOOSE_BACKCOLOR);
-	
-	
-	
-	filetypeGroup=new FXGroupBox(filetypePane,&quot;add new file type&quot;,GROUPBOX_TITLE_CENTER|FRAME_RIDGE|LAYOUT_FILL_X);
-	
-	allMime=new FXComboBox (filetypeGroup,60);
-	allMime-&gt;setNumVisible(30);
-	new FXButton (filetypeGroup, &quot;Add&quot;, NULL, this, preferences::ID_ADD_FILETYPE);
-	
-	MimeType::__initialize();
-	map&lt;string,string&gt;::iterator iter0;
-	for(iter0=MimeType::mimeMap.begin();iter0!=MimeType::mimeMap.end();iter0++)
-	{
-		if(allMime-&gt;findItem(xml2mime(iter0-&gt;second).c_str())==-1)
-		{	
-		allMime-&gt;appendItem(xml2mime(iter0-&gt;second).c_str());
-		}
-	}
-	
-
-	
-
-	string res;
-	while (conf-&gt;getnextnode (res))
-	{
-
-	
-	    configure conflocal = *conf;
-	   if(conflocal.openxpath (&quot;/OpenspaceConfig/file_types/&quot;+res+&quot;/types&quot;) != -1)
-	   {
-	   string res2;
-	    while (conflocal.getnextnode (res2))
-		{
-	 	 
-			
-			 filetype_container ct;
-			 ct.load( res+&quot;/&quot;+res2);
-			 fileTypeList-&gt;appendItem(xml2mime(ct.name).c_str (),objmanager-&gt;osicons[&quot;unknown&quot;]);	    
-	   		 
-	   		 
-			 filetypesMap[ct.name]=ct;  
-			
-		}
-		
-	   }	
-	    filetype_container ct;
-	    ct.load( res);
-	    ctlast=&ct;
-	    fileTypeList-&gt;appendItem(xml2mime(ct.name) .c_str (),objmanager-&gt;osicons[&quot;unknown&quot;]);	    
-	    
-	  
-	filetypesMap[ct.name]=ct;
-	}
-
-	filetypestring = ctlast-&gt;name;
-
-	 map &lt; string, FXIcon * &gt;::iterator iter2;
-	 iconsList2-&gt;appendItem(&quot;&quot;,NULL);
-    	for (iter2 = objmanager-&gt;osicons.begin (); iter2 != objmanager-&gt;osicons.end (); iter2++)
-    	{
-	FXIcon *icon = iter2-&gt;second;
-	if(icon!=NULL &amp;&amp; (iter2-&gt;first.length()&lt;4 || iter2-&gt;first.substr(0,4)!=&quot;big_&quot;))
-	iconsList2-&gt;appendItem(iter2-&gt;first.c_str(),icon);
-    	}	
-	if(ctlast-&gt;icon!=&quot;&quot;)
-	iconsList2-&gt;setCurrentItem(iconsList2-&gt;findItem(ctlast-&gt;icon.c_str()));
-	
-
-	
-	fileTypeDefaultBox-&gt;appendItem (&quot;&quot;,objmanager-&gt;osicons[&quot;execute&quot;]);
-	
-	if (conf-&gt;openxpath (&quot;/OpenspaceConfig/commands&quot;) != -1)
-	{
-	string command;
-	    while (conf-&gt;getnextnode (command))
-	    {
-		
-		fileTypeDefaultBox-&gt;appendItem (command.c_str (),objmanager-&gt;osicons[&quot;execute&quot;]);
-		string icon=conf-&gt;readonestring (&quot;/OpenspaceConfig/commands/&quot; + command+ &quot;/icon&quot;);
-		additionalCommandsAvailable-&gt;appendItem (command.c_str ());
-		additionalCommandsAvailableForButtons-&gt;appendItem (command.c_str (),objmanager-&gt;osicons[icon]);
-	    }
-	}
-	
-	vector&lt;string&gt;::iterator iter;
-	if(ctlast-&gt;commands.size()&gt;0)
-	for(iter=ctlast-&gt;commands.begin();iter!=ctlast-&gt;commands.end();iter++)
-	{
-	additionalCommands-&gt;appendItem(iter-&gt;c_str());
-	
-	}
-	                         
-	       
-	
-	fileTypeList-&gt;setCurrentItem (fileTypeList-&gt;getNumItems () - 1);
-	fileTypeDefaultBox-&gt;setCurrentItem(fileTypeDefaultBox-&gt;findItem(ctlast-&gt;command.c_str()));
-	
-        setAllColor(colorbutton,readcolor(ctlast-&gt;color));
-	setAllColor(backcolorbutton,readcolor2(ctlast-&gt;backcolor));
-	
-    }
-
-//====================================================LOOK AND FEEL============================================================
-
-  new FXButton (buttons, &quot;Look and feel&quot;, NULL, switcher, FXSwitcher::ID_OPEN_SIXTH, FRAME_RAISED | ICON_ABOVE_TEXT | LAYOUT_FILL_Y);
-
-  FXVerticalFrame *vframe = new FXVerticalFrame(switcher,LAYOUT_FILL_X|LAYOUT_FILL_Y,0,0,0,0,0,0,0,0,0,0);
-
-  FXHorizontalFrame *hframe = new FXHorizontalFrame(vframe,LAYOUT_FILL_X|LAYOUT_FILL_Y,0,0,0,0,0,0,0,0,0,0);
-  new FXSeparator(vframe,SEPARATOR_GROOVE|LAYOUT_FILL_X);
-
-
-  frame  = new FXVerticalFrame(hframe,LAYOUT_FILL_Y,0,0,0,0,0,0,0,0,0,0);
-  new FXSeparator(hframe,SEPARATOR_GROOVE|LAYOUT_FILL_Y);
-
-
-
-  FXMatrix* matrix = new FXMatrix(frame,2,LAYOUT_FILL_Y|MATRIX_BY_COLUMNS,0,0,0,0,DEFAULT_SPACING,DEFAULT_SPACING,DEFAULT_SPACING,DEFAULT_SPACING,1,1);
-
-  FXColorWell *colorwell = new FXColorWell(matrix,FXRGB(0,0,255),&amp;target_base,FXDataTarget::ID_VALUE);
-  FXLabel *label	  = new FXLabel(matrix,&quot;Base Color&quot;);
-
-  colorwell = new FXColorWell(matrix,FXRGB(0,0,255),&amp;target_border,FXDataTarget::ID_VALUE);
-  label	  = new FXLabel(matrix,&quot;Border Color&quot;);
-
-  colorwell = new FXColorWell(matrix,FXRGB(0,0,255),&amp;target_fore,FXDataTarget::ID_VALUE);
-  label	  = new FXLabel(matrix,&quot;Text Color&quot;);
-
-  colorwell = new FXColorWell(matrix,FXRGB(0,0,255),&amp;target_back,FXDataTarget::ID_VALUE);
-  label	  = new FXLabel(matrix,&quot;Background Color&quot;);
-
-  colorwell = new FXColorWell(matrix,FXRGB(0,0,255),&amp;target_selfore,FXDataTarget::ID_VALUE);
-  label	  = new FXLabel(matrix,&quot;Selected Text Color&quot;);
-
-  colorwell = new FXColorWell(matrix,FXRGB(0,0,255),&amp;target_selback,FXDataTarget::ID_VALUE);
-  label	  = new FXLabel(matrix,&quot;Selected Background Color&quot;);
-
-  colorwell = new FXColorWell(matrix,FXRGB(0,0,255),&amp;target_menufore,FXDataTarget::ID_VALUE);
-  label	  = new FXLabel(matrix,&quot;Selected Menu Text Color&quot;);
-
-  colorwell = new FXColorWell(matrix,FXRGB(0,0,255),&amp;target_menuback,FXDataTarget::ID_VALUE);
-  label	  = new FXLabel(matrix,&quot;Selected Menu Background Color&quot;);
-
-  colorwell = new FXColorWell(matrix,FXRGB(0,0,255),&amp;target_tipfore,FXDataTarget::ID_VALUE);
-  label	  = new FXLabel(matrix,&quot;Tip Text Color&quot;);
-
-  colorwell = new FXColorWell(matrix,FXRGB(0,0,255),&amp;target_tipback,FXDataTarget::ID_VALUE);
-  label	  = new FXLabel(matrix,&quot;Tip Background Color&quot;);
-  
-  colorwell = new FXColorWell(matrix,FXRGB(0,0,255),&amp;target_shadow,FXDataTarget::ID_VALUE);
-  label	  = new FXLabel(matrix,&quot;Shadow Color&quot;);
-  
-  colorwell = new FXColorWell(matrix,FXRGB(0,0,255),&amp;target_hilite,FXDataTarget::ID_VALUE);
-  label	  = new FXLabel(matrix,&quot;Hilite Color&quot;);
-  
-  colorwell = new FXColorWell(matrix,FXRGB(0,0,255),&amp;target_main,FXDataTarget::ID_VALUE);
-  label	  = new FXLabel(matrix,&quot;Main Color&quot;);
-
-  frame = new FXVerticalFrame(hframe,LAYOUT_FILL_X|LAYOUT_FILL_Y,0,0,0,0,DEFAULT_SPACING,DEFAULT_SPACING,DEFAULT_SPACING,DEFAULT_SPACING,0,0);
-
-  tabbook = new FXTabBook(frame,NULL,0,LAYOUT_FILL_X|LAYOUT_FILL_Y,0,0,0,0,0,0,0,0);
-  tabitem  = new FXTabItem(tabbook,&quot; Item 1 &quot;);
-  tabframe = new FXVerticalFrame(tabbook,LAYOUT_FILL_X|LAYOUT_FILL_Y|FRAME_THICK|FRAME_RAISED);
-
-  labeltextframe1 = new FXHorizontalFrame(tabframe,LAYOUT_FILL_X);
-  label1 = new FXLabel(labeltextframe1,&quot;Label with Text&quot;,NULL);
-  textfield1 = new FXTextField(labeltextframe1,30,NULL,0,LAYOUT_FILL_X|FRAME_THICK|FRAME_SUNKEN);
-  textfield1-&gt;setText(&quot;Select this text, to see the selected colors&quot;);
-
-  labeltextframe2 = new FXHorizontalFrame(tabframe,LAYOUT_FILL_X);
-  textframe1 = new FXHorizontalFrame(labeltextframe2,LAYOUT_FILL_X|FRAME_THICK|FRAME_SUNKEN,0,0,0,0,2,2,2,2,0,0);
-  label3 = new FXLabel(textframe1,&quot;Selected Text (with focus)&quot;,NULL,LAYOUT_FILL_X,0,0,0,0,1,1,1,1);
-  textframe2 = new FXHorizontalFrame(labeltextframe2,LAYOUT_FILL_X|FRAME_THICK|FRAME_SUNKEN,0,0,0,0,2,2,2,2,0,0);
-  label4 = new FXLabel(textframe2,&quot;Selected Text (no focus)&quot;,NULL,LAYOUT_FILL_X,0,0,0,0,1,1,1,1);
-
-  sep1 = new FXSeparator(tabframe,LAYOUT_FILL_X|SEPARATOR_LINE);
-
-  tabsubframe = new FXHorizontalFrame(tabframe,LAYOUT_FILL_X|LAYOUT_FILL_Y);
-
-  grpbox1 = new FXGroupBox(tabsubframe,&quot;MenuPane&quot;,FRAME_GROOVE|LAYOUT_FILL_Y|LAYOUT_FILL_X);
-
-  menuframe = new FXVerticalFrame(grpbox1,FRAME_RAISED|FRAME_THICK|LAYOUT_CENTER_X|LAYOUT_CENTER_Y,0,0,0,0,0,0,0,0,0,0);
-  menulabels[0]=new FXLabel(menuframe,&quot;&amp;Open&quot;,NULL,LABEL_NORMAL,0,0,0,0,16,4);
-  menulabels[1]=new FXLabel(menuframe,&quot;S&amp;ave&quot;,NULL,LABEL_NORMAL,0,0,0,0,16,4);
-  sep2 = new FXSeparator(menuframe,LAYOUT_FILL_X|SEPARATOR_GROOVE);
-  menulabels[2]=new FXLabel(menuframe,&quot;I&amp;mport&quot;,NULL,LABEL_NORMAL,0,0,0,0,16,4);
-  menulabels[4]=new FXLabel(menuframe,&quot;Selected Menu Entry&quot;,NULL,LABEL_NORMAL,0,0,0,0,16,4);
-  menulabels[3]=new FXLabel(menuframe,&quot;Print&quot;,NULL,LABEL_NORMAL,0,0,0,0,16,4);
-  sep3 = new FXSeparator(menuframe,LAYOUT_FILL_X|SEPARATOR_GROOVE);
-  menulabels[5]=new FXLabel(menuframe,&quot;&amp;Quit&quot;,NULL,LABEL_NORMAL,0,0,0,0,16,4);
-
-  grpbox2 = new FXGroupBox(tabsubframe,&quot;Tooltips&quot;,FRAME_GROOVE|LAYOUT_FILL_Y|LAYOUT_FILL_X);
-
-  label2 = new FXLabel(grpbox2,&quot;Sample Tooltip&quot;,NULL,FRAME_LINE|LAYOUT_CENTER_X);
-  label5 = new FXLabel(grpbox2,&quot;Multiline Sample\n Tooltip&quot;,NULL,FRAME_LINE|LAYOUT_CENTER_X);
-
-  hframe = new FXHorizontalFrame(vframe,LAYOUT_FILL_X|LAYOUT_FILL_Y,0,0,0,0,DEFAULT_SPACING,DEFAULT_SPACING,DEFAULT_SPACING,DEFAULT_SPACING);
-
-  new FXLabel(hframe,&quot;Normal Font: &quot;,NULL,LAYOUT_CENTER_Y);
-  fontbutton[0] = new FXButton(hframe,&quot; &quot;,NULL,this,ID_CHOOSE_FONT,LAYOUT_CENTER_Y|FRAME_RAISED|JUSTIFY_CENTER_X|JUSTIFY_CENTER_Y|LAYOUT_FILL_X);
-  
-  hframe = new FXHorizontalFrame(vframe,LAYOUT_FILL_X|LAYOUT_FILL_Y,0,0,0,0,DEFAULT_SPACING,DEFAULT_SPACING,DEFAULT_SPACING,DEFAULT_SPACING);
-  new FXLabel(hframe,&quot;Caption1 Font: &quot;,NULL,LAYOUT_CENTER_Y);
-  fontbutton[1] = new FXButton(hframe,&quot; &quot;,NULL,this,ID_CHOOSE_CAPTIONFONT1,LAYOUT_CENTER_Y|FRAME_RAISED|JUSTIFY_CENTER_X|JUSTIFY_CENTER_Y|LAYOUT_FILL_X);
-  
-  hframe = new FXHorizontalFrame(vframe,LAYOUT_FILL_X|LAYOUT_FILL_Y,0,0,0,0,DEFAULT_SPACING,DEFAULT_SPACING,DEFAULT_SPACING,DEFAULT_SPACING);
-  new FXLabel(hframe,&quot;Caption2 Font: &quot;,NULL,LAYOUT_CENTER_Y);
-  fontbutton[2] = new FXButton(hframe,&quot; &quot;,NULL,this,ID_CHOOSE_CAPTIONFONT2,LAYOUT_CENTER_Y|FRAME_RAISED|JUSTIFY_CENTER_X|JUSTIFY_CENTER_Y|LAYOUT_FILL_X);
-  
-  hframe = new FXHorizontalFrame(vframe,LAYOUT_FILL_X|LAYOUT_FILL_Y,0,0,0,0,DEFAULT_SPACING,DEFAULT_SPACING,DEFAULT_SPACING,DEFAULT_SPACING);
-  new FXLabel(hframe,&quot;Caption3 Font: &quot;,NULL,LAYOUT_CENTER_Y);
-  fontbutton[3] = new FXButton(hframe,&quot; &quot;,NULL,this,ID_CHOOSE_CAPTIONFONT3,LAYOUT_CENTER_Y|FRAME_RAISED|JUSTIFY_CENTER_X|JUSTIFY_CENTER_Y|LAYOUT_FILL_X);
-
-//====================================================SPEED AND DELAYS============================================================
-
-
-
-  new FXButton (buttons, &quot;Speed and delays&quot;, NULL, switcher, FXSwitcher::ID_OPEN_SEVENTH, FRAME_RAISED | ICON_ABOVE_TEXT | LAYOUT_FILL_Y);
-
-
-  hframe = new FXHorizontalFrame(switcher,LAYOUT_FILL_X|LAYOUT_FILL_Y,0,0,0,0,0,0,0,0,0,0);
-
-  matrix = new FXMatrix(hframe,3,LAYOUT_FILL_Y|MATRIX_BY_COLUMNS,0,0,0,0,DEFAULT_SPACING,DEFAULT_SPACING,DEFAULT_SPACING,DEFAULT_SPACING);
-
-  const FXuint spinnerstyle=FRAME_SUNKEN|FRAME_THICK;
-
-  new FXLabel(matrix,&quot;Typing Speed\t\tTyping Speed&quot;,NULL,LAYOUT_RIGHT|LAYOUT_CENTER_Y);
-  FXSpinner *spinner=new FXSpinner(matrix,4,&amp;target_typingspeed,FXDataTarget::ID_VALUE,spinnerstyle);
-  spinner-&gt;setRange(1,9999);
-  spinner-&gt;setIncrement(500);
-  new FXLabel(matrix,&quot;ms&quot;,NULL,LAYOUT_CENTER_Y);
-
-
-  new FXLabel(matrix,&quot;Double Click Speed\t\tDouble Click Speed&quot;,NULL,LAYOUT_RIGHT|LAYOUT_CENTER_Y);
-  spinner=new FXSpinner(matrix,4,&amp;target_clickspeed,FXDataTarget::ID_VALUE,spinnerstyle);
-  spinner-&gt;setRange(1,9999);
-  spinner-&gt;setIncrement(100);
-  new FXLabel(matrix,&quot;ms&quot;,NULL,LAYOUT_CENTER_Y);
-
-  new FXLabel(matrix,&quot;Scroll Speed\t\tScroll Speed&quot;,NULL,LAYOUT_RIGHT|LAYOUT_CENTER_Y);
-  spinner=new FXSpinner(matrix,4,&amp;target_scrollspeed,FXDataTarget::ID_VALUE,spinnerstyle);
-  spinner-&gt;setRange(1,9999);
-  spinner-&gt;setIncrement(10);
-  new FXLabel(matrix,&quot;ms&quot;,NULL,LAYOUT_CENTER_Y);
-
-  new FXLabel(matrix,&quot;Scroll Delay\t\tScroll Delay&quot;,NULL,LAYOUT_RIGHT|LAYOUT_CENTER_Y);
-  spinner=new FXSpinner(matrix,4,&amp;target_scrolldelay,FXDataTarget::ID_VALUE,spinnerstyle);
-  spinner-&gt;setRange(1,9999);
-  spinner-&gt;setIncrement(100);
-  new FXLabel(matrix,&quot;ms&quot;,NULL,LAYOUT_CENTER_Y);
-
-  new FXLabel(matrix,&quot;Cursor Blink Speed\t\tCursor Blink Speed&quot;,NULL,LAYOUT_RIGHT|LAYOUT_CENTER_Y);
-  spinner=new FXSpinner(matrix,4,&amp;target_blinkspeed,FXDataTarget::ID_VALUE,spinnerstyle);
-  spinner-&gt;setRange(1,9999);
-  spinner-&gt;setIncrement(100);
-  new FXLabel(matrix,&quot;ms&quot;,NULL,LAYOUT_CENTER_Y);
-
-  new FXLabel(matrix,&quot;Animation Speed\t\tAnimation Speed&quot;,NULL,LAYOUT_RIGHT|LAYOUT_CENTER_Y);
-  new FXSpinner(matrix,4,&amp;target_animspeed,FXDataTarget::ID_VALUE,spinnerstyle);
-  spinner-&gt;setRange(1,9999);
-  spinner-&gt;setIncrement(1);
-  new FXLabel(matrix,&quot;ms&quot;,NULL,LAYOUT_CENTER_Y);
-
-  new FXLabel(matrix,&quot;Cascade Menu Popup Delay\t\tAmount of delay before cascading menu is shown&quot;,NULL,LAYOUT_RIGHT|LAYOUT_CENTER_Y);
-  spinner=new FXSpinner(matrix,4,&amp;target_menupause,FXDataTarget::ID_VALUE,spinnerstyle);
-  spinner-&gt;setRange(1,9999);
-  spinner-&gt;setIncrement(100);
-  new FXLabel(matrix,&quot;ms&quot;,NULL,LAYOUT_CENTER_Y);
-
-  new FXLabel(matrix,&quot;Tooltip Popup Delay\t\tAmount of Delay before tooltip is shown &quot;,NULL,LAYOUT_RIGHT|LAYOUT_CENTER_Y);
-  spinner=new FXSpinner(matrix,4,&amp;target_tooltippause,FXDataTarget::ID_VALUE,spinnerstyle);
-  spinner-&gt;setRange(1,9999);
-  spinner-&gt;setIncrement(100);
-  new FXLabel(matrix,&quot;ms&quot;,NULL,LAYOUT_CENTER_Y);
-
-  new FXLabel(matrix,&quot;Tooltip Time\t\tTime that tooltips are shown&quot;,NULL,LAYOUT_RIGHT|LAYOUT_CENTER_Y);
-  spinner=new FXSpinner(matrix,4,&amp;target_tooltiptime,FXDataTarget::ID_VALUE,spinnerstyle);
-  spinner-&gt;setRange(1,9999);
-  spinner-&gt;setIncrement(500);
-  new FXLabel(matrix,&quot;ms&quot;,NULL,LAYOUT_CENTER_Y);
-
-  new FXLabel(matrix,&quot;Drag Delta\t\tMinimum distance considered a mouse move&quot;,NULL,LAYOUT_RIGHT|LAYOUT_CENTER_Y);
-  spinner=new FXSpinner(matrix,4,&amp;target_dragdelta,FXDataTarget::ID_VALUE,spinnerstyle);
-  spinner-&gt;setRange(1,9999);
-  spinner-&gt;setIncrement(1);
-  new FXFrame(matrix,FRAME_NONE);
-
-  new FXLabel(matrix,&quot;Wheel Lines&quot;,NULL,LAYOUT_RIGHT|LAYOUT_CENTER_Y);
-  spinner=new FXSpinner(matrix,4,&amp;target_wheellines,FXDataTarget::ID_VALUE,spinnerstyle);
-  spinner-&gt;setRange(1,100);
-
-
-//====================================================VFS============================================================
-
-
-    vfsPane = new FXVerticalFrame (switcher, LAYOUT_FILL_X | LAYOUT_FILL_Y, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0);
-    new FXLabel (vfsPane, &quot;VFS settings&quot;, NULL, LAYOUT_LEFT);
-
-    new FXButton (buttons, &quot;Virtual File System Settings&quot;, NULL, switcher, FXSwitcher::ID_OPEN_EIGHTH, FRAME_RAISED | ICON_ABOVE_TEXT | LAYOUT_FILL_Y);
-
-    
-    
-        vfsList=new FXListBox (vfsPane, this, ID_VFS_CHANGE);
-        vfsList-&gt;setNumVisible(10);
-        
-	    
-    
-        FXHorizontalFrame *hzframe=new FXHorizontalFrame (vfsPane, LAYOUT_FILL_X , 0, 0, 0, 0, 0, 0, 0, 0, 0, 0);
-	FXVerticalFrame *vframe0=new FXVerticalFrame (hzframe, LAYOUT_FILL_X, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0);
-	new FXLabel(vframe0,&quot;visible headers:&quot;);
-        headersList=new FXList (vframe0,NULL, 0,LIST_NORMAL| LAYOUT_FIX_WIDTH, 0, 0,250);
-	headersList-&gt;setNumVisible(5);
-	vframe=new FXVerticalFrame (hzframe, LAYOUT_FILL_X , 0, 0, 0, 0, 0, 0, 0, 0, 0, 0);
-	new FXLabel(vframe,&quot;\n&quot;);
-	new FXArrowButton(vframe,this,ID_UP_VFS_HEADER,FRAME_RAISED|FRAME_THICK|ARROW_UP);
-	new FXArrowButton(vframe,this,ID_DOWN_VFS_HEADER,FRAME_RAISED|FRAME_THICK|ARROW_DOWN); 
-	new FXArrowButton(vframe,this,ID_ADD_HEADER,FRAME_RAISED|FRAME_THICK|ARROW_LEFT);
-	new FXArrowButton(vframe,this,ID_DEL_HEADER,FRAME_RAISED|FRAME_THICK|ARROW_RIGHT);
-	
-	
-	
-	FXVerticalFrame *vframe1=new FXVerticalFrame (hzframe, LAYOUT_FILL_X , 0, 0, 0, 0, 0, 0, 0, 0, 0, 0);
-	new FXLabel(vframe1,&quot;all available headers:&quot;);
-	availableHeadersList=new FXList (vframe1,NULL, 0,LIST_NORMAL| LAYOUT_FIX_WIDTH, 0, 0,250);
-	availableHeadersList-&gt;setNumVisible(5);
-
- new FXLabel(vfsPane,&quot;&quot;); 
- new FXSeparator(vfsPane);
- new FXLabel(vfsPane,&quot;&quot;);
-
-vv = new FXGroupBox (vfsPane, &quot;available plugins - download from internet&quot;, LAYOUT_SIDE_TOP | FRAME_GROOVE | LAYOUT_FILL_X, 0, 0, 0, 0); 
-
-hfr=new FXHorizontalFrame (vv, LAYOUT_FILL_X , 0, 0, 0, 0, 0, 0, 0, 0, 0, 0);
-availableVfsPluginsList=new FXListBox (hfr);
-availableVfsPluginsList-&gt;setNumVisible(30);
-new FXButton (hfr, &quot;Download and Install&quot;, NULL, this, ID_DOWNLOAD_INSTALL_VFS_PLUGIN, FRAME_RAISED | ICON_ABOVE_TEXT );
-new FXButton (vv, &quot;Update available plugins list&quot;, NULL, this, ID_UPDATE_VFS_PLUGIN_LIST, FRAME_RAISED | ICON_ABOVE_TEXT );  
-  
-    
-    
-    if (conf-&gt;openxpath (&quot;/OpenspaceConfig/filelist&quot;) != -1)
-	{
-	string command;
-	    while (conf-&gt;getnextnode (command))
-	    {
-	    vfsList-&gt;appendItem(command.c_str());
-	    }
-	}    
-    
-actualvfs=&quot;&quot;;
-       
-	this-&gt;onVfsChange(NULL,0,NULL);
-
-setupColors();
-setupFont(0);
-setupFont(1);
-setupFont(2);
-setupFont(3);
-}
-
-long preferences::onVfsChange (FXObject * sender, FXSelector sel, void *)
-{
-
-if(actualvfs!=&quot;&quot;)//not first run, save
-{
-conf-&gt;removestring (&quot;/OpenspaceConfig/filelist/&quot;+actualvfs+&quot;/headers&quot;);
-conf-&gt;addstring(&quot;/OpenspaceConfig/filelist/&quot;+actualvfs,&quot;headers&quot;,&quot;&quot;);
-
-for (int c = 0; c &lt; headersList-&gt;getNumItems (); c++)
-	    {
-		
-		string cmd= headersList-&gt;getItemText (c).text ();
-		conf-&gt;addstring(&quot;/OpenspaceConfig/filelist/&quot;+actualvfs+&quot;/headers&quot;,&quot;header&quot;,cmd);  
-	    }	
-
-
-}
-
-actualvfs=vfsList-&gt;getItem(vfsList-&gt;getCurrentItem()).text();
-availableHeadersList-&gt;clearItems();
-if (conf-&gt;openxpath (&quot;/OpenspaceConfig/filelist/&quot;+actualvfs+&quot;/properties&quot;) != -1)
-	{
-	string command;
-	    while (conf-&gt;getnextnode (command))
-	    {
-	    	if(command!=&quot;name&quot;)
-		availableHeadersList-&gt;appendItem (command.c_str ());
-	    }
-	}
-headersList-&gt;clearItems();
-if (conf-&gt;openxpath (&quot;/OpenspaceConfig/filelist/&quot;+actualvfs+&quot;/headers/header&quot;) != -1)
-	{
-	string command;
-	    while (conf-&gt;getnextstring (command))
-	    {
-		headersList-&gt;appendItem (command.c_str ());
-	    }
-	}
-
-
-
-}
-
-long preferences::onAddButtonCommand (FXObject * sender, FXSelector sel, void *)
-{
-
-FXushort id=FXSELID(sel);
-string actual_toolbar=toolbarList-&gt;getItem(toolbarList-&gt;getCurrentItem()).text();
-
-	if(id==ID_ADD_BUTTON_COMMAND)
-	{
-	
-	
-	string cmd=additionalCommandsAvailableForButtons-&gt;getItemText(additionalCommandsAvailableForButtons-&gt;getCurrentItem()).text();
-	toolbarVector.push_back(toolbar_container(actual_toolbar,cmd));
-	buttonsList-&gt;appendItem(cmd.c_str());
-	}
-	else
-	{
-	
-	string cmd=buttonsList-&gt;getItemText(buttonsList-&gt;getCurrentItem()).text();
-	buttonsList-&gt;removeItem(buttonsList-&gt;getCurrentItem());
-	
-	vector &lt;toolbar_container&gt;::iterator iter;
-	
-	for(iter=toolbarVector.begin();iter!=toolbarVector.end(); iter++)
-		{
-			if(iter-&gt;command==cmd &amp;&amp; iter-&gt;toolbar==actual_toolbar)
-			{
-			toolbarVector.erase(iter);
-			break;
-			}
-		}
-			
-	}
-
-
-}
-
-long preferences::onAddHeader (FXObject * sender, FXSelector sel, void *)
-{
-
-FXushort id=FXSELID(sel);
-
-	if(id==ID_ADD_HEADER)
-	{
-	headersList-&gt;appendItem(availableHeadersList-&gt;getItemText(availableHeadersList-&gt;getCurrentItem()));
-	}
-	else
-	{
-	headersList-&gt;removeItem(headersList-&gt;getCurrentItem());
-	}
-
-
-
-}
-
-long preferences::onAddShutterCommand (FXObject * sender, FXSelector sel, void *)
-{
-
-FXushort id=FXSELID(sel);
-string actual_shutter=shutterList-&gt;getItem(shutterList-&gt;getCurrentItem()).text();
-
-	if(id==ID_ADD_SHUTTER_COMMAND)
-	{
-	
-	
-	string cmd=additionalCommandsAvailableForButtons-&gt;getItemText(additionalCommandsAvailableForButtons-&gt;getCurrentItem()).text();
-		if(cmd!=&quot;SEPARATOR&quot;)
-		{
-		shutterVector.push_back(shutter_container(actual_shutter,cmd));
-		shutterCommands-&gt;appendItem(cmd.c_str());
-		}
-	}
-	else
-	{
-	
-	string cmd=shutterCommands-&gt;getItemText(shutterCommands-&gt;getCurrentItem()).text();
-	shutterCommands-&gt;removeItem(shutterCommands-&gt;getCurrentItem());
-	
-	vector &lt;shutter_container&gt;::iterator iter;
-	
-	for(iter=shutterVector.begin();iter!=shutterVector.end(); iter++)
-		{
-			if(iter-&gt;command==cmd &amp;&amp; iter-&gt;shutter==actual_shutter)
-			{
-			shutterVector.erase(iter);
-			break;
-			}
-		}
-			
-	}
-
-
-
-}
-
-
-void preferences::setAllColor(FXButton* button,FXColor color)
-{
- button-&gt;setBaseColor(color);
- button-&gt;setBorderColor(color);
- button-&gt;setShadowColor(color);
- button-&gt;setHiliteColor(color);
- button-&gt;setTextColor(color);
- button-&gt;setBackColor(color);
-}
-
- long preferences::onChooseColor (FXObject * sender, FXSelector sel, void *)
- {
-
- if(!colordlg-&gt;execute())
-return 0;
-
-  
- FXColor color=colordlg-&gt;getRGBA();
- FXushort id=FXSELID(sel);
- if(id==ID_CHOOSE_COLOR)
- setAllColor(colorbutton,color);
- else
- setAllColor(backcolorbutton,color);
- 
-
- }	
-
-long preferences::onAddFiletype (FXObject * sender, FXSelector sel, void *)
-{
-string mime=allMime-&gt;getText().text();
-
-filetype_container ct=filetypesMap[mime];
-    if(ct.name!=&quot;&quot;) // already exists
-    return 0;
-  
-  ct.name=mime;  
-  filetypesMap[mime]=ct;    
-
-fileTypeList-&gt;appendItem(ct.name.c_str (),objmanager-&gt;osicons[&quot;unknown&quot;]);  
-this-&gt;onFileTypeChange(NULL,0,NULL);  
-}
-
-preferences::~preferences ()
-{
-}
-
-long preferences::save (void)
-{
-    FXTRACE ((5, &quot;save\n&quot;));
-    
-    this-&gt;onCommandChange(NULL,0,NULL);
-    this-&gt;onFileTypeChange(NULL,0,NULL);
-    this-&gt;onVfsChange(NULL,0,NULL);
-
-    map &lt; string, command_container &gt;::iterator iter;
-
-    for (iter = commandsMap.begin (); iter != commandsMap.end (); iter++)
-    {
-	command_container ct = iter-&gt;second;	
-	ct.save();		 
-    }
-
-map &lt; string, filetype_container &gt;::iterator iter2;
-
-    for (iter2 = filetypesMap.begin (); iter2 != filetypesMap.end (); iter2++)
-    {
-	filetype_container ct = iter2-&gt;second;
-	ct.save();
-    }
-
-
-
-conf-&gt;removestring (&quot;/OpenspaceConfig/button_commands&quot;);
-conf-&gt;addstring(&quot;/OpenspaceConfig&quot;,&quot;button_commands&quot;,&quot;&quot;);
-
-for (int c = 0; c &lt; buttonsList-&gt;getNumItems (); c++)
-	    {		
-		  string cmd= buttonsList-&gt;getItemText (c).text ();
-		  conf-&gt;addstring(&quot;/OpenspaceConfig/button_commands&quot;,&quot;command&quot;,cmd);
-	    }
-
-
-conf-&gt;removestring (&quot;/OpenspaceConfig/shutter&quot;);
-conf-&gt;addstring(&quot;/OpenspaceConfig&quot;,&quot;shutter&quot;,&quot;&quot;);
-
-vector &lt;shutter_container&gt;::iterator shutter_iter;
-	
-	for(shutter_iter=shutterVector.begin();shutter_iter!=shutterVector.end(); shutter_iter++)
-		{
-		string res;
-			if(!conf-&gt;readonestring(&quot;/OpenspaceConfig/shutter/&quot;+shutter_iter-&gt;shutter,res))
-			conf-&gt;addstring(&quot;/OpenspaceConfig/shutter&quot;,shutter_iter-&gt;shutter,&quot;&quot;);
-				
-			conf-&gt;addstring(&quot;/OpenspaceConfig/shutter/&quot;+shutter_iter-&gt;shutter,&quot;command&quot;,shutter_iter-&gt;command);
-	
-		}
-
-conf-&gt;removestring (&quot;/OpenspaceConfig/toolbars&quot;);
-conf-&gt;addstring(&quot;/OpenspaceConfig&quot;,&quot;toolbars&quot;,&quot;&quot;);
-
-vector &lt;toolbar_container&gt;::iterator toolbar_iter;
-	
-	for(toolbar_iter=toolbarVector.begin();toolbar_iter!=toolbarVector.end(); toolbar_iter++)
-		{
-		string res;
-			if(!conf-&gt;readonestring(&quot;/OpenspaceConfig/toolbars/&quot;+toolbar_iter-&gt;toolbar,res))
-			conf-&gt;addstring(&quot;/OpenspaceConfig/toolbars&quot;,toolbar_iter-&gt;toolbar,&quot;&quot;);
-				
-			conf-&gt;addstring(&quot;/OpenspaceConfig/toolbars/&quot;+toolbar_iter-&gt;toolbar,&quot;command&quot;,toolbar_iter-&gt;command);
-	
-		}
-
-conf-&gt;saveonestring (&quot;/OpenspaceConfig/mainwindow/width&quot;, ntos(mainwindow_width-&gt;getValue()));
-conf-&gt;saveonestring (&quot;/OpenspaceConfig/mainwindow/height&quot;,ntos(mainwindow_height-&gt;getValue()));
-
-conf-&gt;saveonestring (&quot;/OpenspaceConfig/leftdir/dir&quot;,leftdir-&gt;getText().text());
-conf-&gt;saveonestring (&quot;/OpenspaceConfig/rightdir/dir&quot;,rightdir-&gt;getText().text());
-conf-&gt;saveonestring (&quot;/OpenspaceConfig/defaultdir/dir&quot;,defaultdir-&gt;getText().text());
-conf-&gt;saveonestring (&quot;/OpenspaceConfig/filelist/local/thumbs/size&quot;,ntos(thumbsize-&gt;getValue()));
-conf-&gt;saveonestring (&quot;/OpenspaceConfig/icons_theme&quot;,iconsTheme-&gt;getItem(iconsTheme-&gt;getCurrentItem()).text());
-
-
-conf-&gt;saveonestring (&quot;/OpenspaceConfig/speed_delay/typing_speed&quot;,ntos(typingSpeed));
-conf-&gt;saveonestring (&quot;/OpenspaceConfig/speed_delay/click_speed&quot;,ntos(clickSpeed));
-conf-&gt;saveonestring (&quot;/OpenspaceConfig/speed_delay/scroll_speed&quot;,ntos(scrollSpeed));
-conf-&gt;saveonestring (&quot;/OpenspaceConfig/speed_delay/scroll_delay&quot;,ntos(scrollDelay));
-conf-&gt;saveonestring (&quot;/OpenspaceConfig/speed_delay/blink_speed&quot;,ntos(blinkSpeed));
-conf-&gt;saveonestring (&quot;/OpenspaceConfig/speed_delay/anim_speed&quot;,ntos(animSpeed));
-conf-&gt;saveonestring (&quot;/OpenspaceConfig/speed_delay/menu_pause&quot;,ntos(menuPause));
-conf-&gt;saveonestring (&quot;/OpenspaceConfig/speed_delay/tooltip_pause&quot;,ntos(tooltipPause));
-conf-&gt;saveonestring (&quot;/OpenspaceConfig/speed_delay/tooltip_time&quot;,ntos(tooltipTime));
-conf-&gt;saveonestring (&quot;/OpenspaceConfig/speed_delay/drag_delta&quot;,ntos(dragDelta));
-conf-&gt;saveonestring (&quot;/OpenspaceConfig/speed_delay/wheel_lines&quot;,ntos(wheelLines));
-
-FXchar buffer[60];
-conf-&gt;saveonestring (&quot;/OpenspaceConfig/colors/base&quot;,fxnamefromcolor(buffer,base));
-conf-&gt;saveonestring (&quot;/OpenspaceConfig/colors/fore&quot;,fxnamefromcolor(buffer,fore));
-conf-&gt;saveonestring (&quot;/OpenspaceConfig/colors/hilite&quot;,fxnamefromcolor(buffer,hilite));
-conf-&gt;saveonestring (&quot;/OpenspaceConfig/colors/shadow&quot;,fxnamefromcolor(buffer,shadow));
-conf-&gt;saveonestring (&quot;/OpenspaceConfig/colors/selfore&quot;,fxnamefromcolor(buffer,selfore));
-conf-&gt;saveonestring (&quot;/OpenspaceConfig/colors/selback&quot;,fxnamefromcolor(buffer,selback));
-conf-&gt;saveonestring (&quot;/OpenspaceConfig/colors/tipfore&quot;,fxnamefromcolor(buffer,tipfore));
-conf-&gt;saveonestring (&quot;/OpenspaceConfig/colors/tipback&quot;,fxnamefromcolor(buffer,tipback));
-conf-&gt;saveonestring (&quot;/OpenspaceConfig/colors/selmenutext&quot;,fxnamefromcolor(buffer,menufore));
-conf-&gt;saveonestring (&quot;/OpenspaceConfig/colors/selmenuback&quot;,fxnamefromcolor(buffer,menuback));   
-conf-&gt;saveonestring (&quot;/OpenspaceConfig/colors/main&quot;,fxnamefromcolor(buffer,main));   
-
-FXString fontspec=font[0]-&gt;getFont();
-conf-&gt;saveonestring (&quot;/OpenspaceConfig/fonts/normalfont&quot;,fontspec.text());  
-
-fontspec=font[1]-&gt;getFont();
-conf-&gt;saveonestring (&quot;/OpenspaceConfig/fonts/captionfont1&quot;,fontspec.text());  
-
-fontspec=font[2]-&gt;getFont();
-conf-&gt;saveonestring (&quot;/OpenspaceConfig/fonts/captionfont2&quot;,fontspec.text());  
-
-fontspec=font[3]-&gt;getFont();
-conf-&gt;saveonestring (&quot;/OpenspaceConfig/fonts/captionfont3&quot;,fontspec.text());  
-
-
-conf-&gt;saveonestring (&quot;/OpenspaceConfig/position&quot;,placement-&gt;getItem (placement-&gt;getCurrentItem()).text());
-
-}
-
-long preferences::onCommandChange (FXObject * sender, FXSelector sel, void *)
-{
-
-command_container *ct_prev=&amp;commandsMap[currentCommandName];
-ct_prev-&gt;exec=commandsTextfield-&gt;getText().text();
-ct_prev-&gt;capture=commandsCapture-&gt;getCheck();
-ct_prev-&gt;rescan=commandsRescan-&gt;getCheck();
-ct_prev-&gt;text=commandsTextfieldText-&gt;getText().text();
-ct_prev-&gt;icon=iconsList-&gt;getItem(iconsList-&gt;getCurrentItem()).text();
-ct_prev-&gt;key=shortcutList-&gt;getItem(shortcutList-&gt;getCurrentItem()).text();
-ct_prev-&gt;key_mask=shortcutMaskList-&gt;getItem(shortcutMaskList-&gt;getCurrentItem()).text();
-
-command_container ct=commandsMap[commandsCombo-&gt;getItem (commandsCombo-&gt;getCurrentItem ()).text ()];
-
-commandsRescan-&gt;setCheck(ct.rescan);
-commandsCapture-&gt;setCheck(ct.capture);
-commandsTextfield-&gt;setText (ct.exec.c_str ());
-commandsTextfieldText-&gt;setText (ct.text.c_str ());
-           
-	    string str;
-	    if(ct.type==&quot;&quot;)
-	    str=&quot;command type: EXTERNAL&quot;;
-	    else
-	    str=&quot;command type: &quot; + ct.type;
-	    
-	    commandsType-&gt;setText(str.c_str());
-
-
-	if(ct.type==&quot;INTERNAL&quot; || ct.type==&quot;PLUGIN&quot;)
-	{
-	commandsTextfield-&gt;disable();
-	commandsRescan-&gt;disable();
-	commandsCapture-&gt;disable();
-	removeCommandButton-&gt;disable();
-	}
-	else
-	{
-	commandsTextfield-&gt;enable();
-	commandsRescan-&gt;enable();
-	commandsCapture-&gt;enable();
-	removeCommandButton-&gt;enable();
-	}
-iconsList-&gt;setCurrentItem(iconsList-&gt;findItem(ct.icon.c_str()));
-shortcutList-&gt;setCurrentItem(shortcutList-&gt;findItem(ct.key.c_str()));
-shortcutMaskList-&gt;setCurrentItem(shortcutMaskList-&gt;findItem(ct.key_mask.c_str()));
-
-
-currentCommandName=ct.name;
-
-}
-
-
-long preferences::onFileTypeChange (FXObject * sender, FXSelector sel, void *)
-{
-
-filetype_container *ct_prev=&amp;filetypesMap[currentFileType];
-ct_prev-&gt;command=fileTypeDefaultBox-&gt;getItem(fileTypeDefaultBox-&gt;getCurrentItem()).text();
-
-ct_prev-&gt;commands.clear();
-for(int i=0;i&lt;additionalCommands-&gt;getNumItems ();i++)
-	{
-	ct_prev-&gt;commands.push_back(additionalCommands-&gt;getItemText(i).text());
-	}
-
-FXchar buffer[60];
-fxnamefromcolor(buffer,colorbutton-&gt;getBackColor());
-
-ct_prev-&gt;color=buffer;
-
-fxnamefromcolor(buffer,backcolorbutton-&gt;getBackColor());
-
-ct_prev-&gt;backcolor=buffer;
-ct_prev-&gt;icon=iconsList2-&gt;getItem(iconsList2-&gt;getCurrentItem()).text();
-
-filetype_container ct=filetypesMap[mime2xml(fileTypeList-&gt;getItem (fileTypeList-&gt;getCurrentItem ()).text ())];
-fileTypeDefaultBox-&gt;setCurrentItem(fileTypeDefaultBox-&gt;findItem(ct.command.c_str()));
-additionalCommands-&gt;clearItems();
-
-iconsList2-&gt;setCurrentItem(iconsList2-&gt;findItem(ct.icon.c_str()));
-
-vector&lt;string&gt;::iterator iter;
-	for(iter=ct.commands.begin();iter!=ct.commands.end();iter++)
-	{
-	additionalCommands-&gt;appendItem(iter-&gt;c_str());
-	}
-
- setAllColor(colorbutton,readcolor(ct.color));
- setAllColor(backcolorbutton,readcolor2(ct.backcolor));
-	
-
-currentFileType=ct.name;
-
-}
-
-long preferences::onShutterChange (FXObject * sender, FXSelector sel, void *)
-{
-string actual_shutter=shutterList-&gt;getItem(shutterList-&gt;getCurrentItem()).text();
-shutterCommands-&gt;clearItems();
-vector &lt;shutter_container&gt;::iterator iter;
-	for(iter=shutterVector.begin();iter!=shutterVector.end();iter++)
-	{
-		if(iter-&gt;shutter==actual_shutter)
-	shutterCommands-&gt;appendItem(iter-&gt;command.c_str());
-	}
-
-}
-
-long preferences::onToolbarChange (FXObject * sender, FXSelector sel, void *)
-{
-string actual_toolbar=toolbarList-&gt;getItem(toolbarList-&gt;getCurrentItem()).text();
-buttonsList-&gt;clearItems();
-vector &lt;toolbar_container&gt;::iterator iter;
-	for(iter=toolbarVector.begin();iter!=toolbarVector.end();iter++)
-	{
-		if(iter-&gt;toolbar==actual_toolbar)
-		{
-		string icon=conf-&gt;readonestring (&quot;/OpenspaceConfig/commands/&quot; + iter-&gt;command + &quot;/icon&quot;);
-		buttonsList-&gt;appendItem(iter-&gt;command.c_str(),objmanager-&gt;osicons[icon] );
-		}
-	}
-
-}
-
-
-bool preferences::validateName(string name)
-{
-	if(name==&quot;&quot;)return false;
-
-	int p,k;
-	FXRex identifier(&quot;[0-9a-zA-Z]*&quot;);
-        identifier.match(name.c_str(),name.size(),&amp;p,&amp;k);
-	
-
-	if(k!=name.size())
-	{
-	FXMessageBox error (this, &quot;error&quot;, &quot;Incorrect characters in name&quot;, NULL, MBOX_OK | DECOR_TITLE | DECOR_BORDER);
-	error.execute();
-	return false;
-	}
-	else
-	{
-	return true;
-	}
-    
-	
-}
-
-long preferences::onNewShutter (FXObject * sender, FXSelector sel, void *)
-{
-string shutter_name = newShutterEdit-&gt;getText ().text ();
-    if(!validateName(shutter_name))
-    return 0;
-
-shutterList-&gt;appendItem(shutter_name.c_str());
-
-}
-
-long preferences::onRemoveShutter (FXObject * sender, FXSelector sel, void *)
-{
-
-    string shutter =  shutterList-&gt;getItem (shutterList-&gt;getCurrentItem ()).text ();
-    int cur=shutterList-&gt;getCurrentItem ();
-    shutterList-&gt;setCurrentItem (0);
-    shutterList-&gt;removeItem (cur);    
-    this-&gt;onShutterChange(NULL,0,NULL);
-    
-    
-       string res = &quot;/OpenspaceConfig/shutter/&quot;+shutter;
-       conf-&gt;removestring (res);
-
-
-vector &lt;shutter_container&gt;::iterator shutter_iter;
-	
-	for(shutter_iter=shutterVector.begin();shutter_iter!=shutterVector.end(); shutter_iter++)
-		{
-			if(shutter_iter-&gt;shutter==shutter)
-			{
-				shutterVector.erase(shutter_iter);
-			break;
-			}
-		}
-
-
-}
-
-
-long preferences::onNewCommand (FXObject * sender, FXSelector sel, void *)
-{
-
-    string command_name = newCommandEdit-&gt;getText ().text ();
-    if(!validateName(command_name))
-    return 0;
-    
-    command_container ct=commandsMap[command_name];
-    if(ct.name!=&quot;&quot;) // already exists
-    return 0;
-    
-    ct.name=command_name;
-    ct.rescan=false;
-    ct.capture=false;
-    commandsCombo-&gt;appendItem(ct.name.c_str());
-    commandsMap[command_name]=ct;   
-    commandsCombo-&gt;setCurrentItem (commandsCombo-&gt;getNumItems () - 1);
-    this-&gt;onCommandChange(NULL,0,NULL);
-    
-    fileTypeDefaultBox-&gt;appendItem(ct.name.c_str());
-    additionalCommandsAvailable-&gt;appendItem(ct.name.c_str());
-    additionalCommandsAvailableForButtons-&gt;appendItem(ct.name.c_str());
-
-
-}
-
-long preferences::onRemoveCommand (FXObject * sender, FXSelector sel, void *)
-{
-
-    string command =  commandsCombo-&gt;getItem (commandsCombo-&gt;getCurrentItem ()).text ();
-    int cur=commandsCombo-&gt;getCurrentItem ();
-    commandsCombo-&gt;setCurrentItem (0);
-    commandsCombo-&gt;removeItem (cur);    
-    this-&gt;onCommandChange(NULL,0,NULL);
-    
-    
-       string res = &quot;/OpenspaceConfig/commands/&quot;+command;
-       conf-&gt;removestring (res);
-
-
-}
-
-long preferences:: onAdditionalCommandChange( FXObject * sender, FXSelector sel, void *)
-{
-FXushort id=FXSELID(sel);
-filetype_container *ct_prev=&amp;filetypesMap[currentFileType];
-	if(id==ID_ADD_COMMAND_ADDITIONAL)
-	{
-	ct_prev-&gt;commands.push_back(additionalCommandsAvailable-&gt;getItemText(additionalCommandsAvailable-&gt;getCurrentItem()).text());
-	additionalCommands-&gt;appendItem(additionalCommandsAvailable-&gt;getItemText(additionalCommandsAvailable-&gt;getCurrentItem()));
-	}
-	else
-	{
-		vector &lt;string&gt;::iterator iter = find(ct_prev-&gt;commands.begin(), ct_prev-&gt;commands.end(),additionalCommands-&gt;getItemText( additionalCommands-&gt;getCurrentItem()).text());
-		if(iter != ct_prev-&gt;commands.end())
-		{
-		ct_prev-&gt;commands.erase(iter);
-		}
-	additionalCommands-&gt;removeItem(additionalCommands-&gt;getCurrentItem());
-	
-	
-
-
-	
-	}
-
-}
-
-long preferences::onOpenMimeApp (FXObject * sender, FXSelector sel, void *)
-{
-if(mimeapp==NULL)
-{
-mimeapp=new MimeApp(this);
-
-
-FXushort id=FXSELID(sel);
-
-	if(id==ID_MIME_APP_AUTO)
-	{	
-	mimeapp-&gt;doAutomaticConfiguration();
-	}
-	else
-	{
-	mimeapp-&gt;create();
-	mimeapp-&gt;execute (PLACEMENT_OWNER);
-	}
-
-
-saveconfiguration=false;
-this-&gt;handle (this, FXSEL (SEL_CLOSE, 0), NULL);
-}
-
-   
-	
-}
-
-long preferences::onColorChanged(FXObject*,FXSelector,void*)
-{
-  setupColors();
-  return 1;
-}
-
-
-void preferences::setupColors()
-{
-  //shadow = makeShadowColor(base);
-  //hilite = makeHiliteColor(base);
-
-  tabitem-&gt;setBorderColor(border);
-  tabitem-&gt;setBaseColor(base);
-  tabitem-&gt;setBackColor(base);
-  tabitem-&gt;setTextColor(fore);
-  tabitem-&gt;setShadowColor(shadow);
-  tabitem-&gt;setHiliteColor(hilite);
-
-  tabframe-&gt;setBorderColor(border);
-  tabframe-&gt;setBaseColor(base);
-  tabframe-&gt;setBackColor(base);
-  tabframe-&gt;setShadowColor(shadow);
-  tabframe-&gt;setHiliteColor(hilite);
-
-
-  tabsubframe-&gt;setBorderColor(border);
-  tabsubframe-&gt;setBaseColor(base);
-  tabsubframe-&gt;setBackColor(base);
-  tabsubframe-&gt;setShadowColor(shadow);
-  tabsubframe-&gt;setHiliteColor(hilite);
-
-  menuframe-&gt;setBorderColor(border);
-  menuframe-&gt;setBaseColor(base);
-  menuframe-&gt;setBackColor(base);
-  menuframe-&gt;setShadowColor(shadow);
-  menuframe-&gt;setHiliteColor(hilite);
-
-  grpbox1-&gt;setBorderColor(border);
-  grpbox1-&gt;setBaseColor(base);
-  grpbox1-&gt;setBackColor(base);
-  grpbox1-&gt;setShadowColor(shadow);
-  grpbox1-&gt;setHiliteColor(hilite);
-  grpbox1-&gt;setTextColor(fore);
-
-  grpbox2-&gt;setBorderColor(border);
-  grpbox2-&gt;setBaseColor(base);
-  grpbox2-&gt;setBackColor(base);
-  grpbox2-&gt;setShadowColor(shadow);
-  grpbox2-&gt;setHiliteColor(hilite);
-  grpbox2-&gt;setTextColor(fore);
-
-  sep1-&gt;setBorderColor(border);
-  sep1-&gt;setBaseColor(base);
-  sep1-&gt;setBackColor(base);
-  sep1-&gt;setShadowColor(shadow);
-  sep1-&gt;setHiliteColor(hilite);
-
-  sep2-&gt;setBorderColor(border);
-  sep2-&gt;setBaseColor(base);
-  sep2-&gt;setBackColor(base);
-  sep2-&gt;setShadowColor(shadow);
-  sep2-&gt;setHiliteColor(hilite);
-
-  sep3-&gt;setBorderColor(border);
-  sep3-&gt;setBaseColor(base);
-  sep3-&gt;setBackColor(base);
-  sep3-&gt;setShadowColor(shadow);
-  sep3-&gt;setHiliteColor(hilite);
-
-  labeltextframe1-&gt;setBorderColor(border);
-  labeltextframe1-&gt;setBaseColor(base);
-  labeltextframe1-&gt;setBackColor(base);
-  labeltextframe1-&gt;setShadowColor(shadow);
-  labeltextframe1-&gt;setHiliteColor(hilite);
-
-
-  labeltextframe2-&gt;setBorderColor(border);
-  labeltextframe2-&gt;setBaseColor(base);
-  labeltextframe2-&gt;setBackColor(base);
-  labeltextframe2-&gt;setShadowColor(shadow);
-  labeltextframe2-&gt;setHiliteColor(hilite);
-
-  label1-&gt;setBorderColor(border);
-  label1-&gt;setBaseColor(base);
-  label1-&gt;setBackColor(base);
-  label1-&gt;setTextColor(fore);
-  label1-&gt;setShadowColor(shadow);
-  label1-&gt;setHiliteColor(hilite);
-
-  label2-&gt;setBorderColor(tipfore);
-  label2-&gt;setBaseColor(tipback);
-  label2-&gt;setBackColor(tipback);
-  label2-&gt;setTextColor(tipfore);
-  label2-&gt;setShadowColor(shadow);
-  label2-&gt;setHiliteColor(hilite);
-
-  label3-&gt;setBorderColor(border);
-  label3-&gt;setBaseColor(base);
-  label3-&gt;setBackColor(selback);
-  label3-&gt;setTextColor(selfore);
-  label3-&gt;setShadowColor(shadow);
-  label3-&gt;setHiliteColor(hilite);
-
-  label4-&gt;setBorderColor(border);
-  label4-&gt;setBaseColor(base);
-  label4-&gt;setBackColor(base);
-  label4-&gt;setTextColor(fore);
-  label4-&gt;setShadowColor(shadow);
-  label4-&gt;setHiliteColor(hilite);
-
-  label5-&gt;setBorderColor(tipfore);
-  label5-&gt;setBaseColor(tipback);
-  label5-&gt;setBackColor(tipback);
-  label5-&gt;setTextColor(tipfore);
-  label5-&gt;setShadowColor(shadow);
-  label5-&gt;setHiliteColor(hilite);
-
-  for (int i=0;i&lt;6;i++)
-  {
-    menulabels[i]-&gt;setBorderColor(border);
-    menulabels[i]-&gt;setBaseColor(base);
-    menulabels[i]-&gt;setBackColor(base);
-    menulabels[i]-&gt;setTextColor(fore);
-    menulabels[i]-&gt;setShadowColor(shadow);
-    menulabels[i]-&gt;setHiliteColor(hilite);
-  }
-
-  menulabels[4]-&gt;setBorderColor(border);
-  menulabels[4]-&gt;setBaseColor(menuback);
-  menulabels[4]-&gt;setBackColor(menuback);
-  menulabels[4]-&gt;setTextColor(menufore);
-  menulabels[4]-&gt;setShadowColor(shadow);
-  menulabels[4]-&gt;setHiliteColor(hilite);
-
-  textframe1-&gt;setBorderColor(border);
-  textframe1-&gt;setBaseColor(base);
-  textframe1-&gt;setBackColor(back);
-  textframe1-&gt;setShadowColor(shadow);
-  textframe1-&gt;setHiliteColor(hilite);
-
-  textframe2-&gt;setBorderColor(border);
-  textframe2-&gt;setBaseColor(base);
-  textframe2-&gt;setBackColor(back);
-  textframe2-&gt;setShadowColor(shadow);
-  textframe2-&gt;setHiliteColor(hilite);
-
-  textfield1-&gt;setBorderColor(border);
-  textfield1-&gt;setBackColor(back);
-  textfield1-&gt;setBaseColor(base);
-  textfield1-&gt;setTextColor(fore);
-  textfield1-&gt;setSelTextColor(selfore);
-  textfield1-&gt;setSelBackColor(selback);
-  textfield1-&gt;setCursorColor(fore);
-  textfield1-&gt;setShadowColor(shadow);
-  textfield1-&gt;setHiliteColor(hilite);
-
-  tooltip-&gt;setTextColor(tipfore);
-  tooltip-&gt;setBackColor(tipback);
-  }
-
-static FXString weightToString(FXuint weight){
-  switch(weight){
-    case FONTWEIGHT_THIN      : return &quot;thin&quot;; break;
-    case FONTWEIGHT_EXTRALIGHT: return &quot;extralight&quot;; break;
-    case FONTWEIGHT_LIGHT     : return &quot;light&quot;; break;
-    case FONTWEIGHT_NORMAL    : return &quot;normal&quot;; break;
-    case FONTWEIGHT_MEDIUM    : return &quot;medium&quot;; break;
-    case FONTWEIGHT_DEMIBOLD  : return &quot;demibold&quot;; break;
-    case FONTWEIGHT_BOLD      : return &quot;bold&quot;; break;
-    case FONTWEIGHT_EXTRABOLD : return &quot;extrabold&quot;; break;
-    case FONTWEIGHT_HEAVY     : return &quot;heavy&quot;; break;
-    default: return &quot;&quot;; break;
-    }
-  return &quot;&quot;;
-  }
-
-static FXString slantToString(FXuint slant){
-  switch(slant){
-    case FONTSLANT_REGULAR : return &quot;regular&quot;; break;
-    case FONTSLANT_ITALIC : return &quot;italic&quot;; break;
-    case FONTSLANT_OBLIQUE : return &quot;oblique&quot;; break;
-    case FONTSLANT_REVERSE_ITALIC : return &quot;reverse italic&quot;; break;
-    case FONTSLANT_REVERSE_OBLIQUE : return &quot;reverse oblique&quot;; break;
-    default : return &quot;&quot;; break;
-    }
-  return &quot;&quot;;
-  }
-
-void preferences::setupFont(int nr)
-{
-  
-
-
-   FXString fontname = font[nr]-&gt;getActualName() +&quot;, &quot; + FXStringVal(font[nr]-&gt;getSize()/10);
-  if(font[nr]-&gt;getWeight()!=0 &amp;&amp; font[nr]-&gt;getWeight()!=FONTWEIGHT_NORMAL){
-    fontname += &quot;, &quot; + weightToString(font[nr]-&gt;getWeight());
-    }
-  if (font[nr]-&gt;getSlant()!=0 &amp;&amp; font[nr]-&gt;getSlant()!=FONTSLANT_REGULAR){
-    fontname += &quot;, &quot; + slantToString(font[nr]-&gt;getSlant());
-    }
- 
- 	if(nr==0)
-	{
-	
- 	 tabitem-&gt;setFont(font[nr]);
- 	 label1-&gt;setFont(font[nr]);
- 	 label2-&gt;setFont(font[nr]);
- 	 label3-&gt;setFont(font[nr]);
- 	 label4-&gt;setFont(font[nr]);
- 	 label5-&gt;setFont(font[nr]);
-
- 	 menulabels[0]-&gt;setFont(font[nr]);
- 	 menulabels[1]-&gt;setFont(font[nr]);
- 	 menulabels[2]-&gt;setFont(font[nr]);
- 	 menulabels[3]-&gt;setFont(font[nr]);
- 	 menulabels[4]-&gt;setFont(font[nr]);
- 	 menulabels[5]-&gt;setFont(font[nr]);
-
-  	textfield1-&gt;setFont(font[nr]);
- 	
-  	}
- 	
-	
-	fontbutton[nr]-&gt;setText(fontname);
-
-  
-  }
-
-long preferences::onChooseFont(FXObject*,FXSelector sel,void*)
-{
-
-FXushort id=FXSELID(sel);
-int nr=id-ID_CHOOSE_FONT;
-
-
-  FXFontDialog dialog(this,&quot;Select Font&quot;);
-  FXFontDesc fontdescription;
-  font[nr]-&gt;getFontDesc(fontdescription);
-  strncpy(fontdescription.face,font[nr]-&gt;getActualName().text(),sizeof(fontdescription.face));
-  dialog.setFontSelection(fontdescription);
-  if(dialog.execute(PLACEMENT_SCREEN))
-  {
-    FXFont *oldfont=font[nr];
-    dialog.getFontSelection(fontdescription);
-    
-
- 	font[nr]=new FXFont(getApp(),fontdescription);
-	font[nr]-&gt;create();
-      
-    setupFont(nr);
-    delete oldfont;
-    
-    }
-  return 1;
-}
-
-long preferences::close (FXObject * sender, FXSelector sel, void *ptr)
-{
-
-if(saveconfiguration)
-this-&gt;save();
-
-FXMessageBox about (this, &quot;restart&quot;, &quot;restart openspace to apply changes&quot;, NULL, MBOX_OK | DECOR_ALL);
-about.execute ();
-
-FXDialogBox::onCmdAccept(sender,sel,ptr);
-
-}
-
-
-long preferences::downloadInstallPlugin (FXObject * sender, FXSelector sel, void *)
-{
-FXushort id=FXSELID(sel);
-string file;
-
-	if(id==ID_DOWNLOAD_INSTALL_CMD_PLUGIN)
-	file=string(FXFile::getUserDirectory (&quot;&quot;).text ()) +&quot;/.openspace/plugins/cmddialog/commandPluginsList.txt&quot;;
-	else
-	file=string(FXFile::getUserDirectory (&quot;&quot;).text ()) +&quot;/.openspace/plugins/filelist/vfsPluginsList.txt&quot;;
-	
-	if(FXFile::exists(file.c_str()))
-	{
-	
-	std::string line;
-   	std::ifstream infile (file.c_str());
-
-  		  while (std::getline (infile, line))
-   		 {
-		string name;
-		string download;
-		std::stringstream parser (line);	
-		parser &gt;&gt; name;
-		parser &gt;&gt; download;
-		
-		if(id==ID_DOWNLOAD_INSTALL_CMD_PLUGIN)
-			if(name==availableCommandPluginsList-&gt;getItem(availableCommandPluginsList-&gt;getCurrentItem()).text())
-			{
-				if(name==&quot;&quot;)
-				return 0;
-				
-			string cmd=&quot;cd &quot;+ string(FXFile::getUserDirectory (&quot;&quot;).text ()) +&quot;/.openspace/plugins/cmddialog/ &amp;&amp; wget -N --connect-timeout=5  &quot;+ download;
-			system(cmd.c_str());
-
-			
-			 command_container ct=commandsMap[name];
-   			 if(ct.name!=&quot;&quot;) // already exists
-   			 return 0;
-    
-   			  ct.name=name;
-  			  ct.rescan=false;
-  			  ct.capture=false;
-			  ct.type=&quot;PLUGIN&quot;;
-   			  commandsCombo-&gt;appendItem(ct.name.c_str());
-    			  commandsMap[name]=ct;   
- 		          commandsCombo-&gt;setCurrentItem (commandsCombo-&gt;getNumItems () - 1);
-   			  this-&gt;onCommandChange(NULL,0,NULL);
-    
-  			  fileTypeDefaultBox-&gt;appendItem(ct.name.c_str());
-  			  additionalCommands-&gt;appendItem(ct.name.c_str());
-			
-			break;
-			}
-		else
-			if(name==availableVfsPluginsList-&gt;getItem(availableVfsPluginsList-&gt;getCurrentItem()).text())
-			{
-				if(name==&quot;&quot;)
-				return 0;
-			
-			string cmd=&quot;cd &quot;+ string(FXFile::getUserDirectory (&quot;&quot;).text ()) +&quot;/.openspace/plugins/filelist/ &amp;&amp; wget -N --connect-timeout=5  &quot;+ download;
-			system(cmd.c_str());
-
-			string plugin_path = FXFile::getUserDirectory (&quot;&quot;).text ()+string(&quot;/.openspace/plugins/filelist/libfilelist&quot;)+ name+&quot;.so&quot;;
-
-    
-   			 	void *dllhandle = fxdllOpen (plugin_path.c_str ());
-    				if (dllhandle)
-    				{
-	
-				filelist_base *(*gg) (void);
-				gg = (filelist_base * (*)(void)) fxdllSymbol (dllhandle, &quot;get_filelist&quot;);
-				filelist_base *fb = gg ();	
-				
-				vfs v=fb-&gt;setup();
-				
-				conf-&gt;removestring (&quot;/OpenspaceConfig/filelist/&quot;+name);
-				conf-&gt;addstring(&quot;/OpenspaceConfig/filelist&quot;,name,&quot;&quot;);
-				conf-&gt;addstring(&quot;/OpenspaceConfig/filelist/&quot;+name,&quot;type&quot;,v.type);
-				conf-&gt;addstring(&quot;/OpenspaceConfig/filelist/&quot;+name,&quot;properties&quot;,&quot;&quot;);
-				
-				
-				
-				vector &lt;vfsheader_container&gt;::iterator iter;
-				
-					for(iter=v.vfsheaders.begin();iter!=v.vfsheaders.end();iter++)
-					{
-					conf-&gt;addstring(&quot;/OpenspaceConfig/filelist/&quot;+name+&quot;/properties&quot;,iter-&gt;name,&quot;&quot;);
-					conf-&gt;addstring(&quot;/OpenspaceConfig/filelist/&quot;+name+&quot;/properties/&quot;+ iter-&gt;name,&quot;width&quot;,iter-&gt;width);
-					conf-&gt;addstring(&quot;/OpenspaceConfig/filelist/&quot;+name+&quot;/properties/&quot;+ iter-&gt;name,&quot;type&quot;,iter-&gt;type);
-					}
-				vfsList-&gt;appendItem(name.c_str());
-			
-				}
-
-			}	
-			
-		
-		}
-	}
-
-
-}
-long preferences::updatePluginList (FXObject * sender, FXSelector sel, void *)
-{
-string cmd;
-
-FXushort id=FXSELID(sel);
-
-	if(id==ID_UPDATE_CMD_PLUGIN_LIST)
-	cmd=&quot;cd &quot;+ string(FXFile::getUserDirectory (&quot;&quot;).text ()) +&quot;/.openspace/plugins/cmddialog/ &amp;&amp; wget -N <A HREF="http://openspace.linux.pl/files/">http://openspace.linux.pl/files/</A>&quot;+string(PACKAGE_VERSION)+&quot;/x86/commandPluginsList.txt&quot;;
-	else
-	cmd=&quot;cd &quot;+ string(FXFile::getUserDirectory (&quot;&quot;).text ()) +&quot;/.openspace/plugins/filelist/ &amp;&amp; wget -N <A HREF="http://openspace.linux.pl/files/">http://openspace.linux.pl/files/</A>&quot;+string(PACKAGE_VERSION)+&quot;/x86/vfsPluginsList.txt&quot;;
-	
-	
-system(cmd.c_str());
-string file;
-	if(id==ID_UPDATE_CMD_PLUGIN_LIST)
-	file=string(FXFile::getUserDirectory (&quot;&quot;).text ()) +&quot;/.openspace/plugins/cmddialog/commandPluginsList.txt&quot;;
-	else
-	file=string(FXFile::getUserDirectory (&quot;&quot;).text ()) +&quot;/.openspace/plugins/filelist/vfsPluginsList.txt&quot;;
-	
-	
-	if(FXFile::exists(file.c_str()))
-	{
-	
-	std::string line;
-   	std::ifstream infile (file.c_str());
-
-  		while (std::getline (infile, line))
-   		{
-		string name;
-		string download;
-		std::stringstream parser (line);	
-		parser &gt;&gt; name;
-		parser &gt;&gt; download;
-			if(id==ID_UPDATE_CMD_PLUGIN_LIST)
-			{
-			availableCommandPluginsList-&gt;clearItems();
-			availableCommandPluginsList-&gt;appendItem(name.c_str());
-			}
-			else
-			{
-			availableVfsPluginsList-&gt;clearItems();
-			availableVfsPluginsList-&gt;appendItem(name.c_str());
-			}
-		}
-	}
-
-}
-

Deleted: trunk/src/preferences.h
===================================================================
--- trunk/src/preferences.h	2006-02-12 13:43:28 UTC (rev 245)
+++ trunk/src/preferences.h	2006-02-12 15:36:06 UTC (rev 246)
@@ -1,278 +0,0 @@
-#ifndef PREFERENCES_H
-#define PREFERENCES_H
-#include &quot;sharedobjects.h&quot;
-#include &quot;sharedFunctions.h&quot;
-#include &quot;MimeApp.h&quot;
-#include &quot;CommandsFileTypesContainers.h&quot;
-#include &lt;vector&gt;
-#include &lt;string&gt;
-#include &lt;map&gt;
-using namespace std;
-class shutter_container
-{
-public:
-string shutter;
-string command;
-shutter_container(string s,string c):shutter(s),command(c){}
-};
-
-class toolbar_container
-{
-public:
-string toolbar;
-string command;
-toolbar_container(string s,string c):toolbar(s),command(c){}
-};
-
-//preferences window, this is one of the most important things to be extended
-class preferences:public FXDialogBox
-{
-  FXDECLARE (preferences) protected:
-
-  private:
-    preferences ()
-    {
-    }
-
-    string actualvfs;
-
-    bool saveconfiguration;
-    FXSpinner* mainwindow_width;
-    FXSpinner* mainwindow_height;
-    FXTextField *leftdir,*rightdir,*defaultdir;
-    FXTextField *font1,*font2,*font3;
-    FXTextField *newCommandEdit;
-    FXTextField *newShutterEdit;
-    FXSpinner *thumbsize;
-    FXListBox *commandsCombo;
-    FXListBox *shortcutList;	
-    FXListBox *shortcutMaskList;
-    FXListBox *iconsList,*iconsList2;
-    FXVerticalFrame *commandsPane;
-    FXTextField *commandsTextfield;
-    FXTextField *commandsTextfieldText;
-    FXCheckButton *commandsRescan;
-    FXCheckButton *commandsCapture;
-    FXLabel *commandsType;
-    FXLabel *commandsIcon;
-    FXListBox *iconsTheme;
-    FXButton *removeCommandButton;
-    FXVerticalFrame *vfsPane;
-    FXListBox *vfsList;
-    FXList*headersList,*availableHeadersList;
-    FXListBox *placement;
-    
-    FXList *additionalCommands,*additionalCommandsAvailable,*additionalCommandsAvailableForButtons;
-    FXList *shutterCommands;
-    
-    string currentCommandName;
-    string currentFileType;
-    objectmanager* objmanager;
-    
-    FXVerticalFrame *frame;
-    
-    FXComboBox *allMime;
-    FXButton *colorbutton;
-    FXButton *backcolorbutton;
-    
-    FXListBox *shutterList;
-    FXListBox *toolbarList;
-    FXListBox *fileTypeList;
-    FXListBox *fileTypeDefaultBox;
-    string filetypestring;
-
-    MimeApp *mimeapp;
-    FXColorDialog *colordlg;
-
-    FXListBox *commandPluginsList,*availableCommandPluginsList;
-    FXListBox * availableVfsPluginsList;
-    FXList*buttonsList;
-
-    map &lt;string, command_container &gt; commandsMap;
-    map &lt;string, filetype_container&gt; filetypesMap;   
-  
-    vector &lt;shutter_container&gt; shutterVector;
-    vector &lt;toolbar_container&gt; toolbarVector;
-    
-    
-    FXVerticalFrame *filetypePane;
-    
-    bool preferences::validateName(string name);
-    void preferences::setAllColor(FXButton* button,FXColor color);
-
-  FXColor base;
-  FXColor border;
-  FXColor back;
-  FXColor fore;
-  FXColor selback;
-  FXColor selfore;
-  FXColor tipback;
-  FXColor tipfore;
-  FXColor menuback;
-  FXColor menufore;
-  FXColor hilite;
-  FXColor shadow;
-  FXColor main;
-
-  FXToolTip         *tooltip;
-  FXTabBook         *tabbook;
-  FXTabItem         *tabitem;
-  FXVerticalFrame   *tabframe;
-  FXVerticalFrame   *mainframe;
-  FXVerticalFrame   *menuframe;
-  FXHorizontalFrame *labeltextframe1;
-  FXHorizontalFrame *labeltextframe2;
-  FXHorizontalFrame *textframe1;
-  FXHorizontalFrame *textframe2;
-  FXHorizontalFrame *tabsubframe;
-  FXGroupBox        *grpbox1;
-  FXGroupBox        *grpbox2;
-  FXLabel           *label1;
-  FXLabel           *label2;
-  FXLabel           *label3;
-  FXLabel           *label4;
-  FXLabel           *label5;
-  FXLabel           *menulabels[6];
-  FXTextField       *textfield1;
-  FXButton          *button1;
-  FXButton          *fontbutton[4];
-  FXSeparator       *sep1;
-  FXSeparator       *sep2;
-  FXSeparator       *sep3;
- 
- 
-private:
-
-  FXFont           *font[4];
-
-  FXuint            typingSpeed;
-  FXuint            clickSpeed;
-  FXuint            scrollSpeed;
-  FXuint            scrollDelay;
-  FXuint            blinkSpeed;
-  FXuint            animSpeed;
-  FXuint            menuPause;
-  FXuint            tooltipPause;
-  FXuint            tooltipTime;
-  FXint             dragDelta;
-  FXint             wheelLines;
-
-
-private:
-
-  FXDataTarget      target_base;
-  FXDataTarget      target_back;
-  FXDataTarget      target_border;
-  FXDataTarget      target_fore;
-  FXDataTarget      target_hilite;
-  FXDataTarget      target_shadow;
-  FXDataTarget      target_selfore;
-  FXDataTarget      target_selback;
-  FXDataTarget      target_tipfore;
-  FXDataTarget      target_tipback;
-  FXDataTarget      target_menufore;
-  FXDataTarget      target_menuback;
-    
-  FXDataTarget      target_main;
-
-  FXDataTarget      target_typingspeed;
-  FXDataTarget      target_clickspeed;
-  FXDataTarget      target_scrollspeed;
-  FXDataTarget      target_scrolldelay;
-  FXDataTarget      target_blinkspeed;
-  FXDataTarget      target_animspeed;
-  FXDataTarget      target_menupause;
-  FXDataTarget      target_tooltippause;
-  FXDataTarget      target_tooltiptime;
-  FXDataTarget      target_dragdelta;
-  FXDataTarget      target_wheellines;
-  
- 
-
-    
-    public:
-    
-    enum
-    {
-	ID_SAVE = FXDialogBox::ID_LAST,
-	ID_COMMAND_CHANGE,
-	ID_FILETYPE_CHANGE,
-	ID_VFS_CHANGE,
-	ID_NEW_COMMAND,
-	ID_NEW_FILETYPE,
-	ID_NEW_SHUTTER,
-	ID_REMOVE_SHUTTER,
-	ID_REMOVE_COMMAND,
-	ID_MIME_APP,
-	ID_MIME_APP_AUTO,
-	ID_ADD_COMMAND_ADDITIONAL,
-	ID_DEL_COMMAND_ADDITIONAL,
-	ID_ADD_FILETYPE,
-	ID_CHOOSE_COLOR,
-	ID_CHOOSE_BACKCOLOR,
-	ID_COMMANDPLUGIN_CHANGE,
-	ID_ADD_BUTTON_COMMAND,
-	ID_DEL_BUTTON_COMMAND,
-	ID_ADD_SHUTTER_COMMAND,
-	ID_DEL_SHUTTER_COMMAND,
-	ID_ADD_HEADER,
-	ID_DEL_HEADER,
-	ID_SHUTTER_CHANGE,
-	ID_TOOLBAR_CHANGE,
-	ID_DOWNLOAD_INSTALL_CMD_PLUGIN,
-	ID_DOWNLOAD_INSTALL_VFS_PLUGIN,
-	ID_UPDATE_CMD_PLUGIN_LIST,
-	ID_UPDATE_VFS_PLUGIN_LIST,
-	ID_COLORS,
-	ID_CHOOSE_FONT,
-	ID_CHOOSE_CAPTIONFONT1,
-	ID_CHOOSE_CAPTIONFONT2,
-	ID_CHOOSE_CAPTIONFONT3,
-	ID_UPDATE_WINDOW_SIZE,
-	ID_UP_BUTTON_COMMAND,
-	ID_DOWN_BUTTON_COMMAND,
-	ID_UP_SHUTTER_COMMAND,
-	ID_DOWN_SHUTTER_COMMAND,
-	ID_UP_VFS_HEADER,
-	ID_DOWN_VFS_HEADER,
-	ID_UP_COMMAND,
-	ID_DOWN_COMMAND,
-	ID_LAST,
-    };
-
-    preferences (FXWindow * owner);
-
-    long preferences::save (void);
-    long preferences::onCommandChange (FXObject * sender, FXSelector sel, void *);
-    long preferences::onFileTypeChange (FXObject * sender, FXSelector sel, void *);
-    long preferences::onShutterChange (FXObject * sender, FXSelector sel, void *);
-    long preferences::onToolbarChange (FXObject * sender, FXSelector sel, void *);
-    long preferences::onNewCommand (FXObject * sender, FXSelector sel, void *);
-    long preferences::onRemoveCommand (FXObject * sender, FXSelector sel, void *);
-    long preferences::onNewShutter (FXObject * sender, FXSelector sel, void *);
-    long preferences::onRemoveShutter (FXObject * sender, FXSelector sel, void *);
-    long preferences::onOpenMimeApp (FXObject * sender, FXSelector sel, void *);
-    long preferences::onAdditionalCommandChange( FXObject * sender, FXSelector sel, void *);
-    long preferences::onAddFiletype (FXObject * sender, FXSelector sel, void *);
-    long preferences::onChooseColor (FXObject * sender, FXSelector sel, void *);
-    long preferences::onAddButtonCommand (FXObject * sender, FXSelector sel, void *);
-    long preferences::onAddShutterCommand (FXObject * sender, FXSelector sel, void *);
-    long preferences::close (FXObject * sender, FXSelector sel, void *);
-    long preferences::downloadInstallPlugin (FXObject * sender, FXSelector sel, void *);
-    long preferences::updatePluginList (FXObject * sender, FXSelector sel, void *);
-    long preferences::onVfsChange (FXObject * sender, FXSelector sel, void *);
-    long preferences::onAddHeader (FXObject * sender, FXSelector sel, void *);
-    long preferences::onColorChanged(FXObject*,FXSelector,void*);
-    long preferences::onChooseFont(FXObject*,FXSelector,void*);
-    long preferences::updateWindowSize(FXObject * sender, FXSelector sel, void *);
-    long preferences::onUpDown(FXObject * sender, FXSelector sel, void *);
-    long preferences::onUpDownVfsHeader(FXObject * sender, FXSelector sel, void *);
-    long preferences::onUpDownCommand(FXObject * sender, FXSelector sel, void *);
-
-    
-    void preferences::setupColors(void);
-    void preferences::setupFont(int nr);
-    virtual ~ preferences ();
-};
-
-#endif

Deleted: trunk/src/sharedFunctions.cpp
===================================================================
--- trunk/src/sharedFunctions.cpp	2006-02-12 13:43:28 UTC (rev 245)
+++ trunk/src/sharedFunctions.cpp	2006-02-12 15:36:06 UTC (rev 246)
@@ -1,58 +0,0 @@
-#include &quot;sharedFunctions.h&quot;
-
-//number to string in human readable units
-string numtostring (unsigned long k)
-{
-
-
-    string metric (&quot;B&quot;);
-    if (k &gt; 1024)
-    {
-	k /= 1024;
-	metric = &quot;KB&quot;;
-	if (k &gt; 1024)
-	{
-	    k /= 1024;
-	    metric = &quot;MB&quot;;
-	}
-    }
-
-    char chstr[20];
-    sprintf (chstr, &quot;%d&quot;, k);
-
-    string retstrin = string (chstr) + &quot; &quot; + metric;
-
-    return retstrin;
-}
-
-//number to string
-string ntos (unsigned long k)
-{
-    char chstr[20];
-    sprintf (chstr, &quot;%d&quot;, k);
-    return chstr;
-}
-
-string mime2xml(string str)
-{
-	for(int i=0;str[i]!= '\0';i++)
-	{
-	 	if(str[i]=='+')
-		str[i]='P';
-	}
-
-
-return str;
-}
-
-string xml2mime(string str)
-{
-	for(int i=0;str[i]!= '\0';i++)
-	{
-	 	if(str[i]=='P')
-		str[i]='+';
-	}
-
-
-return str;
-}

Deleted: trunk/src/sharedFunctions.h
===================================================================
--- trunk/src/sharedFunctions.h	2006-02-12 13:43:28 UTC (rev 245)
+++ trunk/src/sharedFunctions.h	2006-02-12 15:36:06 UTC (rev 246)
@@ -1,13 +0,0 @@
-#ifndef SHAREDFUNCTIONS_H
-#define SHAREDFUNCTIONS_HS
-
-#include &lt;string&gt;
-using namespace std;
-
-//some global functions ;p
-string ntos (unsigned long k);
-string numtostring (unsigned long k);
-string mime2xml(string str);
-string xml2mime(string str);
-
-#endif

Deleted: trunk/src/sharedobjects.cpp
===================================================================
--- trunk/src/sharedobjects.cpp	2006-02-12 13:43:28 UTC (rev 245)
+++ trunk/src/sharedobjects.cpp	2006-02-12 15:36:06 UTC (rev 246)
@@ -1,102 +0,0 @@
-#include &quot;sharedobjects.h&quot;
-
-objectmanager* objectmanager::pinstance = 0;// initialize pointer
-
-objectmanager* objectmanager::instance (FXApp *app) 
-{
-    if (pinstance == 0)  // is it the first call?
-    {  
-        pinstance = new objectmanager(app); // create sole instance
-
-    }
-    return pinstance; // address of sole instance
-}
-objectmanager::objectmanager(FXApp *app) 
-{ 
-    //... perform necessary instance initializations 
-    
-
-    captionfont1 = new FXFont(app,conf-&gt;readonestring (&quot;/OpenspaceConfig/fonts/captionfont1&quot;).c_str());
-    captionfont1-&gt;create ();
-
-    captionfont2 = new FXFont(app,conf-&gt;readonestring (&quot;/OpenspaceConfig/fonts/captionfont2&quot;).c_str());
-    captionfont2-&gt;create ();
-
-    captionfont3 = new FXFont(app,conf-&gt;readonestring (&quot;/OpenspaceConfig/fonts/captionfont3&quot;).c_str());
-    captionfont3-&gt;create ();
-
-    maincolor=fxcolorfromname(conf-&gt;readonestring (&quot;/OpenspaceConfig/colors/main&quot;).c_str());
-    
-  key_map[&quot;a&quot;]                             = 0x0061;
-  key_map[&quot;b&quot;]                             = 0x0062;
-  key_map[&quot;c&quot;]                             = 0x0063;
-  key_map[&quot;d&quot;]                             = 0x0064;
-  key_map[&quot;e&quot;]                             = 0x0065;
-  key_map[&quot;f&quot;]                             = 0x0066;
-  key_map[&quot;g&quot;]                             = 0x0067;
-  key_map[&quot;h&quot;]                             = 0x0068;
-  key_map[&quot;i&quot;]                             = 0x0069;
-  key_map[&quot;j&quot;]                             = 0x006A;
-  key_map[&quot;k&quot;]                             = 0x006B;
-  key_map[&quot;l&quot;]                             = 0x006C;
-  key_map[&quot;m&quot;]                             = 0x006D;
-  key_map[&quot;n&quot;]                             = 0x006E;
-  key_map[&quot;o&quot;]                             = 0x006F;
-  key_map[&quot;p&quot;]                             = 0x0070;
-  key_map[&quot;q&quot;]                             = 0x0071;
-  key_map[&quot;r&quot;]                             = 0x0072;
-  key_map[&quot;s&quot;]                             = 0x0073;
-  key_map[&quot;t&quot;]                             = 0x0074;
-  key_map[&quot;u&quot;]                             = 0x0075;
-  key_map[&quot;v&quot;]                             = 0x0076;
-  key_map[&quot;w&quot;]                             = 0x0077;
-  key_map[&quot;x&quot;]                             = 0x0078;
-  key_map[&quot;y&quot;]                             = 0x0079;
-  key_map[&quot;z&quot;]                             = 0x007A;
-  
-  
-  
-  key_map[&quot;0&quot;]                             = 0x0030;
-  key_map[&quot;1&quot;]                             = 0x0031;
-  key_map[&quot;2&quot;]                             = 0x0032;
-  key_map[&quot;3&quot;]                             = 0x0033;
-  key_map[&quot;4&quot;]                             = 0x0034;
-  key_map[&quot;5&quot;]                             = 0x0035;
-  key_map[&quot;6&quot;]                             = 0x0036;
-  key_map[&quot;7&quot;]                             = 0x0037;
-  key_map[&quot;8&quot;]                             = 0x0038;
-  key_map[&quot;9&quot;]                             = 0x0039;
-  
-  
-  key_map[&quot;BackSpace&quot;]                     = 0xFF08;
-  key_map[&quot;Tab&quot;]                           = 0xFF09;
-  key_map[&quot;Linefeed&quot;]                      = 0xFF0A;
-  key_map[&quot;Clear&quot;]                         = 0xFF0B;
-  key_map[&quot;Return&quot;]                        = 0xFF0D;
-  key_map[&quot;Pause&quot;]                         = 0xFF13;
-  key_map[&quot;Scroll_Lock&quot;]                   = 0xFF14;
-  key_map[&quot;Sys_Req&quot;]                       = 0xFF15;
-  key_map[&quot;Escape&quot;]                        = 0xFF1B;
-  key_map[&quot;Delete&quot;]                        = 0xFFFF;
-  key_map[&quot;Multi_key&quot;]                     = 0xFF20;
-  
-  
-  key_map[&quot;F1&quot;]                            = 0xFFBE;
-  key_map[&quot;F2&quot;]                            = 0xFFBF;
-  key_map[&quot;F3&quot;]                            = 0xFFC0;
-  key_map[&quot;F4&quot;]                            = 0xFFC1;
-  key_map[&quot;F5&quot;]                            = 0xFFC2;
-  key_map[&quot;F6&quot;]                            = 0xFFC3;
-  key_map[&quot;F7&quot;]                            = 0xFFC4;
-  key_map[&quot;F8&quot;]                            = 0xFFC5;
-  key_map[&quot;F9&quot;]                            = 0xFFC6;
-  key_map[&quot;F10&quot;]                           = 0xFFC7;
-  key_map[&quot;F11&quot;]                           = 0xFFC8;
-  key_map[&quot;F12&quot;]                           = 0xFFC9;
-  
-  
-  key_map[&quot;Space&quot;]                         = 0x0020;
-    
-}
-
-

Deleted: trunk/src/sharedobjects.h
===================================================================
--- trunk/src/sharedobjects.h	2006-02-12 13:43:28 UTC (rev 245)
+++ trunk/src/sharedobjects.h	2006-02-12 15:36:06 UTC (rev 246)
@@ -1,42 +0,0 @@
-#ifndef sharedobjects
-#define sharedobjects
-
-#include &quot;configure.h&quot;
-#include &quot;fx.h&quot;
-#include &quot;filetype.h&quot;
-#include &quot;thread_elem.h&quot;
-#include &lt;map&gt;
-using namespace std;
-
-extern configure *conf;
-
-FXColor readcolor (string col);
-FXColor readcolor2 (string col);
-
-class objectmanager 
-{
-  public:
-      static objectmanager* instance(FXApp *app);
-       FXFont *captionfont1, *captionfont2, *captionfont3;
-       FXApp *app;
-       vector &lt; thread_elem * &gt;thread_vec;
-       map &lt; string, file_type * &gt;file_type_settings;
-       map &lt; string, FXIcon * &gt;osicons;
-       FXIcon *specialicons[30];
-       map &lt; string, unsigned int &gt;key_map;
-       FXColor maincolor;
-      
-      
-      
-  protected:
-      objectmanager(FXApp *app);
-      objectmanager(const objectmanager&amp;);
-      objectmanager&amp; operator= (const objectmanager&amp;);
-  private:
-      static objectmanager* pinstance;
-};
-
-
-
-
-#endif

Deleted: trunk/src/shutter.cpp
===================================================================
--- trunk/src/shutter.cpp	2006-02-12 13:43:28 UTC (rev 245)
+++ trunk/src/shutter.cpp	2006-02-12 15:36:06 UTC (rev 246)
@@ -1,96 +0,0 @@
-#include &quot;fx.h&quot;
-#include &quot;shutter.h&quot;
-
-
-FXDEFMAP (shutter) shutterMap[] =
-{
-FXMAPFUNC (SEL_MOUSEWHEEL, 0, shutter::onMouseWheel), 
-FXMAPFUNC (SEL_COMMAND, shutter::ID_OPEN_SHUTTERITEM, shutter::onOpenItem),};
-
-FXIMPLEMENT (shutter, FXShutter, shutterMap, ARRAYNUMBER (shutterMap))
-//-----SHUTTER------------------------------------------------------------------------------------------------------------------------------------------
-shutter::shutter (FXComposite * p, FXWindow * x):
-FXShutter (p, x, 6667, FRAME_NONE | LAYOUT_FILL_Y | LAYOUT_FILL_X | LAYOUT_TOP | LAYOUT_LEFT | LAYOUT_FIX_WIDTH, 0, 0, 90, 0, 0, 0, 0, 0, 0, 0)
-{
-    setLayoutHints (FRAME_NONE | LAYOUT_FILL_Y | LAYOUT_FILL_X | LAYOUT_TOP | LAYOUT_LEFT);
-
-}
-
-
-//----------------------------------------------------
-
-
-long shutter::onMouseWheel (FXObject * sender, FXSelector, void *ptr)
-{
-
-    FXEvent *event = (FXEvent *) ptr;
-
-
-    int x;
-    if (event-&gt;code &lt; 0)
-    {
-	x = getCurrent () + 1;
-	if (x &gt; numChildren () - 1)
-	    x = 0;
-	setCurrent (x);
-    }
-
-    if (event-&gt;code &gt; 0)
-    {
-	x = getCurrent () - 1;
-	if (x == -1)
-	    x = numChildren () - 1;
-	setCurrent (x);
-    }
-
-
-    FXMenuPane *menu = (FXMenuPane *) this-&gt;getParent ();
-    menu-&gt;resize (90, getheight ());
-
-
-    return 1;
-}
-
-//----------------------------------------------------
-
-long shutter::onOpenItem (FXObject * sender, FXSelector sel, void *ptr)
-{
-    FXShutter::onOpenItem (sender, sel, ptr);
-
-
-    FXMenuPane *menu = (FXMenuPane *) ((FXWindow *) sender)-&gt;getParent ()-&gt;getParent ();
-    menu-&gt;resize (90, getheight ());
-
-    return 1;
-}
-
-int shutter::getheight ()
-{
-    int height_size = 0;
-    FXShutterItem *test = (FXShutterItem *) this-&gt;getFirst ();
-    int x = getCurrent ();
-    int zz = 0;
-
-    while (test)
-    {
-	if (zz == x)
-	{
-	    FXWindow *wind = test-&gt;getContent ()-&gt;getFirst ();
-
-	    while (wind)
-	    {
-		height_size += wind-&gt;getDefaultHeight ();
-		wind = wind-&gt;getNext ();
-	    }
-
-	}
-	test = (FXShutterItem *) test-&gt;getNext ();
-	zz++;
-    }
-    if (this-&gt;getFirst () != NULL)
-	height_size += (((FXShutterItem *) this-&gt;getFirst ())-&gt;getButton ()-&gt;getDefaultHeight () + 2) * zz - 1;
-    return height_size;
-}
-
-
-//-----SHUTTER------------------------------------------------------------------------------------------------------------------------------------------

Deleted: trunk/src/shutter.h
===================================================================
--- trunk/src/shutter.h	2006-02-12 13:43:28 UTC (rev 245)
+++ trunk/src/shutter.h	2006-02-12 15:36:06 UTC (rev 246)
@@ -1,22 +0,0 @@
-#ifndef SHUTTER
-#define SHUTTER
-
-//this is used in filelist popup, this scrolling popup
-class shutter:public FXShutter
-{
-    FXDECLARE (shutter) 
-    friend class FXShutterItem;
-  public:
-     shutter (FXComposite * p, FXWindow * x);
-     shutter ()
-    {
-    }
-    long onMouseWheel (FXObject *, FXSelector, void *);
-    long onOpenItem (FXObject *, FXSelector, void *);
-
-    int getheight (void);
-
-};
-
-
-#endif

Deleted: trunk/src/thread_elem.cpp
===================================================================
--- trunk/src/thread_elem.cpp	2006-02-12 13:43:28 UTC (rev 245)
+++ trunk/src/thread_elem.cpp	2006-02-12 15:36:06 UTC (rev 246)
@@ -1,63 +0,0 @@
-#include &quot;thread_elem.h&quot;
-
-
-thread_elem::thread_elem (void *fb, string command, string options, vector&lt;string&gt; src, string dst)
-{
-    
-
-    this-&gt;command = command;
-    this-&gt;src = src;
-    this-&gt;dst = dst;
-    this-&gt;fb = fb;
-    this-&gt;options = options;
-
-    init(); 
-
-}
-
-thread_elem::thread_elem (void *fb, string command, string options, string src, string dst)
-{
-    
-    vector&lt;string&gt; src2;
-    src2.push_back(src);
-    
-    this-&gt;command = command;
-    this-&gt;src = src2;
-    this-&gt;dst = dst;
-    this-&gt;fb = fb;
-    this-&gt;options = options;
-
-    init(); 
-
-}
-
-
-thread_elem::thread_elem ()
-{
-    gui = NULL;
-}
-
-void thread_elem::init(void)
-{
-    str1 = &quot;start&quot;;
-    gui = NULL;
-    
-    act_total_size = 0;
-    total_size = 1;
-    file_size = 1;
-    act_file_size = 0;
-
-    tim = new time_t;
-    time (tim);
-
-    end = false;
-    question = false;
-    answer = false;
-    overwrite = false;
-    cancel = false;
-    all = false;
-    error = false;
-
-    act_file_name = &quot;&quot;;
-    msg=&quot;operation failed&quot;;
-}

Deleted: trunk/src/thread_elem.h
===================================================================
--- trunk/src/thread_elem.h	2006-02-12 13:43:28 UTC (rev 245)
+++ trunk/src/thread_elem.h	2006-02-12 15:36:06 UTC (rev 246)
@@ -1,60 +0,0 @@
-#ifndef THREAD_ELEM
-#define THREAD_ELEM
-
-#include &lt;fx.h&gt;
-#include &lt;string&gt;
-#include &lt;vector&gt;
-using namespace std;
-
-#include &lt;time.h&gt;
-
-
-//to execute something as thread you have to create object of this class
-//it is used to send information beetwen main program and threads
-class thread_elem
-{
-  public:
-
-    thread_elem ();
-    thread_elem (void *fb, string command, string options, vector&lt;string&gt; src=vector&lt;string&gt;(), string dst = &quot;&quot;);
-    thread_elem (void *fb, string command, string options,string src, string dst = &quot;&quot;);
-    void thread_elem::init(void);
-
-    FXMutex mutex;
-    void *gui;
-    void *fb;
-    void *filel;
-
-    string command;
-    vector&lt;string&gt; src;
-    string dst;
-    string options;
-    string msg;
-    int p[2];
-    time_t *tim;
-
-    string str1;
-    string str2;
-    string str3;
-
-    unsigned long total_size;
-    unsigned long act_total_size;
-
-    unsigned long file_size;
-    unsigned long act_file_size;
-
-    string act_file_name;
-
-    bool cancel;
-    bool end;
-    bool question;
-    bool answer;
-    bool overwrite;
-    bool all;
-    bool error;
-    pthread_t pid;
-    FXMenuPane *pane;
-
-};
-
-#endif

Copied: trunk/svnignore (from rev 245, branches/mloskot-style-refactoring/svnignore)

Copied: trunk/templates (from rev 245, branches/mloskot-style-refactoring/templates)


Property changes on: trunk/templates
___________________________________________________________________
Name: svn:ignore
   + *~
*.cache
*LOG
*log
*.kdev*
*.lo
*.loT
*.o
*.status
*.swp
.deps
.libs
libtool
openspacerc
tags
Doxyfile
Makefile


Deleted: trunk/templates/cpp
===================================================================
--- branches/mloskot-style-refactoring/templates/cpp	2006-02-12 13:43:28 UTC (rev 245)
+++ trunk/templates/cpp	2006-02-12 15:36:06 UTC (rev 246)
@@ -1,27 +0,0 @@
-// $Id$
-/////////////////////////////////////////////////////////////////////////////
-// This file is part of OpenSpace project.
-//
-// OpenSpace is free software; you can redistribute it and/or modify
-// it under the terms of the GNU General Public License as published by
-// the Free Software Foundation; either version 2 of the License, or
-// (at your option) any later version.
-// 
-// OpenSpace is distributed in the hope that it will be useful,
-// but WITHOUT ANY WARRANTY; without even the implied warranty of
-// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
-// GNU General Public License for more details.
-//
-// You should have received a copy of the GNU General Public License
-// along with OpenSpace; if not, write to the Free Software
-// Foundation, Inc., 51 Franklin St, Fifth Floor, Boston, MA  02110-1301  USA
-/////////////////////////////////////////////////////////////////////////////
-//
-// C++ Implementation: $MODULE$
-//
-// Author: $AUTHOR$ &lt;$EMAIL$&gt;, (C) $YEAR$
-//
-// Description: 
-//
-/////////////////////////////////////////////////////////////////////////////
-

Copied: trunk/templates/cpp (from rev 245, branches/mloskot-style-refactoring/templates/cpp)

Deleted: trunk/templates/h
===================================================================
--- branches/mloskot-style-refactoring/templates/h	2006-02-12 13:43:28 UTC (rev 245)
+++ trunk/templates/h	2006-02-12 15:36:06 UTC (rev 246)
@@ -1,26 +0,0 @@
-// $Id$
-/////////////////////////////////////////////////////////////////////////////
-// This file is part of OpenSpace project.
-//
-// OpenSpace is free software; you can redistribute it and/or modify
-// it under the terms of the GNU General Public License as published by
-// the Free Software Foundation; either version 2 of the License, or
-// (at your option) any later version.
-//
-// OpenSpace is distributed in the hope that it will be useful,
-// but WITHOUT ANY WARRANTY; without even the implied warranty of
-// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
-// GNU General Public License for more details.
-//
-// You should have received a copy of the GNU General Public License
-// along with OpenSpace; if not, write to the Free Software
-// Foundation, Inc., 51 Franklin St, Fifth Floor, Boston, MA  02110-1301  USA
-/////////////////////////////////////////////////////////////////////////////
-//
-// C++ Interface: $MODULE$
-//
-// Author: $AUTHOR$ &lt;$EMAIL$&gt;, (C) $YEAR$
-//
-// Description: 
-//
-/////////////////////////////////////////////////////////////////////////////

Copied: trunk/templates/h (from rev 245, branches/mloskot-style-refactoring/templates/h)


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="000026.html">[Openspace-svn] r245 - branches/mloskot-style-refactoring/src
</A></li>
	<LI>Next message: <A HREF="000028.html">[Openspace-svn] r247 - trunk/src
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#27">[ date ]</a>
              <a href="thread.html#27">[ thread ]</a>
              <a href="subject.html#27">[ subject ]</a>
              <a href="author.html#27">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/openspace-svn">More information about the Openspace-svn
mailing list</a><br>
</body></html>

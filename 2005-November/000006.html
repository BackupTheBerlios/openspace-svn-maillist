<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Openspace-svn] r226 - branches/mloskot-style-refactoring/src
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/openspace-svn/2005-November/index.html" >
   <LINK REL="made" HREF="mailto:openspace-svn%40lists.berlios.de?Subject=Re%3A%20%5BOpenspace-svn%5D%20r226%20-%20branches/mloskot-style-refactoring/src&In-Reply-To=%3C200511111738.jABHcJsL032213%40sheep.berlios.de%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="000007.html">
   <LINK REL="Next"  HREF="000009.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Openspace-svn] r226 - branches/mloskot-style-refactoring/src</H1>
    <B>compbatant at berlios.de</B> 
    <A HREF="mailto:openspace-svn%40lists.berlios.de?Subject=Re%3A%20%5BOpenspace-svn%5D%20r226%20-%20branches/mloskot-style-refactoring/src&In-Reply-To=%3C200511111738.jABHcJsL032213%40sheep.berlios.de%3E"
       TITLE="[Openspace-svn] r226 - branches/mloskot-style-refactoring/src">compbatant at berlios.de
       </A><BR>
    <I>Fri Nov 11 18:38:19 CET 2005</I>
    <P><UL>
        <LI>Previous message: <A HREF="000007.html">[Openspace-svn] r225 - in branches/mloskot-style-refactoring: . doc src templates
</A></li>
        <LI>Next message: <A HREF="000009.html">[Openspace-svn] r227 - in branches/mloskot-style-refactoring: . src
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#6">[ date ]</a>
              <a href="thread.html#6">[ thread ]</a>
              <a href="subject.html#6">[ subject ]</a>
              <a href="author.html#6">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Author: compbatant
Date: 2005-11-11 18:38:14 +0100 (Fri, 11 Nov 2005)
New Revision: 226

Modified:
   branches/mloskot-style-refactoring/src/OSFileTypeInfo.h
   branches/mloskot-style-refactoring/src/OSMimeApp.cpp
   branches/mloskot-style-refactoring/src/OSMimeType.cpp
   branches/mloskot-style-refactoring/src/OSPathType.cpp
   branches/mloskot-style-refactoring/src/OSPreferences.cpp
   branches/mloskot-style-refactoring/src/OSPreferences.h
   branches/mloskot-style-refactoring/src/OSShutter.cpp
   branches/mloskot-style-refactoring/src/OSShutter.h
Log:
kompiluje sie :]


Modified: branches/mloskot-style-refactoring/src/OSFileTypeInfo.h
===================================================================
--- branches/mloskot-style-refactoring/src/OSFileTypeInfo.h	2005-11-11 17:37:17 UTC (rev 225)
+++ branches/mloskot-style-refactoring/src/OSFileTypeInfo.h	2005-11-11 17:38:14 UTC (rev 226)
@@ -24,8 +24,8 @@
 // Description:
 //
 /////////////////////////////////////////////////////////////////////////////
-#ifndef __OSFILETYPEINFO_H__
-#define __OSFILETYPEINFO_H__
+#ifndef __OSCOMMANDTYPEINFO_H__
+#define __OSCOMMANDTYPEINFO_H__
 
 #include &lt;vector&gt;
 #include &lt;string&gt;
@@ -75,4 +75,4 @@
     std::string backcolor;
 };
 
-#endif // #ifndef __OSFILETYPEINFO_H__
+#endif // #ifndef __OSCOMMANDTYPEINFO_H__

Modified: branches/mloskot-style-refactoring/src/OSMimeApp.cpp
===================================================================
--- branches/mloskot-style-refactoring/src/OSMimeApp.cpp	2005-11-11 17:37:17 UTC (rev 225)
+++ branches/mloskot-style-refactoring/src/OSMimeApp.cpp	2005-11-11 17:38:14 UTC (rev 226)
@@ -24,10 +24,10 @@
 // Description:
 //
 /////////////////////////////////////////////////////////////////////////////
-
+#include &quot;OSFileTypeInfo.h&quot;
 #include &quot;OSMimeApp.h&quot;
 #include &quot;OSCommandTypeInfo.h&quot;
-#include &quot;OSFileTypeInfo.h&quot;
+
 #include &quot;OSObjectManager.h&quot;
 #include &quot;OSUtils.h&quot;
 

Modified: branches/mloskot-style-refactoring/src/OSMimeType.cpp
===================================================================
--- branches/mloskot-style-refactoring/src/OSMimeType.cpp	2005-11-11 17:37:17 UTC (rev 225)
+++ branches/mloskot-style-refactoring/src/OSMimeType.cpp	2005-11-11 17:38:14 UTC (rev 226)
@@ -25,7 +25,7 @@
 //
 /////////////////////////////////////////////////////////////////////////////
 
-#include &quot;OSOSMimeType.h&quot;
+#include &quot;OSMimeType.h&quot;
 #include &quot;OSUtils.h&quot;
 
 #include &lt;string&gt;
@@ -36,6 +36,8 @@
 #include &lt;algorithm&gt;
 #include &lt;cctype&gt;
 
+using namespace std;
+
 bool OSMimeType::isInitialized = false;
 std::map&lt;std::string, std::string&gt; OSMimeType::mimeMap;
 std::map&lt;std::string, std::string&gt; OSMimeType::mimeCache;

Modified: branches/mloskot-style-refactoring/src/OSPathType.cpp
===================================================================
--- branches/mloskot-style-refactoring/src/OSPathType.cpp	2005-11-11 17:37:17 UTC (rev 225)
+++ branches/mloskot-style-refactoring/src/OSPathType.cpp	2005-11-11 17:38:14 UTC (rev 226)
@@ -28,6 +28,8 @@
 #include &quot;OSPathType.h&quot;
 #include &lt;string&gt;
 
+using namespace std;
+
 OSPathType::OSPathType( string dir, string type, string server, string user, string password, string port ) : dir ( dir ), type ( type ), server ( server ), user ( user ), password ( password ), port ( port )
 {
     // construction

Modified: branches/mloskot-style-refactoring/src/OSPreferences.cpp
===================================================================
--- branches/mloskot-style-refactoring/src/OSPreferences.cpp	2005-11-11 17:37:17 UTC (rev 225)
+++ branches/mloskot-style-refactoring/src/OSPreferences.cpp	2005-11-11 17:38:14 UTC (rev 226)
@@ -40,7 +40,7 @@
 #include &lt;sstream&gt;
 #include &quot;config.h&quot;
 
-FXDEFMAP ( OSPreferences ) preferencesMap[] =
+FXDEFMAP ( OSPreferences ) OSPreferencesMap[] =
     {
         //________Message_Type_____________________ID____________Message_Handler_______
         //FXMAPFUNC (SEL_COMMAND, OSPreferences::ID_SAVE, OSPreferences::onSave),
@@ -74,7 +74,7 @@
     };
 
 
-FXIMPLEMENT ( OSPreferences, FXDialogBox, preferencesMap, ARRAYNUMBER ( preferencesMap ) )
+FXIMPLEMENT ( OSPreferences, FXDialogBox, OSPreferencesMap, ARRAYNUMBER ( OSPreferencesMap ) )
 
 long OSPreferences::onUpDownCommand( FXObject * sender, FXSelector sel, void * )
 {
@@ -93,7 +93,7 @@
             additionalCommands-&gt;moveItem( additionalCommands-&gt;getCurrentItem() + 1, additionalCommands-&gt;getCurrentItem() );
     }
 
-    filetype_container *ct_prev = &amp;filetypesMap[ currentFileType ];
+    OSFileTypeInfo *ct_prev = &amp;filetypesMap[ currentFileType ];
     ct_prev-&gt;commands.clear();
 
     for ( int i = 0; i &lt; additionalCommands-&gt;getNumItems (); i++ )
@@ -228,7 +228,7 @@
 OSPreferences::OSPreferences ( FXWindow * owner ) : FXDialogBox ( owner, &quot;Preferences&quot;, DECOR_ALL, 0, 0, 0, 0, 0, 0, 0, 0, 4, 4 )
 {
 
-    objmanager = objectmanager::instance( getApp() );
+    objmanager = OSObjectManager::instance( getApp() );
     getApp() -&gt;getNormalFont() -&gt;create();
     FXFontDesc fontdescription;
     getApp() -&gt;getNormalFont() -&gt;getFontDesc( fontdescription );
@@ -460,7 +460,7 @@
             toolbarList-&gt;appendItem( commandstr.c_str() );
             buttonsList-&gt;clearItems();
 
-            configure conflocal = *conf;
+            OSConfigure conflocal = *conf;
 
             if ( conflocal.openxpath( &quot;/OpenspaceConfig/toolbars/&quot; + commandstr + &quot;/command&quot; ) != -1 )
             {
@@ -530,7 +530,7 @@
             shutterList-&gt;appendItem( commandstr.c_str() );
             shutterCommands-&gt;clearItems();
 
-            configure conflocal = *conf;
+            OSConfigure conflocal = *conf;
 
             if ( conflocal.openxpath( &quot;/OpenspaceConfig/shutter/&quot; + commandstr + &quot;/command&quot; ) != -1 )
             {
@@ -674,16 +674,16 @@
 
 
 
-        command_container * ctlast;
+        OSCommandTypeInfo * ctlast;
         string res;
         while ( conf-&gt;getnextnode ( res ) )
         {
 
-            command_container ct;
+            OSCommandTypeInfo ct;
             ctlast = &ct;
             commandsCombo-&gt;appendItem( res.c_str (), objmanager-&gt;osicons[ &quot;execute&quot; ] );
             ct.name = res;
-            configure conflocal = *conf;
+            OSConfigure conflocal = *conf;
             ct.exec = conflocal.readonestring ( &quot;/OpenspaceConfig/commands/&quot; + res + &quot;/exec&quot; );
 
             string options = conflocal.readonestring ( &quot;/OpenspaceConfig/commands/&quot; + res + &quot;/options&quot; );
@@ -773,7 +773,7 @@
 
     if ( conf-&gt;openxpath ( &quot;/OpenspaceConfig/file_types&quot; ) != -1 )
     {
-        filetype_container * ctlast;
+        OSFileTypeInfo * ctlast;
         new FXLabel( filetypePane, &quot;File Type:&quot; );
         fileTypeList = new FXListBox ( filetypePane, this, ID_FILETYPE_CHANGE );
         fileTypeList-&gt;setNumVisible( 30 );
@@ -825,9 +825,9 @@
         allMime-&gt;setNumVisible( 30 );
         new FXButton ( filetypeGroup, &quot;Add&quot;, NULL, this, OSPreferences::ID_ADD_FILETYPE );
 
-        MimeType::__initialize();
+        OSMimeType::_initialize();
         map&lt;string, string&gt;::iterator iter0;
-        for ( iter0 = MimeType::mimeMap.begin();iter0 != MimeType::mimeMap.end();iter0++ )
+        for ( iter0 = OSMimeType::mimeMap.begin();iter0 != OSMimeType::mimeMap.end();iter0++ )
         {
             if ( allMime-&gt;findItem( xml2mime( iter0-&gt;second ).c_str() ) == -1 )
             {
@@ -843,7 +843,7 @@
         {
 
 
-            configure conflocal = *conf;
+            OSConfigure conflocal = *conf;
             if ( conflocal.openxpath ( &quot;/OpenspaceConfig/file_types/&quot; + res + &quot;/types&quot; ) != -1 )
             {
                 string res2;
@@ -851,7 +851,7 @@
                 {
 
 
-                    filetype_container ct;
+                    OSFileTypeInfo ct;
                     ct.load( res + &quot;/&quot; + res2 );
                     fileTypeList-&gt;appendItem( xml2mime( ct.name ).c_str (), objmanager-&gt;osicons[ &quot;unknown&quot; ] );
 
@@ -861,7 +861,7 @@
                 }
 
             }
-            filetype_container ct;
+            OSFileTypeInfo ct;
             ct.load( res );
             ctlast = &ct;
             fileTypeList-&gt;appendItem( xml2mime( ct.name ) .c_str (), objmanager-&gt;osicons[ &quot;unknown&quot; ] );
@@ -1345,7 +1345,7 @@
 {
     string mime = allMime-&gt;getText().text();
 
-    filetype_container ct = filetypesMap[ mime ];
+    OSFileTypeInfo ct = filetypesMap[ mime ];
     if ( ct.name != &quot;&quot; )    // already exists
         return 0;
 
@@ -1367,19 +1367,19 @@
     this-&gt;onFileTypeChange( NULL, 0, NULL );
     this-&gt;onVfsChange( NULL, 0, NULL );
 
-    map &lt; string, command_container &gt;::iterator iter;
+    map &lt; string, OSCommandTypeInfo &gt;::iterator iter;
 
     for ( iter = commandsMap.begin (); iter != commandsMap.end (); iter++ )
     {
-        command_container ct = iter-&gt;second;
+        OSCommandTypeInfo ct = iter-&gt;second;
         ct.save();
     }
 
-    map &lt; string, filetype_container &gt;::iterator iter2;
+    map &lt; string, OSFileTypeInfo &gt;::iterator iter2;
 
     for ( iter2 = filetypesMap.begin (); iter2 != filetypesMap.end (); iter2++ )
     {
-        filetype_container ct = iter2-&gt;second;
+        OSFileTypeInfo ct = iter2-&gt;second;
         ct.save();
     }
 
@@ -1480,7 +1480,7 @@
 long OSPreferences::onCommandChange ( FXObject * sender, FXSelector sel, void * )
 {
 
-    command_container * ct_prev = &amp;commandsMap[ currentCommandName ];
+    OSCommandTypeInfo * ct_prev = &amp;commandsMap[ currentCommandName ];
     ct_prev-&gt;exec = commandsTextfield-&gt;getText().text();
     ct_prev-&gt;capture = commandsCapture-&gt;getCheck();
     ct_prev-&gt;rescan = commandsRescan-&gt;getCheck();
@@ -1489,7 +1489,7 @@
     ct_prev-&gt;key = shortcutList-&gt;getItem( shortcutList-&gt;getCurrentItem() ).text();
     ct_prev-&gt;key_mask = shortcutMaskList-&gt;getItem( shortcutMaskList-&gt;getCurrentItem() ).text();
 
-    command_container ct = commandsMap[ commandsCombo-&gt;getItem ( commandsCombo-&gt;getCurrentItem () ).text () ];
+    OSCommandTypeInfo ct = commandsMap[ commandsCombo-&gt;getItem ( commandsCombo-&gt;getCurrentItem () ).text () ];
 
     commandsRescan-&gt;setCheck( ct.rescan );
     commandsCapture-&gt;setCheck( ct.capture );
@@ -1532,7 +1532,7 @@
 long OSPreferences::onFileTypeChange ( FXObject * sender, FXSelector sel, void * )
 {
 
-    filetype_container * ct_prev = &amp;filetypesMap[ currentFileType ];
+    OSFileTypeInfo * ct_prev = &amp;filetypesMap[ currentFileType ];
     ct_prev-&gt;command = fileTypeDefaultBox-&gt;getItem( fileTypeDefaultBox-&gt;getCurrentItem() ).text();
 
     ct_prev-&gt;commands.clear();
@@ -1551,7 +1551,7 @@
     ct_prev-&gt;backcolor = buffer;
     ct_prev-&gt;icon = iconsList2-&gt;getItem( iconsList2-&gt;getCurrentItem() ).text();
 
-    filetype_container ct = filetypesMap[ mime2xml( fileTypeList-&gt;getItem ( fileTypeList-&gt;getCurrentItem () ).text () ) ];
+    OSFileTypeInfo ct = filetypesMap[ mime2xml( fileTypeList-&gt;getItem ( fileTypeList-&gt;getCurrentItem () ).text () ) ];
     fileTypeDefaultBox-&gt;setCurrentItem( fileTypeDefaultBox-&gt;findItem( ct.command.c_str() ) );
     additionalCommands-&gt;clearItems();
 
@@ -1670,7 +1670,7 @@
     if ( !validateName( command_name ) )
         return 0;
 
-    command_container ct = commandsMap[ command_name ];
+    OSCommandTypeInfo ct = commandsMap[ command_name ];
     if ( ct.name != &quot;&quot; )    // already exists
         return 0;
 
@@ -1708,7 +1708,7 @@
 long OSPreferences:: onAdditionalCommandChange( FXObject * sender, FXSelector sel, void * )
 {
     FXushort id = FXSELID( sel );
-    filetype_container *ct_prev = &amp;filetypesMap[ currentFileType ];
+    OSFileTypeInfo *ct_prev = &amp;filetypesMap[ currentFileType ];
     if ( id == ID_ADD_COMMAND_ADDITIONAL )
     {
         ct_prev-&gt;commands.push_back( additionalCommandsAvailable-&gt;getItemText( additionalCommandsAvailable-&gt;getCurrentItem() ).text() );
@@ -1735,7 +1735,7 @@
 {
     if ( mimeapp == NULL )
     {
-        mimeapp = new MimeApp( this );
+        mimeapp = new OSMimeApp( this );
 
 
         FXushort id = FXSELID( sel );
@@ -2070,7 +2070,7 @@
                     system( cmd.c_str() );
 
 
-                    command_container ct = commandsMap[ name ];
+                    OSCommandTypeInfo ct = commandsMap[ name ];
                     if ( ct.name != &quot;&quot; )    // already exists
                         return 0;
 
@@ -2104,18 +2104,18 @@
                         if ( dllhandle )
                         {
 
-                            filelist_base * ( *gg ) ( void );
-                            gg = ( filelist_base * ( * ) ( void ) ) fxdllSymbol ( dllhandle, &quot;get_filelist&quot; );
-                            filelist_base *fb = gg ();
+                            OSVirtualFileSystemBase * ( *gg ) ( void );
+                            gg = ( OSVirtualFileSystemBase * ( * ) ( void ) ) fxdllSymbol ( dllhandle, &quot;get_filelist&quot; );
+                            OSVirtualFileSystemBase *fb = gg ();
 
-                            vfs v = fb-&gt;setup();
+                            OSVirtualFileSystemInfo v = fb-&gt;setup();
 
                             conf-&gt;removestring ( &quot;/OpenspaceConfig/filelist/&quot; + name );
                             conf-&gt;addstring( &quot;/OpenspaceConfig/filelist&quot;, name, &quot;&quot; );
                             conf-&gt;addstring( &quot;/OpenspaceConfig/filelist/&quot; + name, &quot;type&quot;, v.type );
                             conf-&gt;addstring( &quot;/OpenspaceConfig/filelist/&quot; + name, &quot;properties&quot;, &quot;&quot; );
 
-                            vector &lt;vfsheader_container&gt;::iterator iter;
+                            vector &lt;OSVirtualFileSystemHeader&gt;::iterator iter;
 
                             for ( iter = v.vfsheaders.begin();iter != v.vfsheaders.end();iter++ )
                             {

Modified: branches/mloskot-style-refactoring/src/OSPreferences.h
===================================================================
--- branches/mloskot-style-refactoring/src/OSPreferences.h	2005-11-11 17:37:17 UTC (rev 225)
+++ branches/mloskot-style-refactoring/src/OSPreferences.h	2005-11-11 17:38:14 UTC (rev 226)
@@ -38,23 +38,22 @@
 #include &lt;string&gt;
 #include &lt;map&gt;
 
-class OSCommandTypeInfo;
 
 class shutter_container
 {
 public:
     std::string shutter;
     std::string command;
-    shutter_container( std::string s, std::string c ) : shutter( s ), command( c ) {}}
-;
+    shutter_container( std::string s, std::string c ) : shutter( s ), command( c ) {}
+};
 
 class toolbar_container
 {
 public:
     std::string toolbar;
     std::string command;
-    toolbar_container( std::string s, std::string c ) : toolbar( s ), command( c ) {}}
-;
+    toolbar_container( std::string s, std::string c ) : toolbar( s ), command( c ) {}
+};
 
 //OSPreferences window, this is one of the most important things to be extended
 /**
@@ -68,11 +67,8 @@
 
 private:
 
-    /**
-     * Default constructor.
-     */
-    OSPreferences( void );
    
+   
 
     std::string actualvfs;
 
@@ -277,6 +273,11 @@
     };
 
     /**
+     * Default constructor.
+     */
+    OSPreferences( void ){}
+
+    /**
      * Constructor.
      * @param owner - pointer to parent window.
      */

Modified: branches/mloskot-style-refactoring/src/OSShutter.cpp
===================================================================
--- branches/mloskot-style-refactoring/src/OSShutter.cpp	2005-11-11 17:37:17 UTC (rev 225)
+++ branches/mloskot-style-refactoring/src/OSShutter.cpp	2005-11-11 17:38:14 UTC (rev 226)
@@ -28,13 +28,13 @@
 #include &quot;OSShutter.h&quot;
 #include &lt;fx.h&gt;
 
-FXDEFMAP ( OSShutter ) shutterMap[] =
+FXDEFMAP ( OSShutter ) OSShutterMap[] =
 {
     FXMAPFUNC( SEL_MOUSEWHEEL, 0, OSShutter::onMouseWheel ),
     FXMAPFUNC( SEL_COMMAND, OSShutter::ID_OPEN_SHUTTERITEM, OSShutter::onOpenItem )
 };
 
-FXIMPLEMENT( OSShutter, FXShutter, shutterMap, ARRAYNUMBER ( shutterMap ) )
+FXIMPLEMENT( OSShutter, FXShutter, OSShutterMap, ARRAYNUMBER ( OSShutterMap ) )
         
 OSShutter::OSShutter( void )
 {

Modified: branches/mloskot-style-refactoring/src/OSShutter.h
===================================================================
--- branches/mloskot-style-refactoring/src/OSShutter.h	2005-11-11 17:37:17 UTC (rev 225)
+++ branches/mloskot-style-refactoring/src/OSShutter.h	2005-11-11 17:38:14 UTC (rev 226)
@@ -27,6 +27,8 @@
 #ifndef __OSSHUTTER_H__
 #define __OSSHUTTER_H__
 
+#include &lt;fx.h&gt;
+
 /**
  * Scroll view class.
  * This is used in OSFileList popup, this scrolling popup


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="000007.html">[Openspace-svn] r225 - in branches/mloskot-style-refactoring: . doc src templates
</A></li>
	<LI>Next message: <A HREF="000009.html">[Openspace-svn] r227 - in branches/mloskot-style-refactoring: . src
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#6">[ date ]</a>
              <a href="thread.html#6">[ thread ]</a>
              <a href="subject.html#6">[ subject ]</a>
              <a href="author.html#6">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/openspace-svn">More information about the Openspace-svn
mailing list</a><br>
</body></html>

<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Openspace-svn] r257 - in trunk: . icons icons/mini src
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/openspace-svn/2006-March/index.html" >
   <LINK REL="made" HREF="mailto:openspace-svn%40lists.berlios.de?Subject=Re%3A%20%5BOpenspace-svn%5D%20r257%20-%20in%20trunk%3A%20.%20icons%20icons/mini%20src&In-Reply-To=%3C200603061847.k26Il8w6009042%40sheep.berlios.de%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="000037.html">
   <LINK REL="Next"  HREF="000039.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Openspace-svn] r257 - in trunk: . icons icons/mini src</H1>
    <B>compbatant at BerliOS</B> 
    <A HREF="mailto:openspace-svn%40lists.berlios.de?Subject=Re%3A%20%5BOpenspace-svn%5D%20r257%20-%20in%20trunk%3A%20.%20icons%20icons/mini%20src&In-Reply-To=%3C200603061847.k26Il8w6009042%40sheep.berlios.de%3E"
       TITLE="[Openspace-svn] r257 - in trunk: . icons icons/mini src">compbatant at berlios.de
       </A><BR>
    <I>Mon Mar  6 19:47:08 CET 2006</I>
    <P><UL>
        <LI>Previous message: <A HREF="000037.html">[Openspace-svn] r256 - in trunk: . icons/default src
</A></li>
        <LI>Next message: <A HREF="000039.html">[Openspace-svn] r258 - in trunk: icons/default src
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#38">[ date ]</a>
              <a href="thread.html#38">[ thread ]</a>
              <a href="subject.html#38">[ subject ]</a>
              <a href="author.html#38">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Author: compbatant
Date: 2006-03-06 19:46:28 +0100 (Mon, 06 Mar 2006)
New Revision: 257

Added:
   trunk/icons/mini/
   trunk/icons/mini/Makefile.am
   trunk/icons/mini/close.png
   trunk/icons/mini/copy.png
   trunk/icons/mini/cut.png
   trunk/icons/mini/details.png
   trunk/icons/mini/directory.png
   trunk/icons/mini/dirup.png
   trunk/icons/mini/find.png
   trunk/icons/mini/home.png
   trunk/icons/mini/left.png
   trunk/icons/mini/min.png
   trunk/icons/mini/network.png
   trunk/icons/mini/paste.png
   trunk/icons/mini/pattern.png
   trunk/icons/mini/plus.png
   trunk/icons/mini/reload.png
   trunk/icons/mini/right.png
   trunk/icons/mini/run_shell.png
   trunk/icons/mini/smallicons.png
   trunk/icons/mini/unknown.png
Modified:
   trunk/aclocal.m4
   trunk/config.guess
   trunk/config.sub
   trunk/configure
   trunk/configure.ac
   trunk/icons/Makefile.am
   trunk/icons/Makefile.in
   trunk/ltmain.sh
   trunk/src/OSFileListItem.cpp
   trunk/src/OSMainWindow.cpp
   trunk/src/OSMainWindow.h
Log:
poczatek nowego themsa i jego obslugi


Modified: trunk/aclocal.m4
===================================================================
--- trunk/aclocal.m4	2006-03-06 17:48:57 UTC (rev 256)
+++ trunk/aclocal.m4	2006-03-06 18:46:28 UTC (rev 257)
@@ -13,7 +13,7 @@
 
 # libtool.m4 - Configure libtool for the host system. -*-Autoconf-*-
 
-# serial 47 AC_PROG_LIBTOOL
+# serial 48 AC_PROG_LIBTOOL
 
 
 # AC_PROVIDE_IFELSE(MACRO-NAME, IF-PROVIDED, IF-NOT-PROVIDED)
@@ -143,7 +143,7 @@
 default_ofile=libtool
 can_build_shared=yes
 
-# All known linkers require a `.a' archive for static linking (except M$VC,
+# All known linkers require a `.a' archive for static linking (except MSVC,
 # which needs '.lib').
 libext=a
 ltmain=&quot;$ac_aux_dir/ltmain.sh&quot;
@@ -163,6 +163,7 @@
 test -z &quot;$AS&quot; &amp;&amp; AS=as
 test -z &quot;$CC&quot; &amp;&amp; CC=cc
 test -z &quot;$LTCC&quot; &amp;&amp; LTCC=$CC
+test -z &quot;$LTCFLAGS&quot; &amp;&amp; LTCFLAGS=$CFLAGS
 test -z &quot;$DLLTOOL&quot; &amp;&amp; DLLTOOL=dlltool
 test -z &quot;$LD&quot; &amp;&amp; LD=ld
 test -z &quot;$LN_S&quot; &amp;&amp; LN_S=&quot;ln -s&quot;
@@ -182,10 +183,10 @@
 if test -n &quot;$RANLIB&quot;; then
   case $host_os in
   openbsd*)
-    old_postinstall_cmds=&quot;\$RANLIB -t \$oldlib~$old_postinstall_cmds&quot;
+    old_postinstall_cmds=&quot;$old_postinstall_cmds~\$RANLIB -t \$oldlib&quot;
     ;;
   *)
-    old_postinstall_cmds=&quot;\$RANLIB \$oldlib~$old_postinstall_cmds&quot;
+    old_postinstall_cmds=&quot;$old_postinstall_cmds~\$RANLIB \$oldlib&quot;
     ;;
   esac
   old_archive_cmds=&quot;$old_archive_cmds~\$RANLIB \$oldlib&quot;
@@ -237,31 +238,31 @@
 # -----------------
 AC_DEFUN([_LT_VERSION_CHECK],
 [AC_MSG_CHECKING([for correct ltmain.sh version])
-if test -z &quot;$ltmain&quot;; then
+if test &quot;x$ltmain&quot; = &quot;x&quot; ; then
   AC_MSG_RESULT(no)
-  echo
-  echo &quot;*** [Gentoo] sanity check failed! ***&quot;
-  echo &quot;*** \$ltmain is not defined, please check the patch for consistency! ***&quot;
-  echo
-  exit 1
+  AC_MSG_ERROR([
+
+*** @&lt;:@Gentoo@:&gt;@ sanity check failed! ***
+*** \$ltmain is not defined, please check the patch for consistency! ***
+])
 fi
-gentoo_lt_version=&quot;1.5.18&quot;
-gentoo_ltmain_version=`grep '^[[:space:]]*VERSION=' $ltmain | sed -e 's|^[[:space:]]*VERSION=||'`
-if test &quot;$gentoo_lt_version&quot; != &quot;$gentoo_ltmain_version&quot;; then
+gentoo_lt_version=&quot;1.5.22&quot;
+gentoo_ltmain_version=`sed -n '/^[[ 	]]*VERSION=/{s/^[[ 	]]*VERSION=//;p;q;}' &quot;$ltmain&quot;`
+if test &quot;x$gentoo_lt_version&quot; != &quot;x$gentoo_ltmain_version&quot; ; then
   AC_MSG_RESULT(no)
-  echo
-  echo &quot;*** [Gentoo] sanity check failed! ***&quot;
-  echo &quot;*** libtool.m4 and ltmain.sh have a version mismatch! ***&quot;
-  echo &quot;*** (libtool.m4 = $gentoo_lt_version, ltmain.sh = $gentoo_ltmain_version) ***&quot;
-  echo
-  echo &quot;Please run:&quot;
-  echo
-  echo &quot;  libtoolize --copy --force&quot;
-  echo
-  echo &quot;if appropriate, please contact the maintainer of this&quot;
-  echo &quot;package (or your distribution) for help.&quot;
-  echo
-  exit 1
+  AC_MSG_ERROR([
+
+*** @&lt;:@Gentoo@:&gt;@ sanity check failed! ***
+*** libtool.m4 and ltmain.sh have a version mismatch! ***
+*** (libtool.m4 = $gentoo_lt_version, ltmain.sh = $gentoo_ltmain_version) ***
+
+Please run:
+
+  libtoolize --copy --force
+
+if appropriate, please contact the maintainer of this
+package (or your distribution) for help.
+])
 else
   AC_MSG_RESULT(yes)
 fi
@@ -276,6 +277,9 @@
 # If no C compiler was specified, use CC.
 LTCC=${LTCC-&quot;$CC&quot;}
 
+# If no C compiler flags were specified, use CFLAGS.
+LTCFLAGS=${LTCFLAGS-&quot;$CFLAGS&quot;}
+
 # Allow CC to be a program name with arguments.
 compiler=$CC
 ])# _LT_AC_SYS_COMPILER
@@ -304,7 +308,7 @@
 AC_DEFUN([_LT_COMPILER_BOILERPLATE],
 [ac_outfile=conftest.$ac_objext
 printf &quot;$lt_simple_compile_test_code&quot; &gt;conftest.$ac_ext
-eval &quot;$ac_compile&quot; 2&gt;&amp;1 &gt;/dev/null | $SED '/^$/d' &gt;conftest.err
+eval &quot;$ac_compile&quot; 2&gt;&amp;1 &gt;/dev/null | $SED '/^$/d; /^ *+/d' &gt;conftest.err
 _lt_compiler_boilerplate=`cat conftest.err`
 $rm conftest*
 ])# _LT_COMPILER_BOILERPLATE
@@ -317,7 +321,7 @@
 AC_DEFUN([_LT_LINKER_BOILERPLATE],
 [ac_outfile=conftest.$ac_objext
 printf &quot;$lt_simple_link_test_code&quot; &gt;conftest.$ac_ext
-eval &quot;$ac_link&quot; 2&gt;&amp;1 &gt;/dev/null | $SED '/^$/d' &gt;conftest.err
+eval &quot;$ac_link&quot; 2&gt;&amp;1 &gt;/dev/null | $SED '/^$/d; /^ *+/d' &gt;conftest.err
 _lt_linker_boilerplate=`cat conftest.err`
 $rm conftest*
 ])# _LT_LINKER_BOILERPLATE
@@ -402,8 +406,8 @@
 # find a string as large as possible, as long as the shell can cope with it
   for cmd in 'sed 50q &quot;[$]0&quot;' 'sed 20q &quot;[$]0&quot;' 'sed 10q &quot;[$]0&quot;' 'sed 2q &quot;[$]0&quot;' 'echo test'; do
     # expected sizes: less than 2Kb, 1Kb, 512 bytes, 16 bytes, ...
-    if (echo_test_string=&quot;`eval $cmd`&quot;) 2&gt;/dev/null &amp;&amp;
-       echo_test_string=&quot;`eval $cmd`&quot; &amp;&amp;
+    if (echo_test_string=`eval $cmd`) 2&gt;/dev/null &amp;&amp;
+       echo_test_string=`eval $cmd` &amp;&amp;
        (test &quot;X$echo_test_string&quot; = &quot;X$echo_test_string&quot;) 2&gt;/dev/null
     then
       break
@@ -572,7 +576,7 @@
   # Find out which ABI we are using.
   echo 'int i;' &gt; conftest.$ac_ext
   if AC_TRY_EVAL(ac_compile); then
-    case &quot;`/usr/bin/file conftest.o`&quot; in
+    case `/usr/bin/file conftest.o` in
     *32-bit*)
       case $host in
         x86_64-*linux*)
@@ -610,20 +614,6 @@
   rm -rf conftest*
   ;;
 
-*-*-linux*)
-  # Test if the compiler is 64bit
-  echo 'int i;' &gt; conftest.$ac_ext
-  lt_cv_cc_64bit_output=no
-  if AC_TRY_EVAL(ac_compile); then
-    case `/usr/bin/file conftest.$ac_objext` in
-    *&quot;ELF 64&quot;*)
-      lt_cv_cc_64bit_output=yes
-      ;;
-    esac
-  fi
-  rm -rf conftest*
-  ;;
-  
 *-*-sco3.2v5*)
   # On SCO OpenServer 5, we need -belf to get full-featured binaries.
   SAVE_CFLAGS=&quot;$CFLAGS&quot;
@@ -637,6 +627,22 @@
     CFLAGS=&quot;$SAVE_CFLAGS&quot;
   fi
   ;;
+sparc*-*solaris*)
+  # Find out which ABI we are using.
+  echo 'int i;' &gt; conftest.$ac_ext
+  if AC_TRY_EVAL(ac_compile); then
+    case `/usr/bin/file conftest.o` in
+    *64-bit*)
+      case $lt_cv_prog_gnu_ld in
+      yes*) LD=&quot;${LD-ld} -m elf64_sparc&quot; ;;
+      *)    LD=&quot;${LD-ld} -64&quot; ;;
+      esac
+      ;;
+    esac
+  fi
+  rm -rf conftest*
+  ;;
+
 AC_PROVIDE_IFELSE([AC_LIBTOOL_WIN32_DLL],
 [*-*-cygwin* | *-*-mingw* | *-*-pw32*)
   AC_CHECK_TOOL(DLLTOOL, dlltool, false)
@@ -668,7 +674,7 @@
    # with a dollar sign (not a hyphen), so the echo should work correctly.
    # The option is referenced via a variable to avoid confusing sed.
    lt_compile=`echo &quot;$ac_compile&quot; | $SED \
-   -e 's:.*FLAGS}? :&amp;$lt_compiler_flag :; t' \
+   -e 's:.*FLAGS}\{0,1\} :&amp;$lt_compiler_flag :; t' \
    -e 's: [[^ ]]*conftest\.: $lt_compiler_flag&amp;:; t' \
    -e 's:$: $lt_compiler_flag:'`
    (eval echo &quot;\&quot;\$as_me:__oline__: $lt_compile\&quot;&quot; &gt;&amp;AS_MESSAGE_LOG_FD)
@@ -679,9 +685,9 @@
    if (exit $ac_status) &amp;&amp; test -s &quot;$ac_outfile&quot;; then
      # The compiler can only warn and ignore the option if not recognized
      # So say no if there are warnings other than the usual output.
-     $echo &quot;X$_lt_compiler_boilerplate&quot; | $Xsed &gt;conftest.exp
-     $SED '/^$/d' conftest.err &gt;conftest.er2
-     if test ! -s conftest.err || diff conftest.exp conftest.er2 &gt;/dev/null; then
+     $echo &quot;X$_lt_compiler_boilerplate&quot; | $Xsed -e '/^$/d' &gt;conftest.exp
+     $SED '/^$/d; /^ *+/d' conftest.err &gt;conftest.er2
+     if test ! -s conftest.er2 || diff conftest.exp conftest.er2 &gt;/dev/null; then
        $2=yes
      fi
    fi
@@ -707,13 +713,13 @@
    LDFLAGS=&quot;$LDFLAGS $3&quot;
    printf &quot;$lt_simple_link_test_code&quot; &gt; conftest.$ac_ext
    if (eval $ac_link 2&gt;conftest.err) &amp;&amp; test -s conftest$ac_exeext; then
-     # The compiler can only warn and ignore the option if not recognized
+     # The linker can only warn and ignore the option if not recognized
      # So say no if there are warnings
      if test -s conftest.err; then
        # Append any errors to the config.log.
        cat conftest.err 1&gt;&amp;AS_MESSAGE_LOG_FD
-       $echo &quot;X$_lt_linker_boilerplate&quot; | $Xsed &gt; conftest.exp
-       $SED '/^$/d' conftest.err &gt;conftest.er2
+       $echo &quot;X$_lt_linker_boilerplate&quot; | $Xsed -e '/^$/d' &gt; conftest.exp
+       $SED '/^$/d; /^ *+/d' conftest.err &gt;conftest.er2
        if diff conftest.exp conftest.er2 &gt;/dev/null; then
          $2=yes
        fi
@@ -782,25 +788,42 @@
     elif test -x /usr/sbin/sysctl; then
       lt_cv_sys_max_cmd_len=`/usr/sbin/sysctl -n kern.argmax`
     else
-      lt_cv_sys_max_cmd_len=65536 # usable default for *BSD
+      lt_cv_sys_max_cmd_len=65536	# usable default for all BSDs
     fi
     # And add a safety zone
     lt_cv_sys_max_cmd_len=`expr $lt_cv_sys_max_cmd_len \/ 4`
     lt_cv_sys_max_cmd_len=`expr $lt_cv_sys_max_cmd_len \* 3`
     ;;
+
+  interix*)
+    # We know the value 262144 and hardcode it with a safety zone (like BSD)
+    lt_cv_sys_max_cmd_len=196608
+    ;;
+
   osf*)
     # Dr. Hans Ekkehard Plesser reports seeing a kernel panic running configure
     # due to this test when exec_disable_arg_limit is 1 on Tru64. It is not
     # nice to cause kernel panics so lets avoid the loop below.
     # First set a reasonable default.
     lt_cv_sys_max_cmd_len=16384
-    # 
+    #
     if test -x /sbin/sysconfig; then
       case `/sbin/sysconfig -q proc exec_disable_arg_limit` in
         *1*) lt_cv_sys_max_cmd_len=-1 ;;
       esac
     fi
     ;;
+  sco3.2v5*)
+    lt_cv_sys_max_cmd_len=102400
+    ;;
+  sysv5* | sco5v6* | sysv4.2uw2*)
+    kargmax=`grep ARG_MAX /etc/conf/cf.d/stune 2&gt;/dev/null`
+    if test -n &quot;$kargmax&quot;; then
+      lt_cv_sys_max_cmd_len=`echo $kargmax | sed 's/.*[[ 	]]//'`
+    else
+      lt_cv_sys_max_cmd_len=32768
+    fi
+    ;;
   *)
     # If test is not a shell built-in, we'll probably end up computing a
     # maximum length that is only half of the actual maximum length, but
@@ -832,7 +855,7 @@
 
 
 # _LT_AC_CHECK_DLFCN
-# --------------------
+# ------------------
 AC_DEFUN([_LT_AC_CHECK_DLFCN],
 [AC_CHECK_HEADERS(dlfcn.h)dnl
 ])# _LT_AC_CHECK_DLFCN
@@ -840,7 +863,7 @@
 
 # _LT_AC_TRY_DLOPEN_SELF (ACTION-IF-TRUE, ACTION-IF-TRUE-W-USCORE,
 #                           ACTION-IF-FALSE, ACTION-IF-CROSS-COMPILING)
-# ------------------------------------------------------------------
+# ---------------------------------------------------------------------
 AC_DEFUN([_LT_AC_TRY_DLOPEN_SELF],
 [AC_REQUIRE([_LT_AC_CHECK_DLFCN])dnl
 if test &quot;$cross_compiling&quot; = yes; then :
@@ -906,17 +929,19 @@
       else if (dlsym( self,&quot;_fnord&quot;)) status = $lt_dlneed_uscore;
       /* dlclose (self); */
     }
+  else
+    puts (dlerror ());
 
     exit (status);
 }]
 EOF
   if AC_TRY_EVAL(ac_link) &amp;&amp; test -s conftest${ac_exeext} 2&gt;/dev/null; then
-    (./conftest; exit; ) 2&gt;/dev/null
+    (./conftest; exit; ) &gt;&amp;AS_MESSAGE_LOG_FD 2&gt;/dev/null
     lt_status=$?
     case x$lt_status in
       x$lt_dlno_uscore) $1 ;;
       x$lt_dlneed_uscore) $2 ;;
-      x$lt_unknown|x*) $3 ;;
+      x$lt_dlunknown|x*) $3 ;;
     esac
   else :
     # compilation failed
@@ -928,7 +953,7 @@
 
 
 # AC_LIBTOOL_DLOPEN_SELF
-# -------------------
+# ----------------------
 AC_DEFUN([AC_LIBTOOL_DLOPEN_SELF],
 [AC_REQUIRE([_LT_AC_CHECK_DLFCN])dnl
 if test &quot;x$enable_dlopen&quot; != xyes; then
@@ -999,7 +1024,7 @@
     test &quot;x$ac_cv_header_dlfcn_h&quot; = xyes &amp;&amp; CPPFLAGS=&quot;$CPPFLAGS -DHAVE_DLFCN_H&quot;
 
     save_LDFLAGS=&quot;$LDFLAGS&quot;
-    eval LDFLAGS=\&quot;\$LDFLAGS $export_dynamic_flag_spec\&quot;
+    wl=$lt_prog_compiler_wl eval LDFLAGS=\&quot;\$LDFLAGS $export_dynamic_flag_spec\&quot;
 
     save_LIBS=&quot;$LIBS&quot;
     LIBS=&quot;$lt_cv_dlopen_libs $LIBS&quot;
@@ -1012,7 +1037,7 @@
     ])
 
     if test &quot;x$lt_cv_dlopen_self&quot; = xyes; then
-      LDFLAGS=&quot;$LDFLAGS $link_static_flag&quot;
+      wl=$lt_prog_compiler_wl eval LDFLAGS=\&quot;\$LDFLAGS $lt_prog_compiler_static\&quot;
       AC_CACHE_CHECK([whether a statically linked program can dlopen itself],
     	  lt_cv_dlopen_self_static, [dnl
 	  _LT_AC_TRY_DLOPEN_SELF(
@@ -1060,7 +1085,7 @@
    # Note that $ac_compile itself does not contain backslashes and begins
    # with a dollar sign (not a hyphen), so the echo should work correctly.
    lt_compile=`echo &quot;$ac_compile&quot; | $SED \
-   -e 's:.*FLAGS}? :&amp;$lt_compiler_flag :; t' \
+   -e 's:.*FLAGS}\{0,1\} :&amp;$lt_compiler_flag :; t' \
    -e 's: [[^ ]]*conftest\.: $lt_compiler_flag&amp;:; t' \
    -e 's:$: $lt_compiler_flag:'`
    (eval echo &quot;\&quot;\$as_me:__oline__: $lt_compile\&quot;&quot; &gt;&amp;AS_MESSAGE_LOG_FD)
@@ -1072,13 +1097,13 @@
    then
      # The compiler can only warn and ignore the option if not recognized
      # So say no if there are warnings
-     $echo &quot;X$_lt_compiler_boilerplate&quot; | $Xsed &gt; out/conftest.exp
-     $SED '/^$/d' out/conftest.err &gt;out/conftest.er2
-     if test ! -s out/conftest.err || diff out/conftest.exp out/conftest.er2 &gt;/dev/null; then
+     $echo &quot;X$_lt_compiler_boilerplate&quot; | $Xsed -e '/^$/d' &gt; out/conftest.exp
+     $SED '/^$/d; /^ *+/d' out/conftest.err &gt;out/conftest.er2
+     if test ! -s out/conftest.er2 || diff out/conftest.exp out/conftest.er2 &gt;/dev/null; then
        _LT_AC_TAGVAR(lt_cv_prog_compiler_c_o, $1)=yes
      fi
    fi
-   chmod u+w .
+   chmod u+w . 2&gt;&amp;AS_MESSAGE_LOG_FD
    $rm conftest*
    # SGI C++ compiler will create directory out/ii_files/ for
    # template instantiation
@@ -1338,7 +1363,8 @@
       dlpath=`$SHELL 2&gt;&amp;1 -c '\''. $dir/'\''\${base_file}'\''i;echo \$dlname'\''`~
       dldir=$destdir/`dirname \$dlpath`~
       test -d \$dldir || mkdir -p \$dldir~
-      $install_prog $dir/$dlname \$dldir/$dlname'
+      $install_prog $dir/$dlname \$dldir/$dlname~
+      chmod a+x \$dldir/$dlname'
     postuninstall_cmds='dldll=`$SHELL 2&gt;&amp;1 -c '\''. $file; echo \$dlname'\''`~
       dlpath=$dir/\$dldll~
        $rm \$dlpath'
@@ -1415,7 +1441,7 @@
   soname_spec='${libname}${release}${major}$shared_ext'
   shlibpath_overrides_runpath=yes
   shlibpath_var=DYLD_LIBRARY_PATH
-  shrext_cmds='$(test .$module = .yes &amp;&amp; echo .so || echo .dylib)'
+  shrext_cmds='`test .$module = .yes &amp;&amp; echo .so || echo .dylib`'
   # Apple's gcc prints 'gcc -print-search-dirs' doesn't operate the same.
   if test &quot;$GCC&quot; = yes; then
     sys_lib_search_path_spec=`$CC -print-search-dirs | tr &quot;\n&quot; &quot;$PATH_SEPARATOR&quot; | sed -e 's/libraries:/@libraries:/' | tr &quot;@&quot; &quot;\n&quot; | grep &quot;^libraries:&quot; | sed -e &quot;s/^<A HREF="libraries://">libraries://</A>&quot; -e &quot;s,=/,/,g&quot; -e &quot;s,$PATH_SEPARATOR, ,g&quot; -e &quot;s,.*,&amp; /lib /usr/lib /usr/local/lib,g&quot;`
@@ -1453,8 +1479,22 @@
 freebsd* | dragonfly*)
   # DragonFly does not have aout.  When/if they implement a new
   # versioning mechanism, adjust this.
-  objformat=`test -x /usr/bin/objformat &amp;&amp; /usr/bin/objformat || echo aout`
-  version_type=freebsd-$objformat
+  if test -x /usr/bin/objformat; then
+    objformat=`/usr/bin/objformat`
+  else
+    case $host_os in
+    freebsd[[123]]*) objformat=aout ;;
+    *) objformat=elf ;;
+    esac
+  fi
+  # Handle Gentoo/FreeBSD as it was Linux
+  case $host_vendor in
+    gentoo)
+      version_type=linux ;;
+    *)
+      version_type=freebsd-$objformat ;;
+  esac
+
   case $version_type in
     freebsd-elf*)
       library_names_spec='${libname}${release}${shared_ext}$versuffix ${libname}${release}${shared_ext} $libname${shared_ext}'
@@ -1465,6 +1505,12 @@
       library_names_spec='${libname}${release}${shared_ext}$versuffix $libname${shared_ext}$versuffix'
       need_version=yes
       ;;
+    linux)
+      library_names_spec='${libname}${release}${shared_ext}$versuffix ${libname}${release}${shared_ext}$major ${libname}${shared_ext}'
+      soname_spec='${libname}${release}${shared_ext}$major'
+      need_lib_prefix=no
+      need_version=no
+      ;;
   esac
   shlibpath_var=LD_LIBRARY_PATH
   case $host_os in
@@ -1475,10 +1521,15 @@
     shlibpath_overrides_runpath=yes
     hardcode_into_libs=yes
     ;;
-  *) # from 3.2 on
+  freebsd3.[[2-9]]* | freebsdelf3.[[2-9]]* | \
+  freebsd4.[[0-5]] | freebsdelf4.[[0-5]] | freebsd4.1.1 | freebsdelf4.1.1)
     shlibpath_overrides_runpath=no
     hardcode_into_libs=yes
     ;;
+  freebsd*) # from 4.6 on
+    shlibpath_overrides_runpath=yes
+    hardcode_into_libs=yes
+    ;;
   esac
   ;;
 
@@ -1498,7 +1549,7 @@
   version_type=sunos
   need_lib_prefix=no
   need_version=no
-  case &quot;$host_cpu&quot; in
+  case $host_cpu in
   ia64*)
     shrext_cmds='.so'
     hardcode_into_libs=yes
@@ -1538,6 +1589,18 @@
   postinstall_cmds='chmod 555 $lib'
   ;;
 
+interix3*)
+  version_type=linux
+  need_lib_prefix=no
+  need_version=no
+  library_names_spec='${libname}${release}${shared_ext}$versuffix ${libname}${release}${shared_ext}$major ${libname}${shared_ext}'
+  soname_spec='${libname}${release}${shared_ext}$major'
+  dynamic_linker='Interix 3.x ld.so.1 (PE, like ELF)'
+  shlibpath_var=LD_LIBRARY_PATH
+  shlibpath_overrides_runpath=no
+  hardcode_into_libs=yes
+  ;;
+
 irix5* | irix6* | nonstopux*)
   case $host_os in
     nonstopux*) version_type=nonstopux ;;
@@ -1601,13 +1664,6 @@
     sys_lib_dlsearch_path_spec=&quot;/lib /usr/lib $lt_ld_extra&quot;
   fi
 
-  case $host_cpu:$lt_cv_cc_64bit_output in
-  powerpc64:yes | s390x:yes | sparc64:yes | x86_64:yes)
-    sys_lib_dlsearch_path_spec=&quot;/lib64 /usr/lib64 /usr/X11R6/lib64&quot;
-    sys_lib_search_path_spec=&quot;/lib64 /usr/lib64 /usr/local/lib64 /usr/X11R6/lib64&quot;
-    ;;
-  esac
-
   # We used to test for /lib/ld.so.1 and disable shared libraries on
   # powerpc, because MkLinux only supported shared libraries with the
   # GNU dynamic linker.  Since this was broken with cross compilers,
@@ -1615,26 +1671,6 @@
   # people can always --disable-shared, the test was removed, and we
   # assume the GNU/Linux dynamic linker is in use.
   dynamic_linker='GNU/Linux ld.so'
-
-  # Find out which ABI we are using (multilib Linux x86_64 hack).
-  libsuff=
-  case &quot;$host_cpu&quot; in
-  x86_64*)
-    echo '[#]line __oline__ &quot;configure&quot;' &gt; conftest.$ac_ext
-    if AC_TRY_EVAL(ac_compile); then
-      case `/usr/bin/file conftest.$ac_objext` in
-      *64-bit*)
-        libsuff=64
-        ;;
-      esac
-    fi
-    rm -rf conftest*
-    ;;
-  *)
-    ;;
-  esac
-  sys_lib_dlsearch_path_spec=&quot;/lib${libsuff} /usr/lib${libsuff}&quot;
-  sys_lib_search_path_spec=&quot;/lib${libsuff} /usr/lib${libsuff} /usr/local/lib${libsuff}&quot;
   ;;
 
 knetbsd*-gnu)
@@ -1686,6 +1722,7 @@
 
 openbsd*)
   version_type=sunos
+  sys_lib_dlsearch_path_spec=&quot;/usr/lib&quot;
   need_lib_prefix=no
   # Some older versions of OpenBSD (3.3 at least) *do* need versioned libs.
   case $host_os in
@@ -1729,13 +1766,6 @@
   sys_lib_dlsearch_path_spec=&quot;$sys_lib_search_path_spec&quot;
   ;;
 
-sco3.2v5*)
-  version_type=osf
-  soname_spec='${libname}${release}${shared_ext}$major'
-  library_names_spec='${libname}${release}${shared_ext}$versuffix ${libname}${release}${shared_ext}$major $libname${shared_ext}'
-  shlibpath_var=LD_LIBRARY_PATH
-  ;;
-
 solaris*)
   version_type=linux
   need_lib_prefix=no
@@ -1761,7 +1791,7 @@
   need_version=yes
   ;;
 
-sysv4 | sysv4.2uw2* | sysv4.3* | sysv5*)
+sysv4 | sysv4.3*)
   version_type=linux
   library_names_spec='${libname}${release}${shared_ext}$versuffix ${libname}${release}${shared_ext}$major $libname${shared_ext}'
   soname_spec='${libname}${release}${shared_ext}$major'
@@ -1794,6 +1824,29 @@
   fi
   ;;
 
+sysv5* | sco3.2v5* | sco5v6* | unixware* | OpenUNIX* | sysv4*uw2*)
+  version_type=freebsd-elf
+  need_lib_prefix=no
+  need_version=no
+  library_names_spec='${libname}${release}${shared_ext}$versuffix ${libname}${release}${shared_ext} $libname${shared_ext}'
+  soname_spec='${libname}${release}${shared_ext}$major'
+  shlibpath_var=LD_LIBRARY_PATH
+  hardcode_into_libs=yes
+  if test &quot;$with_gnu_ld&quot; = yes; then
+    sys_lib_search_path_spec='/usr/local/lib /usr/gnu/lib /usr/ccs/lib /usr/lib /lib'
+    shlibpath_overrides_runpath=no
+  else
+    sys_lib_search_path_spec='/usr/ccs/lib /usr/lib'
+    shlibpath_overrides_runpath=yes
+    case $host_os in
+      sco3.2v5*)
+        sys_lib_search_path_spec=&quot;$sys_lib_search_path_spec /lib&quot;
+	;;
+    esac
+  fi
+  sys_lib_dlsearch_path_spec='/usr/lib'
+  ;;
+
 uts4*)
   version_type=linux
   library_names_spec='${libname}${release}${shared_ext}$versuffix ${libname}${release}${shared_ext}$major $libname${shared_ext}'
@@ -1807,6 +1860,11 @@
 esac
 AC_MSG_RESULT([$dynamic_linker])
 test &quot;$dynamic_linker&quot; = no &amp;&amp; can_build_shared=no
+
+variables_saved_for_relink=&quot;PATH $shlibpath_var $runpath_var&quot;
+if test &quot;$GCC&quot; = yes; then
+  variables_saved_for_relink=&quot;$variables_saved_for_relink GCC_EXEC_PREFIX COMPILER_PATH LIBRARY_PATH&quot;
+fi
 ])# AC_LIBTOOL_SYS_DYNAMIC_LINKER
 
 
@@ -1831,6 +1889,9 @@
       AC_MSG_WARN([using `LTCC=$LTCC', extracted from `$ofile'])
     fi
   fi
+  if test -z &quot;$LTCFLAGS&quot;; then
+    eval &quot;`$SHELL ${ofile} --config | grep '^LTCFLAGS='`&quot;
+  fi
 
   # Extract list of available tagged configurations in $ofile.
   # Note that this assumes the entire list is on one line.
@@ -1921,7 +1982,7 @@
 
 # AC_LIBTOOL_WIN32_DLL
 # --------------------
-# declare package support for building win32 dll's
+# declare package support for building win32 DLLs
 AC_DEFUN([AC_LIBTOOL_WIN32_DLL],
 [AC_BEFORE([$0], [AC_LIBTOOL_SETUP])
 ])# AC_LIBTOOL_WIN32_DLL
@@ -1959,7 +2020,7 @@
 
 # AC_DISABLE_SHARED
 # -----------------
-#- set the default shared flag to --disable-shared
+# set the default shared flag to --disable-shared
 AC_DEFUN([AC_DISABLE_SHARED],
 [AC_BEFORE([$0],[AC_LIBTOOL_SETUP])dnl
 AC_ENABLE_SHARED(no)
@@ -2095,7 +2156,7 @@
       if test -n &quot;$file_magic_test_file&quot;; then
 	case $deplibs_check_method in
 	&quot;file_magic &quot;*)
-	  file_magic_regex=&quot;`expr \&quot;$deplibs_check_method\&quot; : \&quot;file_magic \(.*\)\&quot;`&quot;
+	  file_magic_regex=`expr &quot;$deplibs_check_method&quot; : &quot;file_magic \(.*\)&quot;`
 	  MAGIC_CMD=&quot;$lt_cv_path_MAGIC_CMD&quot;
 	  if eval $file_magic_cmd \$file_magic_test_file 2&gt; /dev/null |
 	    $EGREP &quot;$file_magic_regex&quot; &gt; /dev/null; then
@@ -2205,7 +2266,7 @@
     if test -f &quot;$ac_dir/$ac_prog&quot; || test -f &quot;$ac_dir/$ac_prog$ac_exeext&quot;; then
       lt_cv_path_LD=&quot;$ac_dir/$ac_prog&quot;
       # Check to see if the program is GNU ld.  I'd rather use --version,
-      # but apparently some GNU ld's only accept -v.
+      # but apparently some variants of GNU ld only accept -v.
       # Break only if it was the GNU/non-GNU ld that we prefer.
       case `&quot;$lt_cv_path_LD&quot; -v 2&gt;&amp;1 &lt;/dev/null` in
       *GNU* | *'with BFD'*)
@@ -2237,7 +2298,7 @@
 AC_DEFUN([AC_PROG_LD_GNU],
 [AC_REQUIRE([AC_PROG_EGREP])dnl
 AC_CACHE_CHECK([if the linker ($LD) is GNU ld], lt_cv_prog_gnu_ld,
-[# I'd rather use --version here, but apparently some GNU ld's only accept -v.
+[# I'd rather use --version here, but apparently some GNU lds only accept -v.
 case `$LD -v 2&gt;&amp;1 &lt;/dev/null` in
 *GNU* | *'with BFD'*)
   lt_cv_prog_gnu_ld=yes
@@ -2267,7 +2328,7 @@
 case $host_os in
   darwin*)
     if test &quot;$GCC&quot; = yes; then
-      reload_cmds='$CC -nostdlib ${wl}-r -o $output$reload_objs'
+      reload_cmds='$LTCC $LTCFLAGS -nostdlib ${wl}-r -o $output$reload_objs'
     else
       reload_cmds='$LD$reload_flag -o $output$reload_objs'
     fi
@@ -2351,7 +2412,7 @@
 
 hpux10.20* | hpux11*)
   lt_cv_file_magic_cmd=/usr/bin/file
-  case &quot;$host_cpu&quot; in
+  case $host_cpu in
   ia64*)
     lt_cv_deplibs_check_method='file_magic (s[[0-9]][[0-9]][[0-9]]|ELF-[[0-9]][[0-9]]) shared object file - IA64'
     lt_cv_file_magic_test_file=/usr/lib/hpux32/libc.so
@@ -2367,6 +2428,11 @@
   esac
   ;;
 
+interix3*)
+  # PIC code is broken on Interix 3.x, that's why |\.a not |_pic\.a here
+  lt_cv_deplibs_check_method='match_pattern /lib[[^/]]+(\.so|\.a)$'
+  ;;
+
 irix5* | irix6* | nonstopux*)
   case $LD in
   *-32|*&quot;-32 &quot;) libmagic=32-bit;;
@@ -2412,15 +2478,11 @@
   lt_cv_deplibs_check_method=pass_all
   ;;
 
-sco3.2v5*)
-  lt_cv_deplibs_check_method=pass_all
-  ;;
-
 solaris*)
   lt_cv_deplibs_check_method=pass_all
   ;;
 
-sysv4 | sysv4.2uw2* | sysv4.3* | sysv5*)
+sysv4 | sysv4.3*)
   case $host_vendor in
   motorola)
     lt_cv_deplibs_check_method='file_magic ELF [[0-9]][[0-9]]*-bit [[ML]]SB (shared object|dynamic lib) M[[0-9]][[0-9]]* Version [[0-9]]'
@@ -2441,10 +2503,13 @@
   siemens)
     lt_cv_deplibs_check_method=pass_all
     ;;
+  pc)
+    lt_cv_deplibs_check_method=pass_all
+    ;;
   esac
   ;;
 
-sysv5OpenUNIX8* | sysv5UnixWare7* | sysv5uw[[78]]* | unixware7* | sysv4*uw2*)
+sysv5* | sco3.2v5* | sco5v6* | unixware* | OpenUNIX* | sysv4*uw2*)
   lt_cv_deplibs_check_method=pass_all
   ;;
 esac
@@ -2464,36 +2529,43 @@
   # Let the user override the test.
   lt_cv_path_NM=&quot;$NM&quot;
 else
-  lt_save_ifs=&quot;$IFS&quot;; IFS=$PATH_SEPARATOR
-  for ac_dir in $PATH /usr/ccs/bin /usr/ucb /bin; do
-    IFS=&quot;$lt_save_ifs&quot;
-    test -z &quot;$ac_dir&quot; &amp;&amp; ac_dir=.
-    tmp_nm=&quot;$ac_dir/${ac_tool_prefix}nm&quot;
-    if test -f &quot;$tmp_nm&quot; || test -f &quot;$tmp_nm$ac_exeext&quot; ; then
-      # Check to see if the nm accepts a BSD-compat flag.
-      # Adding the `sed 1q' prevents false positives on HP-UX, which says:
-      #   nm: unknown option &quot;B&quot; ignored
-      # Tru64's nm complains that /dev/null is an invalid object file
-      case `&quot;$tmp_nm&quot; -B /dev/null 2&gt;&amp;1 | sed '1q'` in
-      */dev/null* | *'Invalid file or object type'*)
-	lt_cv_path_NM=&quot;$tmp_nm -B&quot;
-	break
-        ;;
-      *)
-	case `&quot;$tmp_nm&quot; -p /dev/null 2&gt;&amp;1 | sed '1q'` in
-	*/dev/null*)
-	  lt_cv_path_NM=&quot;$tmp_nm -p&quot;
+  lt_nm_to_check=&quot;${ac_tool_prefix}nm&quot;
+  if test -n &quot;$ac_tool_prefix&quot; &amp;&amp; test &quot;$build&quot; = &quot;$host&quot;; then 
+    lt_nm_to_check=&quot;$lt_nm_to_check nm&quot;
+  fi
+  for lt_tmp_nm in $lt_nm_to_check; do
+    lt_save_ifs=&quot;$IFS&quot;; IFS=$PATH_SEPARATOR
+    for ac_dir in $PATH /usr/ccs/bin/elf /usr/ccs/bin /usr/ucb /bin; do
+      IFS=&quot;$lt_save_ifs&quot;
+      test -z &quot;$ac_dir&quot; &amp;&amp; ac_dir=.
+      tmp_nm=&quot;$ac_dir/$lt_tmp_nm&quot;
+      if test -f &quot;$tmp_nm&quot; || test -f &quot;$tmp_nm$ac_exeext&quot; ; then
+	# Check to see if the nm accepts a BSD-compat flag.
+	# Adding the `sed 1q' prevents false positives on HP-UX, which says:
+	#   nm: unknown option &quot;B&quot; ignored
+	# Tru64's nm complains that /dev/null is an invalid object file
+	case `&quot;$tmp_nm&quot; -B /dev/null 2&gt;&amp;1 | sed '1q'` in
+	*/dev/null* | *'Invalid file or object type'*)
+	  lt_cv_path_NM=&quot;$tmp_nm -B&quot;
 	  break
 	  ;;
 	*)
-	  lt_cv_path_NM=${lt_cv_path_NM=&quot;$tmp_nm&quot;} # keep the first match, but
-	  continue # so that we can try to find one that supports BSD flags
+	  case `&quot;$tmp_nm&quot; -p /dev/null 2&gt;&amp;1 | sed '1q'` in
+	  */dev/null*)
+	    lt_cv_path_NM=&quot;$tmp_nm -p&quot;
+	    break
+	    ;;
+	  *)
+	    lt_cv_path_NM=${lt_cv_path_NM=&quot;$tmp_nm&quot;} # keep the first match, but
+	    continue # so that we can try to find one that supports BSD flags
+	    ;;
+	  esac
 	  ;;
 	esac
-      esac
-    fi
+      fi
+    done
+    IFS=&quot;$lt_save_ifs&quot;
   done
-  IFS=&quot;$lt_save_ifs&quot;
   test -z &quot;$lt_cv_path_NM&quot; &amp;&amp; lt_cv_path_NM=nm
 fi])
 NM=&quot;$lt_cv_path_NM&quot;
@@ -2525,13 +2597,13 @@
 # -----------------------------------
 # sets LIBLTDL to the link flags for the libltdl convenience library and
 # LTDLINCL to the include flags for the libltdl header and adds
-# --enable-ltdl-convenience to the configure arguments.  Note that LIBLTDL
-# and LTDLINCL are not AC_SUBSTed, nor is AC_CONFIG_SUBDIRS called.  If
-# DIRECTORY is not provided, it is assumed to be `libltdl'.  LIBLTDL will
-# be prefixed with '${top_builddir}/' and LTDLINCL will be prefixed with
-# '${top_srcdir}/' (note the single quotes!).  If your package is not
-# flat and you're not using automake, define top_builddir and
-# top_srcdir appropriately in the Makefiles.
+# --enable-ltdl-convenience to the configure arguments.  Note that
+# AC_CONFIG_SUBDIRS is not called here.  If DIRECTORY is not provided,
+# it is assumed to be `libltdl'.  LIBLTDL will be prefixed with
+# '${top_builddir}/' and LTDLINCL will be prefixed with '${top_srcdir}/'
+# (note the single quotes!).  If your package is not flat and you're not
+# using automake, define top_builddir and top_srcdir appropriately in
+# the Makefiles.
 AC_DEFUN([AC_LIBLTDL_CONVENIENCE],
 [AC_BEFORE([$0],[AC_LIBTOOL_SETUP])dnl
   case $enable_ltdl_convenience in
@@ -2550,13 +2622,13 @@
 # -----------------------------------
 # sets LIBLTDL to the link flags for the libltdl installable library and
 # LTDLINCL to the include flags for the libltdl header and adds
-# --enable-ltdl-install to the configure arguments.  Note that LIBLTDL
-# and LTDLINCL are not AC_SUBSTed, nor is AC_CONFIG_SUBDIRS called.  If
-# DIRECTORY is not provided and an installed libltdl is not found, it is
-# assumed to be `libltdl'.  LIBLTDL will be prefixed with '${top_builddir}/'
-# and LTDLINCL will be prefixed with '${top_srcdir}/' (note the single
-# quotes!).  If your package is not flat and you're not using automake,
-# define top_builddir and top_srcdir appropriately in the Makefiles.
+# --enable-ltdl-install to the configure arguments.  Note that
+# AC_CONFIG_SUBDIRS is not called here.  If DIRECTORY is not provided,
+# and an installed libltdl is not found, it is assumed to be `libltdl'.
+# LIBLTDL will be prefixed with '${top_builddir}/'# and LTDLINCL with
+# '${top_srcdir}/' (note the single quotes!).  If your package is not
+# flat and you're not using automake, define top_builddir and top_srcdir
+# appropriately in the Makefiles.
 # In the future, this macro may have to be called after AC_PROG_LIBTOOL.
 AC_DEFUN([AC_LIBLTDL_INSTALLABLE],
 [AC_BEFORE([$0],[AC_LIBTOOL_SETUP])dnl
@@ -2599,7 +2671,7 @@
 ])# _LT_AC_LANG_CXX
 
 # _LT_AC_PROG_CXXCPP
-# ---------------
+# ------------------
 AC_DEFUN([_LT_AC_PROG_CXXCPP],
 [
 AC_REQUIRE([AC_PROG_CXX])
@@ -2648,7 +2720,7 @@
 
 
 # AC_LIBTOOL_RC
-# --------------
+# -------------
 # enable support for Windows resource files
 AC_DEFUN([AC_LIBTOOL_RC],
 [AC_REQUIRE([LT_AC_PROG_RC])
@@ -2685,37 +2757,6 @@
 _LT_COMPILER_BOILERPLATE
 _LT_LINKER_BOILERPLATE
 
-#
-# Check for any special shared library compilation flags.
-#
-_LT_AC_TAGVAR(lt_prog_cc_shlib, $1)=
-if test &quot;$GCC&quot; = no; then
-  case $host_os in
-  sco3.2v5*)
-    _LT_AC_TAGVAR(lt_prog_cc_shlib, $1)='-belf'
-    ;;
-  esac
-fi
-if test -n &quot;$_LT_AC_TAGVAR(lt_prog_cc_shlib, $1)&quot;; then
-  AC_MSG_WARN([`$CC' requires `$_LT_AC_TAGVAR(lt_prog_cc_shlib, $1)' to build shared libraries])
-  if echo &quot;$old_CC $old_CFLAGS &quot; | grep &quot;[[ 	]]$_LT_AC_TAGVAR(lt_prog_cc_shlib, $1)[[ 	]]&quot; &gt;/dev/null; then :
-  else
-    AC_MSG_WARN([add `$_LT_AC_TAGVAR(lt_prog_cc_shlib, $1)' to the CC or CFLAGS env variable and reconfigure])
-    _LT_AC_TAGVAR(lt_cv_prog_cc_can_build_shared, $1)=no
-  fi
-fi
-
-
-#
-# Check to make sure the static flag actually works.
-#
-AC_LIBTOOL_LINKER_OPTION([if $compiler static flag $_LT_AC_TAGVAR(lt_prog_compiler_static, $1) works],
-  _LT_AC_TAGVAR(lt_prog_compiler_static_works, $1),
-  $_LT_AC_TAGVAR(lt_prog_compiler_static, $1),
-  [],
-  [_LT_AC_TAGVAR(lt_prog_compiler_static, $1)=])
-
-
 AC_LIBTOOL_PROG_COMPILER_NO_RTTI($1)
 AC_LIBTOOL_PROG_COMPILER_PIC($1)
 AC_LIBTOOL_PROG_CC_C_O($1)
@@ -2724,9 +2765,9 @@
 AC_LIBTOOL_SYS_DYNAMIC_LINKER($1)
 AC_LIBTOOL_PROG_LD_HARDCODE_LIBPATH($1)
 AC_LIBTOOL_SYS_LIB_STRIP
-AC_LIBTOOL_DLOPEN_SELF($1)
+AC_LIBTOOL_DLOPEN_SELF
 
-# Report which librarie types wil actually be built
+# Report which library types will actually be built
 AC_MSG_CHECKING([if libtool supports shared libraries])
 AC_MSG_RESULT([$can_build_shared])
 
@@ -2735,7 +2776,7 @@
 
 # On AIX, shared libraries and static libraries use the same namespace, and
 # are all built from PIC.
-case &quot;$host_os&quot; in
+case $host_os in
 aix3*)
   test &quot;$enable_shared&quot; = yes &amp;&amp; enable_static=no
   if test -n &quot;$RANLIB&quot;; then
@@ -2785,6 +2826,7 @@
 _LT_AC_TAGVAR(hardcode_libdir_flag_spec_ld, $1)=
 _LT_AC_TAGVAR(hardcode_libdir_separator, $1)=
 _LT_AC_TAGVAR(hardcode_minus_L, $1)=no
+_LT_AC_TAGVAR(hardcode_shlibpath_var, $1)=unsupported
 _LT_AC_TAGVAR(hardcode_automatic, $1)=no
 _LT_AC_TAGVAR(module_cmds, $1)=
 _LT_AC_TAGVAR(module_expsym_cmds, $1)=
@@ -2802,7 +2844,7 @@
 _LT_AC_TAGVAR(compiler_lib_search_path, $1)=
 
 # Source file extension for C++ test sources.
-ac_ext=cc
+ac_ext=cpp
 
 # Object file extension for compiled C++ test sources.
 objext=o
@@ -2812,7 +2854,7 @@
 lt_simple_compile_test_code=&quot;int some_variable = 0;\n&quot;
 
 # Code to be used in simple link tests
-lt_simple_link_test_code='int main(int, char *[]) { return(0); }\n'
+lt_simple_link_test_code='int main(int, char *[[]]) { return(0); }\n'
 
 # ltmain only uses $CC for tagged configurations so make sure $CC is set.
 _LT_AC_SYS_COMPILER
@@ -2831,12 +2873,12 @@
 if test -n &quot;${lt_cv_prog_gnu_ldcxx+set}&quot;; then
   lt_cv_prog_gnu_ld=$lt_cv_prog_gnu_ldcxx
 else
-  unset lt_cv_prog_gnu_ld
+  $as_unset lt_cv_prog_gnu_ld
 fi
 if test -n &quot;${lt_cv_path_LDCXX+set}&quot;; then
   lt_cv_path_LD=$lt_cv_path_LDCXX
 else
-  unset lt_cv_path_LD
+  $as_unset lt_cv_path_LD
 fi
 test -z &quot;${LDCXX+set}&quot; || LD=$LDCXX
 CC=${CXX-&quot;c++&quot;}
@@ -2931,6 +2973,7 @@
 	    ;;
 	  esac
 	done
+	;;
       esac
 
       exp_sym_flag='-bexport'
@@ -2968,6 +3011,7 @@
 	  _LT_AC_TAGVAR(hardcode_libdir_flag_spec, $1)='-L$libdir'
 	  _LT_AC_TAGVAR(hardcode_libdir_separator, $1)=
 	fi
+	;;
       esac
       shared_flag='-shared'
       if test &quot;$aix_use_runtimelinking&quot; = yes; then
@@ -2999,12 +3043,12 @@
       _LT_AC_SYS_LIBPATH_AIX
       _LT_AC_TAGVAR(hardcode_libdir_flag_spec, $1)='${wl}-blibpath:$libdir:'&quot;$aix_libpath&quot;
 
-      _LT_AC_TAGVAR(archive_expsym_cmds, $1)=&quot;\$CC&quot;' -o $output_objdir/$soname $libobjs $deplibs $compiler_flags `if test &quot;x${allow_undefined_flag}&quot; != &quot;x&quot;; then echo &quot;${wl}${allow_undefined_flag}&quot;; else :; fi` '&quot;\${wl}$no_entry_flag \${wl}$exp_sym_flag:\$export_symbols $shared_flag&quot;
+      _LT_AC_TAGVAR(archive_expsym_cmds, $1)=&quot;\$CC&quot;' -o $output_objdir/$soname $libobjs $deplibs '&quot;\${wl}$no_entry_flag&quot;' $compiler_flags `if test &quot;x${allow_undefined_flag}&quot; != &quot;x&quot;; then echo &quot;${wl}${allow_undefined_flag}&quot;; else :; fi` '&quot;\${wl}$exp_sym_flag:\$export_symbols $shared_flag&quot;
      else
       if test &quot;$host_cpu&quot; = ia64; then
 	_LT_AC_TAGVAR(hardcode_libdir_flag_spec, $1)='${wl}-R $libdir:/usr/lib:/lib'
 	_LT_AC_TAGVAR(allow_undefined_flag, $1)=&quot;-z nodefs&quot;
-	_LT_AC_TAGVAR(archive_expsym_cmds, $1)=&quot;\$CC $shared_flag&quot;' -o $output_objdir/$soname $libobjs $deplibs $compiler_flags ${wl}${allow_undefined_flag} '&quot;\${wl}$no_entry_flag \${wl}$exp_sym_flag:\$export_symbols&quot;
+	_LT_AC_TAGVAR(archive_expsym_cmds, $1)=&quot;\$CC $shared_flag&quot;' -o $output_objdir/$soname $libobjs $deplibs '&quot;\${wl}$no_entry_flag&quot;' $compiler_flags ${wl}${allow_undefined_flag} '&quot;\${wl}$exp_sym_flag:\$export_symbols&quot;
       else
 	# Determine the default libpath from the value encoded in an empty executable.
 	_LT_AC_SYS_LIBPATH_AIX
@@ -3013,16 +3057,26 @@
 	# -berok will link without error, but may produce a broken library.
 	_LT_AC_TAGVAR(no_undefined_flag, $1)=' ${wl}-bernotok'
 	_LT_AC_TAGVAR(allow_undefined_flag, $1)=' ${wl}-berok'
-	# -bexpall does not export symbols beginning with underscore (_)
-	_LT_AC_TAGVAR(always_export_symbols, $1)=yes
 	# Exported symbols can be pulled into shared objects from archives
-	_LT_AC_TAGVAR(whole_archive_flag_spec, $1)=' '
+	_LT_AC_TAGVAR(whole_archive_flag_spec, $1)='$convenience'
 	_LT_AC_TAGVAR(archive_cmds_need_lc, $1)=yes
-	# This is similar to how AIX traditionally builds it's shared libraries.
-	_LT_AC_TAGVAR(archive_expsym_cmds, $1)=&quot;\$CC $shared_flag&quot;' -o $output_objdir/$soname $libobjs $deplibs $compiler_flags ${wl}-bE:$export_symbols ${wl}-bnoentry${allow_undefined_flag}~$AR $AR_FLAGS $output_objdir/$libname$release.a $output_objdir/$soname'
+	# This is similar to how AIX traditionally builds its shared libraries.
+	_LT_AC_TAGVAR(archive_expsym_cmds, $1)=&quot;\$CC $shared_flag&quot;' -o $output_objdir/$soname $libobjs $deplibs ${wl}-bnoentry $compiler_flags ${wl}-bE:$export_symbols${allow_undefined_flag}~$AR $AR_FLAGS $output_objdir/$libname$release.a $output_objdir/$soname'
       fi
     fi
     ;;
+
+  beos*)
+    if $LD --help 2&gt;&amp;1 | grep ': supported targets:.* elf' &gt; /dev/null; then
+      _LT_AC_TAGVAR(allow_undefined_flag, $1)=unsupported
+      # Joseph Beckenbach &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/openspace-svn">jrb3 at best.com</A>&gt; says some releases of gcc
+      # support --undefined.  This deserves some investigation.  FIXME
+      _LT_AC_TAGVAR(archive_cmds, $1)='$CC -nostart $libobjs $deplibs $compiler_flags ${wl}-soname $wl$soname -o $lib'
+    else
+      _LT_AC_TAGVAR(ld_shlibs, $1)=no
+    fi
+    ;;
+
   chorus*)
     case $cc_basename in
       *)
@@ -3032,7 +3086,6 @@
     esac
     ;;
 
-
   cygwin* | mingw* | pw32*)
     # _LT_AC_TAGVAR(hardcode_libdir_flag_spec, $1) is actually meaningless,
     # as there is no search path for DLLs.
@@ -3042,7 +3095,7 @@
     _LT_AC_TAGVAR(enable_shared_with_static_runtimes, $1)=yes
 
     if $LD --help 2&gt;&amp;1 | grep 'auto-import' &gt; /dev/null; then
-      _LT_AC_TAGVAR(archive_cmds, $1)='$CC -shared -nostdlib $predep_objects $libobjs $deplibs $postdep_objects $compiler_flags -o $output_objdir/$soname ${wl}--image-base=0x10000000 ${wl}--out-implib,$lib'
+      _LT_AC_TAGVAR(archive_cmds, $1)='$CC -shared -nostdlib $predep_objects $libobjs $deplibs $postdep_objects $compiler_flags -o $output_objdir/$soname ${wl}--enable-auto-image-base -Xlinker --out-implib -Xlinker $lib'
       # If the export-symbols file already is a .def file (1st line
       # is EXPORTS), use it as is; otherwise, prepend...
       _LT_AC_TAGVAR(archive_expsym_cmds, $1)='if test &quot;x`$SED 1q $export_symbols`&quot; = xEXPORTS; then
@@ -3051,13 +3104,13 @@
 	echo EXPORTS &gt; $output_objdir/$soname.def;
 	cat $export_symbols &gt;&gt; $output_objdir/$soname.def;
       fi~
-      $CC -shared -nostdlib $output_objdir/$soname.def $predep_objects $libobjs $deplibs $postdep_objects $compiler_flags -o $output_objdir/$soname ${wl}--image-base=0x10000000 ${wl}--out-implib,$lib'
+      $CC -shared -nostdlib $output_objdir/$soname.def $predep_objects $libobjs $deplibs $postdep_objects $compiler_flags -o $output_objdir/$soname ${wl}--enable-auto-image-base -Xlinker --out-implib -Xlinker $lib'
     else
       _LT_AC_TAGVAR(ld_shlibs, $1)=no
     fi
   ;;
       darwin* | rhapsody*)
-        case &quot;$host_os&quot; in
+        case $host_os in
         rhapsody* | darwin1.[[012]])
          _LT_AC_TAGVAR(allow_undefined_flag, $1)='${wl}-undefined ${wl}suppress'
          ;;
@@ -3095,7 +3148,7 @@
           _LT_AC_TAGVAR(archive_cmds, $1)='$CC -r -keep_private_externs -nostdlib -o ${lib}-master.o $libobjs~$CC -dynamiclib $allow_undefined_flag -o $lib ${lib}-master.o $deplibs $compiler_flags -install_name $rpath/$soname $verstring'
         fi
         _LT_AC_TAGVAR(module_cmds, $1)='$CC $allow_undefined_flag -o $lib -bundle $libobjs $deplibs$compiler_flags'
-        # Don't fix this by using the ld -exported_symbols_list flag, it doesn't exist in older darwin ld's
+        # Don't fix this by using the ld -exported_symbols_list flag, it doesn't exist in older darwin lds
           if test &quot;X$lt_int_apple_cc_single_mod&quot; = Xyes ; then
             _LT_AC_TAGVAR(archive_expsym_cmds, $1)='sed -e &quot;s,#.*,,&quot; -e &quot;s,^[    ]*,,&quot; -e &quot;s,^\(..*\),_&amp;,&quot; &lt; $export_symbols &gt; $output_objdir/${libname}-symbols.expsym~$CC -dynamiclib -single_module $allow_undefined_flag -o $lib $libobjs $deplibs $compiler_flags -install_name $rpath/$soname $verstring~nmedit -s $output_objdir/${libname}-symbols.expsym ${lib}'
           else
@@ -3108,7 +3161,7 @@
          output_verbose_link_cmd='echo'
           _LT_AC_TAGVAR(archive_cmds, $1)='$CC -qmkshrobj ${wl}-single_module $allow_undefined_flag -o $lib $libobjs $deplibs $compiler_flags ${wl}-install_name ${wl}`echo $rpath/$soname` $verstring'
           _LT_AC_TAGVAR(module_cmds, $1)='$CC $allow_undefined_flag -o $lib -bundle $libobjs $deplibs$compiler_flags'
-          # Don't fix this by using the ld -exported_symbols_list flag, it doesn't exist in older darwin ld's
+          # Don't fix this by using the ld -exported_symbols_list flag, it doesn't exist in older darwin lds
           _LT_AC_TAGVAR(archive_expsym_cmds, $1)='sed -e &quot;s,#.*,,&quot; -e &quot;s,^[    ]*,,&quot; -e &quot;s,^\(..*\),_&amp;,&quot; &lt; $export_symbols &gt; $output_objdir/${libname}-symbols.expsym~$CC -qmkshrobj ${wl}-single_module $allow_undefined_flag -o $lib $libobjs $deplibs $compiler_flags ${wl}-install_name ${wl}$rpath/$soname $verstring~nmedit -s $output_objdir/${libname}-symbols.expsym ${lib}'
           _LT_AC_TAGVAR(module_expsym_cmds, $1)='sed -e &quot;s,#.*,,&quot; -e &quot;s,^[    ]*,,&quot; -e &quot;s,^\(..*\),_&amp;,&quot; &lt; $export_symbols &gt; $output_objdir/${libname}-symbols.expsym~$CC $allow_undefined_flag  -o $lib -bundle $libobjs $deplibs$compiler_flags~nmedit -s $output_objdir/${libname}-symbols.expsym ${lib}'
           ;;
@@ -3188,34 +3241,23 @@
     ;;
   hpux10*|hpux11*)
     if test $with_gnu_ld = no; then
-      case &quot;$host_cpu&quot; in
-      hppa*64*)
-	_LT_AC_TAGVAR(hardcode_libdir_flag_spec, $1)='${wl}+b ${wl}$libdir'
+      _LT_AC_TAGVAR(hardcode_libdir_flag_spec, $1)='${wl}+b ${wl}$libdir'
+      _LT_AC_TAGVAR(hardcode_libdir_separator, $1)=:
+
+      case $host_cpu in
+      hppa*64*|ia64*)
 	_LT_AC_TAGVAR(hardcode_libdir_flag_spec_ld, $1)='+b $libdir'
-	_LT_AC_TAGVAR(hardcode_libdir_separator, $1)=:
         ;;
-      ia64*)
-	_LT_AC_TAGVAR(hardcode_libdir_flag_spec, $1)='-L$libdir'
-        ;;
       *)
-	_LT_AC_TAGVAR(hardcode_libdir_flag_spec, $1)='${wl}+b ${wl}$libdir'
-	_LT_AC_TAGVAR(hardcode_libdir_separator, $1)=:
 	_LT_AC_TAGVAR(export_dynamic_flag_spec, $1)='${wl}-E'
         ;;
       esac
     fi
-    case &quot;$host_cpu&quot; in
-    hppa*64*)
+    case $host_cpu in
+    hppa*64*|ia64*)
       _LT_AC_TAGVAR(hardcode_direct, $1)=no
       _LT_AC_TAGVAR(hardcode_shlibpath_var, $1)=no
       ;;
-    ia64*)
-      _LT_AC_TAGVAR(hardcode_direct, $1)=no
-      _LT_AC_TAGVAR(hardcode_shlibpath_var, $1)=no
-      _LT_AC_TAGVAR(hardcode_minus_L, $1)=yes # Not in the search PATH,
-					      # but as the default
-					      # location of the library.
-      ;;
     *)
       _LT_AC_TAGVAR(hardcode_direct, $1)=yes
       _LT_AC_TAGVAR(hardcode_minus_L, $1)=yes # Not in the search PATH,
@@ -3230,10 +3272,13 @@
 	_LT_AC_TAGVAR(ld_shlibs, $1)=no
 	;;
       aCC*)
-	case &quot;$host_cpu&quot; in
-	hppa*64*|ia64*)
-	  _LT_AC_TAGVAR(archive_cmds, $1)='$LD -b +h $soname -o $lib $linker_flags $libobjs $deplibs'
+	case $host_cpu in
+	hppa*64*)
+	  _LT_AC_TAGVAR(archive_cmds, $1)='$CC -b ${wl}+h ${wl}$soname -o $lib $predep_objects $libobjs $deplibs $postdep_objects $compiler_flags'
 	  ;;
+	ia64*)
+	  _LT_AC_TAGVAR(archive_cmds, $1)='$CC -b ${wl}+h ${wl}$soname ${wl}+nodefaultrpath -o $lib $predep_objects $libobjs $deplibs $postdep_objects $compiler_flags'
+	  ;;
 	*)
 	  _LT_AC_TAGVAR(archive_cmds, $1)='$CC -b ${wl}+h ${wl}$soname ${wl}+b ${wl}$install_libdir -o $lib $predep_objects $libobjs $deplibs $postdep_objects $compiler_flags'
 	  ;;
@@ -3251,10 +3296,13 @@
       *)
 	if test &quot;$GXX&quot; = yes; then
 	  if test $with_gnu_ld = no; then
-	    case &quot;$host_cpu&quot; in
-	    ia64*|hppa*64*)
-	      _LT_AC_TAGVAR(archive_cmds, $1)='$LD -b +h $soname -o $lib $linker_flags $libobjs $deplibs'
+	    case $host_cpu in
+	    hppa*64*)
+	      _LT_AC_TAGVAR(archive_cmds, $1)='$CC -shared -nostdlib -fPIC ${wl}+h ${wl}$soname -o $lib $predep_objects $libobjs $deplibs $postdep_objects $compiler_flags'
 	      ;;
+	    ia64*)
+	      _LT_AC_TAGVAR(archive_cmds, $1)='$CC -shared -nostdlib -fPIC ${wl}+h ${wl}$soname ${wl}+nodefaultrpath -o $lib $predep_objects $libobjs $deplibs $postdep_objects $compiler_flags'
+	      ;;
 	    *)
 	      _LT_AC_TAGVAR(archive_cmds, $1)='$CC -shared -nostdlib -fPIC ${wl}+h ${wl}$soname ${wl}+b ${wl}$install_libdir -o $lib $predep_objects $libobjs $deplibs $postdep_objects $compiler_flags'
 	      ;;
@@ -3267,6 +3315,20 @@
 	;;
     esac
     ;;
+  interix3*)
+    _LT_AC_TAGVAR(hardcode_direct, $1)=no
+    _LT_AC_TAGVAR(hardcode_shlibpath_var, $1)=no
+    _LT_AC_TAGVAR(hardcode_libdir_flag_spec, $1)='${wl}-rpath,$libdir'
+    _LT_AC_TAGVAR(export_dynamic_flag_spec, $1)='${wl}-E'
+    # Hack: On Interix 3.x, we cannot compile PIC because of a broken gcc.
+    # Instead, shared libraries are loaded at an image base (0x10000000 by
+    # default) and relocated if they conflict, which is a slow very memory
+    # consuming and fragmenting process.  To avoid this, we pick a random,
+    # 256 KiB-aligned image base between 0x50000000 and 0x6FFC0000 at link
+    # time.  Moving up from 0x10000000 also allows more sbrk(2) space.
+    _LT_AC_TAGVAR(archive_cmds, $1)='$CC -shared $pic_flag $libobjs $deplibs $compiler_flags ${wl}-h,$soname ${wl}--image-base,`expr ${RANDOM-$$} % 4096 / 2 \* 262144 + 1342177280` -o $lib'
+    _LT_AC_TAGVAR(archive_expsym_cmds, $1)='sed &quot;s,^,_,&quot; $export_symbols &gt;$output_objdir/$soname.expsym~$CC -shared $pic_flag $libobjs $deplibs $compiler_flags ${wl}-h,$soname ${wl}--retain-symbols-file,$output_objdir/$soname.expsym ${wl}--image-base,`expr ${RANDOM-$$} % 4096 / 2 \* 262144 + 1342177280` -o $lib'
+    ;;
   irix5* | irix6*)
     case $cc_basename in
       CC*)
@@ -3352,7 +3414,7 @@
 
 	_LT_AC_TAGVAR(hardcode_libdir_flag_spec, $1)='${wl}--rpath ${wl}$libdir'
 	_LT_AC_TAGVAR(export_dynamic_flag_spec, $1)='${wl}--export-dynamic'
-	_LT_AC_TAGVAR(whole_archive_flag_spec, $1)='${wl}--whole-archive,`for conv in $convenience\&quot;\&quot;; do test  -n \&quot;$conv\&quot; &amp;&amp; new_convenience=\&quot;$new_convenience,$conv\&quot;; done; $echo \&quot;$new_convenience\&quot;` ${wl}--no-whole-archive'
+	_LT_AC_TAGVAR(whole_archive_flag_spec, $1)='${wl}--whole-archive`for conv in $convenience\&quot;\&quot;; do test  -n \&quot;$conv\&quot; &amp;&amp; new_convenience=\&quot;$new_convenience,$conv\&quot;; done; $echo \&quot;$new_convenience\&quot;` ${wl}--no-whole-archive'
         ;;
       cxx*)
 	# Compaq C++
@@ -3549,19 +3611,6 @@
     # FIXME: insert proper C++ library support
     _LT_AC_TAGVAR(ld_shlibs, $1)=no
     ;;
-  sco*)
-    _LT_AC_TAGVAR(archive_cmds_need_lc, $1)=no
-    case $cc_basename in
-      CC*)
-	# FIXME: insert proper C++ library support
-	_LT_AC_TAGVAR(ld_shlibs, $1)=no
-	;;
-      *)
-	# FIXME: insert proper C++ library support
-	_LT_AC_TAGVAR(ld_shlibs, $1)=no
-	;;
-    esac
-    ;;
   sunos4*)
     case $cc_basename in
       CC*)
@@ -3584,10 +3633,11 @@
     case $cc_basename in
       CC*)
 	# Sun C++ 4.2, 5.x and Centerline C++
+        _LT_AC_TAGVAR(archive_cmds_need_lc,$1)=yes
 	_LT_AC_TAGVAR(no_undefined_flag, $1)=' -zdefs'
-	_LT_AC_TAGVAR(archive_cmds, $1)='$CC -G${allow_undefined_flag} -nolib -h$soname -o $lib $predep_objects $libobjs $deplibs $postdep_objects $compiler_flags'
+	_LT_AC_TAGVAR(archive_cmds, $1)='$CC -G${allow_undefined_flag}  -h$soname -o $lib $predep_objects $libobjs $deplibs $postdep_objects $compiler_flags'
 	_LT_AC_TAGVAR(archive_expsym_cmds, $1)='$echo &quot;{ global:&quot; &gt; $lib.exp~cat $export_symbols | $SED -e &quot;s/\(.*\)/\1;/&quot; &gt;&gt; $lib.exp~$echo &quot;local: *; };&quot; &gt;&gt; $lib.exp~
-	$CC -G${allow_undefined_flag} -nolib ${wl}-M ${wl}$lib.exp -h$soname -o $lib $predep_objects $libobjs $deplibs $postdep_objects $compiler_flags~$rm $lib.exp'
+	$CC -G${allow_undefined_flag}  ${wl}-M ${wl}$lib.exp -h$soname -o $lib $predep_objects $libobjs $deplibs $postdep_objects $compiler_flags~$rm $lib.exp'
 
 	_LT_AC_TAGVAR(hardcode_libdir_flag_spec, $1)='-R$libdir'
 	_LT_AC_TAGVAR(hardcode_shlibpath_var, $1)=no
@@ -3607,15 +3657,7 @@
 	esac
 	_LT_AC_TAGVAR(link_all_deplibs, $1)=yes
 
-	# Commands to make compiler produce verbose output that lists
-	# what &quot;hidden&quot; libraries, object files and flags are used when
-	# linking a shared library.
-	#
-	# There doesn't appear to be a way to prevent this compiler from
-	# explicitly linking system object files so we need to strip them
-	# from the output so that they don't get included in the library
-	# dependencies.
-	output_verbose_link_cmd='templist=`$CC -G $CFLAGS -v conftest.$objext 2&gt;&amp;1 | grep &quot;\-[[LR]]&quot;`; list=&quot;&quot;; for z in $templist; do case $z in conftest.$objext) list=&quot;$list $z&quot;;; *.$objext);; *) list=&quot;$list $z&quot;;;esac; done; echo $list'
+	output_verbose_link_cmd='echo'
 
 	# Archives containing C++ object files must be created using
 	# &quot;CC -xar&quot;, where &quot;CC&quot; is the Sun C++ compiler.  This is
@@ -3661,9 +3703,60 @@
 	;;
     esac
     ;;
-  sysv5OpenUNIX8* | sysv5UnixWare7* | sysv5uw[[78]]* | unixware7*)
+  sysv4*uw2* | sysv5OpenUNIX* | sysv5UnixWare7.[[01]].[[10]]* | unixware7* | sco3.2v5.0.[[024]]*)
+    _LT_AC_TAGVAR(no_undefined_flag, $1)='${wl}-z,text'
     _LT_AC_TAGVAR(archive_cmds_need_lc, $1)=no
+    _LT_AC_TAGVAR(hardcode_shlibpath_var, $1)=no
+    runpath_var='LD_RUN_PATH'
+
+    case $cc_basename in
+      CC*)
+	_LT_AC_TAGVAR(archive_cmds, $1)='$CC -G ${wl}-h,$soname -o $lib $libobjs $deplibs $compiler_flags'
+	_LT_AC_TAGVAR(archive_expsym_cmds, $1)='$CC -G ${wl}-Bexport:$export_symbols ${wl}-h,$soname -o $lib $libobjs $deplibs $compiler_flags'
+	;;
+      *)
+	_LT_AC_TAGVAR(archive_cmds, $1)='$CC -shared ${wl}-h,$soname -o $lib $libobjs $deplibs $compiler_flags'
+	_LT_AC_TAGVAR(archive_expsym_cmds, $1)='$CC -shared ${wl}-Bexport:$export_symbols ${wl}-h,$soname -o $lib $libobjs $deplibs $compiler_flags'
+	;;
+    esac
     ;;
+  sysv5* | sco3.2v5* | sco5v6*)
+    # Note: We can NOT use -z defs as we might desire, because we do not
+    # link with -lc, and that would cause any symbols used from libc to
+    # always be unresolved, which means just about no library would
+    # ever link correctly.  If we're not using GNU ld we use -z text
+    # though, which does catch some bad symbols but isn't as heavy-handed
+    # as -z defs.
+    # For security reasons, it is highly recommended that you always
+    # use absolute paths for naming shared libraries, and exclude the
+    # DT_RUNPATH tag from executables and libraries.  But doing so
+    # requires that you compile everything twice, which is a pain.
+    # So that behaviour is only enabled if SCOABSPATH is set to a
+    # non-empty value in the environment.  Most likely only useful for
+    # creating official distributions of packages.
+    # This is a hack until libtool officially supports absolute path
+    # names for shared libraries.
+    _LT_AC_TAGVAR(no_undefined_flag, $1)='${wl}-z,text'
+    _LT_AC_TAGVAR(allow_undefined_flag, $1)='${wl}-z,nodefs'
+    _LT_AC_TAGVAR(archive_cmds_need_lc, $1)=no
+    _LT_AC_TAGVAR(hardcode_shlibpath_var, $1)=no
+    _LT_AC_TAGVAR(hardcode_libdir_flag_spec, $1)='`test -z &quot;$SCOABSPATH&quot; &amp;&amp; echo ${wl}-R,$libdir`'
+    _LT_AC_TAGVAR(hardcode_libdir_separator, $1)=':'
+    _LT_AC_TAGVAR(link_all_deplibs, $1)=yes
+    _LT_AC_TAGVAR(export_dynamic_flag_spec, $1)='${wl}-Bexport'
+    runpath_var='LD_RUN_PATH'
+
+    case $cc_basename in
+      CC*)
+	_LT_AC_TAGVAR(archive_cmds, $1)='$CC -G ${wl}-h,\${SCOABSPATH:+${install_libdir}/}$soname -o $lib $libobjs $deplibs $compiler_flags'
+	_LT_AC_TAGVAR(archive_expsym_cmds, $1)='$CC -G ${wl}-Bexport:$export_symbols ${wl}-h,\${SCOABSPATH:+${install_libdir}/}$soname -o $lib $libobjs $deplibs $compiler_flags'
+	;;
+      *)
+	_LT_AC_TAGVAR(archive_cmds, $1)='$CC -shared ${wl}-h,\${SCOABSPATH:+${install_libdir}/}$soname -o $lib $libobjs $deplibs $compiler_flags'
+	_LT_AC_TAGVAR(archive_expsym_cmds, $1)='$CC -shared ${wl}-Bexport:$export_symbols ${wl}-h,\${SCOABSPATH:+${install_libdir}/}$soname -o $lib $libobjs $deplibs $compiler_flags'
+	;;
+    esac
+    ;;
   tandem*)
     case $cc_basename in
       NCC*)
@@ -3699,8 +3792,6 @@
 AC_LIBTOOL_PROG_LD_SHLIBS($1)
 AC_LIBTOOL_SYS_DYNAMIC_LINKER($1)
 AC_LIBTOOL_PROG_LD_HARDCODE_LIBPATH($1)
-AC_LIBTOOL_SYS_LIB_STRIP
-AC_LIBTOOL_DLOPEN_SELF($1)
 
 AC_LIBTOOL_CONFIG($1)
 
@@ -3718,7 +3809,7 @@
 ])# AC_LIBTOOL_LANG_CXX_CONFIG
 
 # AC_LIBTOOL_POSTDEP_PREDEP([TAGNAME])
-# ------------------------
+# ------------------------------------
 # Figure out &quot;hidden&quot; library dependencies from verbose
 # compiler output when linking a shared library.
 # Parse the compiler output and extract the necessary
@@ -3772,7 +3863,7 @@
   # The `*' in the case matches for architectures that use `case' in
   # $output_verbose_cmd can trigger glob expansion during the loop
   # eval without this substitution.
-  output_verbose_link_cmd=&quot;`$echo \&quot;X$output_verbose_link_cmd\&quot; | $Xsed -e \&quot;$no_glob_subst\&quot;`&quot;
+  output_verbose_link_cmd=`$echo &quot;X$output_verbose_link_cmd&quot; | $Xsed -e &quot;$no_glob_subst&quot;`
 
   for p in `eval $output_verbose_link_cmd`; do
     case $p in
@@ -3848,13 +3939,37 @@
 
 $rm -f confest.$objext
 
+# PORTME: override above test on systems where it is broken
+ifelse([$1],[CXX],
+[case $host_os in
+interix3*)
+  # Interix 3.5 installs completely hosed .la files for C++, so rather than
+  # hack all around it, let's just trust &quot;g++&quot; to DTRT.
+  _LT_AC_TAGVAR(predep_objects,$1)=
+  _LT_AC_TAGVAR(postdep_objects,$1)=
+  _LT_AC_TAGVAR(postdeps,$1)=
+  ;;
+
+solaris*)
+  case $cc_basename in
+  CC*)
+    # Adding this requires a known-good setup of shared libraries for
+    # Sun compiler versions before 5.6, else PIC objects from an old
+    # archive will be linked into the output, leading to subtle bugs.
+    _LT_AC_TAGVAR(postdeps,$1)='-lCstd -lCrun'
+    ;;
+  esac
+  ;;
+esac
+])
+
 case &quot; $_LT_AC_TAGVAR(postdeps, $1) &quot; in
 *&quot; -lc &quot;*) _LT_AC_TAGVAR(archive_cmds_need_lc, $1)=no ;;
 esac
 ])# AC_LIBTOOL_POSTDEP_PREDEP
 
 # AC_LIBTOOL_LANG_F77_CONFIG
-# ------------------------
+# --------------------------
 # Ensure that the configuration vars for the C compiler are
 # suitably defined.  Those variables are subsequently used by
 # AC_LIBTOOL_CONFIG to write the compiler configuration to `libtool'.
@@ -3917,7 +4032,7 @@
 
 # On AIX, shared libraries and static libraries use the same namespace, and
 # are all built from PIC.
-case &quot;$host_os&quot; in
+case $host_os in
 aix3*)
   test &quot;$enable_shared&quot; = yes &amp;&amp; enable_static=no
   if test -n &quot;$RANLIB&quot;; then
@@ -3938,8 +4053,6 @@
 test &quot;$enable_shared&quot; = yes || enable_static=yes
 AC_MSG_RESULT([$enable_static])
 
-test &quot;$_LT_AC_TAGVAR(ld_shlibs, $1)&quot; = no &amp;&amp; can_build_shared=no
-
 _LT_AC_TAGVAR(GCC, $1)=&quot;$G77&quot;
 _LT_AC_TAGVAR(LD, $1)=&quot;$LD&quot;
 
@@ -3949,9 +4062,7 @@
 AC_LIBTOOL_PROG_LD_SHLIBS($1)
 AC_LIBTOOL_SYS_DYNAMIC_LINKER($1)
 AC_LIBTOOL_PROG_LD_HARDCODE_LIBPATH($1)
-AC_LIBTOOL_SYS_LIB_STRIP
 
-
 AC_LIBTOOL_CONFIG($1)
 
 AC_LANG_POP
@@ -4007,8 +4118,6 @@
 AC_LIBTOOL_PROG_LD_SHLIBS($1)
 AC_LIBTOOL_SYS_DYNAMIC_LINKER($1)
 AC_LIBTOOL_PROG_LD_HARDCODE_LIBPATH($1)
-AC_LIBTOOL_SYS_LIB_STRIP
-AC_LIBTOOL_DLOPEN_SELF($1)
 
 AC_LIBTOOL_CONFIG($1)
 
@@ -4018,7 +4127,7 @@
 
 
 # AC_LIBTOOL_LANG_RC_CONFIG
-# --------------------------
+# -------------------------
 # Ensure that the configuration vars for the Windows resource compiler are
 # suitably defined.  Those variables are subsequently used by
 # AC_LIBTOOL_CONFIG to write the compiler configuration to `libtool'.
@@ -4081,7 +4190,7 @@
   # Now quote all the things that may contain metacharacters while being
   # careful not to overquote the AC_SUBSTed values.  We take copies of the
   # variables and quote the copies for generation of the libtool script.
-  for var in echo old_CC old_CFLAGS AR AR_FLAGS EGREP RANLIB LN_S LTCC NM \
+  for var in echo old_CC old_CFLAGS AR AR_FLAGS EGREP RANLIB LN_S LTCC LTCFLAGS NM \
     SED SHELL STRIP \
     libname_spec library_names_spec soname_spec extract_expsyms_cmds \
     old_striplib striplib file_magic_cmd finish_cmds finish_eval \
@@ -4250,6 +4359,9 @@
 # A C compiler.
 LTCC=$lt_LTCC
 
+# LTCC compiler flags.
+LTCFLAGS=$lt_LTCFLAGS
+
 # A language-specific compiler.
 CC=$lt_[]_LT_AC_TAGVAR(compiler, $1)
 
@@ -4623,9 +4735,18 @@
 osf*)
   symcode='[[BCDEGQRST]]'
   ;;
-solaris* | sysv5*)
+solaris*)
   symcode='[[BDRT]]'
   ;;
+sco3.2v5*)
+  symcode='[[DT]]'
+  ;;
+sysv4.2uw2*)
+  symcode='[[DT]]'
+  ;;
+sysv5* | sco5v6* | unixware* | OpenUNIX*)
+  symcode='[[ABDT]]'
+  ;;
 sysv4)
   symcode='[[DFNSTU]]'
   ;;
@@ -4808,6 +4929,10 @@
       # DJGPP does not support shared libraries at all
       _LT_AC_TAGVAR(lt_prog_compiler_pic, $1)=
       ;;
+    interix3*)
+      # Interix 3.x gcc -fpic/-fPIC options generate broken code.
+      # Instead, we relocate shared libraries at runtime.
+      ;;
     sysv4*MP*)
       if test -d /usr/nec; then
 	_LT_AC_TAGVAR(lt_prog_compiler_pic, $1)=-Kconform_pic
@@ -4816,7 +4941,7 @@
     hpux*)
       # PIC is the default for IA64 HP-UX and 64-bit HP-UX, but
       # not for PA HP-UX.
-      case &quot;$host_cpu&quot; in
+      case $host_cpu in
       hppa*64*|ia64*)
 	;;
       *)
@@ -4877,15 +5002,15 @@
 	case $cc_basename in
 	  CC*)
 	    _LT_AC_TAGVAR(lt_prog_compiler_wl, $1)='-Wl,'
-	    _LT_AC_TAGVAR(lt_prog_compiler_static, $1)=&quot;${ac_cv_prog_cc_wl}-a ${ac_cv_prog_cc_wl}archive&quot;
+	    _LT_AC_TAGVAR(lt_prog_compiler_static, $1)='${wl}-a ${wl}archive'
 	    if test &quot;$host_cpu&quot; != ia64; then
 	      _LT_AC_TAGVAR(lt_prog_compiler_pic, $1)='+Z'
 	    fi
 	    ;;
 	  aCC*)
 	    _LT_AC_TAGVAR(lt_prog_compiler_wl, $1)='-Wl,'
-	    _LT_AC_TAGVAR(lt_prog_compiler_static, $1)=&quot;${ac_cv_prog_cc_wl}-a ${ac_cv_prog_cc_wl}archive&quot;
-	    case &quot;$host_cpu&quot; in
+	    _LT_AC_TAGVAR(lt_prog_compiler_static, $1)='${wl}-a ${wl}archive'
+	    case $host_cpu in
 	    hppa*64*|ia64*)
 	      # +Z the default
 	      ;;
@@ -4898,6 +5023,10 @@
 	    ;;
 	esac
 	;;
+      interix*)
+	# This is c89, which is MS Visual C++ (no shared libs)
+	# Anyone wants to do a port?
+	;;
       irix5* | irix6* | nonstopux*)
 	case $cc_basename in
 	  CC*)
@@ -4926,7 +5055,7 @@
 	    # Portland Group C++ compiler.
 	    _LT_AC_TAGVAR(lt_prog_compiler_wl, $1)='-Wl,'
 	    _LT_AC_TAGVAR(lt_prog_compiler_pic, $1)='-fpic'
-	    _LT_AC_TAGVAR(lt_prog_compiler_static, $1)='-static'
+	    _LT_AC_TAGVAR(lt_prog_compiler_static, $1)='-Bstatic'
 	    ;;
 	  cxx*)
 	    # Compaq C++
@@ -4977,15 +5106,6 @@
 	;;
       psos*)
 	;;
-      sco*)
-	case $cc_basename in
-	  CC*)
-	    _LT_AC_TAGVAR(lt_prog_compiler_pic, $1)='-fPIC'
-	    ;;
-	  *)
-	    ;;
-	esac
-	;;
       solaris*)
 	case $cc_basename in
 	  CC*)
@@ -5027,7 +5147,14 @@
 	    ;;
 	esac
 	;;
-      unixware*)
+      sysv5* | unixware* | sco3.2v5* | sco5v6* | OpenUNIX*)
+	case $cc_basename in
+	  CC*)
+	    _LT_AC_TAGVAR(lt_prog_compiler_wl, $1)='-Wl,'
+	    _LT_AC_TAGVAR(lt_prog_compiler_pic, $1)='-KPIC'
+	    _LT_AC_TAGVAR(lt_prog_compiler_static, $1)='-Bstatic'
+	    ;;
+	esac
 	;;
       vxworks*)
 	;;
@@ -5074,6 +5201,11 @@
       _LT_AC_TAGVAR(lt_prog_compiler_pic, $1)='-fno-common'
       ;;
 
+    interix3*)
+      # Interix 3.x gcc -fpic/-fPIC options generate broken code.
+      # Instead, we relocate shared libraries at runtime.
+      ;;
+
     msdosdjgpp*)
       # Just because we use GCC doesn't mean we suddenly get shared libraries
       # on systems that don't support them.
@@ -5090,7 +5222,7 @@
     hpux*)
       # PIC is the default for IA64 HP-UX and 64-bit HP-UX, but
       # not for PA HP-UX.
-      case &quot;$host_cpu&quot; in
+      case $host_cpu in
       hppa*64*|ia64*)
 	# +Z the default
 	;;
@@ -5137,7 +5269,7 @@
       _LT_AC_TAGVAR(lt_prog_compiler_wl, $1)='-Wl,'
       # PIC is the default for IA64 HP-UX and 64-bit HP-UX, but
       # not for PA HP-UX.
-      case &quot;$host_cpu&quot; in
+      case $host_cpu in
       hppa*64*|ia64*)
 	# +Z the default
 	;;
@@ -5167,12 +5299,12 @@
 	_LT_AC_TAGVAR(lt_prog_compiler_pic, $1)='-KPIC'
 	_LT_AC_TAGVAR(lt_prog_compiler_static, $1)='-static'
         ;;
-      pgcc* | pgf77* | pgf90*)
+      pgcc* | pgf77* | pgf90* | pgf95*)
         # Portland Group compilers (*not* the Pentium gcc compiler,
 	# which looks to be a dead project)
 	_LT_AC_TAGVAR(lt_prog_compiler_wl, $1)='-Wl,'
 	_LT_AC_TAGVAR(lt_prog_compiler_pic, $1)='-fpic'
-	_LT_AC_TAGVAR(lt_prog_compiler_static, $1)='-static'
+	_LT_AC_TAGVAR(lt_prog_compiler_static, $1)='-Bstatic'
         ;;
       ccc*)
         _LT_AC_TAGVAR(lt_prog_compiler_wl, $1)='-Wl,'
@@ -5188,11 +5320,6 @@
       _LT_AC_TAGVAR(lt_prog_compiler_static, $1)='-non_shared'
       ;;
 
-    sco3.2v5*)
-      _LT_AC_TAGVAR(lt_prog_compiler_pic, $1)='-Kpic'
-      _LT_AC_TAGVAR(lt_prog_compiler_static, $1)='-dn'
-      ;;
-
     solaris*)
       _LT_AC_TAGVAR(lt_prog_compiler_pic, $1)='-KPIC'
       _LT_AC_TAGVAR(lt_prog_compiler_static, $1)='-Bstatic'
@@ -5210,7 +5337,7 @@
       _LT_AC_TAGVAR(lt_prog_compiler_static, $1)='-Bstatic'
       ;;
 
-    sysv4 | sysv4.2uw2* | sysv4.3* | sysv5*)
+    sysv4 | sysv4.2uw2* | sysv4.3*)
       _LT_AC_TAGVAR(lt_prog_compiler_wl, $1)='-Wl,'
       _LT_AC_TAGVAR(lt_prog_compiler_pic, $1)='-KPIC'
       _LT_AC_TAGVAR(lt_prog_compiler_static, $1)='-Bstatic'
@@ -5223,6 +5350,12 @@
       fi
       ;;
 
+    sysv5* | unixware* | sco3.2v5* | sco5v6* | OpenUNIX*)
+      _LT_AC_TAGVAR(lt_prog_compiler_wl, $1)='-Wl,'
+      _LT_AC_TAGVAR(lt_prog_compiler_pic, $1)='-KPIC'
+      _LT_AC_TAGVAR(lt_prog_compiler_static, $1)='-Bstatic'
+      ;;
+
     unicos*)
       _LT_AC_TAGVAR(lt_prog_compiler_wl, $1)='-Wl,'
       _LT_AC_TAGVAR(lt_prog_compiler_can_build_shared, $1)=no
@@ -5255,7 +5388,7 @@
     [_LT_AC_TAGVAR(lt_prog_compiler_pic, $1)=
      _LT_AC_TAGVAR(lt_prog_compiler_can_build_shared, $1)=no])
 fi
-case &quot;$host_os&quot; in
+case $host_os in
   # For platforms which do not support PIC, -DPIC is meaningless:
   *djgpp*)
     _LT_AC_TAGVAR(lt_prog_compiler_pic, $1)=
@@ -5264,6 +5397,16 @@
     _LT_AC_TAGVAR(lt_prog_compiler_pic, $1)=&quot;$_LT_AC_TAGVAR(lt_prog_compiler_pic, $1)ifelse([$1],[],[ -DPIC],[ifelse([$1],[CXX],[ -DPIC],[])])&quot;
     ;;
 esac
+
+#
+# Check to make sure the static flag actually works.
+#
+wl=$_LT_AC_TAGVAR(lt_prog_compiler_wl, $1) eval lt_tmp_static_flag=\&quot;$_LT_AC_TAGVAR(lt_prog_compiler_static, $1)\&quot;
+AC_LIBTOOL_LINKER_OPTION([if $compiler static flag $lt_tmp_static_flag works],
+  _LT_AC_TAGVAR(lt_prog_compiler_static_works, $1),
+  $lt_tmp_static_flag,
+  [],
+  [_LT_AC_TAGVAR(lt_prog_compiler_static, $1)=])
 ])
 
 
@@ -5342,6 +5485,10 @@
       with_gnu_ld=no
     fi
     ;;
+  interix*)
+    # we just hope/assume this is gcc and not c89 (= MSVC++)
+    with_gnu_ld=yes
+    ;;
   openbsd*)
     with_gnu_ld=no
     ;;
@@ -5351,7 +5498,7 @@
   if test &quot;$with_gnu_ld&quot; = yes; then
     # If archive_cmds runs LD, not CC, wlarc should be empty
     wlarc='${wl}'
-    
+
     # Set some defaults for GNU ld with shared library support. These
     # are reset later if shared libraries are not supported. Putting them
     # here allows them to be overridden if necessary.
@@ -5372,7 +5519,7 @@
       *\ 2.11.*) ;; # other 2.11 versions
       *) supports_anon_versioning=yes ;;
     esac
-    
+
     # See if GNU ld supports shared libraries.
     case $host_os in
     aix3* | aix4* | aix5*)
@@ -5426,7 +5573,7 @@
       _LT_AC_TAGVAR(export_symbols_cmds, $1)='$NM $libobjs $convenience | $global_symbol_pipe | $SED -e '\''/^[[BCDGRS]] /s/.* \([[^ ]]*\)/\1 DATA/'\'' | $SED -e '\''/^[[AITW]] /s/.* //'\'' | sort | uniq &gt; $export_symbols'
 
       if $LD --help 2&gt;&amp;1 | grep 'auto-import' &gt; /dev/null; then
-        _LT_AC_TAGVAR(archive_cmds, $1)='$CC -shared $libobjs $deplibs $compiler_flags -o $output_objdir/$soname ${wl}--image-base=0x10000000 ${wl}--out-implib,$lib'
+        _LT_AC_TAGVAR(archive_cmds, $1)='$CC -shared $libobjs $deplibs $compiler_flags -o $output_objdir/$soname ${wl}--enable-auto-image-base -Xlinker --out-implib -Xlinker $lib'
 	# If the export-symbols file already is a .def file (1st line
 	# is EXPORTS), use it as is; otherwise, prepend...
 	_LT_AC_TAGVAR(archive_expsym_cmds, $1)='if test &quot;x`$SED 1q $export_symbols`&quot; = xEXPORTS; then
@@ -5435,22 +5582,37 @@
 	  echo EXPORTS &gt; $output_objdir/$soname.def;
 	  cat $export_symbols &gt;&gt; $output_objdir/$soname.def;
 	fi~
-	$CC -shared $output_objdir/$soname.def $libobjs $deplibs $compiler_flags -o $output_objdir/$soname ${wl}--image-base=0x10000000  ${wl}--out-implib,$lib'
+	$CC -shared $output_objdir/$soname.def $libobjs $deplibs $compiler_flags -o $output_objdir/$soname ${wl}--enable-auto-image-base -Xlinker --out-implib -Xlinker $lib'
       else
 	_LT_AC_TAGVAR(ld_shlibs, $1)=no
       fi
       ;;
 
+    interix3*)
+      _LT_AC_TAGVAR(hardcode_direct, $1)=no
+      _LT_AC_TAGVAR(hardcode_shlibpath_var, $1)=no
+      _LT_AC_TAGVAR(hardcode_libdir_flag_spec, $1)='${wl}-rpath,$libdir'
+      _LT_AC_TAGVAR(export_dynamic_flag_spec, $1)='${wl}-E'
+      # Hack: On Interix 3.x, we cannot compile PIC because of a broken gcc.
+      # Instead, shared libraries are loaded at an image base (0x10000000 by
+      # default) and relocated if they conflict, which is a slow very memory
+      # consuming and fragmenting process.  To avoid this, we pick a random,
+      # 256 KiB-aligned image base between 0x50000000 and 0x6FFC0000 at link
+      # time.  Moving up from 0x10000000 also allows more sbrk(2) space.
+      _LT_AC_TAGVAR(archive_cmds, $1)='$CC -shared $pic_flag $libobjs $deplibs $compiler_flags ${wl}-h,$soname ${wl}--image-base,`expr ${RANDOM-$$} % 4096 / 2 \* 262144 + 1342177280` -o $lib'
+      _LT_AC_TAGVAR(archive_expsym_cmds, $1)='sed &quot;s,^,_,&quot; $export_symbols &gt;$output_objdir/$soname.expsym~$CC -shared $pic_flag $libobjs $deplibs $compiler_flags ${wl}-h,$soname ${wl}--retain-symbols-file,$output_objdir/$soname.expsym ${wl}--image-base,`expr ${RANDOM-$$} % 4096 / 2 \* 262144 + 1342177280` -o $lib'
+      ;;
+
     linux*)
       if $LD --help 2&gt;&amp;1 | grep ': supported targets:.* elf' &gt; /dev/null; then
 	tmp_addflag=
 	case $cc_basename,$host_cpu in
 	pgcc*)				# Portland Group C compiler
-	  _LT_AC_TAGVAR(whole_archive_flag_spec, $1)='${wl}--whole-archive,`for conv in $convenience\&quot;\&quot;; do test  -n \&quot;$conv\&quot; &amp;&amp; new_convenience=\&quot;$new_convenience,$conv\&quot;; done; $echo \&quot;$new_convenience\&quot;` ${wl}--no-whole-archive'
+	  _LT_AC_TAGVAR(whole_archive_flag_spec, $1)='${wl}--whole-archive`for conv in $convenience\&quot;\&quot;; do test  -n \&quot;$conv\&quot; &amp;&amp; new_convenience=\&quot;$new_convenience,$conv\&quot;; done; $echo \&quot;$new_convenience\&quot;` ${wl}--no-whole-archive'
 	  tmp_addflag=' $pic_flag'
 	  ;;
-	pgf77* | pgf90* )			# Portland Group f77 and f90 compilers
-	  _LT_AC_TAGVAR(whole_archive_flag_spec, $1)='${wl}--whole-archive,`for conv in $convenience\&quot;\&quot;; do test  -n \&quot;$conv\&quot; &amp;&amp; new_convenience=\&quot;$new_convenience,$conv\&quot;; done; $echo \&quot;$new_convenience\&quot;` ${wl}--no-whole-archive'
+	pgf77* | pgf90* | pgf95*)	# Portland Group f77 and f90 compilers
+	  _LT_AC_TAGVAR(whole_archive_flag_spec, $1)='${wl}--whole-archive`for conv in $convenience\&quot;\&quot;; do test  -n \&quot;$conv\&quot; &amp;&amp; new_convenience=\&quot;$new_convenience,$conv\&quot;; done; $echo \&quot;$new_convenience\&quot;` ${wl}--no-whole-archive'
 	  tmp_addflag=' $pic_flag -Mnomain' ;;
 	ecc*,ia64* | icc*,ia64*)		# Intel C compiler on ia64
 	  tmp_addflag=' -i_dynamic' ;;
@@ -5482,7 +5644,7 @@
       fi
       ;;
 
-    solaris* | sysv5*)
+    solaris*)
       if $LD -v 2&gt;&amp;1 | grep 'BFD 2\.8' &gt; /dev/null; then
 	_LT_AC_TAGVAR(ld_shlibs, $1)=no
 	cat &lt;&lt;EOF 1&gt;&amp;2
@@ -5503,6 +5665,33 @@
       fi
       ;;
 
+    sysv5* | sco3.2v5* | sco5v6* | unixware* | OpenUNIX*)
+      case `$LD -v 2&gt;&amp;1` in
+        *\ [[01]].* | *\ 2.[[0-9]].* | *\ 2.1[[0-5]].*) 
+	_LT_AC_TAGVAR(ld_shlibs, $1)=no
+	cat &lt;&lt;_LT_EOF 1&gt;&amp;2
+
+*** Warning: Releases of the GNU linker prior to 2.16.91.0.3 can not
+*** reliably create shared libraries on SCO systems.  Therefore, libtool
+*** is disabling shared libraries support.  We urge you to upgrade GNU
+*** binutils to release 2.16.91.0.3 or newer.  Another option is to modify
+*** your PATH or compiler configuration so that the native linker is
+*** used, and then restart.
+
+_LT_EOF
+	;;
+	*)
+	  if $LD --help 2&gt;&amp;1 | grep ': supported targets:.* elf' &gt; /dev/null; then
+	    _LT_AC_TAGVAR(hardcode_libdir_flag_spec, $1)='`test -z &quot;$SCOABSPATH&quot; &amp;&amp; echo ${wl}-rpath,$libdir`'
+	    _LT_AC_TAGVAR(archive_cmds, $1)='$CC -shared $libobjs $deplibs $compiler_flags ${wl}-soname,\${SCOABSPATH:+${install_libdir}/}$soname -o $lib'
+	    _LT_AC_TAGVAR(archive_expsym_cmds, $1)='$CC -shared $libobjs $deplibs $compiler_flags ${wl}-soname,\${SCOABSPATH:+${install_libdir}/}$soname,-retain-symbols-file,$export_symbols -o $lib'
+	  else
+	    _LT_AC_TAGVAR(ld_shlibs, $1)=no
+	  fi
+	;;
+      esac
+      ;;
+
     sunos4*)
       _LT_AC_TAGVAR(archive_cmds, $1)='$LD -assert pure-text -Bshareable -o $lib $libobjs $deplibs $linker_flags'
       wlarc=
@@ -5536,7 +5725,7 @@
       # Note: this linker hardcodes the directories in LIBPATH if there
       # are no directories specified by -L.
       _LT_AC_TAGVAR(hardcode_minus_L, $1)=yes
-      if test &quot;$GCC&quot; = yes &amp;&amp; test -z &quot;$link_static_flag&quot;; then
+      if test &quot;$GCC&quot; = yes &amp;&amp; test -z &quot;$lt_prog_compiler_static&quot;; then
 	# Neither direct hardcoding nor static linking is supported with a
 	# broken collect2.
 	_LT_AC_TAGVAR(hardcode_direct, $1)=unsupported
@@ -5570,6 +5759,7 @@
   	    break
   	  fi
 	  done
+	  ;;
 	esac
 
 	exp_sym_flag='-bexport'
@@ -5607,6 +5797,7 @@
   	  _LT_AC_TAGVAR(hardcode_libdir_flag_spec, $1)='-L$libdir'
   	  _LT_AC_TAGVAR(hardcode_libdir_separator, $1)=
 	  fi
+	  ;;
 	esac
 	shared_flag='-shared'
 	if test &quot;$aix_use_runtimelinking&quot; = yes; then
@@ -5619,11 +5810,11 @@
   	# chokes on -Wl,-G. The following line is correct:
 	  shared_flag='-G'
 	else
-  	if test &quot;$aix_use_runtimelinking&quot; = yes; then
+	  if test &quot;$aix_use_runtimelinking&quot; = yes; then
 	    shared_flag='${wl}-G'
 	  else
 	    shared_flag='${wl}-bM:SRE'
-  	fi
+	  fi
 	fi
       fi
 
@@ -5637,12 +5828,12 @@
        # Determine the default libpath from the value encoded in an empty executable.
        _LT_AC_SYS_LIBPATH_AIX
        _LT_AC_TAGVAR(hardcode_libdir_flag_spec, $1)='${wl}-blibpath:$libdir:'&quot;$aix_libpath&quot;
-	_LT_AC_TAGVAR(archive_expsym_cmds, $1)=&quot;\$CC&quot;' -o $output_objdir/$soname $libobjs $deplibs $compiler_flags `if test &quot;x${allow_undefined_flag}&quot; != &quot;x&quot;; then echo &quot;${wl}${allow_undefined_flag}&quot;; else :; fi` '&quot;\${wl}$no_entry_flag \${wl}$exp_sym_flag:\$export_symbols $shared_flag&quot;
+	_LT_AC_TAGVAR(archive_expsym_cmds, $1)=&quot;\$CC&quot;' -o $output_objdir/$soname $libobjs $deplibs '&quot;\${wl}$no_entry_flag&quot;' $compiler_flags `if test &quot;x${allow_undefined_flag}&quot; != &quot;x&quot;; then echo &quot;${wl}${allow_undefined_flag}&quot;; else :; fi` '&quot;\${wl}$exp_sym_flag:\$export_symbols $shared_flag&quot;
        else
 	if test &quot;$host_cpu&quot; = ia64; then
 	  _LT_AC_TAGVAR(hardcode_libdir_flag_spec, $1)='${wl}-R $libdir:/usr/lib:/lib'
 	  _LT_AC_TAGVAR(allow_undefined_flag, $1)=&quot;-z nodefs&quot;
-	  _LT_AC_TAGVAR(archive_expsym_cmds, $1)=&quot;\$CC $shared_flag&quot;' -o $output_objdir/$soname $libobjs $deplibs $compiler_flags ${wl}${allow_undefined_flag} '&quot;\${wl}$no_entry_flag \${wl}$exp_sym_flag:\$export_symbols&quot;
+	  _LT_AC_TAGVAR(archive_expsym_cmds, $1)=&quot;\$CC $shared_flag&quot;' -o $output_objdir/$soname $libobjs $deplibs '&quot;\${wl}$no_entry_flag&quot;' $compiler_flags ${wl}${allow_undefined_flag} '&quot;\${wl}$exp_sym_flag:\$export_symbols&quot;
 	else
 	 # Determine the default libpath from the value encoded in an empty executable.
 	 _LT_AC_SYS_LIBPATH_AIX
@@ -5651,13 +5842,11 @@
 	  # -berok will link without error, but may produce a broken library.
 	  _LT_AC_TAGVAR(no_undefined_flag, $1)=' ${wl}-bernotok'
 	  _LT_AC_TAGVAR(allow_undefined_flag, $1)=' ${wl}-berok'
-	  # -bexpall does not export symbols beginning with underscore (_)
-	  _LT_AC_TAGVAR(always_export_symbols, $1)=yes
 	  # Exported symbols can be pulled into shared objects from archives
-	  _LT_AC_TAGVAR(whole_archive_flag_spec, $1)=' '
+	  _LT_AC_TAGVAR(whole_archive_flag_spec, $1)='$convenience'
 	  _LT_AC_TAGVAR(archive_cmds_need_lc, $1)=yes
-	  # This is similar to how AIX traditionally builds it's shared libraries.
-	  _LT_AC_TAGVAR(archive_expsym_cmds, $1)=&quot;\$CC $shared_flag&quot;' -o $output_objdir/$soname $libobjs $deplibs $compiler_flags ${wl}-bE:$export_symbols ${wl}-bnoentry${allow_undefined_flag}~$AR $AR_FLAGS $output_objdir/$libname$release.a $output_objdir/$soname'
+	  # This is similar to how AIX traditionally builds its shared libraries.
+	  _LT_AC_TAGVAR(archive_expsym_cmds, $1)=&quot;\$CC $shared_flag&quot;' -o $output_objdir/$soname $libobjs $deplibs ${wl}-bnoentry $compiler_flags ${wl}-bE:$export_symbols${allow_undefined_flag}~$AR $AR_FLAGS $output_objdir/$libname$release.a $output_objdir/$soname'
 	fi
       fi
       ;;
@@ -5696,7 +5885,7 @@
       ;;
 
     darwin* | rhapsody*)
-      case &quot;$host_os&quot; in
+      case $host_os in
         rhapsody* | darwin1.[[012]])
          _LT_AC_TAGVAR(allow_undefined_flag, $1)='${wl}-undefined ${wl}suppress'
          ;;
@@ -5725,7 +5914,7 @@
     	output_verbose_link_cmd='echo'
         _LT_AC_TAGVAR(archive_cmds, $1)='$CC -dynamiclib $allow_undefined_flag -o $lib $libobjs $deplibs $compiler_flags -install_name $rpath/$soname $verstring'
       _LT_AC_TAGVAR(module_cmds, $1)='$CC $allow_undefined_flag -o $lib -bundle $libobjs $deplibs$compiler_flags'
-      # Don't fix this by using the ld -exported_symbols_list flag, it doesn't exist in older darwin ld's
+      # Don't fix this by using the ld -exported_symbols_list flag, it doesn't exist in older darwin lds
       _LT_AC_TAGVAR(archive_expsym_cmds, $1)='sed -e &quot;s,#.*,,&quot; -e &quot;s,^[    ]*,,&quot; -e &quot;s,^\(..*\),_&amp;,&quot; &lt; $export_symbols &gt; $output_objdir/${libname}-symbols.expsym~$CC -dynamiclib $allow_undefined_flag -o $lib $libobjs $deplibs $compiler_flags -install_name $rpath/$soname $verstring~nmedit -s $output_objdir/${libname}-symbols.expsym ${lib}'
       _LT_AC_TAGVAR(module_expsym_cmds, $1)='sed -e &quot;s,#.*,,&quot; -e &quot;s,^[    ]*,,&quot; -e &quot;s,^\(..*\),_&amp;,&quot; &lt; $export_symbols &gt; $output_objdir/${libname}-symbols.expsym~$CC $allow_undefined_flag  -o $lib -bundle $libobjs $deplibs$compiler_flags~nmedit -s $output_objdir/${libname}-symbols.expsym ${lib}'
     else
@@ -5734,7 +5923,7 @@
          output_verbose_link_cmd='echo'
          _LT_AC_TAGVAR(archive_cmds, $1)='$CC -qmkshrobj $allow_undefined_flag -o $lib $libobjs $deplibs $compiler_flags ${wl}-install_name ${wl}`echo $rpath/$soname` $verstring'
          _LT_AC_TAGVAR(module_cmds, $1)='$CC $allow_undefined_flag -o $lib -bundle $libobjs $deplibs$compiler_flags'
-          # Don't fix this by using the ld -exported_symbols_list flag, it doesn't exist in older darwin ld's
+          # Don't fix this by using the ld -exported_symbols_list flag, it doesn't exist in older darwin lds
          _LT_AC_TAGVAR(archive_expsym_cmds, $1)='sed -e &quot;s,#.*,,&quot; -e &quot;s,^[    ]*,,&quot; -e &quot;s,^\(..*\),_&amp;,&quot; &lt; $export_symbols &gt; $output_objdir/${libname}-symbols.expsym~$CC -qmkshrobj $allow_undefined_flag -o $lib $libobjs $deplibs $compiler_flags ${wl}-install_name ${wl}$rpath/$soname $verstring~nmedit -s $output_objdir/${libname}-symbols.expsym ${lib}'
           _LT_AC_TAGVAR(module_expsym_cmds, $1)='sed -e &quot;s,#.*,,&quot; -e &quot;s,^[    ]*,,&quot; -e &quot;s,^\(..*\),_&amp;,&quot; &lt; $export_symbols &gt; $output_objdir/${libname}-symbols.expsym~$CC $allow_undefined_flag  -o $lib -bundle $libobjs $deplibs$compiler_flags~nmedit -s $output_objdir/${libname}-symbols.expsym ${lib}'
           ;;
@@ -5798,47 +5987,62 @@
       _LT_AC_TAGVAR(export_dynamic_flag_spec, $1)='${wl}-E'
       ;;
 
-    hpux10* | hpux11*)
+    hpux10*)
       if test &quot;$GCC&quot; = yes -a &quot;$with_gnu_ld&quot; = no; then
-	case &quot;$host_cpu&quot; in
-	hppa*64*|ia64*)
+	_LT_AC_TAGVAR(archive_cmds, $1)='$CC -shared -fPIC ${wl}+h ${wl}$soname ${wl}+b ${wl}$install_libdir -o $lib $libobjs $deplibs $compiler_flags'
+      else
+	_LT_AC_TAGVAR(archive_cmds, $1)='$LD -b +h $soname +b $install_libdir -o $lib $libobjs $deplibs $linker_flags'
+      fi
+      if test &quot;$with_gnu_ld&quot; = no; then
+	_LT_AC_TAGVAR(hardcode_libdir_flag_spec, $1)='${wl}+b ${wl}$libdir'
+	_LT_AC_TAGVAR(hardcode_libdir_separator, $1)=:
+
+	_LT_AC_TAGVAR(hardcode_direct, $1)=yes
+	_LT_AC_TAGVAR(export_dynamic_flag_spec, $1)='${wl}-E'
+
+	# hardcode_minus_L: Not really in the search PATH,
+	# but as the default location of the library.
+	_LT_AC_TAGVAR(hardcode_minus_L, $1)=yes
+      fi
+      ;;
+
+    hpux11*)
+      if test &quot;$GCC&quot; = yes -a &quot;$with_gnu_ld&quot; = no; then
+	case $host_cpu in
+	hppa*64*)
 	  _LT_AC_TAGVAR(archive_cmds, $1)='$CC -shared ${wl}+h ${wl}$soname -o $lib $libobjs $deplibs $compiler_flags'
 	  ;;
+	ia64*)
+	  _LT_AC_TAGVAR(archive_cmds, $1)='$CC -shared ${wl}+h ${wl}$soname ${wl}+nodefaultrpath -o $lib $libobjs $deplibs $compiler_flags'
+	  ;;
 	*)
 	  _LT_AC_TAGVAR(archive_cmds, $1)='$CC -shared -fPIC ${wl}+h ${wl}$soname ${wl}+b ${wl}$install_libdir -o $lib $libobjs $deplibs $compiler_flags'
 	  ;;
 	esac
       else
-	case &quot;$host_cpu&quot; in
-	hppa*64*|ia64*)
-	  _LT_AC_TAGVAR(archive_cmds, $1)='$LD -b +h $soname -o $lib $libobjs $deplibs $linker_flags'
+	case $host_cpu in
+	hppa*64*)
+	  _LT_AC_TAGVAR(archive_cmds, $1)='$CC -b ${wl}+h ${wl}$soname -o $lib $libobjs $deplibs $compiler_flags'
 	  ;;
+	ia64*)
+	  _LT_AC_TAGVAR(archive_cmds, $1)='$CC -b ${wl}+h ${wl}$soname ${wl}+nodefaultrpath -o $lib $libobjs $deplibs $compiler_flags'
+	  ;;
 	*)
-	  _LT_AC_TAGVAR(archive_cmds, $1)='$LD -b +h $soname +b $install_libdir -o $lib $libobjs $deplibs $linker_flags'
+	  _LT_AC_TAGVAR(archive_cmds, $1)='$CC -b ${wl}+h ${wl}$soname ${wl}+b ${wl}$install_libdir -o $lib $libobjs $deplibs $compiler_flags'
 	  ;;
 	esac
       fi
       if test &quot;$with_gnu_ld&quot; = no; then
-	case &quot;$host_cpu&quot; in
-	hppa*64*)
-	  _LT_AC_TAGVAR(hardcode_libdir_flag_spec, $1)='${wl}+b ${wl}$libdir'
+	_LT_AC_TAGVAR(hardcode_libdir_flag_spec, $1)='${wl}+b ${wl}$libdir'
+	_LT_AC_TAGVAR(hardcode_libdir_separator, $1)=:
+
+	case $host_cpu in
+	hppa*64*|ia64*)
 	  _LT_AC_TAGVAR(hardcode_libdir_flag_spec_ld, $1)='+b $libdir'
-	  _LT_AC_TAGVAR(hardcode_libdir_separator, $1)=:
 	  _LT_AC_TAGVAR(hardcode_direct, $1)=no
 	  _LT_AC_TAGVAR(hardcode_shlibpath_var, $1)=no
 	  ;;
-	ia64*)
-	  _LT_AC_TAGVAR(hardcode_libdir_flag_spec, $1)='-L$libdir'
-	  _LT_AC_TAGVAR(hardcode_direct, $1)=no
-	  _LT_AC_TAGVAR(hardcode_shlibpath_var, $1)=no
-
-	  # hardcode_minus_L: Not really in the search PATH,
-	  # but as the default location of the library.
-	  _LT_AC_TAGVAR(hardcode_minus_L, $1)=yes
-	  ;;
 	*)
-	  _LT_AC_TAGVAR(hardcode_libdir_flag_spec, $1)='${wl}+b ${wl}$libdir'
-	  _LT_AC_TAGVAR(hardcode_libdir_separator, $1)=:
 	  _LT_AC_TAGVAR(hardcode_direct, $1)=yes
 	  _LT_AC_TAGVAR(export_dynamic_flag_spec, $1)='${wl}-E'
 
@@ -5940,14 +6144,6 @@
       _LT_AC_TAGVAR(hardcode_libdir_separator, $1)=:
       ;;
 
-    sco3.2v5*)
-      _LT_AC_TAGVAR(archive_cmds, $1)='$LD -G -h $soname -o $lib $libobjs $deplibs $linker_flags'
-      _LT_AC_TAGVAR(hardcode_shlibpath_var, $1)=no
-      _LT_AC_TAGVAR(export_dynamic_flag_spec, $1)='${wl}-Bexport'
-      runpath_var=LD_RUN_PATH
-      hardcode_runpath_var=yes
-      ;;
-
     solaris*)
       _LT_AC_TAGVAR(no_undefined_flag, $1)=' -z text'
       if test &quot;$GCC&quot; = yes; then
@@ -6033,36 +6229,45 @@
       fi
       ;;
 
-    sysv4.2uw2*)
-      _LT_AC_TAGVAR(archive_cmds, $1)='$LD -G -o $lib $libobjs $deplibs $linker_flags'
-      _LT_AC_TAGVAR(hardcode_direct, $1)=yes
-      _LT_AC_TAGVAR(hardcode_minus_L, $1)=no
+    sysv4*uw2* | sysv5OpenUNIX* | sysv5UnixWare7.[[01]].[[10]]* | unixware7*)
+      _LT_AC_TAGVAR(no_undefined_flag, $1)='${wl}-z,text'
+      _LT_AC_TAGVAR(archive_cmds_need_lc, $1)=no
       _LT_AC_TAGVAR(hardcode_shlibpath_var, $1)=no
-      hardcode_runpath_var=yes
-      runpath_var=LD_RUN_PATH
-      ;;
+      runpath_var='LD_RUN_PATH'
 
-   sysv5OpenUNIX8* | sysv5UnixWare7* |  sysv5uw[[78]]* | unixware7*)
-      _LT_AC_TAGVAR(no_undefined_flag, $1)='${wl}-z ${wl}text'
       if test &quot;$GCC&quot; = yes; then
-	_LT_AC_TAGVAR(archive_cmds, $1)='$CC -shared ${wl}-h ${wl}$soname -o $lib $libobjs $deplibs $compiler_flags'
+	_LT_AC_TAGVAR(archive_cmds, $1)='$CC -shared ${wl}-h,$soname -o $lib $libobjs $deplibs $compiler_flags'
+	_LT_AC_TAGVAR(archive_expsym_cmds, $1)='$CC -shared ${wl}-Bexport:$export_symbols ${wl}-h,$soname -o $lib $libobjs $deplibs $compiler_flags'
       else
-	_LT_AC_TAGVAR(archive_cmds, $1)='$CC -G ${wl}-h ${wl}$soname -o $lib $libobjs $deplibs $compiler_flags'
+	_LT_AC_TAGVAR(archive_cmds, $1)='$CC -G ${wl}-h,$soname -o $lib $libobjs $deplibs $compiler_flags'
+	_LT_AC_TAGVAR(archive_expsym_cmds, $1)='$CC -G ${wl}-Bexport:$export_symbols ${wl}-h,$soname -o $lib $libobjs $deplibs $compiler_flags'
       fi
-      runpath_var='LD_RUN_PATH'
-      _LT_AC_TAGVAR(hardcode_shlibpath_var, $1)=no
       ;;
 
-    sysv5*)
-      _LT_AC_TAGVAR(no_undefined_flag, $1)=' -z text'
-      # $CC -shared without GNU ld will not create a library from C++
-      # object files and a static libstdc++, better avoid it by now
-      _LT_AC_TAGVAR(archive_cmds, $1)='$LD -G${allow_undefined_flag} -h $soname -o $lib $libobjs $deplibs $linker_flags'
-      _LT_AC_TAGVAR(archive_expsym_cmds, $1)='$echo &quot;{ global:&quot; &gt; $lib.exp~cat $export_symbols | $SED -e &quot;s/\(.*\)/\1;/&quot; &gt;&gt; $lib.exp~$echo &quot;local: *; };&quot; &gt;&gt; $lib.exp~
-  		$LD -G${allow_undefined_flag} -M $lib.exp -h $soname -o $lib $libobjs $deplibs $linker_flags~$rm $lib.exp'
-      _LT_AC_TAGVAR(hardcode_libdir_flag_spec, $1)=
+    sysv5* | sco3.2v5* | sco5v6*)
+      # Note: We can NOT use -z defs as we might desire, because we do not
+      # link with -lc, and that would cause any symbols used from libc to
+      # always be unresolved, which means just about no library would
+      # ever link correctly.  If we're not using GNU ld we use -z text
+      # though, which does catch some bad symbols but isn't as heavy-handed
+      # as -z defs.
+      _LT_AC_TAGVAR(no_undefined_flag, $1)='${wl}-z,text'
+      _LT_AC_TAGVAR(allow_undefined_flag, $1)='${wl}-z,nodefs'
+      _LT_AC_TAGVAR(archive_cmds_need_lc, $1)=no
       _LT_AC_TAGVAR(hardcode_shlibpath_var, $1)=no
+      _LT_AC_TAGVAR(hardcode_libdir_flag_spec, $1)='`test -z &quot;$SCOABSPATH&quot; &amp;&amp; echo ${wl}-R,$libdir`'
+      _LT_AC_TAGVAR(hardcode_libdir_separator, $1)=':'
+      _LT_AC_TAGVAR(link_all_deplibs, $1)=yes
+      _LT_AC_TAGVAR(export_dynamic_flag_spec, $1)='${wl}-Bexport'
       runpath_var='LD_RUN_PATH'
+
+      if test &quot;$GCC&quot; = yes; then
+	_LT_AC_TAGVAR(archive_cmds, $1)='$CC -shared ${wl}-h,\${SCOABSPATH:+${install_libdir}/}$soname -o $lib $libobjs $deplibs $compiler_flags'
+	_LT_AC_TAGVAR(archive_expsym_cmds, $1)='$CC -shared ${wl}-Bexport:$export_symbols ${wl}-h,\${SCOABSPATH:+${install_libdir}/}$soname -o $lib $libobjs $deplibs $compiler_flags'
+      else
+	_LT_AC_TAGVAR(archive_cmds, $1)='$CC -G ${wl}-h,\${SCOABSPATH:+${install_libdir}/}$soname -o $lib $libobjs $deplibs $compiler_flags'
+	_LT_AC_TAGVAR(archive_expsym_cmds, $1)='$CC -G ${wl}-Bexport:$export_symbols ${wl}-h,\${SCOABSPATH:+${install_libdir}/}$soname -o $lib $libobjs $deplibs $compiler_flags'
+      fi
       ;;
 
     uts4*)
@@ -6080,11 +6285,6 @@
 AC_MSG_RESULT([$_LT_AC_TAGVAR(ld_shlibs, $1)])
 test &quot;$_LT_AC_TAGVAR(ld_shlibs, $1)&quot; = no &amp;&amp; can_build_shared=no
 
-variables_saved_for_relink=&quot;PATH $shlibpath_var $runpath_var&quot;
-if test &quot;$GCC&quot; = yes; then
-  variables_saved_for_relink=&quot;$variables_saved_for_relink GCC_EXEC_PREFIX COMPILER_PATH LIBRARY_PATH&quot;
-fi
-
 #
 # Do we need to explicitly link libc?
 #
@@ -6112,6 +6312,7 @@
         libobjs=conftest.$ac_objext
         deplibs=
         wl=$_LT_AC_TAGVAR(lt_prog_compiler_wl, $1)
+	pic_flag=$_LT_AC_TAGVAR(lt_prog_compiler_pic, $1)
         compiler_flags=-v
         linker_flags=-v
         verstring=

Modified: trunk/config.guess
===================================================================
--- trunk/config.guess	2006-03-06 17:48:57 UTC (rev 256)
+++ trunk/config.guess	2006-03-06 18:46:28 UTC (rev 257)
@@ -1,9 +1,9 @@
 #! /bin/sh
 # Attempt to guess a canonical system name.
 #   Copyright (C) 1992, 1993, 1994, 1995, 1996, 1997, 1998, 1999,
-#   2000, 2001, 2002, 2003 Free Software Foundation, Inc.
+#   2000, 2001, 2002, 2003, 2004, 2005 Free Software Foundation, Inc.
 
-timestamp='2004-03-12'
+timestamp='2005-12-23'
 
 # This file is free software; you can redistribute it and/or modify it
 # under the terms of the GNU General Public License as published by
@@ -17,13 +17,15 @@
 #
 # You should have received a copy of the GNU General Public License
 # along with this program; if not, write to the Free Software
-# Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA 02111-1307, USA.
+# Foundation, Inc., 51 Franklin Street - Fifth Floor, Boston, MA
+# 02110-1301, USA.
 #
 # As a special exception to the GNU General Public License, if you
 # distribute this file as part of a program that contains a
 # configuration script generated by Autoconf, you may include it under
 # the same distribution terms that you use for the rest of that program.
 
+
 # Originally written by Per Bothner &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/openspace-svn">per at bothner.com</A>&gt;.
 # Please send patches to &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/openspace-svn">config-patches at gnu.org</A>&gt;.  Submit a context
 # diff and a properly formatted ChangeLog entry.
@@ -53,7 +55,7 @@
 GNU config.guess ($timestamp)
 
 Originally written by Per Bothner.
-Copyright (C) 1992, 1993, 1994, 1995, 1996, 1997, 1998, 1999, 2000, 2001
+Copyright (C) 1992, 1993, 1994, 1995, 1996, 1997, 1998, 1999, 2000, 2001, 2002, 2003, 2004, 2005
 Free Software Foundation, Inc.
 
 This is free software; see the source for copying conditions.  There is NO
@@ -66,11 +68,11 @@
 while test $# -gt 0 ; do
   case $1 in
     --time-stamp | --time* | -t )
-       echo &quot;$timestamp&quot; ; exit 0 ;;
+       echo &quot;$timestamp&quot; ; exit ;;
     --version | -v )
-       echo &quot;$version&quot; ; exit 0 ;;
+       echo &quot;$version&quot; ; exit ;;
     --help | --h* | -h )
-       echo &quot;$usage&quot;; exit 0 ;;
+       echo &quot;$usage&quot;; exit ;;
     -- )     # Stop option processing
        shift; break ;;
     - )	# Use stdin as input.
@@ -123,7 +125,7 @@
 	;;
  ,,*)   CC_FOR_BUILD=$CC ;;
  ,*,*)  CC_FOR_BUILD=$HOST_CC ;;
-esac ;'
+esac ; set_cc_for_build= ;'
 
 # This is needed to find uname on a Pyramid OSx when run in the BSD universe.
 # (<A HREF="https://lists.berlios.de/mailman/listinfo/openspace-svn">ghazi at noc.rutgers.edu</A> 1994-08-24)
@@ -136,6 +138,23 @@
 UNAME_SYSTEM=`(uname -s) 2&gt;/dev/null`  || UNAME_SYSTEM=unknown
 UNAME_VERSION=`(uname -v) 2&gt;/dev/null` || UNAME_VERSION=unknown
 
+if [ &quot;${UNAME_SYSTEM}&quot; = &quot;Linux&quot; ] ; then
+	eval $set_cc_for_build
+	cat &lt;&lt; EOF &gt; $dummy.c
+	#include &lt;features.h&gt;
+	#ifdef __UCLIBC__
+	# ifdef __UCLIBC_CONFIG_VERSION__
+	LIBC=uclibc __UCLIBC_CONFIG_VERSION__
+	# else
+	LIBC=uclibc
+	# endif
+	#else
+	LIBC=gnu
+	#endif
+EOF
+	eval `$CC_FOR_BUILD -E $dummy.c 2&gt;/dev/null | grep LIBC= | sed -e 's: ::g'`
+fi
+
 # Note: order is significant - the case branches are not exclusive.
 
 case &quot;${UNAME_MACHINE}:${UNAME_SYSTEM}:${UNAME_RELEASE}:${UNAME_VERSION}&quot; in
@@ -196,64 +215,20 @@
 	# contains redundant information, the shorter form:
 	# CPU_TYPE-MANUFACTURER-OPERATING_SYSTEM is used.
 	echo &quot;${machine}-${os}${release}&quot;
-	exit 0 ;;
-    amd64:OpenBSD:*:*)
-	echo x86_64-unknown-openbsd${UNAME_RELEASE}
-	exit 0 ;;
-    amiga:OpenBSD:*:*)
-	echo m68k-unknown-openbsd${UNAME_RELEASE}
-	exit 0 ;;
-    arc:OpenBSD:*:*)
-	echo mipsel-unknown-openbsd${UNAME_RELEASE}
-	exit 0 ;;
-    cats:OpenBSD:*:*)
-	echo arm-unknown-openbsd${UNAME_RELEASE}
-	exit 0 ;;
-    hp300:OpenBSD:*:*)
-	echo m68k-unknown-openbsd${UNAME_RELEASE}
-	exit 0 ;;
-    mac68k:OpenBSD:*:*)
-	echo m68k-unknown-openbsd${UNAME_RELEASE}
-	exit 0 ;;
-    macppc:OpenBSD:*:*)
-	echo powerpc-unknown-openbsd${UNAME_RELEASE}
-	exit 0 ;;
-    mvme68k:OpenBSD:*:*)
-	echo m68k-unknown-openbsd${UNAME_RELEASE}
-	exit 0 ;;
-    mvme88k:OpenBSD:*:*)
-	echo m88k-unknown-openbsd${UNAME_RELEASE}
-	exit 0 ;;
-    mvmeppc:OpenBSD:*:*)
-	echo powerpc-unknown-openbsd${UNAME_RELEASE}
-	exit 0 ;;
-    pegasos:OpenBSD:*:*)
-	echo powerpc-unknown-openbsd${UNAME_RELEASE}
-	exit 0 ;;
-    pmax:OpenBSD:*:*)
-	echo mipsel-unknown-openbsd${UNAME_RELEASE}
-	exit 0 ;;
-    sgi:OpenBSD:*:*)
-	echo mipseb-unknown-openbsd${UNAME_RELEASE}
-	exit 0 ;;
-    sun3:OpenBSD:*:*)
-	echo m68k-unknown-openbsd${UNAME_RELEASE}
-	exit 0 ;;
-    wgrisc:OpenBSD:*:*)
-	echo mipsel-unknown-openbsd${UNAME_RELEASE}
-	exit 0 ;;
+	exit ;;
     *:OpenBSD:*:*)
-	echo ${UNAME_MACHINE}-unknown-openbsd${UNAME_RELEASE}
-	exit 0 ;;
+	UNAME_MACHINE_ARCH=`arch | sed 's/OpenBSD.//'`
+	echo ${UNAME_MACHINE_ARCH}-unknown-openbsd${UNAME_RELEASE}
+	exit ;;
     *:ekkoBSD:*:*)
 	echo ${UNAME_MACHINE}-unknown-ekkobsd${UNAME_RELEASE}
-	exit 0 ;;
+	exit ;;
     macppc:MirBSD:*:*)
 	echo powerppc-unknown-mirbsd${UNAME_RELEASE}
-	exit 0 ;;
+	exit ;;
     *:MirBSD:*:*)
 	echo ${UNAME_MACHINE}-unknown-mirbsd${UNAME_RELEASE}
-	exit 0 ;;
+	exit ;;
     alpha:OSF1:*:*)
 	case $UNAME_RELEASE in
 	*4.0)
@@ -306,40 +281,43 @@
 	# A Xn.n version is an unreleased experimental baselevel.
 	# 1.2 uses &quot;1.2&quot; for uname -r.
 	echo ${UNAME_MACHINE}-dec-osf`echo ${UNAME_RELEASE} | sed -e 's/^[PVTX]//' | tr 'ABCDEFGHIJKLMNOPQRSTUVWXYZ' 'abcdefghijklmnopqrstuvwxyz'`
-	exit 0 ;;
-    Alpha*:OpenVMS:*:*)
-	echo alpha-hp-vms
-	exit 0 ;;
+	exit ;;
     Alpha\ *:Windows_NT*:*)
 	# How do we know it's Interix rather than the generic POSIX subsystem?
 	# Should we change UNAME_MACHINE based on the output of uname instead
 	# of the specific Alpha model?
 	echo alpha-pc-interix
-	exit 0 ;;
+	exit ;;
     21064:Windows_NT:50:3)
 	echo alpha-dec-winnt3.5
-	exit 0 ;;
+	exit ;;
     Amiga*:UNIX_System_V:4.0:*)
 	echo m68k-unknown-sysv4
-	exit 0;;
+	exit ;;
     *:[Aa]miga[Oo][Ss]:*:*)
 	echo ${UNAME_MACHINE}-unknown-amigaos
-	exit 0 ;;
+	exit ;;
     *:[Mm]orph[Oo][Ss]:*:*)
 	echo ${UNAME_MACHINE}-unknown-morphos
-	exit 0 ;;
+	exit ;;
     *:OS/390:*:*)
 	echo i370-ibm-openedition
-	exit 0 ;;
+	exit ;;
+    *:z/VM:*:*)
+	echo s390-ibm-zvmoe
+	exit ;;
     *:OS400:*:*)
         echo powerpc-ibm-os400
-	exit 0 ;;
+	exit ;;
     arm:RISC*:1.[012]*:*|arm:riscix:1.[012]*:*)
 	echo arm-acorn-riscix${UNAME_RELEASE}
-	exit 0;;
+	exit ;;
+    arm:riscos:*:*|arm:RISCOS:*:*)
+	echo arm-unknown-riscos
+	exit ;;
     SR2?01:HI-UX/MPP:*:* | SR8000:HI-UX/MPP:*:*)
 	echo hppa1.1-hitachi-hiuxmpp
-	exit 0;;
+	exit ;;
     Pyramid*:OSx*:*:* | MIS*:OSx*:*:* | MIS*:SMP_DC-OSx*:*:*)
 	# <A HREF="https://lists.berlios.de/mailman/listinfo/openspace-svn">akee at wpdis03.wpafb.af.mil</A> (Earle F. Ake) contributed MIS and NILE.
 	if test &quot;`(/bin/universe) 2&gt;/dev/null`&quot; = att ; then
@@ -347,32 +325,32 @@
 	else
 		echo pyramid-pyramid-bsd
 	fi
-	exit 0 ;;
+	exit ;;
     NILE*:*:*:dcosx)
 	echo pyramid-pyramid-svr4
-	exit 0 ;;
+	exit ;;
     DRS?6000:unix:4.0:6*)
 	echo sparc-icl-nx6
-	exit 0 ;;
-    DRS?6000:UNIX_SV:4.2*:7*)
+	exit ;;
+    DRS?6000:UNIX_SV:4.2*:7* | DRS?6000:isis:4.2*:7*)
 	case `/usr/bin/uname -p` in
-	    sparc) echo sparc-icl-nx7 &amp;&amp; exit 0 ;;
+	    sparc) echo sparc-icl-nx7; exit ;;
 	esac ;;
     sun4H:SunOS:5.*:*)
 	echo sparc-hal-solaris2`echo ${UNAME_RELEASE}|sed -e 's/[^.]*//'`
-	exit 0 ;;
+	exit ;;
     sun4*:SunOS:5.*:* | tadpole*:SunOS:5.*:*)
 	echo sparc-sun-solaris2`echo ${UNAME_RELEASE}|sed -e 's/[^.]*//'`
-	exit 0 ;;
+	exit ;;
     i86pc:SunOS:5.*:*)
 	echo i386-pc-solaris2`echo ${UNAME_RELEASE}|sed -e 's/[^.]*//'`
-	exit 0 ;;
+	exit ;;
     sun4*:SunOS:6*:*)
 	# According to config.sub, this is the proper way to canonicalize
 	# SunOS6.  Hard to guess exactly what SunOS6 will be like, but
 	# it's likely to be more like Solaris than SunOS4.
 	echo sparc-sun-solaris3`echo ${UNAME_RELEASE}|sed -e 's/[^.]*//'`
-	exit 0 ;;
+	exit ;;
     sun4*:SunOS:*:*)
 	case &quot;`/usr/bin/arch -k`&quot; in
 	    Series*|S4*)
@@ -381,10 +359,10 @@
 	esac
 	# Japanese Language versions have a version number like `4.1.3-JL'.
 	echo sparc-sun-sunos`echo ${UNAME_RELEASE}|sed -e 's/-/_/'`
-	exit 0 ;;
+	exit ;;
     sun3*:SunOS:*:*)
 	echo m68k-sun-sunos${UNAME_RELEASE}
-	exit 0 ;;
+	exit ;;
     sun*:*:4.2BSD:*)
 	UNAME_RELEASE=`(sed 1q /etc/motd | awk '{print substr($5,1,3)}') 2&gt;/dev/null`
 	test &quot;x${UNAME_RELEASE}&quot; = &quot;x&quot; &amp;&amp; UNAME_RELEASE=3
@@ -396,10 +374,10 @@
 		echo sparc-sun-sunos${UNAME_RELEASE}
 		;;
 	esac
-	exit 0 ;;
+	exit ;;
     aushp:SunOS:*:*)
 	echo sparc-auspex-sunos${UNAME_RELEASE}
-	exit 0 ;;
+	exit ;;
     # The situation for MiNT is a little confusing.  The machine name
     # can be virtually everything (everything which is not
     # &quot;atarist&quot; or &quot;atariste&quot; at least should have a processor
@@ -410,40 +388,40 @@
     # be no problem.
     atarist[e]:*MiNT:*:* | atarist[e]:*mint:*:* | atarist[e]:*TOS:*:*)
         echo m68k-atari-mint${UNAME_RELEASE}
-	exit 0 ;;
+	exit ;;
     atari*:*MiNT:*:* | atari*:*mint:*:* | atarist[e]:*TOS:*:*)
 	echo m68k-atari-mint${UNAME_RELEASE}
-        exit 0 ;;
+        exit ;;
     *falcon*:*MiNT:*:* | *falcon*:*mint:*:* | *falcon*:*TOS:*:*)
         echo m68k-atari-mint${UNAME_RELEASE}
-	exit 0 ;;
+	exit ;;
     milan*:*MiNT:*:* | milan*:*mint:*:* | *milan*:*TOS:*:*)
         echo m68k-milan-mint${UNAME_RELEASE}
-        exit 0 ;;
+        exit ;;
     hades*:*MiNT:*:* | hades*:*mint:*:* | *hades*:*TOS:*:*)
         echo m68k-hades-mint${UNAME_RELEASE}
-        exit 0 ;;
+        exit ;;
     *:*MiNT:*:* | *:*mint:*:* | *:*TOS:*:*)
         echo m68k-unknown-mint${UNAME_RELEASE}
-        exit 0 ;;
+        exit ;;
     m68k:machten:*:*)
 	echo m68k-apple-machten${UNAME_RELEASE}
-	exit 0 ;;
+	exit ;;
     powerpc:machten:*:*)
 	echo powerpc-apple-machten${UNAME_RELEASE}
-	exit 0 ;;
+	exit ;;
     RISC*:Mach:*:*)
 	echo mips-dec-mach_bsd4.3
-	exit 0 ;;
+	exit ;;
     RISC*:ULTRIX:*:*)
 	echo mips-dec-ultrix${UNAME_RELEASE}
-	exit 0 ;;
+	exit ;;
     VAX*:ULTRIX*:*:*)
 	echo vax-dec-ultrix${UNAME_RELEASE}
-	exit 0 ;;
+	exit ;;
     2020:CLIX:*:* | 2430:CLIX:*:*)
 	echo clipper-intergraph-clix${UNAME_RELEASE}
-	exit 0 ;;
+	exit ;;
     mips:*:*:UMIPS | mips:*:*:RISCos)
 	eval $set_cc_for_build
 	sed 's/^	//' &lt;&lt; EOF &gt;$dummy.c
@@ -467,32 +445,33 @@
 	  exit (-1);
 	}
 EOF
-	$CC_FOR_BUILD -o $dummy $dummy.c \
-	  &amp;&amp; $dummy `echo &quot;${UNAME_RELEASE}&quot; | sed -n 's/\([0-9]*\).*/\1/p'` \
-	  &amp;&amp; exit 0
+	$CC_FOR_BUILD -o $dummy $dummy.c &amp;&amp;
+	  dummyarg=`echo &quot;${UNAME_RELEASE}&quot; | sed -n 's/\([0-9]*\).*/\1/p'` &amp;&amp;
+	  SYSTEM_NAME=`$dummy $dummyarg` &amp;&amp;
+	    { echo &quot;$SYSTEM_NAME&quot;; exit; }
 	echo mips-mips-riscos${UNAME_RELEASE}
-	exit 0 ;;
+	exit ;;
     Motorola:PowerMAX_OS:*:*)
 	echo powerpc-motorola-powermax
-	exit 0 ;;
+	exit ;;
     Motorola:*:4.3:PL8-*)
 	echo powerpc-harris-powermax
-	exit 0 ;;
+	exit ;;
     Night_Hawk:*:*:PowerMAX_OS | Synergy:PowerMAX_OS:*:*)
 	echo powerpc-harris-powermax
-	exit 0 ;;
+	exit ;;
     Night_Hawk:Power_UNIX:*:*)
 	echo powerpc-harris-powerunix
-	exit 0 ;;
+	exit ;;
     m88k:CX/UX:7*:*)
 	echo m88k-harris-cxux7
-	exit 0 ;;
+	exit ;;
     m88k:*:4*:R4*)
 	echo m88k-motorola-sysv4
-	exit 0 ;;
+	exit ;;
     m88k:*:3*:R3*)
 	echo m88k-motorola-sysv3
-	exit 0 ;;
+	exit ;;
     AViiON:dgux:*:*)
         # DG/UX returns AViiON for all architectures
         UNAME_PROCESSOR=`/usr/bin/uname -p`
@@ -508,29 +487,29 @@
 	else
 	    echo i586-dg-dgux${UNAME_RELEASE}
 	fi
- 	exit 0 ;;
+ 	exit ;;
     M88*:DolphinOS:*:*)	# DolphinOS (SVR3)
 	echo m88k-dolphin-sysv3
-	exit 0 ;;
+	exit ;;
     M88*:*:R3*:*)
 	# Delta 88k system running SVR3
 	echo m88k-motorola-sysv3
-	exit 0 ;;
+	exit ;;
     XD88*:*:*:*) # Tektronix XD88 system running UTekV (SVR3)
 	echo m88k-tektronix-sysv3
-	exit 0 ;;
+	exit ;;
     Tek43[0-9][0-9]:UTek:*:*) # Tektronix 4300 system running UTek (BSD)
 	echo m68k-tektronix-bsd
-	exit 0 ;;
+	exit ;;
     *:IRIX*:*:*)
 	echo mips-sgi-irix`echo ${UNAME_RELEASE}|sed -e 's/-/_/g'`
-	exit 0 ;;
+	exit ;;
     ????????:AIX?:[12].1:2)   # AIX 2.2.1 or AIX 2.1.1 is RT/PC AIX.
-	echo romp-ibm-aix      # uname -m gives an 8 hex-code CPU id
-	exit 0 ;;              # Note that: echo &quot;'`uname -s`'&quot; gives 'AIX '
+	echo romp-ibm-aix     # uname -m gives an 8 hex-code CPU id
+	exit ;;               # Note that: echo &quot;'`uname -s`'&quot; gives 'AIX '
     i*86:AIX:*:*)
 	echo i386-ibm-aix
-	exit 0 ;;
+	exit ;;
     ia64:AIX:*:*)
 	if [ -x /usr/bin/oslevel ] ; then
 		IBM_REV=`/usr/bin/oslevel`
@@ -538,7 +517,7 @@
 		IBM_REV=${UNAME_VERSION}.${UNAME_RELEASE}
 	fi
 	echo ${UNAME_MACHINE}-ibm-aix${IBM_REV}
-	exit 0 ;;
+	exit ;;
     *:AIX:2:3)
 	if grep bos325 /usr/include/stdio.h &gt;/dev/null 2&gt;&amp;1; then
 		eval $set_cc_for_build
@@ -553,14 +532,18 @@
 			exit(0);
 			}
 EOF
-		$CC_FOR_BUILD -o $dummy $dummy.c &amp;&amp; $dummy &amp;&amp; exit 0
-		echo rs6000-ibm-aix3.2.5
+		if $CC_FOR_BUILD -o $dummy $dummy.c &amp;&amp; SYSTEM_NAME=`$dummy`
+		then
+			echo &quot;$SYSTEM_NAME&quot;
+		else
+			echo rs6000-ibm-aix3.2.5
+		fi
 	elif grep bos324 /usr/include/stdio.h &gt;/dev/null 2&gt;&amp;1; then
 		echo rs6000-ibm-aix3.2.4
 	else
 		echo rs6000-ibm-aix3.2
 	fi
-	exit 0 ;;
+	exit ;;
     *:AIX:*:[45])
 	IBM_CPU_ID=`/usr/sbin/lsdev -C -c processor -S available | sed 1q | awk '{ print $1 }'`
 	if /usr/sbin/lsattr -El ${IBM_CPU_ID} | grep ' POWER' &gt;/dev/null 2&gt;&amp;1; then
@@ -574,28 +557,28 @@
 		IBM_REV=${UNAME_VERSION}.${UNAME_RELEASE}
 	fi
 	echo ${IBM_ARCH}-ibm-aix${IBM_REV}
-	exit 0 ;;
+	exit ;;
     *:AIX:*:*)
 	echo rs6000-ibm-aix
-	exit 0 ;;
+	exit ;;
     ibmrt:4.4BSD:*|romp-ibm:BSD:*)
 	echo romp-ibm-bsd4.4
-	exit 0 ;;
+	exit ;;
     ibmrt:*BSD:*|romp-ibm:BSD:*)            # covers RT/PC BSD and
 	echo romp-ibm-bsd${UNAME_RELEASE}   # 4.3 with uname added to
-	exit 0 ;;                           # report: romp-ibm BSD 4.3
+	exit ;;                             # report: romp-ibm BSD 4.3
     *:BOSX:*:*)
 	echo rs6000-bull-bosx
-	exit 0 ;;
+	exit ;;
     DPX/2?00:B.O.S.:*:*)
 	echo m68k-bull-sysv3
-	exit 0 ;;
+	exit ;;
     9000/[34]??:4.3bsd:1.*:*)
 	echo m68k-hp-bsd
-	exit 0 ;;
+	exit ;;
     hp300:4.4BSD:*:* | 9000/[34]??:4.3bsd:2.*:*)
 	echo m68k-hp-bsd4.4
-	exit 0 ;;
+	exit ;;
     9000/[34678]??:HP-UX:*:*)
 	HPUX_REV=`echo ${UNAME_RELEASE}|sed -e 's/[^.]*.[0B]*//'`
 	case &quot;${UNAME_MACHINE}&quot; in
@@ -657,9 +640,19 @@
 	esac
 	if [ ${HP_ARCH} = &quot;hppa2.0w&quot; ]
 	then
-	    # avoid double evaluation of $set_cc_for_build
-	    test -n &quot;$CC_FOR_BUILD&quot; || eval $set_cc_for_build
-	    if echo __LP64__ | (CCOPTS= $CC_FOR_BUILD -E -) | grep __LP64__ &gt;/dev/null
+	    eval $set_cc_for_build
+
+	    # hppa2.0w-hp-hpux* has a 64-bit kernel and a compiler generating
+	    # 32-bit code.  hppa64-hp-hpux* has the same kernel and a compiler
+	    # generating 64-bit code.  GNU and HP use different nomenclature:
+	    #
+	    # $ CC_FOR_BUILD=cc ./config.guess
+	    # =&gt; hppa2.0w-hp-hpux11.23
+	    # $ CC_FOR_BUILD=&quot;cc +DA2.0w&quot; ./config.guess
+	    # =&gt; hppa64-hp-hpux11.23
+
+	    if echo __LP64__ | (CCOPTS= $CC_FOR_BUILD -E - 2&gt;/dev/null) |
+		grep __LP64__ &gt;/dev/null
 	    then
 		HP_ARCH=&quot;hppa2.0w&quot;
 	    else
@@ -667,11 +660,11 @@
 	    fi
 	fi
 	echo ${HP_ARCH}-hp-hpux${HPUX_REV}
-	exit 0 ;;
+	exit ;;
     ia64:HP-UX:*:*)
 	HPUX_REV=`echo ${UNAME_RELEASE}|sed -e 's/[^.]*.[0B]*//'`
 	echo ia64-hp-hpux${HPUX_REV}
-	exit 0 ;;
+	exit ;;
     3050*:HI-UX:*:*)
 	eval $set_cc_for_build
 	sed 's/^	//' &lt;&lt; EOF &gt;$dummy.c
@@ -699,166 +692,171 @@
 	  exit (0);
 	}
 EOF
-	$CC_FOR_BUILD -o $dummy $dummy.c &amp;&amp; $dummy &amp;&amp; exit 0
+	$CC_FOR_BUILD -o $dummy $dummy.c &amp;&amp; SYSTEM_NAME=`$dummy` &amp;&amp;
+		{ echo &quot;$SYSTEM_NAME&quot;; exit; }
 	echo unknown-hitachi-hiuxwe2
-	exit 0 ;;
+	exit ;;
     9000/7??:4.3bsd:*:* | 9000/8?[79]:4.3bsd:*:* )
 	echo hppa1.1-hp-bsd
-	exit 0 ;;
+	exit ;;
     9000/8??:4.3bsd:*:*)
 	echo hppa1.0-hp-bsd
-	exit 0 ;;
+	exit ;;
     *9??*:MPE/iX:*:* | *3000*:MPE/iX:*:*)
 	echo hppa1.0-hp-mpeix
-	exit 0 ;;
+	exit ;;
     hp7??:OSF1:*:* | hp8?[79]:OSF1:*:* )
 	echo hppa1.1-hp-osf
-	exit 0 ;;
+	exit ;;
     hp8??:OSF1:*:*)
 	echo hppa1.0-hp-osf
-	exit 0 ;;
+	exit ;;
     i*86:OSF1:*:*)
 	if [ -x /usr/sbin/sysversion ] ; then
 	    echo ${UNAME_MACHINE}-unknown-osf1mk
 	else
 	    echo ${UNAME_MACHINE}-unknown-osf1
 	fi
-	exit 0 ;;
+	exit ;;
     parisc*:Lites*:*:*)
 	echo hppa1.1-hp-lites
-	exit 0 ;;
+	exit ;;
     C1*:ConvexOS:*:* | convex:ConvexOS:C1*:*)
 	echo c1-convex-bsd
-        exit 0 ;;
+        exit ;;
     C2*:ConvexOS:*:* | convex:ConvexOS:C2*:*)
 	if getsysinfo -f scalar_acc
 	then echo c32-convex-bsd
 	else echo c2-convex-bsd
 	fi
-        exit 0 ;;
+        exit ;;
     C34*:ConvexOS:*:* | convex:ConvexOS:C34*:*)
 	echo c34-convex-bsd
-        exit 0 ;;
+        exit ;;
     C38*:ConvexOS:*:* | convex:ConvexOS:C38*:*)
 	echo c38-convex-bsd
-        exit 0 ;;
+        exit ;;
     C4*:ConvexOS:*:* | convex:ConvexOS:C4*:*)
 	echo c4-convex-bsd
-        exit 0 ;;
+        exit ;;
     CRAY*Y-MP:*:*:*)
 	echo ymp-cray-unicos${UNAME_RELEASE} | sed -e 's/\.[^.]*$/.X/'
-	exit 0 ;;
+	exit ;;
     CRAY*[A-Z]90:*:*:*)
 	echo ${UNAME_MACHINE}-cray-unicos${UNAME_RELEASE} \
 	| sed -e 's/CRAY.*\([A-Z]90\)/\1/' \
 	      -e y/ABCDEFGHIJKLMNOPQRSTUVWXYZ/abcdefghijklmnopqrstuvwxyz/ \
 	      -e 's/\.[^.]*$/.X/'
-	exit 0 ;;
+	exit ;;
     CRAY*TS:*:*:*)
 	echo t90-cray-unicos${UNAME_RELEASE} | sed -e 's/\.[^.]*$/.X/'
-	exit 0 ;;
+	exit ;;
     CRAY*T3E:*:*:*)
 	echo alphaev5-cray-unicosmk${UNAME_RELEASE} | sed -e 's/\.[^.]*$/.X/'
-	exit 0 ;;
+	exit ;;
     CRAY*SV1:*:*:*)
 	echo sv1-cray-unicos${UNAME_RELEASE} | sed -e 's/\.[^.]*$/.X/'
-	exit 0 ;;
+	exit ;;
     *:UNICOS/mp:*:*)
-	echo nv1-cray-unicosmp${UNAME_RELEASE} | sed -e 's/\.[^.]*$/.X/'
-	exit 0 ;;
+	echo craynv-cray-unicosmp${UNAME_RELEASE} | sed -e 's/\.[^.]*$/.X/'
+	exit ;;
     F30[01]:UNIX_System_V:*:* | F700:UNIX_System_V:*:*)
 	FUJITSU_PROC=`uname -m | tr 'ABCDEFGHIJKLMNOPQRSTUVWXYZ' 'abcdefghijklmnopqrstuvwxyz'`
         FUJITSU_SYS=`uname -p | tr 'ABCDEFGHIJKLMNOPQRSTUVWXYZ' 'abcdefghijklmnopqrstuvwxyz' | sed -e 's/\///'`
         FUJITSU_REL=`echo ${UNAME_RELEASE} | sed -e 's/ /_/'`
         echo &quot;${FUJITSU_PROC}-fujitsu-${FUJITSU_SYS}${FUJITSU_REL}&quot;
-        exit 0 ;;
+        exit ;;
     5000:UNIX_System_V:4.*:*)
         FUJITSU_SYS=`uname -p | tr 'ABCDEFGHIJKLMNOPQRSTUVWXYZ' 'abcdefghijklmnopqrstuvwxyz' | sed -e 's/\///'`
         FUJITSU_REL=`echo ${UNAME_RELEASE} | tr 'ABCDEFGHIJKLMNOPQRSTUVWXYZ' 'abcdefghijklmnopqrstuvwxyz' | sed -e 's/ /_/'`
         echo &quot;sparc-fujitsu-${FUJITSU_SYS}${FUJITSU_REL}&quot;
-	exit 0 ;;
+	exit ;;
     i*86:BSD/386:*:* | i*86:BSD/OS:*:* | *:Ascend\ Embedded/OS:*:*)
 	echo ${UNAME_MACHINE}-pc-bsdi${UNAME_RELEASE}
-	exit 0 ;;
+	exit ;;
     sparc*:BSD/OS:*:*)
 	echo sparc-unknown-bsdi${UNAME_RELEASE}
-	exit 0 ;;
+	exit ;;
     *:BSD/OS:*:*)
 	echo ${UNAME_MACHINE}-unknown-bsdi${UNAME_RELEASE}
-	exit 0 ;;
+	exit ;;
     *:FreeBSD:*:*)
-	# Determine whether the default compiler uses glibc.
-	eval $set_cc_for_build
-	sed 's/^	//' &lt;&lt; EOF &gt;$dummy.c
-	#include &lt;features.h&gt;
-	#if __GLIBC__ &gt;= 2
-	LIBC=gnu
-	#else
-	LIBC=
-	#endif
-EOF
-	eval `$CC_FOR_BUILD -E $dummy.c 2&gt;/dev/null | grep ^LIBC=`
-	# GNU/KFreeBSD systems have a &quot;k&quot; prefix to indicate we are using
-	# FreeBSD's kernel, but not the complete OS.
-	case ${LIBC} in gnu) kernel_only='k' ;; esac
-	echo ${UNAME_MACHINE}-unknown-${kernel_only}freebsd`echo ${UNAME_RELEASE}|sed -e 's/[-(].*//'`${LIBC:+-$LIBC}
-	exit 0 ;;
+	case ${UNAME_MACHINE} in
+	    pc98)
+		echo i386-unknown-freebsd`echo ${UNAME_RELEASE}|sed -e 's/[-(].*//'` ;;
+	    *)
+		echo ${UNAME_MACHINE}-unknown-freebsd`echo ${UNAME_RELEASE}|sed -e 's/[-(].*//'` ;;
+	esac
+	exit ;;
     i*:CYGWIN*:*)
 	echo ${UNAME_MACHINE}-pc-cygwin
-	exit 0 ;;
+	exit ;;
     i*:MINGW*:*)
 	echo ${UNAME_MACHINE}-pc-mingw32
-	exit 0 ;;
+	exit ;;
+    i*:windows32*:*)
+    	# uname -m includes &quot;-pc&quot; on this system.
+    	echo ${UNAME_MACHINE}-mingw32
+	exit ;;
     i*:PW*:*)
 	echo ${UNAME_MACHINE}-pc-pw32
-	exit 0 ;;
-    x86:Interix*:[34]*)
+	exit ;;
+    x86:Interix*:[345]*)
 	echo i586-pc-interix${UNAME_RELEASE}|sed -e 's/\..*//'
-	exit 0 ;;
+	exit ;;
     [345]86:Windows_95:* | [345]86:Windows_98:* | [345]86:Windows_NT:*)
 	echo i${UNAME_MACHINE}-pc-mks
-	exit 0 ;;
+	exit ;;
     i*:Windows_NT*:* | Pentium*:Windows_NT*:*)
 	# How do we know it's Interix rather than the generic POSIX subsystem?
 	# It also conflicts with pre-2.0 versions of AT&amp;T UWIN. Should we
 	# UNAME_MACHINE based on the output of uname instead of i386?
 	echo i586-pc-interix
-	exit 0 ;;
+	exit ;;
     i*:UWIN*:*)
 	echo ${UNAME_MACHINE}-pc-uwin
-	exit 0 ;;
+	exit ;;
+    amd64:CYGWIN*:*:* | x86_64:CYGWIN*:*:*)
+	echo x86_64-unknown-cygwin
+	exit ;;
     p*:CYGWIN*:*)
 	echo powerpcle-unknown-cygwin
-	exit 0 ;;
+	exit ;;
     prep*:SunOS:5.*:*)
 	echo powerpcle-unknown-solaris2`echo ${UNAME_RELEASE}|sed -e 's/[^.]*//'`
-	exit 0 ;;
+	exit ;;
     *:GNU:*:*)
 	# the GNU system
 	echo `echo ${UNAME_MACHINE}|sed -e 's,[-/].*$,,'`-unknown-gnu`echo ${UNAME_RELEASE}|sed -e 's,/.*$,,'`
-	exit 0 ;;
+	exit ;;
     *:GNU/*:*:*)
 	# other systems with GNU libc and userland
 	echo ${UNAME_MACHINE}-unknown-`echo ${UNAME_SYSTEM} | sed 's,^[^/]*/,,' | tr '[A-Z]' '[a-z]'``echo ${UNAME_RELEASE}|sed -e 's/[-(].*//'`-gnu
-	exit 0 ;;
+	exit ;;
     i*86:Minix:*:*)
 	echo ${UNAME_MACHINE}-pc-minix
-	exit 0 ;;
+	exit ;;
     arm*:Linux:*:*)
-	echo ${UNAME_MACHINE}-unknown-linux-gnu
-	exit 0 ;;
+	echo ${UNAME_MACHINE}-unknown-linux-${LIBC}
+	exit ;;
     cris:Linux:*:*)
-	echo cris-axis-linux-gnu
-	exit 0 ;;
+	echo cris-axis-linux-${LIBC}
+	exit ;;
+    crisv32:Linux:*:*)
+	echo crisv32-axis-linux-${LIBC}
+	exit ;;
+    frv:Linux:*:*)
+    	echo frv-unknown-linux-${LIBC}
+	exit ;;
     ia64:Linux:*:*)
-	echo ${UNAME_MACHINE}-unknown-linux-gnu
-	exit 0 ;;
+	echo ${UNAME_MACHINE}-unknown-linux-${LIBC}
+	exit ;;
     m32r*:Linux:*:*)
-	echo ${UNAME_MACHINE}-unknown-linux-gnu
-	exit 0 ;;
+	echo ${UNAME_MACHINE}-unknown-linux-${LIBC}
+	exit ;;
     m68*:Linux:*:*)
-	echo ${UNAME_MACHINE}-unknown-linux-gnu
-	exit 0 ;;
+	echo ${UNAME_MACHINE}-unknown-linux-${LIBC}
+	exit ;;
     mips:Linux:*:*)
 	eval $set_cc_for_build
 	sed 's/^	//' &lt;&lt; EOF &gt;$dummy.c
@@ -875,8 +873,8 @@
 	#endif
 	#endif
 EOF
-	eval `$CC_FOR_BUILD -E $dummy.c 2&gt;/dev/null | grep ^CPU=`
-	test x&quot;${CPU}&quot; != x &amp;&amp; echo &quot;${CPU}-unknown-linux-gnu&quot; &amp;&amp; exit 0
+	eval &quot;`$CC_FOR_BUILD -E $dummy.c 2&gt;/dev/null | sed -n '/^CPU/{s: ::g;p;}'`&quot;
+	test x&quot;${CPU}&quot; != x &amp;&amp; { echo &quot;${CPU}-unknown-linux-${LIBC}&quot;; exit; }
 	;;
     mips64:Linux:*:*)
 	eval $set_cc_for_build
@@ -894,15 +892,18 @@
 	#endif
 	#endif
 EOF
-	eval `$CC_FOR_BUILD -E $dummy.c 2&gt;/dev/null | grep ^CPU=`
-	test x&quot;${CPU}&quot; != x &amp;&amp; echo &quot;${CPU}-unknown-linux-gnu&quot; &amp;&amp; exit 0
+	eval &quot;`$CC_FOR_BUILD -E $dummy.c 2&gt;/dev/null | sed -n '/^CPU/{s: ::g;p;}'`&quot;
+	test x&quot;${CPU}&quot; != x &amp;&amp; { echo &quot;${CPU}-unknown-linux-${LIBC}&quot;; exit; }
 	;;
+    or32:Linux:*:*)
+	echo or32-unknown-linux-${LIBC}
+	exit ;;
     ppc:Linux:*:*)
-	echo powerpc-unknown-linux-gnu
-	exit 0 ;;
+	echo powerpc-unknown-linux-${LIBC}
+	exit ;;
     ppc64:Linux:*:*)
-	echo powerpc64-unknown-linux-gnu
-	exit 0 ;;
+	echo powerpc64-unknown-linux-${LIBC}
+	exit ;;
     alpha:Linux:*:*)
 	case `sed -n '/^cpu model/s/^.*: \(.*\)/\1/p' &lt; /proc/cpuinfo` in
 	  EV5)   UNAME_MACHINE=alphaev5 ;;
@@ -914,35 +915,38 @@
 	  EV68*) UNAME_MACHINE=alphaev68 ;;
         esac
 	objdump --private-headers /bin/sh | grep ld.so.1 &gt;/dev/null
-	if test &quot;$?&quot; = 0 ; then LIBC=&quot;libc1&quot; ; else LIBC=&quot;&quot; ; fi
-	echo ${UNAME_MACHINE}-unknown-linux-gnu${LIBC}
-	exit 0 ;;
+	if test &quot;$?&quot; = 0 ; then LIBC=&quot;gnulibc1&quot; ; fi
+	echo ${UNAME_MACHINE}-unknown-linux-${LIBC}
+	exit ;;
     parisc:Linux:*:* | hppa:Linux:*:*)
 	# Look for CPU level
 	case `grep '^cpu[^a-z]*:' /proc/cpuinfo 2&gt;/dev/null | cut -d' ' -f2` in
-	  PA7*) echo hppa1.1-unknown-linux-gnu ;;
-	  PA8*) echo hppa2.0-unknown-linux-gnu ;;
-	  *)    echo hppa-unknown-linux-gnu ;;
+	  PA7*) echo hppa1.1-unknown-linux-${LIBC} ;;
+	  PA8*) echo hppa2.0-unknown-linux-${LIBC} ;;
+	  *)    echo hppa-unknown-linux-${LIBC} ;;
 	esac
-	exit 0 ;;
+	exit ;;
     parisc64:Linux:*:* | hppa64:Linux:*:*)
-	echo hppa64-unknown-linux-gnu
-	exit 0 ;;
+	echo hppa64-unknown-linux-${LIBC}
+	exit ;;
     s390:Linux:*:* | s390x:Linux:*:*)
 	echo ${UNAME_MACHINE}-ibm-linux
-	exit 0 ;;
+	exit ;;
     sh64*:Linux:*:*)
-    	echo ${UNAME_MACHINE}-unknown-linux-gnu
-	exit 0 ;;
+	echo ${UNAME_MACHINE}-unknown-linux-${LIBC}
+	exit ;;
     sh*:Linux:*:*)
-	echo ${UNAME_MACHINE}-unknown-linux-gnu
-	exit 0 ;;
+	echo ${UNAME_MACHINE}-unknown-linux-${LIBC}
+	exit ;;
     sparc:Linux:*:* | sparc64:Linux:*:*)
-	echo ${UNAME_MACHINE}-unknown-linux-gnu
-	exit 0 ;;
+	echo ${UNAME_MACHINE}-unknown-linux-${LIBC}
+	exit ;;
+    vax:Linux:*:*)
+	echo ${UNAME_MACHINE}-dec-linux-${LIBC}
+	exit ;;
     x86_64:Linux:*:*)
-	echo x86_64-unknown-linux-gnu
-	exit 0 ;;
+	echo x86_64-unknown-linux-${LIBC}
+	exit ;;
     i*86:Linux:*:*)
 	# The BFD linker knows what the default object file format is, so
 	# first see if it will tell us. cd to the root directory to prevent
@@ -956,20 +960,22 @@
 				    p'`
         case &quot;$ld_supported_targets&quot; in
 	  elf32-i386)
-		TENTATIVE=&quot;${UNAME_MACHINE}-pc-linux-gnu&quot;
+		TENTATIVE=&quot;${UNAME_MACHINE}-pc-linux-${LIBC}&quot;
 		;;
 	  a.out-i386-linux)
-		echo &quot;${UNAME_MACHINE}-pc-linux-gnuaout&quot;
-		exit 0 ;;
+		echo &quot;${UNAME_MACHINE}-pc-linux-${LIBC}aout&quot;
+		exit ;;
 	  coff-i386)
-		echo &quot;${UNAME_MACHINE}-pc-linux-gnucoff&quot;
-		exit 0 ;;
+		echo &quot;${UNAME_MACHINE}-pc-linux-${LIBC}coff&quot;
+		exit ;;
 	  &quot;&quot;)
 		# Either a pre-BFD a.out linker (linux-gnuoldld) or
 		# one that does not give us useful --help.
-		echo &quot;${UNAME_MACHINE}-pc-linux-gnuoldld&quot;
-		exit 0 ;;
+		echo &quot;${UNAME_MACHINE}-pc-linux-${LIBC}oldld&quot;
+		exit ;;
 	esac
+	# This should get integrated into the C code below, but now we hack
+	if [ &quot;$LIBC&quot; != &quot;gnu&quot; ] ; then echo &quot;$TENTATIVE&quot; &amp;&amp; exit 0 ; fi
 	# Determine whether the default compiler is a.out or elf
 	eval $set_cc_for_build
 	sed 's/^	//' &lt;&lt; EOF &gt;$dummy.c
@@ -985,7 +991,7 @@
 	LIBC=gnulibc1
 	# endif
 	#else
-	#ifdef __INTEL_COMPILER
+	#if defined(__INTEL_COMPILER) || defined(__PGI)
 	LIBC=gnu
 	#else
 	LIBC=gnuaout
@@ -995,16 +1001,19 @@
 	LIBC=dietlibc
 	#endif
 EOF
-	eval `$CC_FOR_BUILD -E $dummy.c 2&gt;/dev/null | grep ^LIBC=`
-	test x&quot;${LIBC}&quot; != x &amp;&amp; echo &quot;${UNAME_MACHINE}-pc-linux-${LIBC}&quot; &amp;&amp; exit 0
-	test x&quot;${TENTATIVE}&quot; != x &amp;&amp; echo &quot;${TENTATIVE}&quot; &amp;&amp; exit 0
+	eval &quot;`$CC_FOR_BUILD -E $dummy.c 2&gt;/dev/null | sed -n '/^LIBC/{s: ::g;p;}'`&quot;
+	test x&quot;${LIBC}&quot; != x &amp;&amp; {
+		echo &quot;${UNAME_MACHINE}-pc-linux-${LIBC}&quot;
+		exit
+	}
+	test x&quot;${TENTATIVE}&quot; != x &amp;&amp; { echo &quot;${TENTATIVE}&quot;; exit; }
 	;;
     i*86:DYNIX/ptx:4*:*)
 	# ptx 4.0 does uname -s correctly, with DYNIX/ptx in there.
 	# earlier versions are messed up and put the nodename in both
 	# sysname and nodename.
 	echo i386-sequent-sysv4
-	exit 0 ;;
+	exit ;;
     i*86:UNIX_SV:4.2MP:2.*)
         # Unixware is an offshoot of SVR4, but it has its own version
         # number series starting with 2...
@@ -1012,27 +1021,27 @@
 	# I just have to hope.  -- rms.
         # Use sysv4.2uw... so that sysv4* matches it.
 	echo ${UNAME_MACHINE}-pc-sysv4.2uw${UNAME_VERSION}
-	exit 0 ;;
+	exit ;;
     i*86:OS/2:*:*)
 	# If we were able to find `uname', then EMX Unix compatibility
 	# is probably installed.
 	echo ${UNAME_MACHINE}-pc-os2-emx
-	exit 0 ;;
+	exit ;;
     i*86:XTS-300:*:STOP)
 	echo ${UNAME_MACHINE}-unknown-stop
-	exit 0 ;;
+	exit ;;
     i*86:atheos:*:*)
 	echo ${UNAME_MACHINE}-unknown-atheos
-	exit 0 ;;
-	i*86:syllable:*:*)
+	exit ;;
+    i*86:syllable:*:*)
 	echo ${UNAME_MACHINE}-pc-syllable
-	exit 0 ;;
+	exit ;;
     i*86:LynxOS:2.*:* | i*86:LynxOS:3.[01]*:* | i*86:LynxOS:4.0*:*)
 	echo i386-unknown-lynxos${UNAME_RELEASE}
-	exit 0 ;;
+	exit ;;
     i*86:*DOS:*:*)
 	echo ${UNAME_MACHINE}-pc-msdosdjgpp
-	exit 0 ;;
+	exit ;;
     i*86:*:4.*:* | i*86:SYSTEM_V:4.*:*)
 	UNAME_REL=`echo ${UNAME_RELEASE} | sed 's/\/MP$//'`
 	if grep Novell /usr/include/link.h &gt;/dev/null 2&gt;/dev/null; then
@@ -1040,15 +1049,16 @@
 	else
 		echo ${UNAME_MACHINE}-pc-sysv${UNAME_REL}
 	fi
-	exit 0 ;;
-    i*86:*:5:[78]*)
+	exit ;;
+    i*86:*:5:[678]*)
+    	# UnixWare 7.x, OpenUNIX and OpenServer 6.
 	case `/bin/uname -X | grep &quot;^Machine&quot;` in
 	    *486*)	     UNAME_MACHINE=i486 ;;
 	    *Pentium)	     UNAME_MACHINE=i586 ;;
 	    *Pent*|*Celeron) UNAME_MACHINE=i686 ;;
 	esac
 	echo ${UNAME_MACHINE}-unknown-sysv${UNAME_RELEASE}${UNAME_SYSTEM}${UNAME_VERSION}
-	exit 0 ;;
+	exit ;;
     i*86:*:3.2:*)
 	if test -f /usr/options/cb.name; then
 		UNAME_REL=`sed -n 's/.*Version //p' &lt;/usr/options/cb.name`
@@ -1066,73 +1076,73 @@
 	else
 		echo ${UNAME_MACHINE}-pc-sysv32
 	fi
-	exit 0 ;;
+	exit ;;
     pc:*:*:*)
 	# Left here for compatibility:
         # uname -m prints for DJGPP always 'pc', but it prints nothing about
         # the processor, so we play safe by assuming i386.
 	echo i386-pc-msdosdjgpp
-        exit 0 ;;
+        exit ;;
     Intel:Mach:3*:*)
 	echo i386-pc-mach3
-	exit 0 ;;
+	exit ;;
     paragon:*:*:*)
 	echo i860-intel-osf1
-	exit 0 ;;
+	exit ;;
     i860:*:4.*:*) # i860-SVR4
 	if grep Stardent /usr/include/sys/uadmin.h &gt;/dev/null 2&gt;&amp;1 ; then
 	  echo i860-stardent-sysv${UNAME_RELEASE} # Stardent Vistra i860-SVR4
 	else # Add other i860-SVR4 vendors below as they are discovered.
 	  echo i860-unknown-sysv${UNAME_RELEASE}  # Unknown i860-SVR4
 	fi
-	exit 0 ;;
+	exit ;;
     mini*:CTIX:SYS*5:*)
 	# &quot;miniframe&quot;
 	echo m68010-convergent-sysv
-	exit 0 ;;
+	exit ;;
     mc68k:UNIX:SYSTEM5:3.51m)
 	echo m68k-convergent-sysv
-	exit 0 ;;
+	exit ;;
     M680?0:D-NIX:5.3:*)
 	echo m68k-diab-dnix
-	exit 0 ;;
-    M68*:*:R3V[567]*:*)
-	test -r /sysV68 &amp;&amp; echo 'm68k-motorola-sysv' &amp;&amp; exit 0 ;;
-    3[345]??:*:4.0:3.0 | 3[34]??A:*:4.0:3.0 | 3[34]??,*:*:4.0:3.0 | 3[34]??/*:*:4.0:3.0 | 4400:*:4.0:3.0 | 4850:*:4.0:3.0 | SKA40:*:4.0:3.0 | SDS2:*:4.0:3.0 | SHG2:*:4.0:3.0)
+	exit ;;
+    M68*:*:R3V[5678]*:*)
+	test -r /sysV68 &amp;&amp; { echo 'm68k-motorola-sysv'; exit; } ;;
+    3[345]??:*:4.0:3.0 | 3[34]??A:*:4.0:3.0 | 3[34]??,*:*:4.0:3.0 | 3[34]??/*:*:4.0:3.0 | 4400:*:4.0:3.0 | 4850:*:4.0:3.0 | SKA40:*:4.0:3.0 | SDS2:*:4.0:3.0 | SHG2:*:4.0:3.0 | S7501*:*:4.0:3.0)
 	OS_REL=''
 	test -r /etc/.relid \
 	&amp;&amp; OS_REL=.`sed -n 's/[^ ]* [^ ]* \([0-9][0-9]\).*/\1/p' &lt; /etc/.relid`
 	/bin/uname -p 2&gt;/dev/null | grep 86 &gt;/dev/null \
-	  &amp;&amp; echo i486-ncr-sysv4.3${OS_REL} &amp;&amp; exit 0
+	  &amp;&amp; { echo i486-ncr-sysv4.3${OS_REL}; exit; }
 	/bin/uname -p 2&gt;/dev/null | /bin/grep entium &gt;/dev/null \
-	  &amp;&amp; echo i586-ncr-sysv4.3${OS_REL} &amp;&amp; exit 0 ;;
+	  &amp;&amp; { echo i586-ncr-sysv4.3${OS_REL}; exit; } ;;
     3[34]??:*:4.0:* | 3[34]??,*:*:4.0:*)
         /bin/uname -p 2&gt;/dev/null | grep 86 &gt;/dev/null \
-          &amp;&amp; echo i486-ncr-sysv4 &amp;&amp; exit 0 ;;
+          &amp;&amp; { echo i486-ncr-sysv4; exit; } ;;
     m68*:LynxOS:2.*:* | m68*:LynxOS:3.0*:*)
 	echo m68k-unknown-lynxos${UNAME_RELEASE}
-	exit 0 ;;
+	exit ;;
     mc68030:UNIX_System_V:4.*:*)
 	echo m68k-atari-sysv4
-	exit 0 ;;
+	exit ;;
     TSUNAMI:LynxOS:2.*:*)
 	echo sparc-unknown-lynxos${UNAME_RELEASE}
-	exit 0 ;;
+	exit ;;
     rs6000:LynxOS:2.*:*)
 	echo rs6000-unknown-lynxos${UNAME_RELEASE}
-	exit 0 ;;
+	exit ;;
     PowerPC:LynxOS:2.*:* | PowerPC:LynxOS:3.[01]*:* | PowerPC:LynxOS:4.0*:*)
 	echo powerpc-unknown-lynxos${UNAME_RELEASE}
-	exit 0 ;;
+	exit ;;
     SM[BE]S:UNIX_SV:*:*)
 	echo mips-dde-sysv${UNAME_RELEASE}
-	exit 0 ;;
+	exit ;;
     RM*:ReliantUNIX-*:*:*)
 	echo mips-sni-sysv4
-	exit 0 ;;
+	exit ;;
     RM*:SINIX-*:*:*)
 	echo mips-sni-sysv4
-	exit 0 ;;
+	exit ;;
     *:SINIX-*:*:*)
 	if uname -p 2&gt;/dev/null &gt;/dev/null ; then
 		UNAME_MACHINE=`(uname -p) 2&gt;/dev/null`
@@ -1140,68 +1150,72 @@
 	else
 		echo ns32k-sni-sysv
 	fi
-	exit 0 ;;
+	exit ;;
     PENTIUM:*:4.0*:*) # Unisys `ClearPath HMP IX 4000' SVR4/MP effort
                       # says &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/openspace-svn">Richard.M.Bartel at ccMail.Census.GOV</A>&gt;
         echo i586-unisys-sysv4
-        exit 0 ;;
+        exit ;;
     *:UNIX_System_V:4*:FTX*)
 	# From Gerald Hewes &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/openspace-svn">hewes at openmarket.com</A>&gt;.
 	# How about differentiating between stratus architectures? -djm
 	echo hppa1.1-stratus-sysv4
-	exit 0 ;;
+	exit ;;
     *:*:*:FTX*)
 	# From <A HREF="https://lists.berlios.de/mailman/listinfo/openspace-svn">seanf at swdc.stratus.com.</A>
 	echo i860-stratus-sysv4
-	exit 0 ;;
+	exit ;;
+    i*86:VOS:*:*)
+	# From <A HREF="https://lists.berlios.de/mailman/listinfo/openspace-svn">Paul.Green at stratus.com.</A>
+	echo ${UNAME_MACHINE}-stratus-vos
+	exit ;;
     *:VOS:*:*)
 	# From <A HREF="https://lists.berlios.de/mailman/listinfo/openspace-svn">Paul.Green at stratus.com.</A>
 	echo hppa1.1-stratus-vos
-	exit 0 ;;
+	exit ;;
     mc68*:A/UX:*:*)
 	echo m68k-apple-aux${UNAME_RELEASE}
-	exit 0 ;;
+	exit ;;
     news*:NEWS-OS:6*:*)
 	echo mips-sony-newsos6
-	exit 0 ;;
+	exit ;;
     R[34]000:*System_V*:*:* | R4000:UNIX_SYSV:*:* | R*000:UNIX_SV:*:*)
 	if [ -d /usr/nec ]; then
 	        echo mips-nec-sysv${UNAME_RELEASE}
 	else
 	        echo mips-unknown-sysv${UNAME_RELEASE}
 	fi
-        exit 0 ;;
+        exit ;;
     BeBox:BeOS:*:*)	# BeOS running on hardware made by Be, PPC only.
 	echo powerpc-be-beos
-	exit 0 ;;
+	exit ;;
     BeMac:BeOS:*:*)	# BeOS running on Mac or Mac clone, PPC only.
 	echo powerpc-apple-beos
-	exit 0 ;;
+	exit ;;
     BePC:BeOS:*:*)	# BeOS running on Intel PC compatible.
 	echo i586-pc-beos
-	exit 0 ;;
+	exit ;;
     SX-4:SUPER-UX:*:*)
 	echo sx4-nec-superux${UNAME_RELEASE}
-	exit 0 ;;
+	exit ;;
     SX-5:SUPER-UX:*:*)
 	echo sx5-nec-superux${UNAME_RELEASE}
-	exit 0 ;;
+	exit ;;
     SX-6:SUPER-UX:*:*)
 	echo sx6-nec-superux${UNAME_RELEASE}
-	exit 0 ;;
+	exit ;;
     Power*:Rhapsody:*:*)
 	echo powerpc-apple-rhapsody${UNAME_RELEASE}
-	exit 0 ;;
+	exit ;;
     *:Rhapsody:*:*)
 	echo ${UNAME_MACHINE}-apple-rhapsody${UNAME_RELEASE}
-	exit 0 ;;
+	exit ;;
     *:Darwin:*:*)
-	case `uname -p` in
-	    *86) UNAME_PROCESSOR=i686 ;;
-	    powerpc) UNAME_PROCESSOR=powerpc ;;
+	UNAME_PROCESSOR=`uname -p` || UNAME_PROCESSOR=unknown
+	case $UNAME_PROCESSOR in
+	    unknown) UNAME_PROCESSOR=powerpc ;;
 	esac
 	echo ${UNAME_PROCESSOR}-apple-darwin${UNAME_RELEASE}
-	exit 0 ;;
+	exit ;;
     *:procnto*:*:* | *:QNX:[0123456789]*:*)
 	UNAME_PROCESSOR=`uname -p`
 	if test &quot;$UNAME_PROCESSOR&quot; = &quot;x86&quot;; then
@@ -1209,22 +1223,25 @@
 		UNAME_MACHINE=pc
 	fi
 	echo ${UNAME_PROCESSOR}-${UNAME_MACHINE}-nto-qnx${UNAME_RELEASE}
-	exit 0 ;;
+	exit ;;
     *:QNX:*:4*)
 	echo i386-pc-qnx
-	exit 0 ;;
+	exit ;;
+    NSE-?:NONSTOP_KERNEL:*:*)
+	echo nse-tandem-nsk${UNAME_RELEASE}
+	exit ;;
     NSR-?:NONSTOP_KERNEL:*:*)
 	echo nsr-tandem-nsk${UNAME_RELEASE}
-	exit 0 ;;
+	exit ;;
     *:NonStop-UX:*:*)
 	echo mips-compaq-nonstopux
-	exit 0 ;;
+	exit ;;
     BS2000:POSIX*:*:*)
 	echo bs2000-siemens-sysv
-	exit 0 ;;
+	exit ;;
     DS/*:UNIX_System_V:*:*)
 	echo ${UNAME_MACHINE}-${UNAME_SYSTEM}-${UNAME_RELEASE}
-	exit 0 ;;
+	exit ;;
     *:Plan9:*:*)
 	# &quot;uname -m&quot; is not consistent, so use $cputype instead. 386
 	# is converted to i386 for consistency with other x86
@@ -1235,31 +1252,47 @@
 	    UNAME_MACHINE=&quot;$cputype&quot;
 	fi
 	echo ${UNAME_MACHINE}-unknown-plan9
-	exit 0 ;;
+	exit ;;
     *:TOPS-10:*:*)
 	echo pdp10-unknown-tops10
-	exit 0 ;;
+	exit ;;
     *:TENEX:*:*)
 	echo pdp10-unknown-tenex
-	exit 0 ;;
+	exit ;;
     KS10:TOPS-20:*:* | KL10:TOPS-20:*:* | TYPE4:TOPS-20:*:*)
 	echo pdp10-dec-tops20
-	exit 0 ;;
+	exit ;;
     XKL-1:TOPS-20:*:* | TYPE5:TOPS-20:*:*)
 	echo pdp10-xkl-tops20
-	exit 0 ;;
+	exit ;;
     *:TOPS-20:*:*)
 	echo pdp10-unknown-tops20
-	exit 0 ;;
+	exit ;;
     *:ITS:*:*)
 	echo pdp10-unknown-its
-	exit 0 ;;
+	exit ;;
     SEI:*:*:SEIUX)
         echo mips-sei-seiux${UNAME_RELEASE}
-	exit 0 ;;
+	exit ;;
     *:DragonFly:*:*)
 	echo ${UNAME_MACHINE}-unknown-dragonfly`echo ${UNAME_RELEASE}|sed -e 's/[-(].*//'`
-	exit 0 ;;
+	exit ;;
+    *:*VMS:*:*)
+    	UNAME_MACHINE=`(uname -p) 2&gt;/dev/null`
+	case &quot;${UNAME_MACHINE}&quot; in
+	    A*) echo alpha-dec-vms ; exit ;;
+	    I*) echo ia64-dec-vms ; exit ;;
+	    V*) echo vax-dec-vms ; exit ;;
+	esac ;;
+    *:XENIX:*:SysV)
+	echo i386-pc-xenix
+	exit ;;
+    i*86:skyos:*:*)
+	echo ${UNAME_MACHINE}-pc-skyos`echo ${UNAME_RELEASE}` | sed -e 's/ .*$//'
+	exit ;;
+    i*86:rdos:*:*)
+	echo ${UNAME_MACHINE}-pc-rdos
+	exit ;;
 esac
 
 #echo '(No uname command or uname output not recognized.)' 1&gt;&amp;2
@@ -1291,7 +1324,7 @@
 #endif
 
 #if defined (__arm) &amp;&amp; defined (__acorn) &amp;&amp; defined (__unix)
-  printf (&quot;arm-acorn-riscix&quot;); exit (0);
+  printf (&quot;arm-acorn-riscix\n&quot;); exit (0);
 #endif
 
 #if defined (hp300) &amp;&amp; !defined (hpux)
@@ -1380,11 +1413,12 @@
 }
 EOF
 
-$CC_FOR_BUILD -o $dummy $dummy.c 2&gt;/dev/null &amp;&amp; $dummy &amp;&amp; exit 0
+$CC_FOR_BUILD -o $dummy $dummy.c 2&gt;/dev/null &amp;&amp; SYSTEM_NAME=`$dummy` &amp;&amp;
+	{ echo &quot;$SYSTEM_NAME&quot;; exit; }
 
 # Apollos put the system type in the environment.
 
-test -d /usr/apollo &amp;&amp; { echo ${ISP}-apollo-${SYSTYPE}; exit 0; }
+test -d /usr/apollo &amp;&amp; { echo ${ISP}-apollo-${SYSTYPE}; exit; }
 
 # Convex versions that predate uname can use getsysinfo(1)
 
@@ -1393,22 +1427,22 @@
     case `getsysinfo -f cpu_type` in
     c1*)
 	echo c1-convex-bsd
-	exit 0 ;;
+	exit ;;
     c2*)
 	if getsysinfo -f scalar_acc
 	then echo c32-convex-bsd
 	else echo c2-convex-bsd
 	fi
-	exit 0 ;;
+	exit ;;
     c34*)
 	echo c34-convex-bsd
-	exit 0 ;;
+	exit ;;
     c38*)
 	echo c38-convex-bsd
-	exit 0 ;;
+	exit ;;
     c4*)
 	echo c4-convex-bsd
-	exit 0 ;;
+	exit ;;
     esac
 fi
 
@@ -1419,7 +1453,9 @@
 the operating system you are using. It is advised that you
 download the most up to date version of the config scripts from
 
-    <A HREF="ftp://ftp.gnu.org/pub/gnu/config/">ftp://ftp.gnu.org/pub/gnu/config/</A>
+  <A HREF="http://savannah.gnu.org/cgi-bin/viewcvs/*checkout*/config/config/config.guess">http://savannah.gnu.org/cgi-bin/viewcvs/*checkout*/config/config/config.guess</A>
+and
+  <A HREF="http://savannah.gnu.org/cgi-bin/viewcvs/*checkout*/config/config/config.sub">http://savannah.gnu.org/cgi-bin/viewcvs/*checkout*/config/config/config.sub</A>
 
 If the version you run ($0) is already up to date, please
 send the following data and any information you think might be

Modified: trunk/config.sub
===================================================================
--- trunk/config.sub	2006-03-06 17:48:57 UTC (rev 256)
+++ trunk/config.sub	2006-03-06 18:46:28 UTC (rev 257)
@@ -1,9 +1,9 @@
 #! /bin/sh
 # Configuration validation subroutine script.
 #   Copyright (C) 1992, 1993, 1994, 1995, 1996, 1997, 1998, 1999,
-#   2000, 2001, 2002, 2003 Free Software Foundation, Inc.
+#   2000, 2001, 2002, 2003, 2004, 2005 Free Software Foundation, Inc.
 
-timestamp='2004-03-12'
+timestamp='2005-12-23'
 
 # This file is (in principle) common to ALL GNU software.
 # The presence of a machine in this file suggests that SOME GNU software
@@ -21,14 +21,15 @@
 #
 # You should have received a copy of the GNU General Public License
 # along with this program; if not, write to the Free Software
-# Foundation, Inc., 59 Temple Place - Suite 330,
-# Boston, MA 02111-1307, USA.
-
+# Foundation, Inc., 51 Franklin Street - Fifth Floor, Boston, MA
+# 02110-1301, USA.
+#
 # As a special exception to the GNU General Public License, if you
 # distribute this file as part of a program that contains a
 # configuration script generated by Autoconf, you may include it under
 # the same distribution terms that you use for the rest of that program.
 
+
 # Please send patches to &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/openspace-svn">config-patches at gnu.org</A>&gt;.  Submit a context
 # diff and a properly formatted ChangeLog entry.
 #
@@ -70,7 +71,7 @@
 version=&quot;\
 GNU config.sub ($timestamp)
 
-Copyright (C) 1992, 1993, 1994, 1995, 1996, 1997, 1998, 1999, 2000, 2001
+Copyright (C) 1992, 1993, 1994, 1995, 1996, 1997, 1998, 1999, 2000, 2001, 2002, 2003, 2004, 2005
 Free Software Foundation, Inc.
 
 This is free software; see the source for copying conditions.  There is NO
@@ -83,11 +84,11 @@
 while test $# -gt 0 ; do
   case $1 in
     --time-stamp | --time* | -t )
-       echo &quot;$timestamp&quot; ; exit 0 ;;
+       echo &quot;$timestamp&quot; ; exit ;;
     --version | -v )
-       echo &quot;$version&quot; ; exit 0 ;;
+       echo &quot;$version&quot; ; exit ;;
     --help | --h* | -h )
-       echo &quot;$usage&quot;; exit 0 ;;
+       echo &quot;$usage&quot;; exit ;;
     -- )     # Stop option processing
        shift; break ;;
     - )	# Use stdin as input.
@@ -99,7 +100,7 @@
     *local*)
        # First pass through any local machine types.
        echo $1
-       exit 0;;
+       exit ;;
 
     * )
        break ;;
@@ -118,8 +119,9 @@
 # Here we must recognize all the valid KERNEL-OS combinations.
 maybe_os=`echo $1 | sed 's/^\(.*\)-\([^-]*-[^-]*\)$/\2/'`
 case $maybe_os in
-  nto-qnx* | linux-gnu* | linux-dietlibc | linux-uclibc* | uclinux-uclibc* | uclinux-gnu* | \
-  kfreebsd*-gnu* | knetbsd*-gnu* | netbsd*-gnu* | storm-chaos* | os2-emx* | rtmk-nova*)
+  nto-qnx* | linux-gnu* | linux-dietlibc | linux-newlib* | linux-uclibc* | \
+  uclinux-uclibc* | uclinux-gnu* | kfreebsd*-gnu* | knetbsd*-gnu* | netbsd*-gnu* | \
+  storm-chaos* | os2-emx* | rtmk-nova*)
     os=-$maybe_os
     basic_machine=`echo $1 | sed 's/^\(.*\)-\([^-]*-[^-]*\)$/\1/'`
     ;;
@@ -145,7 +147,7 @@
 	-convergent* | -ncr* | -news | -32* | -3600* | -3100* | -hitachi* |\
 	-c[123]* | -convex* | -sun | -crds | -omron* | -dg | -ultra | -tti* | \
 	-harris | -dolphin | -highlevel | -gould | -cbm | -ns | -masscomp | \
-	-apple | -axis)
+	-apple | -axis | -knuth | -cray)
 		os=
 		basic_machine=$1
 		;;
@@ -170,6 +172,10 @@
 	-hiux*)
 		os=-hiuxwe2
 		;;
+	-sco6)
+		os=-sco5v6
+		basic_machine=`echo $1 | sed -e 's/86-.*/86-pc/'`
+		;;
 	-sco5)
 		os=-sco3.2v5
 		basic_machine=`echo $1 | sed -e 's/86-.*/86-pc/'`
@@ -186,6 +192,10 @@
 		# Don't forget version if it is 3.2v4 or newer.
 		basic_machine=`echo $1 | sed -e 's/86-.*/86-pc/'`
 		;;
+	-sco5v6*)
+		# Don't forget version if it is 3.2v4 or newer.
+		basic_machine=`echo $1 | sed -e 's/86-.*/86-pc/'`
+		;;
 	-sco*)
 		os=-sco3.2v2
 		basic_machine=`echo $1 | sed -e 's/86-.*/86-pc/'`
@@ -231,13 +241,14 @@
 	| alpha64 | alpha64ev[4-8] | alpha64ev56 | alpha64ev6[78] | alpha64pca5[67] \
 	| am33_2.0 \
 	| arc | arm | arm[bl]e | arme[lb] | armv[2345] | armv[345][lb] | avr \
+	| bfin \
 	| c4x | clipper \
-	| d10v | d30v | dlx | dsp16xx \
+	| d10v | d30v | dlx | dsp16xx | dvp \
 	| fr30 | frv \
 	| h8300 | h8500 | hppa | hppa1.[01] | hppa2.0 | hppa2.0[nw] | hppa64 \
 	| i370 | i860 | i960 | ia64 \
 	| ip2k | iq2000 \
-	| m32r | m32rle | m68000 | m68k | m88k | mcore \
+	| m32r | m32rle | m68000 | m68k | m88k | maxq | mb | microblaze | mcore \
 	| mips | mipsbe | mipseb | mipsel | mipsle \
 	| mips16 \
 	| mips64 | mips64el \
@@ -246,6 +257,7 @@
 	| mips64vr4100 | mips64vr4100el \
 	| mips64vr4300 | mips64vr4300el \
 	| mips64vr5000 | mips64vr5000el \
+	| mips64vr5900 | mips64vr5900el \
 	| mipsisa32 | mipsisa32el \
 	| mipsisa32r2 | mipsisa32r2el \
 	| mipsisa64 | mipsisa64el \
@@ -254,23 +266,28 @@
 	| mipsisa64sr71k | mipsisa64sr71kel \
 	| mipstx39 | mipstx39el \
 	| mn10200 | mn10300 \
+	| mt \
 	| msp430 \
 	| ns16k | ns32k \
-	| openrisc | or32 \
+	| or32 \
 	| pdp10 | pdp11 | pj | pjl \
 	| powerpc | powerpc64 | powerpc64le | powerpcle | ppcbe \
 	| pyramid \
-	| sh | sh[1234] | sh[23]e | sh[34]eb | shbe | shle | sh[1234]le | sh3ele \
+	| sh | sh[1234] | sh[24]a | sh[24]a*eb | sh[23]e | sh[34]eb | shbe | shle | sh[1234]le | sh3ele \
 	| sh64 | sh64le \
-	| sparc | sparc64 | sparc86x | sparclet | sparclite | sparcv8 | sparcv9 | sparcv9b \
+	| sparc | sparc64 | sparc64b | sparc86x | sparclet | sparclite \
+	| sparcv8 | sparcv9 | sparcv9b \
 	| strongarm \
 	| tahoe | thumb | tic4x | tic80 | tron \
 	| v850 | v850e \
 	| we32k \
-	| x86 | xscale | xstormy16 | xtensa \
+	| x86 | xscale | xscalee[bl] | xstormy16 | xtensa \
 	| z8k)
 		basic_machine=$basic_machine-unknown
 		;;
+	m32c)
+		basic_machine=$basic_machine-unknown
+		;;
 	m6811 | m68hc11 | m6812 | m68hc12)
 		# Motorola 68HC11/12.
 		basic_machine=$basic_machine-unknown
@@ -278,6 +295,13 @@
 		;;
 	m88110 | m680[12346]0 | m683?2 | m68360 | m5200 | v70 | w65 | z8k)
 		;;
+	ms1)
+		basic_machine=mt-unknown
+		;;
+	nios2 | nios2-* | nios2 | nios2-*)
+		basic_machine=nios2-altera
+		os=-none
+		;;
 
 	# We use `pc' rather than `unknown'
 	# because (1) that's what they normally are, and
@@ -298,9 +322,9 @@
 	| alphapca5[67]-* | alpha64pca5[67]-* | arc-* \
 	| arm-*  | armbe-* | armle-* | armeb-* | armv*-* \
 	| avr-* \
-	| bs2000-* \
+	| bfin-* | bs2000-* \
 	| c[123]* | c30-* | [cjt]90-* | c4x-* | c54x-* | c55x-* | c6x-* \
-	| clipper-* | cydra-* \
+	| clipper-* | craynv-* | cydra-* \
 	| d10v-* | d30v-* | dlx-* \
 	| elxsi-* \
 	| f30[01]-* | f700-* | fr30-* | frv-* | fx80-* \
@@ -310,7 +334,7 @@
 	| ip2k-* | iq2000-* \
 	| m32r-* | m32rle-* \
 	| m68000-* | m680[012346]0-* | m68360-* | m683?2-* | m68k-* \
-	| m88110-* | m88k-* | mcore-* \
+	| m88110-* | m88k-* | maxq-* | mcore-* \
 	| mips-* | mipsbe-* | mipseb-* | mipsel-* | mipsle-* \
 	| mips16-* \
 	| mips64-* | mips64el-* \
@@ -319,6 +343,7 @@
 	| mips64vr4100-* | mips64vr4100el-* \
 	| mips64vr4300-* | mips64vr4300el-* \
 	| mips64vr5000-* | mips64vr5000el-* \
+	| mips64vr5900-* | mips64vr5900el-* \
 	| mipsisa32-* | mipsisa32el-* \
 	| mipsisa32r2-* | mipsisa32r2el-* \
 	| mipsisa64-* | mipsisa64el-* \
@@ -326,27 +351,32 @@
 	| mipsisa64sb1-* | mipsisa64sb1el-* \
 	| mipsisa64sr71k-* | mipsisa64sr71kel-* \
 	| mipstx39-* | mipstx39el-* \
+	| mmix-* \
+	| mt-* \
 	| msp430-* \
-	| none-* | np1-* | nv1-* | ns16k-* | ns32k-* \
+	| none-* | np1-* | ns16k-* | ns32k-* \
 	| orion-* \
 	| pdp10-* | pdp11-* | pj-* | pjl-* | pn-* | power-* \
 	| powerpc-* | powerpc64-* | powerpc64le-* | powerpcle-* | ppcbe-* \
 	| pyramid-* \
 	| romp-* | rs6000-* \
-	| sh-* | sh[1234]-* | sh[23]e-* | sh[34]eb-* | shbe-* \
+	| sh-* | sh[1234]-* | sh[24]a-* | sh[23]e-* | sh[34]eb-* | shbe-* \
 	| shle-* | sh[1234]le-* | sh3ele-* | sh64-* | sh64le-* \
-	| sparc-* | sparc64-* | sparc86x-* | sparclet-* | sparclite-* \
+	| sparc-* | sparc64-* | sparc64b-* | sparc86x-* | sparclet-* \
+	| sparclite-* \
 	| sparcv8-* | sparcv9-* | sparcv9b-* | strongarm-* | sv1-* | sx?-* \
 	| tahoe-* | thumb-* \
 	| tic30-* | tic4x-* | tic54x-* | tic55x-* | tic6x-* | tic80-* \
 	| tron-* \
 	| v850-* | v850e-* | vax-* \
 	| we32k-* \
-	| x86-* | x86_64-* | xps100-* | xscale-* | xstormy16-* \
-	| xtensa-* \
+	| x86-* | x86_64-* | xps100-* | xscale-* | xscalee[bl]-* \
+	| xstormy16-* | xtensa-* \
 	| ymp-* \
 	| z8k-*)
 		;;
+	m32c-*)
+		;;
 	# Recognize the various machine names and aliases which stand
 	# for a CPU type and a company and sometimes even an OS.
 	386bsd)
@@ -445,6 +475,10 @@
 		basic_machine=j90-cray
 		os=-unicos
 		;;
+	craynv)
+		basic_machine=craynv-cray
+		os=-unicosmp
+		;;
 	cr16c)
 		basic_machine=cr16c-unknown
 		os=-elf
@@ -452,6 +486,9 @@
 	crds | unos)
 		basic_machine=m68k-crds
 		;;
+	crisv32 | crisv32-* | etraxfs*)
+		basic_machine=crisv32-axis
+		;;
 	cris | cris-* | etrax*)
 		basic_machine=cris-axis
 		;;
@@ -481,6 +518,10 @@
 		basic_machine=m88k-motorola
 		os=-sysv3
 		;;
+	djgpp)
+		basic_machine=i586-pc
+		os=-msdosdjgpp
+		;;
 	dpx20 | dpx20-*)
 		basic_machine=rs6000-bull
 		os=-bosx
@@ -653,16 +694,30 @@
 		basic_machine=m68k-atari
 		os=-mint
 		;;
+	mipsEE* | ee | ps2)
+		basic_machine=mips64r5900el-scei
+		case $os in
+		    -linux*)
+			;;
+		    *)
+			os=-elf
+			;;
+		esac
+		;;
+	iop)
+		basic_machine=mipsel-scei
+		os=-irx
+		;;
+	dvp)
+		basic_machine=dvp-scei
+		os=-elf
+		;;
 	mips3*-*)
 		basic_machine=`echo $basic_machine | sed -e 's/mips3/mips64/'`
 		;;
 	mips3*)
 		basic_machine=`echo $basic_machine | sed -e 's/mips3/mips64/'`-unknown
 		;;
-	mmix*)
-		basic_machine=mmix-knuth
-		os=-mmixware
-		;;
 	monitor)
 		basic_machine=m68k-rom68k
 		os=-coff
@@ -675,6 +730,9 @@
 		basic_machine=i386-pc
 		os=-msdos
 		;;
+	ms1-*)
+		basic_machine=`echo $basic_machine | sed -e 's/ms1-/mt-/'`
+		;;
 	mvs)
 		basic_machine=i370-ibm
 		os=-mvs
@@ -743,10 +801,6 @@
 	np1)
 		basic_machine=np1-gould
 		;;
-	nv1)
-		basic_machine=nv1-cray
-		os=-unicosmp
-		;;
 	nsr-tandem)
 		basic_machine=nsr-tandem
 		;;
@@ -754,9 +808,8 @@
 		basic_machine=hppa1.1-oki
 		os=-proelf
 		;;
-	or32 | or32-*)
+	openrisc | openrisc-*)
 		basic_machine=or32-unknown
-		os=-coff
 		;;
 	os400)
 		basic_machine=powerpc-ibm
@@ -787,6 +840,12 @@
 	pc532 | pc532-*)
 		basic_machine=ns32k-pc532
 		;;
+	pc98)
+		basic_machine=i386-pc
+		;;
+	pc98-*)
+		basic_machine=i386-`echo $basic_machine | sed 's/^[^-]*-//'`
+		;;
 	pentium | p5 | k5 | k6 | nexgen | viac3)
 		basic_machine=i586-pc
 		;;
@@ -843,6 +902,10 @@
 		basic_machine=i586-unknown
 		os=-pw32
 		;;
+	rdos)
+		basic_machine=i386-pc
+		os=-rdos
+		;;
 	rom68k)
 		basic_machine=m68k-rom68k
 		os=-coff
@@ -1029,6 +1092,10 @@
 		basic_machine=hppa1.1-winbond
 		os=-proelf
 		;;
+	xbox)
+		basic_machine=i686-pc
+		os=-mingw32
+		;;
 	xps | xps100)
 		basic_machine=xps100-honeywell
 		;;
@@ -1059,6 +1126,9 @@
 	romp)
 		basic_machine=romp-ibm
 		;;
+	mmix)
+		basic_machine=mmix-knuth
+		;;
 	rs6000)
 		basic_machine=rs6000-ibm
 		;;
@@ -1075,12 +1145,9 @@
 	we32k)
 		basic_machine=we32k-att
 		;;
-	sh3 | sh4 | sh[34]eb | sh[1234]le | sh[23]ele)
+	sh[1234] | sh[24]a | sh[34]eb | sh[1234]le | sh[23]ele)
 		basic_machine=sh-unknown
 		;;
-	sh64)
-		basic_machine=sh64-unknown
-		;;
 	sparc | sparcv8 | sparcv9 | sparcv9b)
 		basic_machine=sparc-sun
 		;;
@@ -1161,13 +1228,15 @@
 	      | -udi* | -eabi* | -lites* | -ieee* | -go32* | -aux* \
 	      | -chorusos* | -chorusrdb* \
 	      | -cygwin* | -pe* | -psos* | -moss* | -proelf* | -rtems* \
-	      | -mingw32* | -linux-gnu* | -linux-uclibc* | -uxpv* | -beos* | -mpeix* | -udk* \
+	      | -mingw32* | -linux-gnu* | -linux-newlib* | -linux-uclibc* \
+	      | -uxpv* | -beos* | -mpeix* | -udk* \
 	      | -interix* | -uwin* | -mks* | -rhapsody* | -darwin* | -opened* \
 	      | -openstep* | -oskit* | -conix* | -pw32* | -nonstopux* \
 	      | -storm-chaos* | -tops10* | -tenex* | -tops20* | -its* \
 	      | -os2* | -vos* | -palmos* | -uclinux* | -nucleus* \
 	      | -morphos* | -superux* | -rtmk* | -rtmk-nova* | -windiss* \
-	      | -powermax* | -dnix* | -nx6 | -nx7 | -sei* | -dragonfly*)
+	      | -powermax* | -dnix* | -nx6 | -nx7 | -sei* | -dragonfly* \
+	      | -skyos* | -haiku* | -rdos* | -irx*)
 	# Remember, each alternative MUST END IN *, to match a version number.
 		;;
 	-qnx*)
@@ -1185,7 +1254,7 @@
 		os=`echo $os | sed -e 's|nto|nto-qnx|'`
 		;;
 	-sim | -es1800* | -hms* | -xray | -os68k* | -none* | -v88r* \
-	      | -windows* | -osx | -abug | -netware* | -os9* | -beos* \
+	      | -windows* | -osx | -abug | -netware* | -os9* | -beos* | -haiku* \
 	      | -macos* | -mpw* | -magic* | -mmixware* | -mon960* | -lnews*)
 		;;
 	-mac*)
@@ -1294,6 +1363,9 @@
 	-kaos*)
 		os=-kaos
 		;;
+	-zvmoe)
+		os=-zvmoe
+		;;
 	-none)
 		;;
 	*)
@@ -1371,9 +1443,15 @@
 	*-be)
 		os=-beos
 		;;
+	*-haiku)
+		os=-haiku
+		;;
 	*-ibm)
 		os=-aix
 		;;
+    	*-knuth)
+		os=-mmixware
+		;;
 	*-wec)
 		os=-proelf
 		;;
@@ -1539,7 +1617,7 @@
 esac
 
 echo $basic_machine$os
-exit 0
+exit
 
 # Local variables:
 # eval: (add-hook 'write-file-hooks 'time-stamp)

Modified: trunk/configure
===================================================================
--- trunk/configure	2006-03-06 17:48:57 UTC (rev 256)
+++ trunk/configure	2006-03-06 18:46:28 UTC (rev 257)
@@ -287,8 +287,8 @@
 # find a string as large as possible, as long as the shell can cope with it
   for cmd in 'sed 50q &quot;$0&quot;' 'sed 20q &quot;$0&quot;' 'sed 10q &quot;$0&quot;' 'sed 2q &quot;$0&quot;' 'echo test'; do
     # expected sizes: less than 2Kb, 1Kb, 512 bytes, 16 bytes, ...
-    if (echo_test_string=&quot;`eval $cmd`&quot;) 2&gt;/dev/null &amp;&amp;
-       echo_test_string=&quot;`eval $cmd`&quot; &amp;&amp;
+    if (echo_test_string=`eval $cmd`) 2&gt;/dev/null &amp;&amp;
+       echo_test_string=`eval $cmd` &amp;&amp;
        (test &quot;X$echo_test_string&quot; = &quot;X$echo_test_string&quot;) 2&gt;/dev/null
     then
       break
@@ -3998,7 +3998,7 @@
     if test -f &quot;$ac_dir/$ac_prog&quot; || test -f &quot;$ac_dir/$ac_prog$ac_exeext&quot;; then
       lt_cv_path_LD=&quot;$ac_dir/$ac_prog&quot;
       # Check to see if the program is GNU ld.  I'd rather use --version,
-      # but apparently some GNU ld's only accept -v.
+      # but apparently some variants of GNU ld only accept -v.
       # Break only if it was the GNU/non-GNU ld that we prefer.
       case `&quot;$lt_cv_path_LD&quot; -v 2&gt;&amp;1 &lt;/dev/null` in
       *GNU* | *'with BFD'*)
@@ -4032,7 +4032,7 @@
 if test &quot;${lt_cv_prog_gnu_ld+set}&quot; = set; then
   echo $ECHO_N &quot;(cached) $ECHO_C&quot; &gt;&amp;6
 else
-  # I'd rather use --version here, but apparently some GNU ld's only accept -v.
+  # I'd rather use --version here, but apparently some GNU lds only accept -v.
 case `$LD -v 2&gt;&amp;1 &lt;/dev/null` in
 *GNU* | *'with BFD'*)
   lt_cv_prog_gnu_ld=yes
@@ -4065,7 +4065,7 @@
 case $host_os in
   darwin*)
     if test &quot;$GCC&quot; = yes; then
-      reload_cmds='$CC -nostdlib ${wl}-r -o $output$reload_objs'
+      reload_cmds='$LTCC $LTCFLAGS -nostdlib ${wl}-r -o $output$reload_objs'
     else
       reload_cmds='$LD$reload_flag -o $output$reload_objs'
     fi
@@ -4081,36 +4081,43 @@
   # Let the user override the test.
   lt_cv_path_NM=&quot;$NM&quot;
 else
-  lt_save_ifs=&quot;$IFS&quot;; IFS=$PATH_SEPARATOR
-  for ac_dir in $PATH /usr/ccs/bin /usr/ucb /bin; do
-    IFS=&quot;$lt_save_ifs&quot;
-    test -z &quot;$ac_dir&quot; &amp;&amp; ac_dir=.
-    tmp_nm=&quot;$ac_dir/${ac_tool_prefix}nm&quot;
-    if test -f &quot;$tmp_nm&quot; || test -f &quot;$tmp_nm$ac_exeext&quot; ; then
-      # Check to see if the nm accepts a BSD-compat flag.
-      # Adding the `sed 1q' prevents false positives on HP-UX, which says:
-      #   nm: unknown option &quot;B&quot; ignored
-      # Tru64's nm complains that /dev/null is an invalid object file
-      case `&quot;$tmp_nm&quot; -B /dev/null 2&gt;&amp;1 | sed '1q'` in
-      */dev/null* | *'Invalid file or object type'*)
-	lt_cv_path_NM=&quot;$tmp_nm -B&quot;
-	break
-        ;;
-      *)
-	case `&quot;$tmp_nm&quot; -p /dev/null 2&gt;&amp;1 | sed '1q'` in
-	*/dev/null*)
-	  lt_cv_path_NM=&quot;$tmp_nm -p&quot;
+  lt_nm_to_check=&quot;${ac_tool_prefix}nm&quot;
+  if test -n &quot;$ac_tool_prefix&quot; &amp;&amp; test &quot;$build&quot; = &quot;$host&quot;; then
+    lt_nm_to_check=&quot;$lt_nm_to_check nm&quot;
+  fi
+  for lt_tmp_nm in $lt_nm_to_check; do
+    lt_save_ifs=&quot;$IFS&quot;; IFS=$PATH_SEPARATOR
+    for ac_dir in $PATH /usr/ccs/bin/elf /usr/ccs/bin /usr/ucb /bin; do
+      IFS=&quot;$lt_save_ifs&quot;
+      test -z &quot;$ac_dir&quot; &amp;&amp; ac_dir=.
+      tmp_nm=&quot;$ac_dir/$lt_tmp_nm&quot;
+      if test -f &quot;$tmp_nm&quot; || test -f &quot;$tmp_nm$ac_exeext&quot; ; then
+	# Check to see if the nm accepts a BSD-compat flag.
+	# Adding the `sed 1q' prevents false positives on HP-UX, which says:
+	#   nm: unknown option &quot;B&quot; ignored
+	# Tru64's nm complains that /dev/null is an invalid object file
+	case `&quot;$tmp_nm&quot; -B /dev/null 2&gt;&amp;1 | sed '1q'` in
+	*/dev/null* | *'Invalid file or object type'*)
+	  lt_cv_path_NM=&quot;$tmp_nm -B&quot;
 	  break
 	  ;;
 	*)
-	  lt_cv_path_NM=${lt_cv_path_NM=&quot;$tmp_nm&quot;} # keep the first match, but
-	  continue # so that we can try to find one that supports BSD flags
+	  case `&quot;$tmp_nm&quot; -p /dev/null 2&gt;&amp;1 | sed '1q'` in
+	  */dev/null*)
+	    lt_cv_path_NM=&quot;$tmp_nm -p&quot;
+	    break
+	    ;;
+	  *)
+	    lt_cv_path_NM=${lt_cv_path_NM=&quot;$tmp_nm&quot;} # keep the first match, but
+	    continue # so that we can try to find one that supports BSD flags
+	    ;;
+	  esac
 	  ;;
 	esac
-      esac
-    fi
+      fi
+    done
+    IFS=&quot;$lt_save_ifs&quot;
   done
-  IFS=&quot;$lt_save_ifs&quot;
   test -z &quot;$lt_cv_path_NM&quot; &amp;&amp; lt_cv_path_NM=nm
 fi
 fi
@@ -4202,7 +4209,7 @@
 
 hpux10.20* | hpux11*)
   lt_cv_file_magic_cmd=/usr/bin/file
-  case &quot;$host_cpu&quot; in
+  case $host_cpu in
   ia64*)
     lt_cv_deplibs_check_method='file_magic (s[0-9][0-9][0-9]|ELF-[0-9][0-9]) shared object file - IA64'
     lt_cv_file_magic_test_file=/usr/lib/hpux32/libc.so
@@ -4218,6 +4225,11 @@
   esac
   ;;
 
+interix3*)
+  # PIC code is broken on Interix 3.x, that's why |\.a not |_pic\.a here
+  lt_cv_deplibs_check_method='match_pattern /lib[^/]+(\.so|\.a)$'
+  ;;
+
 irix5* | irix6* | nonstopux*)
   case $LD in
   *-32|*&quot;-32 &quot;) libmagic=32-bit;;
@@ -4263,15 +4275,11 @@
   lt_cv_deplibs_check_method=pass_all
   ;;
 
-sco3.2v5*)
-  lt_cv_deplibs_check_method=pass_all
-  ;;
-
 solaris*)
   lt_cv_deplibs_check_method=pass_all
   ;;
 
-sysv4 | sysv4.2uw2* | sysv4.3* | sysv5*)
+sysv4 | sysv4.3*)
   case $host_vendor in
   motorola)
     lt_cv_deplibs_check_method='file_magic ELF [0-9][0-9]*-bit [ML]SB (shared object|dynamic lib) M[0-9][0-9]* Version [0-9]'
@@ -4292,10 +4300,13 @@
   siemens)
     lt_cv_deplibs_check_method=pass_all
     ;;
+  pc)
+    lt_cv_deplibs_check_method=pass_all
+    ;;
   esac
   ;;
 
-sysv5OpenUNIX8* | sysv5UnixWare7* | sysv5uw[78]* | unixware7* | sysv4*uw2*)
+sysv5* | sco3.2v5* | sco5v6* | unixware* | OpenUNIX* | sysv4*uw2*)
   lt_cv_deplibs_check_method=pass_all
   ;;
 esac
@@ -4313,6 +4324,9 @@
 # If no C compiler was specified, use CC.
 LTCC=${LTCC-&quot;$CC&quot;}
 
+# If no C compiler flags were specified, use CFLAGS.
+LTCFLAGS=${LTCFLAGS-&quot;$CFLAGS&quot;}
+
 # Allow CC to be a program name with arguments.
 compiler=$CC
 
@@ -4348,7 +4362,7 @@
   ;;
 *-*-irix6*)
   # Find out which ABI we are using.
-  echo '#line 4351 &quot;configure&quot;' &gt; conftest.$ac_ext
+  echo '#line 4365 &quot;configure&quot;' &gt; conftest.$ac_ext
   if { (eval echo &quot;$as_me:$LINENO: \&quot;$ac_compile\&quot;&quot;) &gt;&amp;5
   (eval $ac_compile) 2&gt;&amp;5
   ac_status=$?
@@ -4391,7 +4405,7 @@
   ac_status=$?
   echo &quot;$as_me:$LINENO: \$? = $ac_status&quot; &gt;&amp;5
   (exit $ac_status); }; then
-    case &quot;`/usr/bin/file conftest.o`&quot; in
+    case `/usr/bin/file conftest.o` in
     *32-bit*)
       case $host in
         x86_64-*linux*)
@@ -4429,24 +4443,6 @@
   rm -rf conftest*
   ;;
 
-*-*-linux*)
-  # Test if the compiler is 64bit
-  echo 'int i;' &gt; conftest.$ac_ext
-  lt_cv_cc_64bit_output=no
-  if { (eval echo &quot;$as_me:$LINENO: \&quot;$ac_compile\&quot;&quot;) &gt;&amp;5
-  (eval $ac_compile) 2&gt;&amp;5
-  ac_status=$?
-  echo &quot;$as_me:$LINENO: \$? = $ac_status&quot; &gt;&amp;5
-  (exit $ac_status); }; then
-    case `/usr/bin/file conftest.$ac_objext` in
-    *&quot;ELF 64&quot;*)
-      lt_cv_cc_64bit_output=yes
-      ;;
-    esac
-  fi
-  rm -rf conftest*
-  ;;
-
 *-*-sco3.2v5*)
   # On SCO OpenServer 5, we need -belf to get full-featured binaries.
   SAVE_CFLAGS=&quot;$CFLAGS&quot;
@@ -4522,7 +4518,27 @@
     CFLAGS=&quot;$SAVE_CFLAGS&quot;
   fi
   ;;
+sparc*-*solaris*)
+  # Find out which ABI we are using.
+  echo 'int i;' &gt; conftest.$ac_ext
+  if { (eval echo &quot;$as_me:$LINENO: \&quot;$ac_compile\&quot;&quot;) &gt;&amp;5
+  (eval $ac_compile) 2&gt;&amp;5
+  ac_status=$?
+  echo &quot;$as_me:$LINENO: \$? = $ac_status&quot; &gt;&amp;5
+  (exit $ac_status); }; then
+    case `/usr/bin/file conftest.o` in
+    *64-bit*)
+      case $lt_cv_prog_gnu_ld in
+      yes*) LD=&quot;${LD-ld} -m elf64_sparc&quot; ;;
+      *)    LD=&quot;${LD-ld} -64&quot; ;;
+      esac
+      ;;
+    esac
+  fi
+  rm -rf conftest*
+  ;;
 
+
 esac
 
 need_locks=&quot;$enable_libtool_lock&quot;
@@ -5247,7 +5263,7 @@
 
 
 # Provide some information about the compiler.
-echo &quot;$as_me:5250:&quot; \
+echo &quot;$as_me:5266:&quot; \
      &quot;checking for Fortran 77 compiler version&quot; &gt;&amp;5
 ac_compiler=`set X $ac_compile; echo $2`
 { (eval echo &quot;$as_me:$LINENO: \&quot;$ac_compiler --version &lt;/dev/null &gt;&amp;5\&quot;&quot;) &gt;&amp;5
@@ -5444,12 +5460,18 @@
     elif test -x /usr/sbin/sysctl; then
       lt_cv_sys_max_cmd_len=`/usr/sbin/sysctl -n kern.argmax`
     else
-      lt_cv_sys_max_cmd_len=65536 # usable default for *BSD
+      lt_cv_sys_max_cmd_len=65536	# usable default for all BSDs
     fi
     # And add a safety zone
     lt_cv_sys_max_cmd_len=`expr $lt_cv_sys_max_cmd_len \/ 4`
     lt_cv_sys_max_cmd_len=`expr $lt_cv_sys_max_cmd_len \* 3`
     ;;
+
+  interix*)
+    # We know the value 262144 and hardcode it with a safety zone (like BSD)
+    lt_cv_sys_max_cmd_len=196608
+    ;;
+
   osf*)
     # Dr. Hans Ekkehard Plesser reports seeing a kernel panic running configure
     # due to this test when exec_disable_arg_limit is 1 on Tru64. It is not
@@ -5463,6 +5485,17 @@
       esac
     fi
     ;;
+  sco3.2v5*)
+    lt_cv_sys_max_cmd_len=102400
+    ;;
+  sysv5* | sco5v6* | sysv4.2uw2*)
+    kargmax=`grep ARG_MAX /etc/conf/cf.d/stune 2&gt;/dev/null`
+    if test -n &quot;$kargmax&quot;; then
+      lt_cv_sys_max_cmd_len=`echo $kargmax | sed 's/.*[ 	]//'`
+    else
+      lt_cv_sys_max_cmd_len=32768
+    fi
+    ;;
   *)
     # If test is not a shell built-in, we'll probably end up computing a
     # maximum length that is only half of the actual maximum length, but
@@ -5548,9 +5581,18 @@
 osf*)
   symcode='[BCDEGQRST]'
   ;;
-solaris* | sysv5*)
+solaris*)
   symcode='[BDRT]'
   ;;
+sco3.2v5*)
+  symcode='[DT]'
+  ;;
+sysv4.2uw2*)
+  symcode='[DT]'
+  ;;
+sysv5* | sco5v6* | unixware* | OpenUNIX*)
+  symcode='[ABDT]'
+  ;;
 sysv4)
   symcode='[DFNSTU]'
   ;;
@@ -5759,7 +5801,7 @@
 default_ofile=libtool
 can_build_shared=yes
 
-# All known linkers require a `.a' archive for static linking (except M$VC,
+# All known linkers require a `.a' archive for static linking (except MSVC,
 # which needs '.lib').
 libext=a
 ltmain=&quot;$ac_aux_dir/ltmain.sh&quot;
@@ -6016,6 +6058,7 @@
 test -z &quot;$AS&quot; &amp;&amp; AS=as
 test -z &quot;$CC&quot; &amp;&amp; CC=cc
 test -z &quot;$LTCC&quot; &amp;&amp; LTCC=$CC
+test -z &quot;$LTCFLAGS&quot; &amp;&amp; LTCFLAGS=$CFLAGS
 test -z &quot;$DLLTOOL&quot; &amp;&amp; DLLTOOL=dlltool
 test -z &quot;$LD&quot; &amp;&amp; LD=ld
 test -z &quot;$LN_S&quot; &amp;&amp; LN_S=&quot;ln -s&quot;
@@ -6035,10 +6078,10 @@
 if test -n &quot;$RANLIB&quot;; then
   case $host_os in
   openbsd*)
-    old_postinstall_cmds=&quot;\$RANLIB -t \$oldlib~$old_postinstall_cmds&quot;
+    old_postinstall_cmds=&quot;$old_postinstall_cmds~\$RANLIB -t \$oldlib&quot;
     ;;
   *)
-    old_postinstall_cmds=&quot;\$RANLIB \$oldlib~$old_postinstall_cmds&quot;
+    old_postinstall_cmds=&quot;$old_postinstall_cmds~\$RANLIB \$oldlib&quot;
     ;;
   esac
   old_archive_cmds=&quot;$old_archive_cmds~\$RANLIB \$oldlib&quot;
@@ -6080,7 +6123,7 @@
       if test -n &quot;$file_magic_test_file&quot;; then
 	case $deplibs_check_method in
 	&quot;file_magic &quot;*)
-	  file_magic_regex=&quot;`expr \&quot;$deplibs_check_method\&quot; : \&quot;file_magic \(.*\)\&quot;`&quot;
+	  file_magic_regex=`expr &quot;$deplibs_check_method&quot; : &quot;file_magic \(.*\)&quot;`
 	  MAGIC_CMD=&quot;$lt_cv_path_MAGIC_CMD&quot;
 	  if eval $file_magic_cmd \$file_magic_test_file 2&gt; /dev/null |
 	    $EGREP &quot;$file_magic_regex&quot; &gt; /dev/null; then
@@ -6142,7 +6185,7 @@
       if test -n &quot;$file_magic_test_file&quot;; then
 	case $deplibs_check_method in
 	&quot;file_magic &quot;*)
-	  file_magic_regex=&quot;`expr \&quot;$deplibs_check_method\&quot; : \&quot;file_magic \(.*\)\&quot;`&quot;
+	  file_magic_regex=`expr &quot;$deplibs_check_method&quot; : &quot;file_magic \(.*\)&quot;`
 	  MAGIC_CMD=&quot;$lt_cv_path_MAGIC_CMD&quot;
 	  if eval $file_magic_cmd \$file_magic_test_file 2&gt; /dev/null |
 	    $EGREP &quot;$file_magic_regex&quot; &gt; /dev/null; then
@@ -6218,33 +6261,53 @@
 #
 echo &quot;$as_me:$LINENO: checking for correct ltmain.sh version&quot; &gt;&amp;5
 echo $ECHO_N &quot;checking for correct ltmain.sh version... $ECHO_C&quot; &gt;&amp;6
-if test -z &quot;$ltmain&quot;; then
+if test &quot;x$ltmain&quot; = &quot;x&quot; ; then
   echo &quot;$as_me:$LINENO: result: no&quot; &gt;&amp;5
 echo &quot;${ECHO_T}no&quot; &gt;&amp;6
-  echo
-  echo &quot;*** Gentoo sanity check failed! ***&quot;
-  echo &quot;*** \$ltmain is not defined, please check the patch for consistency! ***&quot;
-  echo
-  exit 1
+  { { echo &quot;$as_me:$LINENO: error:
+
+*** [Gentoo] sanity check failed! ***
+*** \$ltmain is not defined, please check the patch for consistency! ***
+&quot; &gt;&amp;5
+echo &quot;$as_me: error:
+
+*** [Gentoo] sanity check failed! ***
+*** \$ltmain is not defined, please check the patch for consistency! ***
+&quot; &gt;&amp;2;}
+   { (exit 1); exit 1; }; }
 fi
-gentoo_lt_version=&quot;1.5.18&quot;
-gentoo_ltmain_version=`grep '^[:space:]*VERSION=' $ltmain | sed -e 's|^[:space:]*VERSION=||'`
-if test &quot;$gentoo_lt_version&quot; != &quot;$gentoo_ltmain_version&quot;; then
+gentoo_lt_version=&quot;1.5.22&quot;
+gentoo_ltmain_version=`sed -n '/^[ 	]*VERSION=/{s/^[ 	]*VERSION=//;p;q;}' &quot;$ltmain&quot;`
+if test &quot;x$gentoo_lt_version&quot; != &quot;x$gentoo_ltmain_version&quot; ; then
   echo &quot;$as_me:$LINENO: result: no&quot; &gt;&amp;5
 echo &quot;${ECHO_T}no&quot; &gt;&amp;6
-  echo
-  echo &quot;*** Gentoo sanity check failed! ***&quot;
-  echo &quot;*** libtool.m4 and ltmain.sh have a version mismatch! ***&quot;
-  echo &quot;*** (libtool.m4 = $gentoo_lt_version, ltmain.sh = $gentoo_ltmain_version) ***&quot;
-  echo
-  echo &quot;Please run:&quot;
-  echo
-  echo &quot;  libtoolize --copy --force&quot;
-  echo
-  echo &quot;if appropriate, please contact the maintainer of this&quot;
-  echo &quot;package (or your distribution) for help.&quot;
-  echo
-  exit 1
+  { { echo &quot;$as_me:$LINENO: error:
+
+*** [Gentoo] sanity check failed! ***
+*** libtool.m4 and ltmain.sh have a version mismatch! ***
+*** (libtool.m4 = $gentoo_lt_version, ltmain.sh = $gentoo_ltmain_version) ***
+
+Please run:
+
+  libtoolize --copy --force
+
+if appropriate, please contact the maintainer of this
+package (or your distribution) for help.
+&quot; &gt;&amp;5
+echo &quot;$as_me: error:
+
+*** [Gentoo] sanity check failed! ***
+*** libtool.m4 and ltmain.sh have a version mismatch! ***
+*** (libtool.m4 = $gentoo_lt_version, ltmain.sh = $gentoo_ltmain_version) ***
+
+Please run:
+
+  libtoolize --copy --force
+
+if appropriate, please contact the maintainer of this
+package (or your distribution) for help.
+&quot; &gt;&amp;2;}
+   { (exit 1); exit 1; }; }
 else
   echo &quot;$as_me:$LINENO: result: yes&quot; &gt;&amp;5
 echo &quot;${ECHO_T}yes&quot; &gt;&amp;6
@@ -6278,6 +6341,9 @@
 # If no C compiler was specified, use CC.
 LTCC=${LTCC-&quot;$CC&quot;}
 
+# If no C compiler flags were specified, use CFLAGS.
+LTCFLAGS=${LTCFLAGS-&quot;$CFLAGS&quot;}
+
 # Allow CC to be a program name with arguments.
 compiler=$CC
 
@@ -6285,83 +6351,18 @@
 # save warnings/boilerplate of simple test code
 ac_outfile=conftest.$ac_objext
 printf &quot;$lt_simple_compile_test_code&quot; &gt;conftest.$ac_ext
-eval &quot;$ac_compile&quot; 2&gt;&amp;1 &gt;/dev/null | $SED '/^$/d' &gt;conftest.err
+eval &quot;$ac_compile&quot; 2&gt;&amp;1 &gt;/dev/null | $SED '/^$/d; /^ *+/d' &gt;conftest.err
 _lt_compiler_boilerplate=`cat conftest.err`
 $rm conftest*
 
 ac_outfile=conftest.$ac_objext
 printf &quot;$lt_simple_link_test_code&quot; &gt;conftest.$ac_ext
-eval &quot;$ac_link&quot; 2&gt;&amp;1 &gt;/dev/null | $SED '/^$/d' &gt;conftest.err
+eval &quot;$ac_link&quot; 2&gt;&amp;1 &gt;/dev/null | $SED '/^$/d; /^ *+/d' &gt;conftest.err
 _lt_linker_boilerplate=`cat conftest.err`
 $rm conftest*
 
 
-#
-# Check for any special shared library compilation flags.
-#
-lt_prog_cc_shlib=
-if test &quot;$GCC&quot; = no; then
-  case $host_os in
-  sco3.2v5*)
-    lt_prog_cc_shlib='-belf'
-    ;;
-  esac
-fi
-if test -n &quot;$lt_prog_cc_shlib&quot;; then
-  { echo &quot;$as_me:$LINENO: WARNING: \`$CC' requires \`$lt_prog_cc_shlib' to build shared libraries&quot; &gt;&amp;5
-echo &quot;$as_me: WARNING: \`$CC' requires \`$lt_prog_cc_shlib' to build shared libraries&quot; &gt;&amp;2;}
-  if echo &quot;$old_CC $old_CFLAGS &quot; | grep &quot;[ 	]$lt_prog_cc_shlib[ 	]&quot; &gt;/dev/null; then :
-  else
-    { echo &quot;$as_me:$LINENO: WARNING: add \`$lt_prog_cc_shlib' to the CC or CFLAGS env variable and reconfigure&quot; &gt;&amp;5
-echo &quot;$as_me: WARNING: add \`$lt_prog_cc_shlib' to the CC or CFLAGS env variable and reconfigure&quot; &gt;&amp;2;}
-    lt_cv_prog_cc_can_build_shared=no
-  fi
-fi
 
-
-#
-# Check to make sure the static flag actually works.
-#
-echo &quot;$as_me:$LINENO: checking if $compiler static flag $lt_prog_compiler_static works&quot; &gt;&amp;5
-echo $ECHO_N &quot;checking if $compiler static flag $lt_prog_compiler_static works... $ECHO_C&quot; &gt;&amp;6
-if test &quot;${lt_prog_compiler_static_works+set}&quot; = set; then
-  echo $ECHO_N &quot;(cached) $ECHO_C&quot; &gt;&amp;6
-else
-  lt_prog_compiler_static_works=no
-   save_LDFLAGS=&quot;$LDFLAGS&quot;
-   LDFLAGS=&quot;$LDFLAGS $lt_prog_compiler_static&quot;
-   printf &quot;$lt_simple_link_test_code&quot; &gt; conftest.$ac_ext
-   if (eval $ac_link 2&gt;conftest.err) &amp;&amp; test -s conftest$ac_exeext; then
-     # The compiler can only warn and ignore the option if not recognized
-     # So say no if there are warnings
-     if test -s conftest.err; then
-       # Append any errors to the config.log.
-       cat conftest.err 1&gt;&amp;5
-       $echo &quot;X$_lt_linker_boilerplate&quot; | $Xsed &gt; conftest.exp
-       $SED '/^$/d' conftest.err &gt;conftest.er2
-       if diff conftest.exp conftest.er2 &gt;/dev/null; then
-         lt_prog_compiler_static_works=yes
-       fi
-     else
-       lt_prog_compiler_static_works=yes
-     fi
-   fi
-   $rm conftest*
-   LDFLAGS=&quot;$save_LDFLAGS&quot;
-
-fi
-echo &quot;$as_me:$LINENO: result: $lt_prog_compiler_static_works&quot; &gt;&amp;5
-echo &quot;${ECHO_T}$lt_prog_compiler_static_works&quot; &gt;&amp;6
-
-if test x&quot;$lt_prog_compiler_static_works&quot; = xyes; then
-    :
-else
-    lt_prog_compiler_static=
-fi
-
-
-
-
 lt_prog_compiler_no_builtin_flag=
 
 if test &quot;$GCC&quot; = yes; then
@@ -6383,20 +6384,20 @@
    # with a dollar sign (not a hyphen), so the echo should work correctly.
    # The option is referenced via a variable to avoid confusing sed.
    lt_compile=`echo &quot;$ac_compile&quot; | $SED \
-   -e 's:.*FLAGS}? :&amp;$lt_compiler_flag :; t' \
+   -e 's:.*FLAGS}\{0,1\} :&amp;$lt_compiler_flag :; t' \
    -e 's: [^ ]*conftest\.: $lt_compiler_flag&amp;:; t' \
    -e 's:$: $lt_compiler_flag:'`
-   (eval echo &quot;\&quot;\$as_me:6389: $lt_compile\&quot;&quot; &gt;&amp;5)
+   (eval echo &quot;\&quot;\$as_me:6390: $lt_compile\&quot;&quot; &gt;&amp;5)
    (eval &quot;$lt_compile&quot; 2&gt;conftest.err)
    ac_status=$?
    cat conftest.err &gt;&amp;5
-   echo &quot;$as_me:6393: \$? = $ac_status&quot; &gt;&amp;5
+   echo &quot;$as_me:6394: \$? = $ac_status&quot; &gt;&amp;5
    if (exit $ac_status) &amp;&amp; test -s &quot;$ac_outfile&quot;; then
      # The compiler can only warn and ignore the option if not recognized
      # So say no if there are warnings other than the usual output.
-     $echo &quot;X$_lt_compiler_boilerplate&quot; | $Xsed &gt;conftest.exp
-     $SED '/^$/d' conftest.err &gt;conftest.er2
-     if test ! -s conftest.err || diff conftest.exp conftest.er2 &gt;/dev/null; then
+     $echo &quot;X$_lt_compiler_boilerplate&quot; | $Xsed -e '/^$/d' &gt;conftest.exp
+     $SED '/^$/d; /^ *+/d' conftest.err &gt;conftest.er2
+     if test ! -s conftest.er2 || diff conftest.exp conftest.er2 &gt;/dev/null; then
        lt_cv_prog_compiler_rtti_exceptions=yes
      fi
    fi
@@ -6457,6 +6458,11 @@
       lt_prog_compiler_pic='-fno-common'
       ;;
 
+    interix3*)
+      # Interix 3.x gcc -fpic/-fPIC options generate broken code.
+      # Instead, we relocate shared libraries at runtime.
+      ;;
+
     msdosdjgpp*)
       # Just because we use GCC doesn't mean we suddenly get shared libraries
       # on systems that don't support them.
@@ -6473,7 +6479,7 @@
     hpux*)
       # PIC is the default for IA64 HP-UX and 64-bit HP-UX, but
       # not for PA HP-UX.
-      case &quot;$host_cpu&quot; in
+      case $host_cpu in
       hppa*64*|ia64*)
 	# +Z the default
 	;;
@@ -6520,7 +6526,7 @@
       lt_prog_compiler_wl='-Wl,'
       # PIC is the default for IA64 HP-UX and 64-bit HP-UX, but
       # not for PA HP-UX.
-      case &quot;$host_cpu&quot; in
+      case $host_cpu in
       hppa*64*|ia64*)
 	# +Z the default
 	;;
@@ -6550,12 +6556,12 @@
 	lt_prog_compiler_pic='-KPIC'
 	lt_prog_compiler_static='-static'
         ;;
-      pgcc* | pgf77* | pgf90*)
+      pgcc* | pgf77* | pgf90* | pgf95*)
         # Portland Group compilers (*not* the Pentium gcc compiler,
 	# which looks to be a dead project)
 	lt_prog_compiler_wl='-Wl,'
 	lt_prog_compiler_pic='-fpic'
-	lt_prog_compiler_static='-static'
+	lt_prog_compiler_static='-Bstatic'
         ;;
       ccc*)
         lt_prog_compiler_wl='-Wl,'
@@ -6571,11 +6577,6 @@
       lt_prog_compiler_static='-non_shared'
       ;;
 
-    sco3.2v5*)
-      lt_prog_compiler_pic='-Kpic'
-      lt_prog_compiler_static='-dn'
-      ;;
-
     solaris*)
       lt_prog_compiler_pic='-KPIC'
       lt_prog_compiler_static='-Bstatic'
@@ -6593,7 +6594,7 @@
       lt_prog_compiler_static='-Bstatic'
       ;;
 
-    sysv4 | sysv4.2uw2* | sysv4.3* | sysv5*)
+    sysv4 | sysv4.2uw2* | sysv4.3*)
       lt_prog_compiler_wl='-Wl,'
       lt_prog_compiler_pic='-KPIC'
       lt_prog_compiler_static='-Bstatic'
@@ -6606,6 +6607,12 @@
       fi
       ;;
 
+    sysv5* | unixware* | sco3.2v5* | sco5v6* | OpenUNIX*)
+      lt_prog_compiler_wl='-Wl,'
+      lt_prog_compiler_pic='-KPIC'
+      lt_prog_compiler_static='-Bstatic'
+      ;;
+
     unicos*)
       lt_prog_compiler_wl='-Wl,'
       lt_prog_compiler_can_build_shared=no
@@ -6645,20 +6652,20 @@
    # with a dollar sign (not a hyphen), so the echo should work correctly.
    # The option is referenced via a variable to avoid confusing sed.
    lt_compile=`echo &quot;$ac_compile&quot; | $SED \
-   -e 's:.*FLAGS}? :&amp;$lt_compiler_flag :; t' \
+   -e 's:.*FLAGS}\{0,1\} :&amp;$lt_compiler_flag :; t' \
    -e 's: [^ ]*conftest\.: $lt_compiler_flag&amp;:; t' \
    -e 's:$: $lt_compiler_flag:'`
-   (eval echo &quot;\&quot;\$as_me:6651: $lt_compile\&quot;&quot; &gt;&amp;5)
+   (eval echo &quot;\&quot;\$as_me:6658: $lt_compile\&quot;&quot; &gt;&amp;5)
    (eval &quot;$lt_compile&quot; 2&gt;conftest.err)
    ac_status=$?
    cat conftest.err &gt;&amp;5
-   echo &quot;$as_me:6655: \$? = $ac_status&quot; &gt;&amp;5
+   echo &quot;$as_me:6662: \$? = $ac_status&quot; &gt;&amp;5
    if (exit $ac_status) &amp;&amp; test -s &quot;$ac_outfile&quot;; then
      # The compiler can only warn and ignore the option if not recognized
      # So say no if there are warnings other than the usual output.
-     $echo &quot;X$_lt_compiler_boilerplate&quot; | $Xsed &gt;conftest.exp
-     $SED '/^$/d' conftest.err &gt;conftest.er2
-     if test ! -s conftest.err || diff conftest.exp conftest.er2 &gt;/dev/null; then
+     $echo &quot;X$_lt_compiler_boilerplate&quot; | $Xsed -e '/^$/d' &gt;conftest.exp
+     $SED '/^$/d; /^ *+/d' conftest.err &gt;conftest.er2
+     if test ! -s conftest.er2 || diff conftest.exp conftest.er2 &gt;/dev/null; then
        lt_prog_compiler_pic_works=yes
      fi
    fi
@@ -6679,7 +6686,7 @@
 fi
 
 fi
-case &quot;$host_os&quot; in
+case $host_os in
   # For platforms which do not support PIC, -DPIC is meaningless:
   *djgpp*)
     lt_prog_compiler_pic=
@@ -6689,6 +6696,48 @@
     ;;
 esac
 
+#
+# Check to make sure the static flag actually works.
+#
+wl=$lt_prog_compiler_wl eval lt_tmp_static_flag=\&quot;$lt_prog_compiler_static\&quot;
+echo &quot;$as_me:$LINENO: checking if $compiler static flag $lt_tmp_static_flag works&quot; &gt;&amp;5
+echo $ECHO_N &quot;checking if $compiler static flag $lt_tmp_static_flag works... $ECHO_C&quot; &gt;&amp;6
+if test &quot;${lt_prog_compiler_static_works+set}&quot; = set; then
+  echo $ECHO_N &quot;(cached) $ECHO_C&quot; &gt;&amp;6
+else
+  lt_prog_compiler_static_works=no
+   save_LDFLAGS=&quot;$LDFLAGS&quot;
+   LDFLAGS=&quot;$LDFLAGS $lt_tmp_static_flag&quot;
+   printf &quot;$lt_simple_link_test_code&quot; &gt; conftest.$ac_ext
+   if (eval $ac_link 2&gt;conftest.err) &amp;&amp; test -s conftest$ac_exeext; then
+     # The linker can only warn and ignore the option if not recognized
+     # So say no if there are warnings
+     if test -s conftest.err; then
+       # Append any errors to the config.log.
+       cat conftest.err 1&gt;&amp;5
+       $echo &quot;X$_lt_linker_boilerplate&quot; | $Xsed -e '/^$/d' &gt; conftest.exp
+       $SED '/^$/d; /^ *+/d' conftest.err &gt;conftest.er2
+       if diff conftest.exp conftest.er2 &gt;/dev/null; then
+         lt_prog_compiler_static_works=yes
+       fi
+     else
+       lt_prog_compiler_static_works=yes
+     fi
+   fi
+   $rm conftest*
+   LDFLAGS=&quot;$save_LDFLAGS&quot;
+
+fi
+echo &quot;$as_me:$LINENO: result: $lt_prog_compiler_static_works&quot; &gt;&amp;5
+echo &quot;${ECHO_T}$lt_prog_compiler_static_works&quot; &gt;&amp;6
+
+if test x&quot;$lt_prog_compiler_static_works&quot; = xyes; then
+    :
+else
+    lt_prog_compiler_static=
+fi
+
+
 echo &quot;$as_me:$LINENO: checking if $compiler supports -c -o file.$ac_objext&quot; &gt;&amp;5
 echo $ECHO_N &quot;checking if $compiler supports -c -o file.$ac_objext... $ECHO_C&quot; &gt;&amp;6
 if test &quot;${lt_cv_prog_compiler_c_o+set}&quot; = set; then
@@ -6707,25 +6756,25 @@
    # Note that $ac_compile itself does not contain backslashes and begins
    # with a dollar sign (not a hyphen), so the echo should work correctly.
    lt_compile=`echo &quot;$ac_compile&quot; | $SED \
-   -e 's:.*FLAGS}? :&amp;$lt_compiler_flag :; t' \
+   -e 's:.*FLAGS}\{0,1\} :&amp;$lt_compiler_flag :; t' \
    -e 's: [^ ]*conftest\.: $lt_compiler_flag&amp;:; t' \
    -e 's:$: $lt_compiler_flag:'`
-   (eval echo &quot;\&quot;\$as_me:6713: $lt_compile\&quot;&quot; &gt;&amp;5)
+   (eval echo &quot;\&quot;\$as_me:6762: $lt_compile\&quot;&quot; &gt;&amp;5)
    (eval &quot;$lt_compile&quot; 2&gt;out/conftest.err)
    ac_status=$?
    cat out/conftest.err &gt;&amp;5
-   echo &quot;$as_me:6717: \$? = $ac_status&quot; &gt;&amp;5
+   echo &quot;$as_me:6766: \$? = $ac_status&quot; &gt;&amp;5
    if (exit $ac_status) &amp;&amp; test -s out/conftest2.$ac_objext
    then
      # The compiler can only warn and ignore the option if not recognized
      # So say no if there are warnings
-     $echo &quot;X$_lt_compiler_boilerplate&quot; | $Xsed &gt; out/conftest.exp
-     $SED '/^$/d' out/conftest.err &gt;out/conftest.er2
-     if test ! -s out/conftest.err || diff out/conftest.exp out/conftest.er2 &gt;/dev/null; then
+     $echo &quot;X$_lt_compiler_boilerplate&quot; | $Xsed -e '/^$/d' &gt; out/conftest.exp
+     $SED '/^$/d; /^ *+/d' out/conftest.err &gt;out/conftest.er2
+     if test ! -s out/conftest.er2 || diff out/conftest.exp out/conftest.er2 &gt;/dev/null; then
        lt_cv_prog_compiler_c_o=yes
      fi
    fi
-   chmod u+w .
+   chmod u+w . 2&gt;&amp;5
    $rm conftest*
    # SGI C++ compiler will create directory out/ii_files/ for
    # template instantiation
@@ -6821,6 +6870,10 @@
       with_gnu_ld=no
     fi
     ;;
+  interix*)
+    # we just hope/assume this is gcc and not c89 (= MSVC++)
+    with_gnu_ld=yes
+    ;;
   openbsd*)
     with_gnu_ld=no
     ;;
@@ -6905,7 +6958,7 @@
       export_symbols_cmds='$NM $libobjs $convenience | $global_symbol_pipe | $SED -e '\''/^[BCDGRS] /s/.* \([^ ]*\)/\1 DATA/'\'' | $SED -e '\''/^[AITW] /s/.* //'\'' | sort | uniq &gt; $export_symbols'
 
       if $LD --help 2&gt;&amp;1 | grep 'auto-import' &gt; /dev/null; then
-        archive_cmds='$CC -shared $libobjs $deplibs $compiler_flags -o $output_objdir/$soname ${wl}--image-base=0x10000000 ${wl}--out-implib,$lib'
+        archive_cmds='$CC -shared $libobjs $deplibs $compiler_flags -o $output_objdir/$soname ${wl}--enable-auto-image-base -Xlinker --out-implib -Xlinker $lib'
 	# If the export-symbols file already is a .def file (1st line
 	# is EXPORTS), use it as is; otherwise, prepend...
 	archive_expsym_cmds='if test &quot;x`$SED 1q $export_symbols`&quot; = xEXPORTS; then
@@ -6914,22 +6967,37 @@
 	  echo EXPORTS &gt; $output_objdir/$soname.def;
 	  cat $export_symbols &gt;&gt; $output_objdir/$soname.def;
 	fi~
-	$CC -shared $output_objdir/$soname.def $libobjs $deplibs $compiler_flags -o $output_objdir/$soname ${wl}--image-base=0x10000000  ${wl}--out-implib,$lib'
+	$CC -shared $output_objdir/$soname.def $libobjs $deplibs $compiler_flags -o $output_objdir/$soname ${wl}--enable-auto-image-base -Xlinker --out-implib -Xlinker $lib'
       else
 	ld_shlibs=no
       fi
       ;;
 
+    interix3*)
+      hardcode_direct=no
+      hardcode_shlibpath_var=no
+      hardcode_libdir_flag_spec='${wl}-rpath,$libdir'
+      export_dynamic_flag_spec='${wl}-E'
+      # Hack: On Interix 3.x, we cannot compile PIC because of a broken gcc.
+      # Instead, shared libraries are loaded at an image base (0x10000000 by
+      # default) and relocated if they conflict, which is a slow very memory
+      # consuming and fragmenting process.  To avoid this, we pick a random,
+      # 256 KiB-aligned image base between 0x50000000 and 0x6FFC0000 at link
+      # time.  Moving up from 0x10000000 also allows more sbrk(2) space.
+      archive_cmds='$CC -shared $pic_flag $libobjs $deplibs $compiler_flags ${wl}-h,$soname ${wl}--image-base,`expr ${RANDOM-$$} % 4096 / 2 \* 262144 + 1342177280` -o $lib'
+      archive_expsym_cmds='sed &quot;s,^,_,&quot; $export_symbols &gt;$output_objdir/$soname.expsym~$CC -shared $pic_flag $libobjs $deplibs $compiler_flags ${wl}-h,$soname ${wl}--retain-symbols-file,$output_objdir/$soname.expsym ${wl}--image-base,`expr ${RANDOM-$$} % 4096 / 2 \* 262144 + 1342177280` -o $lib'
+      ;;
+
     linux*)
       if $LD --help 2&gt;&amp;1 | grep ': supported targets:.* elf' &gt; /dev/null; then
 	tmp_addflag=
 	case $cc_basename,$host_cpu in
 	pgcc*)				# Portland Group C compiler
-	  whole_archive_flag_spec='${wl}--whole-archive,`for conv in $convenience\&quot;\&quot;; do test  -n \&quot;$conv\&quot; &amp;&amp; new_convenience=\&quot;$new_convenience,$conv\&quot;; done; $echo \&quot;$new_convenience\&quot;` ${wl}--no-whole-archive'
+	  whole_archive_flag_spec='${wl}--whole-archive`for conv in $convenience\&quot;\&quot;; do test  -n \&quot;$conv\&quot; &amp;&amp; new_convenience=\&quot;$new_convenience,$conv\&quot;; done; $echo \&quot;$new_convenience\&quot;` ${wl}--no-whole-archive'
 	  tmp_addflag=' $pic_flag'
 	  ;;
-	pgf77* | pgf90* )			# Portland Group f77 and f90 compilers
-	  whole_archive_flag_spec='${wl}--whole-archive,`for conv in $convenience\&quot;\&quot;; do test  -n \&quot;$conv\&quot; &amp;&amp; new_convenience=\&quot;$new_convenience,$conv\&quot;; done; $echo \&quot;$new_convenience\&quot;` ${wl}--no-whole-archive'
+	pgf77* | pgf90* | pgf95*)	# Portland Group f77 and f90 compilers
+	  whole_archive_flag_spec='${wl}--whole-archive`for conv in $convenience\&quot;\&quot;; do test  -n \&quot;$conv\&quot; &amp;&amp; new_convenience=\&quot;$new_convenience,$conv\&quot;; done; $echo \&quot;$new_convenience\&quot;` ${wl}--no-whole-archive'
 	  tmp_addflag=' $pic_flag -Mnomain' ;;
 	ecc*,ia64* | icc*,ia64*)		# Intel C compiler on ia64
 	  tmp_addflag=' -i_dynamic' ;;
@@ -6961,7 +7029,7 @@
       fi
       ;;
 
-    solaris* | sysv5*)
+    solaris*)
       if $LD -v 2&gt;&amp;1 | grep 'BFD 2\.8' &gt; /dev/null; then
 	ld_shlibs=no
 	cat &lt;&lt;EOF 1&gt;&amp;2
@@ -6982,6 +7050,33 @@
       fi
       ;;
 
+    sysv5* | sco3.2v5* | sco5v6* | unixware* | OpenUNIX*)
+      case `$LD -v 2&gt;&amp;1` in
+        *\ [01].* | *\ 2.[0-9].* | *\ 2.1[0-5].*)
+	ld_shlibs=no
+	cat &lt;&lt;_LT_EOF 1&gt;&amp;2
+
+*** Warning: Releases of the GNU linker prior to 2.16.91.0.3 can not
+*** reliably create shared libraries on SCO systems.  Therefore, libtool
+*** is disabling shared libraries support.  We urge you to upgrade GNU
+*** binutils to release 2.16.91.0.3 or newer.  Another option is to modify
+*** your PATH or compiler configuration so that the native linker is
+*** used, and then restart.
+
+_LT_EOF
+	;;
+	*)
+	  if $LD --help 2&gt;&amp;1 | grep ': supported targets:.* elf' &gt; /dev/null; then
+	    hardcode_libdir_flag_spec='`test -z &quot;$SCOABSPATH&quot; &amp;&amp; echo ${wl}-rpath,$libdir`'
+	    archive_cmds='$CC -shared $libobjs $deplibs $compiler_flags ${wl}-soname,\${SCOABSPATH:+${install_libdir}/}$soname -o $lib'
+	    archive_expsym_cmds='$CC -shared $libobjs $deplibs $compiler_flags ${wl}-soname,\${SCOABSPATH:+${install_libdir}/}$soname,-retain-symbols-file,$export_symbols -o $lib'
+	  else
+	    ld_shlibs=no
+	  fi
+	;;
+      esac
+      ;;
+
     sunos4*)
       archive_cmds='$LD -assert pure-text -Bshareable -o $lib $libobjs $deplibs $linker_flags'
       wlarc=
@@ -7015,7 +7110,7 @@
       # Note: this linker hardcodes the directories in LIBPATH if there
       # are no directories specified by -L.
       hardcode_minus_L=yes
-      if test &quot;$GCC&quot; = yes &amp;&amp; test -z &quot;$link_static_flag&quot;; then
+      if test &quot;$GCC&quot; = yes &amp;&amp; test -z &quot;$lt_prog_compiler_static&quot;; then
 	# Neither direct hardcoding nor static linking is supported with a
 	# broken collect2.
 	hardcode_direct=unsupported
@@ -7049,6 +7144,7 @@
   	    break
   	  fi
 	  done
+	  ;;
 	esac
 
 	exp_sym_flag='-bexport'
@@ -7086,6 +7182,7 @@
   	  hardcode_libdir_flag_spec='-L$libdir'
   	  hardcode_libdir_separator=
 	  fi
+	  ;;
 	esac
 	shared_flag='-shared'
 	if test &quot;$aix_use_runtimelinking&quot; = yes; then
@@ -7098,11 +7195,11 @@
   	# chokes on -Wl,-G. The following line is correct:
 	  shared_flag='-G'
 	else
-  	if test &quot;$aix_use_runtimelinking&quot; = yes; then
+	  if test &quot;$aix_use_runtimelinking&quot; = yes; then
 	    shared_flag='${wl}-G'
 	  else
 	    shared_flag='${wl}-bM:SRE'
-  	fi
+	  fi
 	fi
       fi
 
@@ -7167,12 +7264,12 @@
 if test -z &quot;$aix_libpath&quot;; then aix_libpath=&quot;/usr/lib:/lib&quot;; fi
 
        hardcode_libdir_flag_spec='${wl}-blibpath:$libdir:'&quot;$aix_libpath&quot;
-	archive_expsym_cmds=&quot;\$CC&quot;' -o $output_objdir/$soname $libobjs $deplibs $compiler_flags `if test &quot;x${allow_undefined_flag}&quot; != &quot;x&quot;; then echo &quot;${wl}${allow_undefined_flag}&quot;; else :; fi` '&quot;\${wl}$no_entry_flag \${wl}$exp_sym_flag:\$export_symbols $shared_flag&quot;
+	archive_expsym_cmds=&quot;\$CC&quot;' -o $output_objdir/$soname $libobjs $deplibs '&quot;\${wl}$no_entry_flag&quot;' $compiler_flags `if test &quot;x${allow_undefined_flag}&quot; != &quot;x&quot;; then echo &quot;${wl}${allow_undefined_flag}&quot;; else :; fi` '&quot;\${wl}$exp_sym_flag:\$export_symbols $shared_flag&quot;
        else
 	if test &quot;$host_cpu&quot; = ia64; then
 	  hardcode_libdir_flag_spec='${wl}-R $libdir:/usr/lib:/lib'
 	  allow_undefined_flag=&quot;-z nodefs&quot;
-	  archive_expsym_cmds=&quot;\$CC $shared_flag&quot;' -o $output_objdir/$soname $libobjs $deplibs $compiler_flags ${wl}${allow_undefined_flag} '&quot;\${wl}$no_entry_flag \${wl}$exp_sym_flag:\$export_symbols&quot;
+	  archive_expsym_cmds=&quot;\$CC $shared_flag&quot;' -o $output_objdir/$soname $libobjs $deplibs '&quot;\${wl}$no_entry_flag&quot;' $compiler_flags ${wl}${allow_undefined_flag} '&quot;\${wl}$exp_sym_flag:\$export_symbols&quot;
 	else
 	 # Determine the default libpath from the value encoded in an empty executable.
 	 cat &gt;conftest.$ac_ext &lt;&lt;_ACEOF
@@ -7232,13 +7329,11 @@
 	  # -berok will link without error, but may produce a broken library.
 	  no_undefined_flag=' ${wl}-bernotok'
 	  allow_undefined_flag=' ${wl}-berok'
-	  # -bexpall does not export symbols beginning with underscore (_)
-	  always_export_symbols=yes
 	  # Exported symbols can be pulled into shared objects from archives
-	  whole_archive_flag_spec=' '
+	  whole_archive_flag_spec='$convenience'
 	  archive_cmds_need_lc=yes
-	  # This is similar to how AIX traditionally builds it's shared libraries.
-	  archive_expsym_cmds=&quot;\$CC $shared_flag&quot;' -o $output_objdir/$soname $libobjs $deplibs $compiler_flags ${wl}-bE:$export_symbols ${wl}-bnoentry${allow_undefined_flag}~$AR $AR_FLAGS $output_objdir/$libname$release.a $output_objdir/$soname'
+	  # This is similar to how AIX traditionally builds its shared libraries.
+	  archive_expsym_cmds=&quot;\$CC $shared_flag&quot;' -o $output_objdir/$soname $libobjs $deplibs ${wl}-bnoentry $compiler_flags ${wl}-bE:$export_symbols${allow_undefined_flag}~$AR $AR_FLAGS $output_objdir/$libname$release.a $output_objdir/$soname'
 	fi
       fi
       ;;
@@ -7277,7 +7372,7 @@
       ;;
 
     darwin* | rhapsody*)
-      case &quot;$host_os&quot; in
+      case $host_os in
         rhapsody* | darwin1.[012])
          allow_undefined_flag='${wl}-undefined ${wl}suppress'
          ;;
@@ -7306,7 +7401,7 @@
     	output_verbose_link_cmd='echo'
         archive_cmds='$CC -dynamiclib $allow_undefined_flag -o $lib $libobjs $deplibs $compiler_flags -install_name $rpath/$soname $verstring'
       module_cmds='$CC $allow_undefined_flag -o $lib -bundle $libobjs $deplibs$compiler_flags'
-      # Don't fix this by using the ld -exported_symbols_list flag, it doesn't exist in older darwin ld's
+      # Don't fix this by using the ld -exported_symbols_list flag, it doesn't exist in older darwin lds
       archive_expsym_cmds='sed -e &quot;s,#.*,,&quot; -e &quot;s,^[    ]*,,&quot; -e &quot;s,^\(..*\),_&amp;,&quot; &lt; $export_symbols &gt; $output_objdir/${libname}-symbols.expsym~$CC -dynamiclib $allow_undefined_flag -o $lib $libobjs $deplibs $compiler_flags -install_name $rpath/$soname $verstring~nmedit -s $output_objdir/${libname}-symbols.expsym ${lib}'
       module_expsym_cmds='sed -e &quot;s,#.*,,&quot; -e &quot;s,^[    ]*,,&quot; -e &quot;s,^\(..*\),_&amp;,&quot; &lt; $export_symbols &gt; $output_objdir/${libname}-symbols.expsym~$CC $allow_undefined_flag  -o $lib -bundle $libobjs $deplibs$compiler_flags~nmedit -s $output_objdir/${libname}-symbols.expsym ${lib}'
     else
@@ -7315,7 +7410,7 @@
          output_verbose_link_cmd='echo'
          archive_cmds='$CC -qmkshrobj $allow_undefined_flag -o $lib $libobjs $deplibs $compiler_flags ${wl}-install_name ${wl}`echo $rpath/$soname` $verstring'
          module_cmds='$CC $allow_undefined_flag -o $lib -bundle $libobjs $deplibs$compiler_flags'
-          # Don't fix this by using the ld -exported_symbols_list flag, it doesn't exist in older darwin ld's
+          # Don't fix this by using the ld -exported_symbols_list flag, it doesn't exist in older darwin lds
          archive_expsym_cmds='sed -e &quot;s,#.*,,&quot; -e &quot;s,^[    ]*,,&quot; -e &quot;s,^\(..*\),_&amp;,&quot; &lt; $export_symbols &gt; $output_objdir/${libname}-symbols.expsym~$CC -qmkshrobj $allow_undefined_flag -o $lib $libobjs $deplibs $compiler_flags ${wl}-install_name ${wl}$rpath/$soname $verstring~nmedit -s $output_objdir/${libname}-symbols.expsym ${lib}'
           module_expsym_cmds='sed -e &quot;s,#.*,,&quot; -e &quot;s,^[    ]*,,&quot; -e &quot;s,^\(..*\),_&amp;,&quot; &lt; $export_symbols &gt; $output_objdir/${libname}-symbols.expsym~$CC $allow_undefined_flag  -o $lib -bundle $libobjs $deplibs$compiler_flags~nmedit -s $output_objdir/${libname}-symbols.expsym ${lib}'
           ;;
@@ -7379,47 +7474,62 @@
       export_dynamic_flag_spec='${wl}-E'
       ;;
 
-    hpux10* | hpux11*)
+    hpux10*)
       if test &quot;$GCC&quot; = yes -a &quot;$with_gnu_ld&quot; = no; then
-	case &quot;$host_cpu&quot; in
-	hppa*64*|ia64*)
+	archive_cmds='$CC -shared -fPIC ${wl}+h ${wl}$soname ${wl}+b ${wl}$install_libdir -o $lib $libobjs $deplibs $compiler_flags'
+      else
+	archive_cmds='$LD -b +h $soname +b $install_libdir -o $lib $libobjs $deplibs $linker_flags'
+      fi
+      if test &quot;$with_gnu_ld&quot; = no; then
+	hardcode_libdir_flag_spec='${wl}+b ${wl}$libdir'
+	hardcode_libdir_separator=:
+
+	hardcode_direct=yes
+	export_dynamic_flag_spec='${wl}-E'
+
+	# hardcode_minus_L: Not really in the search PATH,
+	# but as the default location of the library.
+	hardcode_minus_L=yes
+      fi
+      ;;
+
+    hpux11*)
+      if test &quot;$GCC&quot; = yes -a &quot;$with_gnu_ld&quot; = no; then
+	case $host_cpu in
+	hppa*64*)
 	  archive_cmds='$CC -shared ${wl}+h ${wl}$soname -o $lib $libobjs $deplibs $compiler_flags'
 	  ;;
+	ia64*)
+	  archive_cmds='$CC -shared ${wl}+h ${wl}$soname ${wl}+nodefaultrpath -o $lib $libobjs $deplibs $compiler_flags'
+	  ;;
 	*)
 	  archive_cmds='$CC -shared -fPIC ${wl}+h ${wl}$soname ${wl}+b ${wl}$install_libdir -o $lib $libobjs $deplibs $compiler_flags'
 	  ;;
 	esac
       else
-	case &quot;$host_cpu&quot; in
-	hppa*64*|ia64*)
-	  archive_cmds='$LD -b +h $soname -o $lib $libobjs $deplibs $linker_flags'
+	case $host_cpu in
+	hppa*64*)
+	  archive_cmds='$CC -b ${wl}+h ${wl}$soname -o $lib $libobjs $deplibs $compiler_flags'
 	  ;;
+	ia64*)
+	  archive_cmds='$CC -b ${wl}+h ${wl}$soname ${wl}+nodefaultrpath -o $lib $libobjs $deplibs $compiler_flags'
+	  ;;
 	*)
-	  archive_cmds='$LD -b +h $soname +b $install_libdir -o $lib $libobjs $deplibs $linker_flags'
+	  archive_cmds='$CC -b ${wl}+h ${wl}$soname ${wl}+b ${wl}$install_libdir -o $lib $libobjs $deplibs $compiler_flags'
 	  ;;
 	esac
       fi
       if test &quot;$with_gnu_ld&quot; = no; then
-	case &quot;$host_cpu&quot; in
-	hppa*64*)
-	  hardcode_libdir_flag_spec='${wl}+b ${wl}$libdir'
+	hardcode_libdir_flag_spec='${wl}+b ${wl}$libdir'
+	hardcode_libdir_separator=:
+
+	case $host_cpu in
+	hppa*64*|ia64*)
 	  hardcode_libdir_flag_spec_ld='+b $libdir'
-	  hardcode_libdir_separator=:
 	  hardcode_direct=no
 	  hardcode_shlibpath_var=no
 	  ;;
-	ia64*)
-	  hardcode_libdir_flag_spec='-L$libdir'
-	  hardcode_direct=no
-	  hardcode_shlibpath_var=no
-
-	  # hardcode_minus_L: Not really in the search PATH,
-	  # but as the default location of the library.
-	  hardcode_minus_L=yes
-	  ;;
 	*)
-	  hardcode_libdir_flag_spec='${wl}+b ${wl}$libdir'
-	  hardcode_libdir_separator=:
 	  hardcode_direct=yes
 	  export_dynamic_flag_spec='${wl}-E'
 
@@ -7521,14 +7631,6 @@
       hardcode_libdir_separator=:
       ;;
 
-    sco3.2v5*)
-      archive_cmds='$LD -G -h $soname -o $lib $libobjs $deplibs $linker_flags'
-      hardcode_shlibpath_var=no
-      export_dynamic_flag_spec='${wl}-Bexport'
-      runpath_var=LD_RUN_PATH
-      hardcode_runpath_var=yes
-      ;;
-
     solaris*)
       no_undefined_flag=' -z text'
       if test &quot;$GCC&quot; = yes; then
@@ -7614,36 +7716,45 @@
       fi
       ;;
 
-    sysv4.2uw2*)
-      archive_cmds='$LD -G -o $lib $libobjs $deplibs $linker_flags'
-      hardcode_direct=yes
-      hardcode_minus_L=no
+    sysv4*uw2* | sysv5OpenUNIX* | sysv5UnixWare7.[01].[10]* | unixware7*)
+      no_undefined_flag='${wl}-z,text'
+      archive_cmds_need_lc=no
       hardcode_shlibpath_var=no
-      hardcode_runpath_var=yes
-      runpath_var=LD_RUN_PATH
-      ;;
+      runpath_var='LD_RUN_PATH'
 
-   sysv5OpenUNIX8* | sysv5UnixWare7* |  sysv5uw[78]* | unixware7*)
-      no_undefined_flag='${wl}-z ${wl}text'
       if test &quot;$GCC&quot; = yes; then
-	archive_cmds='$CC -shared ${wl}-h ${wl}$soname -o $lib $libobjs $deplibs $compiler_flags'
+	archive_cmds='$CC -shared ${wl}-h,$soname -o $lib $libobjs $deplibs $compiler_flags'
+	archive_expsym_cmds='$CC -shared ${wl}-Bexport:$export_symbols ${wl}-h,$soname -o $lib $libobjs $deplibs $compiler_flags'
       else
-	archive_cmds='$CC -G ${wl}-h ${wl}$soname -o $lib $libobjs $deplibs $compiler_flags'
+	archive_cmds='$CC -G ${wl}-h,$soname -o $lib $libobjs $deplibs $compiler_flags'
+	archive_expsym_cmds='$CC -G ${wl}-Bexport:$export_symbols ${wl}-h,$soname -o $lib $libobjs $deplibs $compiler_flags'
       fi
-      runpath_var='LD_RUN_PATH'
-      hardcode_shlibpath_var=no
       ;;
 
-    sysv5*)
-      no_undefined_flag=' -z text'
-      # $CC -shared without GNU ld will not create a library from C++
-      # object files and a static libstdc++, better avoid it by now
-      archive_cmds='$LD -G${allow_undefined_flag} -h $soname -o $lib $libobjs $deplibs $linker_flags'
-      archive_expsym_cmds='$echo &quot;{ global:&quot; &gt; $lib.exp~cat $export_symbols | $SED -e &quot;s/\(.*\)/\1;/&quot; &gt;&gt; $lib.exp~$echo &quot;local: *; };&quot; &gt;&gt; $lib.exp~
-  		$LD -G${allow_undefined_flag} -M $lib.exp -h $soname -o $lib $libobjs $deplibs $linker_flags~$rm $lib.exp'
-      hardcode_libdir_flag_spec=
+    sysv5* | sco3.2v5* | sco5v6*)
+      # Note: We can NOT use -z defs as we might desire, because we do not
+      # link with -lc, and that would cause any symbols used from libc to
+      # always be unresolved, which means just about no library would
+      # ever link correctly.  If we're not using GNU ld we use -z text
+      # though, which does catch some bad symbols but isn't as heavy-handed
+      # as -z defs.
+      no_undefined_flag='${wl}-z,text'
+      allow_undefined_flag='${wl}-z,nodefs'
+      archive_cmds_need_lc=no
       hardcode_shlibpath_var=no
+      hardcode_libdir_flag_spec='`test -z &quot;$SCOABSPATH&quot; &amp;&amp; echo ${wl}-R,$libdir`'
+      hardcode_libdir_separator=':'
+      link_all_deplibs=yes
+      export_dynamic_flag_spec='${wl}-Bexport'
       runpath_var='LD_RUN_PATH'
+
+      if test &quot;$GCC&quot; = yes; then
+	archive_cmds='$CC -shared ${wl}-h,\${SCOABSPATH:+${install_libdir}/}$soname -o $lib $libobjs $deplibs $compiler_flags'
+	archive_expsym_cmds='$CC -shared ${wl}-Bexport:$export_symbols ${wl}-h,\${SCOABSPATH:+${install_libdir}/}$soname -o $lib $libobjs $deplibs $compiler_flags'
+      else
+	archive_cmds='$CC -G ${wl}-h,\${SCOABSPATH:+${install_libdir}/}$soname -o $lib $libobjs $deplibs $compiler_flags'
+	archive_expsym_cmds='$CC -G ${wl}-Bexport:$export_symbols ${wl}-h,\${SCOABSPATH:+${install_libdir}/}$soname -o $lib $libobjs $deplibs $compiler_flags'
+      fi
       ;;
 
     uts4*)
@@ -7662,11 +7773,6 @@
 echo &quot;${ECHO_T}$ld_shlibs&quot; &gt;&amp;6
 test &quot;$ld_shlibs&quot; = no &amp;&amp; can_build_shared=no
 
-variables_saved_for_relink=&quot;PATH $shlibpath_var $runpath_var&quot;
-if test &quot;$GCC&quot; = yes; then
-  variables_saved_for_relink=&quot;$variables_saved_for_relink GCC_EXEC_PREFIX COMPILER_PATH LIBRARY_PATH&quot;
-fi
-
 #
 # Do we need to explicitly link libc?
 #
@@ -7699,6 +7805,7 @@
         libobjs=conftest.$ac_objext
         deplibs=
         wl=$lt_prog_compiler_wl
+	pic_flag=$lt_prog_compiler_pic
         compiler_flags=-v
         linker_flags=-v
         verstring=
@@ -7859,7 +7966,8 @@
       dlpath=`$SHELL 2&gt;&amp;1 -c '\''. $dir/'\''\${base_file}'\''i;echo \$dlname'\''`~
       dldir=$destdir/`dirname \$dlpath`~
       test -d \$dldir || mkdir -p \$dldir~
-      $install_prog $dir/$dlname \$dldir/$dlname'
+      $install_prog $dir/$dlname \$dldir/$dlname~
+      chmod a+x \$dldir/$dlname'
     postuninstall_cmds='dldll=`$SHELL 2&gt;&amp;1 -c '\''. $file; echo \$dlname'\''`~
       dlpath=$dir/\$dldll~
        $rm \$dlpath'
@@ -7936,7 +8044,7 @@
   soname_spec='${libname}${release}${major}$shared_ext'
   shlibpath_overrides_runpath=yes
   shlibpath_var=DYLD_LIBRARY_PATH
-  shrext_cmds='$(test .$module = .yes &amp;&amp; echo .so || echo .dylib)'
+  shrext_cmds='`test .$module = .yes &amp;&amp; echo .so || echo .dylib`'
   # Apple's gcc prints 'gcc -print-search-dirs' doesn't operate the same.
   if test &quot;$GCC&quot; = yes; then
     sys_lib_search_path_spec=`$CC -print-search-dirs | tr &quot;\n&quot; &quot;$PATH_SEPARATOR&quot; | sed -e 's/libraries:/@libraries:/' | tr &quot;@&quot; &quot;\n&quot; | grep &quot;^libraries:&quot; | sed -e &quot;s/^<A HREF="libraries://">libraries://</A>&quot; -e &quot;s,=/,/,g&quot; -e &quot;s,$PATH_SEPARATOR, ,g&quot; -e &quot;s,.*,&amp; /lib /usr/lib /usr/local/lib,g&quot;`
@@ -7974,8 +8082,22 @@
 freebsd* | dragonfly*)
   # DragonFly does not have aout.  When/if they implement a new
   # versioning mechanism, adjust this.
-  objformat=`test -x /usr/bin/objformat &amp;&amp; /usr/bin/objformat || echo aout`
-  version_type=freebsd-$objformat
+  if test -x /usr/bin/objformat; then
+    objformat=`/usr/bin/objformat`
+  else
+    case $host_os in
+    freebsd[123]*) objformat=aout ;;
+    *) objformat=elf ;;
+    esac
+  fi
+  # Handle Gentoo/FreeBSD as it was Linux
+  case $host_vendor in
+    gentoo)
+      version_type=linux ;;
+    *)
+      version_type=freebsd-$objformat ;;
+  esac
+
   case $version_type in
     freebsd-elf*)
       library_names_spec='${libname}${release}${shared_ext}$versuffix ${libname}${release}${shared_ext} $libname${shared_ext}'
@@ -7986,6 +8108,12 @@
       library_names_spec='${libname}${release}${shared_ext}$versuffix $libname${shared_ext}$versuffix'
       need_version=yes
       ;;
+    linux)
+      library_names_spec='${libname}${release}${shared_ext}$versuffix ${libname}${release}${shared_ext}$major ${libname}${shared_ext}'
+      soname_spec='${libname}${release}${shared_ext}$major'
+      need_lib_prefix=no
+      need_version=no
+      ;;
   esac
   shlibpath_var=LD_LIBRARY_PATH
   case $host_os in
@@ -7996,10 +8124,15 @@
     shlibpath_overrides_runpath=yes
     hardcode_into_libs=yes
     ;;
-  *) # from 3.2 on
+  freebsd3.[2-9]* | freebsdelf3.[2-9]* | \
+  freebsd4.[0-5] | freebsdelf4.[0-5] | freebsd4.1.1 | freebsdelf4.1.1)
     shlibpath_overrides_runpath=no
     hardcode_into_libs=yes
     ;;
+  freebsd*) # from 4.6 on
+    shlibpath_overrides_runpath=yes
+    hardcode_into_libs=yes
+    ;;
   esac
   ;;
 
@@ -8019,7 +8152,7 @@
   version_type=sunos
   need_lib_prefix=no
   need_version=no
-  case &quot;$host_cpu&quot; in
+  case $host_cpu in
   ia64*)
     shrext_cmds='.so'
     hardcode_into_libs=yes
@@ -8059,6 +8192,18 @@
   postinstall_cmds='chmod 555 $lib'
   ;;
 
+interix3*)
+  version_type=linux
+  need_lib_prefix=no
+  need_version=no
+  library_names_spec='${libname}${release}${shared_ext}$versuffix ${libname}${release}${shared_ext}$major ${libname}${shared_ext}'
+  soname_spec='${libname}${release}${shared_ext}$major'
+  dynamic_linker='Interix 3.x ld.so.1 (PE, like ELF)'
+  shlibpath_var=LD_LIBRARY_PATH
+  shlibpath_overrides_runpath=no
+  hardcode_into_libs=yes
+  ;;
+
 irix5* | irix6* | nonstopux*)
   case $host_os in
     nonstopux*) version_type=nonstopux ;;
@@ -8122,13 +8267,6 @@
     sys_lib_dlsearch_path_spec=&quot;/lib /usr/lib $lt_ld_extra&quot;
   fi
 
-  case $host_cpu:$lt_cv_cc_64bit_output in
-  powerpc64:yes | s390x:yes | sparc64:yes | x86_64:yes)
-    sys_lib_dlsearch_path_spec=&quot;/lib64 /usr/lib64 /usr/X11R6/lib64&quot;
-    sys_lib_search_path_spec=&quot;/lib64 /usr/lib64 /usr/local/lib64 /usr/X11R6/lib64&quot;
-    ;;
-  esac
-
   # We used to test for /lib/ld.so.1 and disable shared libraries on
   # powerpc, because MkLinux only supported shared libraries with the
   # GNU dynamic linker.  Since this was broken with cross compilers,
@@ -8136,30 +8274,6 @@
   # people can always --disable-shared, the test was removed, and we
   # assume the GNU/Linux dynamic linker is in use.
   dynamic_linker='GNU/Linux ld.so'
-
-  # Find out which ABI we are using (multilib Linux x86_64 hack).
-  libsuff=
-  case &quot;$host_cpu&quot; in
-  x86_64*)
-    echo '#line 8144 &quot;configure&quot;' &gt; conftest.$ac_ext
-    if { (eval echo &quot;$as_me:$LINENO: \&quot;$ac_compile\&quot;&quot;) &gt;&amp;5
-  (eval $ac_compile) 2&gt;&amp;5
-  ac_status=$?
-  echo &quot;$as_me:$LINENO: \$? = $ac_status&quot; &gt;&amp;5
-  (exit $ac_status); }; then
-      case `/usr/bin/file conftest.$ac_objext` in
-      *64-bit*)
-        libsuff=64
-        ;;
-      esac
-    fi
-    rm -rf conftest*
-    ;;
-  *)
-    ;;
-  esac
-  sys_lib_dlsearch_path_spec=&quot;/lib${libsuff} /usr/lib${libsuff}&quot;
-  sys_lib_search_path_spec=&quot;/lib${libsuff} /usr/lib${libsuff} /usr/local/lib${libsuff}&quot;
   ;;
 
 knetbsd*-gnu)
@@ -8211,6 +8325,7 @@
 
 openbsd*)
   version_type=sunos
+  sys_lib_dlsearch_path_spec=&quot;/usr/lib&quot;
   need_lib_prefix=no
   # Some older versions of OpenBSD (3.3 at least) *do* need versioned libs.
   case $host_os in
@@ -8254,13 +8369,6 @@
   sys_lib_dlsearch_path_spec=&quot;$sys_lib_search_path_spec&quot;
   ;;
 
-sco3.2v5*)
-  version_type=osf
-  soname_spec='${libname}${release}${shared_ext}$major'
-  library_names_spec='${libname}${release}${shared_ext}$versuffix ${libname}${release}${shared_ext}$major $libname${shared_ext}'
-  shlibpath_var=LD_LIBRARY_PATH
-  ;;
-
 solaris*)
   version_type=linux
   need_lib_prefix=no
@@ -8286,7 +8394,7 @@
   need_version=yes
   ;;
 
-sysv4 | sysv4.2uw2* | sysv4.3* | sysv5*)
+sysv4 | sysv4.3*)
   version_type=linux
   library_names_spec='${libname}${release}${shared_ext}$versuffix ${libname}${release}${shared_ext}$major $libname${shared_ext}'
   soname_spec='${libname}${release}${shared_ext}$major'
@@ -8319,6 +8427,29 @@
   fi
   ;;
 
+sysv5* | sco3.2v5* | sco5v6* | unixware* | OpenUNIX* | sysv4*uw2*)
+  version_type=freebsd-elf
+  need_lib_prefix=no
+  need_version=no
+  library_names_spec='${libname}${release}${shared_ext}$versuffix ${libname}${release}${shared_ext} $libname${shared_ext}'
+  soname_spec='${libname}${release}${shared_ext}$major'
+  shlibpath_var=LD_LIBRARY_PATH
+  hardcode_into_libs=yes
+  if test &quot;$with_gnu_ld&quot; = yes; then
+    sys_lib_search_path_spec='/usr/local/lib /usr/gnu/lib /usr/ccs/lib /usr/lib /lib'
+    shlibpath_overrides_runpath=no
+  else
+    sys_lib_search_path_spec='/usr/ccs/lib /usr/lib'
+    shlibpath_overrides_runpath=yes
+    case $host_os in
+      sco3.2v5*)
+        sys_lib_search_path_spec=&quot;$sys_lib_search_path_spec /lib&quot;
+	;;
+    esac
+  fi
+  sys_lib_dlsearch_path_spec='/usr/lib'
+  ;;
+
 uts4*)
   version_type=linux
   library_names_spec='${libname}${release}${shared_ext}$versuffix ${libname}${release}${shared_ext}$major $libname${shared_ext}'
@@ -8334,6 +8465,11 @@
 echo &quot;${ECHO_T}$dynamic_linker&quot; &gt;&amp;6
 test &quot;$dynamic_linker&quot; = no &amp;&amp; can_build_shared=no
 
+variables_saved_for_relink=&quot;PATH $shlibpath_var $runpath_var&quot;
+if test &quot;$GCC&quot; = yes; then
+  variables_saved_for_relink=&quot;$variables_saved_for_relink GCC_EXEC_PREFIX COMPILER_PATH LIBRARY_PATH&quot;
+fi
+
 echo &quot;$as_me:$LINENO: checking how to hardcode library paths into programs&quot; &gt;&amp;5
 echo $ECHO_N &quot;checking how to hardcode library paths into programs... $ECHO_C&quot; &gt;&amp;6
 hardcode_action=
@@ -8989,7 +9125,7 @@
     test &quot;x$ac_cv_header_dlfcn_h&quot; = xyes &amp;&amp; CPPFLAGS=&quot;$CPPFLAGS -DHAVE_DLFCN_H&quot;
 
     save_LDFLAGS=&quot;$LDFLAGS&quot;
-    eval LDFLAGS=\&quot;\$LDFLAGS $export_dynamic_flag_spec\&quot;
+    wl=$lt_prog_compiler_wl eval LDFLAGS=\&quot;\$LDFLAGS $export_dynamic_flag_spec\&quot;
 
     save_LIBS=&quot;$LIBS&quot;
     LIBS=&quot;$lt_cv_dlopen_libs $LIBS&quot;
@@ -9005,7 +9141,7 @@
   lt_dlunknown=0; lt_dlno_uscore=1; lt_dlneed_uscore=2
   lt_status=$lt_dlunknown
   cat &gt; conftest.$ac_ext &lt;&lt;EOF
-#line 9008 &quot;configure&quot;
+#line 9144 &quot;configure&quot;
 #include &quot;confdefs.h&quot;
 
 #if HAVE_DLFCN_H
@@ -9062,6 +9198,8 @@
       else if (dlsym( self,&quot;_fnord&quot;)) status = $lt_dlneed_uscore;
       /* dlclose (self); */
     }
+  else
+    puts (dlerror ());
 
     exit (status);
 }
@@ -9071,12 +9209,12 @@
   ac_status=$?
   echo &quot;$as_me:$LINENO: \$? = $ac_status&quot; &gt;&amp;5
   (exit $ac_status); } &amp;&amp; test -s conftest${ac_exeext} 2&gt;/dev/null; then
-    (./conftest; exit; ) 2&gt;/dev/null
+    (./conftest; exit; ) &gt;&amp;5 2&gt;/dev/null
     lt_status=$?
     case x$lt_status in
       x$lt_dlno_uscore) lt_cv_dlopen_self=yes ;;
       x$lt_dlneed_uscore) lt_cv_dlopen_self=yes ;;
-      x$lt_unknown|x*) lt_cv_dlopen_self=no ;;
+      x$lt_dlunknown|x*) lt_cv_dlopen_self=no ;;
     esac
   else :
     # compilation failed
@@ -9091,7 +9229,7 @@
 echo &quot;${ECHO_T}$lt_cv_dlopen_self&quot; &gt;&amp;6
 
     if test &quot;x$lt_cv_dlopen_self&quot; = xyes; then
-      LDFLAGS=&quot;$LDFLAGS $link_static_flag&quot;
+      wl=$lt_prog_compiler_wl eval LDFLAGS=\&quot;\$LDFLAGS $lt_prog_compiler_static\&quot;
       echo &quot;$as_me:$LINENO: checking whether a statically linked program can dlopen itself&quot; &gt;&amp;5
 echo $ECHO_N &quot;checking whether a statically linked program can dlopen itself... $ECHO_C&quot; &gt;&amp;6
 if test &quot;${lt_cv_dlopen_self_static+set}&quot; = set; then
@@ -9103,7 +9241,7 @@
   lt_dlunknown=0; lt_dlno_uscore=1; lt_dlneed_uscore=2
   lt_status=$lt_dlunknown
   cat &gt; conftest.$ac_ext &lt;&lt;EOF
-#line 9106 &quot;configure&quot;
+#line 9244 &quot;configure&quot;
 #include &quot;confdefs.h&quot;
 
 #if HAVE_DLFCN_H
@@ -9160,6 +9298,8 @@
       else if (dlsym( self,&quot;_fnord&quot;)) status = $lt_dlneed_uscore;
       /* dlclose (self); */
     }
+  else
+    puts (dlerror ());
 
     exit (status);
 }
@@ -9169,12 +9309,12 @@
   ac_status=$?
   echo &quot;$as_me:$LINENO: \$? = $ac_status&quot; &gt;&amp;5
   (exit $ac_status); } &amp;&amp; test -s conftest${ac_exeext} 2&gt;/dev/null; then
-    (./conftest; exit; ) 2&gt;/dev/null
+    (./conftest; exit; ) &gt;&amp;5 2&gt;/dev/null
     lt_status=$?
     case x$lt_status in
       x$lt_dlno_uscore) lt_cv_dlopen_self_static=yes ;;
       x$lt_dlneed_uscore) lt_cv_dlopen_self_static=yes ;;
-      x$lt_unknown|x*) lt_cv_dlopen_self_static=no ;;
+      x$lt_dlunknown|x*) lt_cv_dlopen_self_static=no ;;
     esac
   else :
     # compilation failed
@@ -9207,7 +9347,7 @@
 fi
 
 
-# Report which librarie types wil actually be built
+# Report which library types will actually be built
 echo &quot;$as_me:$LINENO: checking if libtool supports shared libraries&quot; &gt;&amp;5
 echo $ECHO_N &quot;checking if libtool supports shared libraries... $ECHO_C&quot; &gt;&amp;6
 echo &quot;$as_me:$LINENO: result: $can_build_shared&quot; &gt;&amp;5
@@ -9219,7 +9359,7 @@
 
 # On AIX, shared libraries and static libraries use the same namespace, and
 # are all built from PIC.
-case &quot;$host_os&quot; in
+case $host_os in
 aix3*)
   test &quot;$enable_shared&quot; = yes &amp;&amp; enable_static=no
   if test -n &quot;$RANLIB&quot;; then
@@ -9257,7 +9397,7 @@
   # Now quote all the things that may contain metacharacters while being
   # careful not to overquote the AC_SUBSTed values.  We take copies of the
   # variables and quote the copies for generation of the libtool script.
-  for var in echo old_CC old_CFLAGS AR AR_FLAGS EGREP RANLIB LN_S LTCC NM \
+  for var in echo old_CC old_CFLAGS AR AR_FLAGS EGREP RANLIB LN_S LTCC LTCFLAGS NM \
     SED SHELL STRIP \
     libname_spec library_names_spec soname_spec extract_expsyms_cmds \
     old_striplib striplib file_magic_cmd finish_cmds finish_eval \
@@ -9423,6 +9563,9 @@
 # A C compiler.
 LTCC=$lt_LTCC
 
+# LTCC compiler flags.
+LTCFLAGS=$lt_LTCFLAGS
+
 # A language-specific compiler.
 CC=$lt_compiler
 
@@ -9753,6 +9896,9 @@
 echo &quot;$as_me: WARNING: using \`LTCC=$LTCC', extracted from \`$ofile'&quot; &gt;&amp;2;}
     fi
   fi
+  if test -z &quot;$LTCFLAGS&quot;; then
+    eval &quot;`$SHELL ${ofile} --config | grep '^LTCFLAGS='`&quot;
+  fi
 
   # Extract list of available tagged configurations in $ofile.
   # Note that this assumes the entire list is on one line.
@@ -9805,6 +9951,7 @@
 hardcode_libdir_flag_spec_ld_CXX=
 hardcode_libdir_separator_CXX=
 hardcode_minus_L_CXX=no
+hardcode_shlibpath_var_CXX=unsupported
 hardcode_automatic_CXX=no
 module_cmds_CXX=
 module_expsym_cmds_CXX=
@@ -9822,7 +9969,7 @@
 compiler_lib_search_path_CXX=
 
 # Source file extension for C++ test sources.
-ac_ext=cc
+ac_ext=cpp
 
 # Object file extension for compiled C++ test sources.
 objext=o
@@ -9832,13 +9979,16 @@
 lt_simple_compile_test_code=&quot;int some_variable = 0;\n&quot;
 
 # Code to be used in simple link tests
-lt_simple_link_test_code='int main(int, char *) { return(0); }\n'
+lt_simple_link_test_code='int main(int, char *[]) { return(0); }\n'
 
 # ltmain only uses $CC for tagged configurations so make sure $CC is set.
 
 # If no C compiler was specified, use CC.
 LTCC=${LTCC-&quot;$CC&quot;}
 
+# If no C compiler flags were specified, use CFLAGS.
+LTCFLAGS=${LTCFLAGS-&quot;$CFLAGS&quot;}
+
 # Allow CC to be a program name with arguments.
 compiler=$CC
 
@@ -9846,13 +9996,13 @@
 # save warnings/boilerplate of simple test code
 ac_outfile=conftest.$ac_objext
 printf &quot;$lt_simple_compile_test_code&quot; &gt;conftest.$ac_ext
-eval &quot;$ac_compile&quot; 2&gt;&amp;1 &gt;/dev/null | $SED '/^$/d' &gt;conftest.err
+eval &quot;$ac_compile&quot; 2&gt;&amp;1 &gt;/dev/null | $SED '/^$/d; /^ *+/d' &gt;conftest.err
 _lt_compiler_boilerplate=`cat conftest.err`
 $rm conftest*
 
 ac_outfile=conftest.$ac_objext
 printf &quot;$lt_simple_link_test_code&quot; &gt;conftest.$ac_ext
-eval &quot;$ac_link&quot; 2&gt;&amp;1 &gt;/dev/null | $SED '/^$/d' &gt;conftest.err
+eval &quot;$ac_link&quot; 2&gt;&amp;1 &gt;/dev/null | $SED '/^$/d; /^ *+/d' &gt;conftest.err
 _lt_linker_boilerplate=`cat conftest.err`
 $rm conftest*
 
@@ -9867,12 +10017,12 @@
 if test -n &quot;${lt_cv_prog_gnu_ldcxx+set}&quot;; then
   lt_cv_prog_gnu_ld=$lt_cv_prog_gnu_ldcxx
 else
-  unset lt_cv_prog_gnu_ld
+  $as_unset lt_cv_prog_gnu_ld
 fi
 if test -n &quot;${lt_cv_path_LDCXX+set}&quot;; then
   lt_cv_path_LD=$lt_cv_path_LDCXX
 else
-  unset lt_cv_path_LD
+  $as_unset lt_cv_path_LD
 fi
 test -z &quot;${LDCXX+set}&quot; || LD=$LDCXX
 CC=${CXX-&quot;c++&quot;}
@@ -9958,7 +10108,7 @@
     if test -f &quot;$ac_dir/$ac_prog&quot; || test -f &quot;$ac_dir/$ac_prog$ac_exeext&quot;; then
       lt_cv_path_LD=&quot;$ac_dir/$ac_prog&quot;
       # Check to see if the program is GNU ld.  I'd rather use --version,
-      # but apparently some GNU ld's only accept -v.
+      # but apparently some variants of GNU ld only accept -v.
       # Break only if it was the GNU/non-GNU ld that we prefer.
       case `&quot;$lt_cv_path_LD&quot; -v 2&gt;&amp;1 &lt;/dev/null` in
       *GNU* | *'with BFD'*)
@@ -9992,7 +10142,7 @@
 if test &quot;${lt_cv_prog_gnu_ld+set}&quot; = set; then
   echo $ECHO_N &quot;(cached) $ECHO_C&quot; &gt;&amp;6
 else
-  # I'd rather use --version here, but apparently some GNU ld's only accept -v.
+  # I'd rather use --version here, but apparently some GNU lds only accept -v.
 case `$LD -v 2&gt;&amp;1 &lt;/dev/null` in
 *GNU* | *'with BFD'*)
   lt_cv_prog_gnu_ld=yes
@@ -10083,6 +10233,7 @@
 	    ;;
 	  esac
 	done
+	;;
       esac
 
       exp_sym_flag='-bexport'
@@ -10120,6 +10271,7 @@
 	  hardcode_libdir_flag_spec_CXX='-L$libdir'
 	  hardcode_libdir_separator_CXX=
 	fi
+	;;
       esac
       shared_flag='-shared'
       if test &quot;$aix_use_runtimelinking&quot; = yes; then
@@ -10202,12 +10354,12 @@
 
       hardcode_libdir_flag_spec_CXX='${wl}-blibpath:$libdir:'&quot;$aix_libpath&quot;
 
-      archive_expsym_cmds_CXX=&quot;\$CC&quot;' -o $output_objdir/$soname $libobjs $deplibs $compiler_flags `if test &quot;x${allow_undefined_flag}&quot; != &quot;x&quot;; then echo &quot;${wl}${allow_undefined_flag}&quot;; else :; fi` '&quot;\${wl}$no_entry_flag \${wl}$exp_sym_flag:\$export_symbols $shared_flag&quot;
+      archive_expsym_cmds_CXX=&quot;\$CC&quot;' -o $output_objdir/$soname $libobjs $deplibs '&quot;\${wl}$no_entry_flag&quot;' $compiler_flags `if test &quot;x${allow_undefined_flag}&quot; != &quot;x&quot;; then echo &quot;${wl}${allow_undefined_flag}&quot;; else :; fi` '&quot;\${wl}$exp_sym_flag:\$export_symbols $shared_flag&quot;
      else
       if test &quot;$host_cpu&quot; = ia64; then
 	hardcode_libdir_flag_spec_CXX='${wl}-R $libdir:/usr/lib:/lib'
 	allow_undefined_flag_CXX=&quot;-z nodefs&quot;
-	archive_expsym_cmds_CXX=&quot;\$CC $shared_flag&quot;' -o $output_objdir/$soname $libobjs $deplibs $compiler_flags ${wl}${allow_undefined_flag} '&quot;\${wl}$no_entry_flag \${wl}$exp_sym_flag:\$export_symbols&quot;
+	archive_expsym_cmds_CXX=&quot;\$CC $shared_flag&quot;' -o $output_objdir/$soname $libobjs $deplibs '&quot;\${wl}$no_entry_flag&quot;' $compiler_flags ${wl}${allow_undefined_flag} '&quot;\${wl}$exp_sym_flag:\$export_symbols&quot;
       else
 	# Determine the default libpath from the value encoded in an empty executable.
 	cat &gt;conftest.$ac_ext &lt;&lt;_ACEOF
@@ -10267,16 +10419,26 @@
 	# -berok will link without error, but may produce a broken library.
 	no_undefined_flag_CXX=' ${wl}-bernotok'
 	allow_undefined_flag_CXX=' ${wl}-berok'
-	# -bexpall does not export symbols beginning with underscore (_)
-	always_export_symbols_CXX=yes
 	# Exported symbols can be pulled into shared objects from archives
-	whole_archive_flag_spec_CXX=' '
+	whole_archive_flag_spec_CXX='$convenience'
 	archive_cmds_need_lc_CXX=yes
-	# This is similar to how AIX traditionally builds it's shared libraries.
-	archive_expsym_cmds_CXX=&quot;\$CC $shared_flag&quot;' -o $output_objdir/$soname $libobjs $deplibs $compiler_flags ${wl}-bE:$export_symbols ${wl}-bnoentry${allow_undefined_flag}~$AR $AR_FLAGS $output_objdir/$libname$release.a $output_objdir/$soname'
+	# This is similar to how AIX traditionally builds its shared libraries.
+	archive_expsym_cmds_CXX=&quot;\$CC $shared_flag&quot;' -o $output_objdir/$soname $libobjs $deplibs ${wl}-bnoentry $compiler_flags ${wl}-bE:$export_symbols${allow_undefined_flag}~$AR $AR_FLAGS $output_objdir/$libname$release.a $output_objdir/$soname'
       fi
     fi
     ;;
+
+  beos*)
+    if $LD --help 2&gt;&amp;1 | grep ': supported targets:.* elf' &gt; /dev/null; then
+      allow_undefined_flag_CXX=unsupported
+      # Joseph Beckenbach &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/openspace-svn">jrb3 at best.com</A>&gt; says some releases of gcc
+      # support --undefined.  This deserves some investigation.  FIXME
+      archive_cmds_CXX='$CC -nostart $libobjs $deplibs $compiler_flags ${wl}-soname $wl$soname -o $lib'
+    else
+      ld_shlibs_CXX=no
+    fi
+    ;;
+
   chorus*)
     case $cc_basename in
       *)
@@ -10286,7 +10448,6 @@
     esac
     ;;
 
-
   cygwin* | mingw* | pw32*)
     # _LT_AC_TAGVAR(hardcode_libdir_flag_spec, CXX) is actually meaningless,
     # as there is no search path for DLLs.
@@ -10296,7 +10457,7 @@
     enable_shared_with_static_runtimes_CXX=yes
 
     if $LD --help 2&gt;&amp;1 | grep 'auto-import' &gt; /dev/null; then
-      archive_cmds_CXX='$CC -shared -nostdlib $predep_objects $libobjs $deplibs $postdep_objects $compiler_flags -o $output_objdir/$soname ${wl}--image-base=0x10000000 ${wl}--out-implib,$lib'
+      archive_cmds_CXX='$CC -shared -nostdlib $predep_objects $libobjs $deplibs $postdep_objects $compiler_flags -o $output_objdir/$soname ${wl}--enable-auto-image-base -Xlinker --out-implib -Xlinker $lib'
       # If the export-symbols file already is a .def file (1st line
       # is EXPORTS), use it as is; otherwise, prepend...
       archive_expsym_cmds_CXX='if test &quot;x`$SED 1q $export_symbols`&quot; = xEXPORTS; then
@@ -10305,13 +10466,13 @@
 	echo EXPORTS &gt; $output_objdir/$soname.def;
 	cat $export_symbols &gt;&gt; $output_objdir/$soname.def;
       fi~
-      $CC -shared -nostdlib $output_objdir/$soname.def $predep_objects $libobjs $deplibs $postdep_objects $compiler_flags -o $output_objdir/$soname ${wl}--image-base=0x10000000 ${wl}--out-implib,$lib'
+      $CC -shared -nostdlib $output_objdir/$soname.def $predep_objects $libobjs $deplibs $postdep_objects $compiler_flags -o $output_objdir/$soname ${wl}--enable-auto-image-base -Xlinker --out-implib -Xlinker $lib'
     else
       ld_shlibs_CXX=no
     fi
   ;;
       darwin* | rhapsody*)
-        case &quot;$host_os&quot; in
+        case $host_os in
         rhapsody* | darwin1.[012])
          allow_undefined_flag_CXX='${wl}-undefined ${wl}suppress'
          ;;
@@ -10349,7 +10510,7 @@
           archive_cmds_CXX='$CC -r -keep_private_externs -nostdlib -o ${lib}-master.o $libobjs~$CC -dynamiclib $allow_undefined_flag -o $lib ${lib}-master.o $deplibs $compiler_flags -install_name $rpath/$soname $verstring'
         fi
         module_cmds_CXX='$CC $allow_undefined_flag -o $lib -bundle $libobjs $deplibs$compiler_flags'
-        # Don't fix this by using the ld -exported_symbols_list flag, it doesn't exist in older darwin ld's
+        # Don't fix this by using the ld -exported_symbols_list flag, it doesn't exist in older darwin lds
           if test &quot;X$lt_int_apple_cc_single_mod&quot; = Xyes ; then
             archive_expsym_cmds_CXX='sed -e &quot;s,#.*,,&quot; -e &quot;s,^[    ]*,,&quot; -e &quot;s,^\(..*\),_&amp;,&quot; &lt; $export_symbols &gt; $output_objdir/${libname}-symbols.expsym~$CC -dynamiclib -single_module $allow_undefined_flag -o $lib $libobjs $deplibs $compiler_flags -install_name $rpath/$soname $verstring~nmedit -s $output_objdir/${libname}-symbols.expsym ${lib}'
           else
@@ -10362,7 +10523,7 @@
          output_verbose_link_cmd='echo'
           archive_cmds_CXX='$CC -qmkshrobj ${wl}-single_module $allow_undefined_flag -o $lib $libobjs $deplibs $compiler_flags ${wl}-install_name ${wl}`echo $rpath/$soname` $verstring'
           module_cmds_CXX='$CC $allow_undefined_flag -o $lib -bundle $libobjs $deplibs$compiler_flags'
-          # Don't fix this by using the ld -exported_symbols_list flag, it doesn't exist in older darwin ld's
+          # Don't fix this by using the ld -exported_symbols_list flag, it doesn't exist in older darwin lds
           archive_expsym_cmds_CXX='sed -e &quot;s,#.*,,&quot; -e &quot;s,^[    ]*,,&quot; -e &quot;s,^\(..*\),_&amp;,&quot; &lt; $export_symbols &gt; $output_objdir/${libname}-symbols.expsym~$CC -qmkshrobj ${wl}-single_module $allow_undefined_flag -o $lib $libobjs $deplibs $compiler_flags ${wl}-install_name ${wl}$rpath/$soname $verstring~nmedit -s $output_objdir/${libname}-symbols.expsym ${lib}'
           module_expsym_cmds_CXX='sed -e &quot;s,#.*,,&quot; -e &quot;s,^[    ]*,,&quot; -e &quot;s,^\(..*\),_&amp;,&quot; &lt; $export_symbols &gt; $output_objdir/${libname}-symbols.expsym~$CC $allow_undefined_flag  -o $lib -bundle $libobjs $deplibs$compiler_flags~nmedit -s $output_objdir/${libname}-symbols.expsym ${lib}'
           ;;
@@ -10442,34 +10603,23 @@
     ;;
   hpux10*|hpux11*)
     if test $with_gnu_ld = no; then
-      case &quot;$host_cpu&quot; in
-      hppa*64*)
-	hardcode_libdir_flag_spec_CXX='${wl}+b ${wl}$libdir'
+      hardcode_libdir_flag_spec_CXX='${wl}+b ${wl}$libdir'
+      hardcode_libdir_separator_CXX=:
+
+      case $host_cpu in
+      hppa*64*|ia64*)
 	hardcode_libdir_flag_spec_ld_CXX='+b $libdir'
-	hardcode_libdir_separator_CXX=:
         ;;
-      ia64*)
-	hardcode_libdir_flag_spec_CXX='-L$libdir'
-        ;;
       *)
-	hardcode_libdir_flag_spec_CXX='${wl}+b ${wl}$libdir'
-	hardcode_libdir_separator_CXX=:
 	export_dynamic_flag_spec_CXX='${wl}-E'
         ;;
       esac
     fi
-    case &quot;$host_cpu&quot; in
-    hppa*64*)
+    case $host_cpu in
+    hppa*64*|ia64*)
       hardcode_direct_CXX=no
       hardcode_shlibpath_var_CXX=no
       ;;
-    ia64*)
-      hardcode_direct_CXX=no
-      hardcode_shlibpath_var_CXX=no
-      hardcode_minus_L_CXX=yes # Not in the search PATH,
-					      # but as the default
-					      # location of the library.
-      ;;
     *)
       hardcode_direct_CXX=yes
       hardcode_minus_L_CXX=yes # Not in the search PATH,
@@ -10484,10 +10634,13 @@
 	ld_shlibs_CXX=no
 	;;
       aCC*)
-	case &quot;$host_cpu&quot; in
-	hppa*64*|ia64*)
-	  archive_cmds_CXX='$LD -b +h $soname -o $lib $linker_flags $libobjs $deplibs'
+	case $host_cpu in
+	hppa*64*)
+	  archive_cmds_CXX='$CC -b ${wl}+h ${wl}$soname -o $lib $predep_objects $libobjs $deplibs $postdep_objects $compiler_flags'
 	  ;;
+	ia64*)
+	  archive_cmds_CXX='$CC -b ${wl}+h ${wl}$soname ${wl}+nodefaultrpath -o $lib $predep_objects $libobjs $deplibs $postdep_objects $compiler_flags'
+	  ;;
 	*)
 	  archive_cmds_CXX='$CC -b ${wl}+h ${wl}$soname ${wl}+b ${wl}$install_libdir -o $lib $predep_objects $libobjs $deplibs $postdep_objects $compiler_flags'
 	  ;;
@@ -10505,10 +10658,13 @@
       *)
 	if test &quot;$GXX&quot; = yes; then
 	  if test $with_gnu_ld = no; then
-	    case &quot;$host_cpu&quot; in
-	    ia64*|hppa*64*)
-	      archive_cmds_CXX='$LD -b +h $soname -o $lib $linker_flags $libobjs $deplibs'
+	    case $host_cpu in
+	    hppa*64*)
+	      archive_cmds_CXX='$CC -shared -nostdlib -fPIC ${wl}+h ${wl}$soname -o $lib $predep_objects $libobjs $deplibs $postdep_objects $compiler_flags'
 	      ;;
+	    ia64*)
+	      archive_cmds_CXX='$CC -shared -nostdlib -fPIC ${wl}+h ${wl}$soname ${wl}+nodefaultrpath -o $lib $predep_objects $libobjs $deplibs $postdep_objects $compiler_flags'
+	      ;;
 	    *)
 	      archive_cmds_CXX='$CC -shared -nostdlib -fPIC ${wl}+h ${wl}$soname ${wl}+b ${wl}$install_libdir -o $lib $predep_objects $libobjs $deplibs $postdep_objects $compiler_flags'
 	      ;;
@@ -10521,6 +10677,20 @@
 	;;
     esac
     ;;
+  interix3*)
+    hardcode_direct_CXX=no
+    hardcode_shlibpath_var_CXX=no
+    hardcode_libdir_flag_spec_CXX='${wl}-rpath,$libdir'
+    export_dynamic_flag_spec_CXX='${wl}-E'
+    # Hack: On Interix 3.x, we cannot compile PIC because of a broken gcc.
+    # Instead, shared libraries are loaded at an image base (0x10000000 by
+    # default) and relocated if they conflict, which is a slow very memory
+    # consuming and fragmenting process.  To avoid this, we pick a random,
+    # 256 KiB-aligned image base between 0x50000000 and 0x6FFC0000 at link
+    # time.  Moving up from 0x10000000 also allows more sbrk(2) space.
+    archive_cmds_CXX='$CC -shared $pic_flag $libobjs $deplibs $compiler_flags ${wl}-h,$soname ${wl}--image-base,`expr ${RANDOM-$$} % 4096 / 2 \* 262144 + 1342177280` -o $lib'
+    archive_expsym_cmds_CXX='sed &quot;s,^,_,&quot; $export_symbols &gt;$output_objdir/$soname.expsym~$CC -shared $pic_flag $libobjs $deplibs $compiler_flags ${wl}-h,$soname ${wl}--retain-symbols-file,$output_objdir/$soname.expsym ${wl}--image-base,`expr ${RANDOM-$$} % 4096 / 2 \* 262144 + 1342177280` -o $lib'
+    ;;
   irix5* | irix6*)
     case $cc_basename in
       CC*)
@@ -10606,7 +10776,7 @@
 
 	hardcode_libdir_flag_spec_CXX='${wl}--rpath ${wl}$libdir'
 	export_dynamic_flag_spec_CXX='${wl}--export-dynamic'
-	whole_archive_flag_spec_CXX='${wl}--whole-archive,`for conv in $convenience\&quot;\&quot;; do test  -n \&quot;$conv\&quot; &amp;&amp; new_convenience=\&quot;$new_convenience,$conv\&quot;; done; $echo \&quot;$new_convenience\&quot;` ${wl}--no-whole-archive'
+	whole_archive_flag_spec_CXX='${wl}--whole-archive`for conv in $convenience\&quot;\&quot;; do test  -n \&quot;$conv\&quot; &amp;&amp; new_convenience=\&quot;$new_convenience,$conv\&quot;; done; $echo \&quot;$new_convenience\&quot;` ${wl}--no-whole-archive'
         ;;
       cxx*)
 	# Compaq C++
@@ -10803,19 +10973,6 @@
     # FIXME: insert proper C++ library support
     ld_shlibs_CXX=no
     ;;
-  sco*)
-    archive_cmds_need_lc_CXX=no
-    case $cc_basename in
-      CC*)
-	# FIXME: insert proper C++ library support
-	ld_shlibs_CXX=no
-	;;
-      *)
-	# FIXME: insert proper C++ library support
-	ld_shlibs_CXX=no
-	;;
-    esac
-    ;;
   sunos4*)
     case $cc_basename in
       CC*)
@@ -10838,10 +10995,11 @@
     case $cc_basename in
       CC*)
 	# Sun C++ 4.2, 5.x and Centerline C++
+        archive_cmds_need_lc_CXX=yes
 	no_undefined_flag_CXX=' -zdefs'
-	archive_cmds_CXX='$CC -G${allow_undefined_flag} -nolib -h$soname -o $lib $predep_objects $libobjs $deplibs $postdep_objects $compiler_flags'
+	archive_cmds_CXX='$CC -G${allow_undefined_flag}  -h$soname -o $lib $predep_objects $libobjs $deplibs $postdep_objects $compiler_flags'
 	archive_expsym_cmds_CXX='$echo &quot;{ global:&quot; &gt; $lib.exp~cat $export_symbols | $SED -e &quot;s/\(.*\)/\1;/&quot; &gt;&gt; $lib.exp~$echo &quot;local: *; };&quot; &gt;&gt; $lib.exp~
-	$CC -G${allow_undefined_flag} -nolib ${wl}-M ${wl}$lib.exp -h$soname -o $lib $predep_objects $libobjs $deplibs $postdep_objects $compiler_flags~$rm $lib.exp'
+	$CC -G${allow_undefined_flag}  ${wl}-M ${wl}$lib.exp -h$soname -o $lib $predep_objects $libobjs $deplibs $postdep_objects $compiler_flags~$rm $lib.exp'
 
 	hardcode_libdir_flag_spec_CXX='-R$libdir'
 	hardcode_shlibpath_var_CXX=no
@@ -10861,15 +11019,7 @@
 	esac
 	link_all_deplibs_CXX=yes
 
-	# Commands to make compiler produce verbose output that lists
-	# what &quot;hidden&quot; libraries, object files and flags are used when
-	# linking a shared library.
-	#
-	# There doesn't appear to be a way to prevent this compiler from
-	# explicitly linking system object files so we need to strip them
-	# from the output so that they don't get included in the library
-	# dependencies.
-	output_verbose_link_cmd='templist=`$CC -G $CFLAGS -v conftest.$objext 2&gt;&amp;1 | grep &quot;\-[LR]&quot;`; list=&quot;&quot;; for z in $templist; do case $z in conftest.$objext) list=&quot;$list $z&quot;;; *.$objext);; *) list=&quot;$list $z&quot;;;esac; done; echo $list'
+	output_verbose_link_cmd='echo'
 
 	# Archives containing C++ object files must be created using
 	# &quot;CC -xar&quot;, where &quot;CC&quot; is the Sun C++ compiler.  This is
@@ -10915,9 +11065,60 @@
 	;;
     esac
     ;;
-  sysv5OpenUNIX8* | sysv5UnixWare7* | sysv5uw[78]* | unixware7*)
+  sysv4*uw2* | sysv5OpenUNIX* | sysv5UnixWare7.[01].[10]* | unixware7* | sco3.2v5.0.[024]*)
+    no_undefined_flag_CXX='${wl}-z,text'
     archive_cmds_need_lc_CXX=no
+    hardcode_shlibpath_var_CXX=no
+    runpath_var='LD_RUN_PATH'
+
+    case $cc_basename in
+      CC*)
+	archive_cmds_CXX='$CC -G ${wl}-h,$soname -o $lib $libobjs $deplibs $compiler_flags'
+	archive_expsym_cmds_CXX='$CC -G ${wl}-Bexport:$export_symbols ${wl}-h,$soname -o $lib $libobjs $deplibs $compiler_flags'
+	;;
+      *)
+	archive_cmds_CXX='$CC -shared ${wl}-h,$soname -o $lib $libobjs $deplibs $compiler_flags'
+	archive_expsym_cmds_CXX='$CC -shared ${wl}-Bexport:$export_symbols ${wl}-h,$soname -o $lib $libobjs $deplibs $compiler_flags'
+	;;
+    esac
     ;;
+  sysv5* | sco3.2v5* | sco5v6*)
+    # Note: We can NOT use -z defs as we might desire, because we do not
+    # link with -lc, and that would cause any symbols used from libc to
+    # always be unresolved, which means just about no library would
+    # ever link correctly.  If we're not using GNU ld we use -z text
+    # though, which does catch some bad symbols but isn't as heavy-handed
+    # as -z defs.
+    # For security reasons, it is highly recommended that you always
+    # use absolute paths for naming shared libraries, and exclude the
+    # DT_RUNPATH tag from executables and libraries.  But doing so
+    # requires that you compile everything twice, which is a pain.
+    # So that behaviour is only enabled if SCOABSPATH is set to a
+    # non-empty value in the environment.  Most likely only useful for
+    # creating official distributions of packages.
+    # This is a hack until libtool officially supports absolute path
+    # names for shared libraries.
+    no_undefined_flag_CXX='${wl}-z,text'
+    allow_undefined_flag_CXX='${wl}-z,nodefs'
+    archive_cmds_need_lc_CXX=no
+    hardcode_shlibpath_var_CXX=no
+    hardcode_libdir_flag_spec_CXX='`test -z &quot;$SCOABSPATH&quot; &amp;&amp; echo ${wl}-R,$libdir`'
+    hardcode_libdir_separator_CXX=':'
+    link_all_deplibs_CXX=yes
+    export_dynamic_flag_spec_CXX='${wl}-Bexport'
+    runpath_var='LD_RUN_PATH'
+
+    case $cc_basename in
+      CC*)
+	archive_cmds_CXX='$CC -G ${wl}-h,\${SCOABSPATH:+${install_libdir}/}$soname -o $lib $libobjs $deplibs $compiler_flags'
+	archive_expsym_cmds_CXX='$CC -G ${wl}-Bexport:$export_symbols ${wl}-h,\${SCOABSPATH:+${install_libdir}/}$soname -o $lib $libobjs $deplibs $compiler_flags'
+	;;
+      *)
+	archive_cmds_CXX='$CC -shared ${wl}-h,\${SCOABSPATH:+${install_libdir}/}$soname -o $lib $libobjs $deplibs $compiler_flags'
+	archive_expsym_cmds_CXX='$CC -shared ${wl}-Bexport:$export_symbols ${wl}-h,\${SCOABSPATH:+${install_libdir}/}$soname -o $lib $libobjs $deplibs $compiler_flags'
+	;;
+    esac
+    ;;
   tandem*)
     case $cc_basename in
       NCC*)
@@ -10973,7 +11174,7 @@
   # The `*' in the case matches for architectures that use `case' in
   # $output_verbose_cmd can trigger glob expansion during the loop
   # eval without this substitution.
-  output_verbose_link_cmd=&quot;`$echo \&quot;X$output_verbose_link_cmd\&quot; | $Xsed -e \&quot;$no_glob_subst\&quot;`&quot;
+  output_verbose_link_cmd=`$echo &quot;X$output_verbose_link_cmd&quot; | $Xsed -e &quot;$no_glob_subst&quot;`
 
   for p in `eval $output_verbose_link_cmd`; do
     case $p in
@@ -11049,6 +11250,29 @@
 
 $rm -f confest.$objext
 
+# PORTME: override above test on systems where it is broken
+case $host_os in
+interix3*)
+  # Interix 3.5 installs completely hosed .la files for C++, so rather than
+  # hack all around it, let's just trust &quot;g++&quot; to DTRT.
+  predep_objects_CXX=
+  postdep_objects_CXX=
+  postdeps_CXX=
+  ;;
+
+solaris*)
+  case $cc_basename in
+  CC*)
+    # Adding this requires a known-good setup of shared libraries for
+    # Sun compiler versions before 5.6, else PIC objects from an old
+    # archive will be linked into the output, leading to subtle bugs.
+    postdeps_CXX='-lCstd -lCrun'
+    ;;
+  esac
+  ;;
+esac
+
+
 case &quot; $postdeps_CXX &quot; in
 *&quot; -lc &quot;*) archive_cmds_need_lc_CXX=no ;;
 esac
@@ -11096,6 +11320,10 @@
       # DJGPP does not support shared libraries at all
       lt_prog_compiler_pic_CXX=
       ;;
+    interix3*)
+      # Interix 3.x gcc -fpic/-fPIC options generate broken code.
+      # Instead, we relocate shared libraries at runtime.
+      ;;
     sysv4*MP*)
       if test -d /usr/nec; then
 	lt_prog_compiler_pic_CXX=-Kconform_pic
@@ -11104,7 +11332,7 @@
     hpux*)
       # PIC is the default for IA64 HP-UX and 64-bit HP-UX, but
       # not for PA HP-UX.
-      case &quot;$host_cpu&quot; in
+      case $host_cpu in
       hppa*64*|ia64*)
 	;;
       *)
@@ -11165,15 +11393,15 @@
 	case $cc_basename in
 	  CC*)
 	    lt_prog_compiler_wl_CXX='-Wl,'
-	    lt_prog_compiler_static_CXX=&quot;${ac_cv_prog_cc_wl}-a ${ac_cv_prog_cc_wl}archive&quot;
+	    lt_prog_compiler_static_CXX='${wl}-a ${wl}archive'
 	    if test &quot;$host_cpu&quot; != ia64; then
 	      lt_prog_compiler_pic_CXX='+Z'
 	    fi
 	    ;;
 	  aCC*)
 	    lt_prog_compiler_wl_CXX='-Wl,'
-	    lt_prog_compiler_static_CXX=&quot;${ac_cv_prog_cc_wl}-a ${ac_cv_prog_cc_wl}archive&quot;
-	    case &quot;$host_cpu&quot; in
+	    lt_prog_compiler_static_CXX='${wl}-a ${wl}archive'
+	    case $host_cpu in
 	    hppa*64*|ia64*)
 	      # +Z the default
 	      ;;
@@ -11186,6 +11414,10 @@
 	    ;;
 	esac
 	;;
+      interix*)
+	# This is c89, which is MS Visual C++ (no shared libs)
+	# Anyone wants to do a port?
+	;;
       irix5* | irix6* | nonstopux*)
 	case $cc_basename in
 	  CC*)
@@ -11214,7 +11446,7 @@
 	    # Portland Group C++ compiler.
 	    lt_prog_compiler_wl_CXX='-Wl,'
 	    lt_prog_compiler_pic_CXX='-fpic'
-	    lt_prog_compiler_static_CXX='-static'
+	    lt_prog_compiler_static_CXX='-Bstatic'
 	    ;;
 	  cxx*)
 	    # Compaq C++
@@ -11265,15 +11497,6 @@
 	;;
       psos*)
 	;;
-      sco*)
-	case $cc_basename in
-	  CC*)
-	    lt_prog_compiler_pic_CXX='-fPIC'
-	    ;;
-	  *)
-	    ;;
-	esac
-	;;
       solaris*)
 	case $cc_basename in
 	  CC*)
@@ -11315,7 +11538,14 @@
 	    ;;
 	esac
 	;;
-      unixware*)
+      sysv5* | unixware* | sco3.2v5* | sco5v6* | OpenUNIX*)
+	case $cc_basename in
+	  CC*)
+	    lt_prog_compiler_wl_CXX='-Wl,'
+	    lt_prog_compiler_pic_CXX='-KPIC'
+	    lt_prog_compiler_static_CXX='-Bstatic'
+	    ;;
+	esac
 	;;
       vxworks*)
 	;;
@@ -11348,20 +11578,20 @@
    # with a dollar sign (not a hyphen), so the echo should work correctly.
    # The option is referenced via a variable to avoid confusing sed.
    lt_compile=`echo &quot;$ac_compile&quot; | $SED \
-   -e 's:.*FLAGS}? :&amp;$lt_compiler_flag :; t' \
+   -e 's:.*FLAGS}\{0,1\} :&amp;$lt_compiler_flag :; t' \
    -e 's: [^ ]*conftest\.: $lt_compiler_flag&amp;:; t' \
    -e 's:$: $lt_compiler_flag:'`
-   (eval echo &quot;\&quot;\$as_me:11354: $lt_compile\&quot;&quot; &gt;&amp;5)
+   (eval echo &quot;\&quot;\$as_me:11584: $lt_compile\&quot;&quot; &gt;&amp;5)
    (eval &quot;$lt_compile&quot; 2&gt;conftest.err)
    ac_status=$?
    cat conftest.err &gt;&amp;5
-   echo &quot;$as_me:11358: \$? = $ac_status&quot; &gt;&amp;5
+   echo &quot;$as_me:11588: \$? = $ac_status&quot; &gt;&amp;5
    if (exit $ac_status) &amp;&amp; test -s &quot;$ac_outfile&quot;; then
      # The compiler can only warn and ignore the option if not recognized
      # So say no if there are warnings other than the usual output.
-     $echo &quot;X$_lt_compiler_boilerplate&quot; | $Xsed &gt;conftest.exp
-     $SED '/^$/d' conftest.err &gt;conftest.er2
-     if test ! -s conftest.err || diff conftest.exp conftest.er2 &gt;/dev/null; then
+     $echo &quot;X$_lt_compiler_boilerplate&quot; | $Xsed -e '/^$/d' &gt;conftest.exp
+     $SED '/^$/d; /^ *+/d' conftest.err &gt;conftest.er2
+     if test ! -s conftest.er2 || diff conftest.exp conftest.er2 &gt;/dev/null; then
        lt_prog_compiler_pic_works_CXX=yes
      fi
    fi
@@ -11382,7 +11612,7 @@
 fi
 
 fi
-case &quot;$host_os&quot; in
+case $host_os in
   # For platforms which do not support PIC, -DPIC is meaningless:
   *djgpp*)
     lt_prog_compiler_pic_CXX=
@@ -11392,6 +11622,48 @@
     ;;
 esac
 
+#
+# Check to make sure the static flag actually works.
+#
+wl=$lt_prog_compiler_wl_CXX eval lt_tmp_static_flag=\&quot;$lt_prog_compiler_static_CXX\&quot;
+echo &quot;$as_me:$LINENO: checking if $compiler static flag $lt_tmp_static_flag works&quot; &gt;&amp;5
+echo $ECHO_N &quot;checking if $compiler static flag $lt_tmp_static_flag works... $ECHO_C&quot; &gt;&amp;6
+if test &quot;${lt_prog_compiler_static_works_CXX+set}&quot; = set; then
+  echo $ECHO_N &quot;(cached) $ECHO_C&quot; &gt;&amp;6
+else
+  lt_prog_compiler_static_works_CXX=no
+   save_LDFLAGS=&quot;$LDFLAGS&quot;
+   LDFLAGS=&quot;$LDFLAGS $lt_tmp_static_flag&quot;
+   printf &quot;$lt_simple_link_test_code&quot; &gt; conftest.$ac_ext
+   if (eval $ac_link 2&gt;conftest.err) &amp;&amp; test -s conftest$ac_exeext; then
+     # The linker can only warn and ignore the option if not recognized
+     # So say no if there are warnings
+     if test -s conftest.err; then
+       # Append any errors to the config.log.
+       cat conftest.err 1&gt;&amp;5
+       $echo &quot;X$_lt_linker_boilerplate&quot; | $Xsed -e '/^$/d' &gt; conftest.exp
+       $SED '/^$/d; /^ *+/d' conftest.err &gt;conftest.er2
+       if diff conftest.exp conftest.er2 &gt;/dev/null; then
+         lt_prog_compiler_static_works_CXX=yes
+       fi
+     else
+       lt_prog_compiler_static_works_CXX=yes
+     fi
+   fi
+   $rm conftest*
+   LDFLAGS=&quot;$save_LDFLAGS&quot;
+
+fi
+echo &quot;$as_me:$LINENO: result: $lt_prog_compiler_static_works_CXX&quot; &gt;&amp;5
+echo &quot;${ECHO_T}$lt_prog_compiler_static_works_CXX&quot; &gt;&amp;6
+
+if test x&quot;$lt_prog_compiler_static_works_CXX&quot; = xyes; then
+    :
+else
+    lt_prog_compiler_static_CXX=
+fi
+
+
 echo &quot;$as_me:$LINENO: checking if $compiler supports -c -o file.$ac_objext&quot; &gt;&amp;5
 echo $ECHO_N &quot;checking if $compiler supports -c -o file.$ac_objext... $ECHO_C&quot; &gt;&amp;6
 if test &quot;${lt_cv_prog_compiler_c_o_CXX+set}&quot; = set; then
@@ -11410,25 +11682,25 @@
    # Note that $ac_compile itself does not contain backslashes and begins
    # with a dollar sign (not a hyphen), so the echo should work correctly.
    lt_compile=`echo &quot;$ac_compile&quot; | $SED \
-   -e 's:.*FLAGS}? :&amp;$lt_compiler_flag :; t' \
+   -e 's:.*FLAGS}\{0,1\} :&amp;$lt_compiler_flag :; t' \
    -e 's: [^ ]*conftest\.: $lt_compiler_flag&amp;:; t' \
    -e 's:$: $lt_compiler_flag:'`
-   (eval echo &quot;\&quot;\$as_me:11416: $lt_compile\&quot;&quot; &gt;&amp;5)
+   (eval echo &quot;\&quot;\$as_me:11688: $lt_compile\&quot;&quot; &gt;&amp;5)
    (eval &quot;$lt_compile&quot; 2&gt;out/conftest.err)
    ac_status=$?
    cat out/conftest.err &gt;&amp;5
-   echo &quot;$as_me:11420: \$? = $ac_status&quot; &gt;&amp;5
+   echo &quot;$as_me:11692: \$? = $ac_status&quot; &gt;&amp;5
    if (exit $ac_status) &amp;&amp; test -s out/conftest2.$ac_objext
    then
      # The compiler can only warn and ignore the option if not recognized
      # So say no if there are warnings
-     $echo &quot;X$_lt_compiler_boilerplate&quot; | $Xsed &gt; out/conftest.exp
-     $SED '/^$/d' out/conftest.err &gt;out/conftest.er2
-     if test ! -s out/conftest.err || diff out/conftest.exp out/conftest.er2 &gt;/dev/null; then
+     $echo &quot;X$_lt_compiler_boilerplate&quot; | $Xsed -e '/^$/d' &gt; out/conftest.exp
+     $SED '/^$/d; /^ *+/d' out/conftest.err &gt;out/conftest.er2
+     if test ! -s out/conftest.er2 || diff out/conftest.exp out/conftest.er2 &gt;/dev/null; then
        lt_cv_prog_compiler_c_o_CXX=yes
      fi
    fi
-   chmod u+w .
+   chmod u+w . 2&gt;&amp;5
    $rm conftest*
    # SGI C++ compiler will create directory out/ii_files/ for
    # template instantiation
@@ -11494,11 +11766,6 @@
 echo &quot;${ECHO_T}$ld_shlibs_CXX&quot; &gt;&amp;6
 test &quot;$ld_shlibs_CXX&quot; = no &amp;&amp; can_build_shared=no
 
-variables_saved_for_relink=&quot;PATH $shlibpath_var $runpath_var&quot;
-if test &quot;$GCC&quot; = yes; then
-  variables_saved_for_relink=&quot;$variables_saved_for_relink GCC_EXEC_PREFIX COMPILER_PATH LIBRARY_PATH&quot;
-fi
-
 #
 # Do we need to explicitly link libc?
 #
@@ -11531,6 +11798,7 @@
         libobjs=conftest.$ac_objext
         deplibs=
         wl=$lt_prog_compiler_wl_CXX
+	pic_flag=$lt_prog_compiler_pic_CXX
         compiler_flags=-v
         linker_flags=-v
         verstring=
@@ -11691,7 +11959,8 @@
       dlpath=`$SHELL 2&gt;&amp;1 -c '\''. $dir/'\''\${base_file}'\''i;echo \$dlname'\''`~
       dldir=$destdir/`dirname \$dlpath`~
       test -d \$dldir || mkdir -p \$dldir~
-      $install_prog $dir/$dlname \$dldir/$dlname'
+      $install_prog $dir/$dlname \$dldir/$dlname~
+      chmod a+x \$dldir/$dlname'
     postuninstall_cmds='dldll=`$SHELL 2&gt;&amp;1 -c '\''. $file; echo \$dlname'\''`~
       dlpath=$dir/\$dldll~
        $rm \$dlpath'
@@ -11768,7 +12037,7 @@
   soname_spec='${libname}${release}${major}$shared_ext'
   shlibpath_overrides_runpath=yes
   shlibpath_var=DYLD_LIBRARY_PATH
-  shrext_cmds='$(test .$module = .yes &amp;&amp; echo .so || echo .dylib)'
+  shrext_cmds='`test .$module = .yes &amp;&amp; echo .so || echo .dylib`'
   # Apple's gcc prints 'gcc -print-search-dirs' doesn't operate the same.
   if test &quot;$GCC&quot; = yes; then
     sys_lib_search_path_spec=`$CC -print-search-dirs | tr &quot;\n&quot; &quot;$PATH_SEPARATOR&quot; | sed -e 's/libraries:/@libraries:/' | tr &quot;@&quot; &quot;\n&quot; | grep &quot;^libraries:&quot; | sed -e &quot;s/^<A HREF="libraries://">libraries://</A>&quot; -e &quot;s,=/,/,g&quot; -e &quot;s,$PATH_SEPARATOR, ,g&quot; -e &quot;s,.*,&amp; /lib /usr/lib /usr/local/lib,g&quot;`
@@ -11806,8 +12075,22 @@
 freebsd* | dragonfly*)
   # DragonFly does not have aout.  When/if they implement a new
   # versioning mechanism, adjust this.
-  objformat=`test -x /usr/bin/objformat &amp;&amp; /usr/bin/objformat || echo aout`
-  version_type=freebsd-$objformat
+  if test -x /usr/bin/objformat; then
+    objformat=`/usr/bin/objformat`
+  else
+    case $host_os in
+    freebsd[123]*) objformat=aout ;;
+    *) objformat=elf ;;
+    esac
+  fi
+  # Handle Gentoo/FreeBSD as it was Linux
+  case $host_vendor in
+    gentoo)
+      version_type=linux ;;
+    *)
+      version_type=freebsd-$objformat ;;
+  esac
+
   case $version_type in
     freebsd-elf*)
       library_names_spec='${libname}${release}${shared_ext}$versuffix ${libname}${release}${shared_ext} $libname${shared_ext}'
@@ -11818,6 +12101,12 @@
       library_names_spec='${libname}${release}${shared_ext}$versuffix $libname${shared_ext}$versuffix'
       need_version=yes
       ;;
+    linux)
+      library_names_spec='${libname}${release}${shared_ext}$versuffix ${libname}${release}${shared_ext}$major ${libname}${shared_ext}'
+      soname_spec='${libname}${release}${shared_ext}$major'
+      need_lib_prefix=no
+      need_version=no
+      ;;
   esac
   shlibpath_var=LD_LIBRARY_PATH
   case $host_os in
@@ -11828,10 +12117,15 @@
     shlibpath_overrides_runpath=yes
     hardcode_into_libs=yes
     ;;
-  *) # from 3.2 on
+  freebsd3.[2-9]* | freebsdelf3.[2-9]* | \
+  freebsd4.[0-5] | freebsdelf4.[0-5] | freebsd4.1.1 | freebsdelf4.1.1)
     shlibpath_overrides_runpath=no
     hardcode_into_libs=yes
     ;;
+  freebsd*) # from 4.6 on
+    shlibpath_overrides_runpath=yes
+    hardcode_into_libs=yes
+    ;;
   esac
   ;;
 
@@ -11851,7 +12145,7 @@
   version_type=sunos
   need_lib_prefix=no
   need_version=no
-  case &quot;$host_cpu&quot; in
+  case $host_cpu in
   ia64*)
     shrext_cmds='.so'
     hardcode_into_libs=yes
@@ -11891,6 +12185,18 @@
   postinstall_cmds='chmod 555 $lib'
   ;;
 
+interix3*)
+  version_type=linux
+  need_lib_prefix=no
+  need_version=no
+  library_names_spec='${libname}${release}${shared_ext}$versuffix ${libname}${release}${shared_ext}$major ${libname}${shared_ext}'
+  soname_spec='${libname}${release}${shared_ext}$major'
+  dynamic_linker='Interix 3.x ld.so.1 (PE, like ELF)'
+  shlibpath_var=LD_LIBRARY_PATH
+  shlibpath_overrides_runpath=no
+  hardcode_into_libs=yes
+  ;;
+
 irix5* | irix6* | nonstopux*)
   case $host_os in
     nonstopux*) version_type=nonstopux ;;
@@ -11954,13 +12260,6 @@
     sys_lib_dlsearch_path_spec=&quot;/lib /usr/lib $lt_ld_extra&quot;
   fi
 
-  case $host_cpu:$lt_cv_cc_64bit_output in
-  powerpc64:yes | s390x:yes | sparc64:yes | x86_64:yes)
-    sys_lib_dlsearch_path_spec=&quot;/lib64 /usr/lib64 /usr/X11R6/lib64&quot;
-    sys_lib_search_path_spec=&quot;/lib64 /usr/lib64 /usr/local/lib64 /usr/X11R6/lib64&quot;
-    ;;
-  esac
-
   # We used to test for /lib/ld.so.1 and disable shared libraries on
   # powerpc, because MkLinux only supported shared libraries with the
   # GNU dynamic linker.  Since this was broken with cross compilers,
@@ -11968,30 +12267,6 @@
   # people can always --disable-shared, the test was removed, and we
   # assume the GNU/Linux dynamic linker is in use.
   dynamic_linker='GNU/Linux ld.so'
-
-  # Find out which ABI we are using (multilib Linux x86_64 hack).
-  libsuff=
-  case &quot;$host_cpu&quot; in
-  x86_64*)
-    echo '#line 11976 &quot;configure&quot;' &gt; conftest.$ac_ext
-    if { (eval echo &quot;$as_me:$LINENO: \&quot;$ac_compile\&quot;&quot;) &gt;&amp;5
-  (eval $ac_compile) 2&gt;&amp;5
-  ac_status=$?
-  echo &quot;$as_me:$LINENO: \$? = $ac_status&quot; &gt;&amp;5
-  (exit $ac_status); }; then
-      case `/usr/bin/file conftest.$ac_objext` in
-      *64-bit*)
-        libsuff=64
-        ;;
-      esac
-    fi
-    rm -rf conftest*
-    ;;
-  *)
-    ;;
-  esac
-  sys_lib_dlsearch_path_spec=&quot;/lib${libsuff} /usr/lib${libsuff}&quot;
-  sys_lib_search_path_spec=&quot;/lib${libsuff} /usr/lib${libsuff} /usr/local/lib${libsuff}&quot;
   ;;
 
 knetbsd*-gnu)
@@ -12043,6 +12318,7 @@
 
 openbsd*)
   version_type=sunos
+  sys_lib_dlsearch_path_spec=&quot;/usr/lib&quot;
   need_lib_prefix=no
   # Some older versions of OpenBSD (3.3 at least) *do* need versioned libs.
   case $host_os in
@@ -12086,13 +12362,6 @@
   sys_lib_dlsearch_path_spec=&quot;$sys_lib_search_path_spec&quot;
   ;;
 
-sco3.2v5*)
-  version_type=osf
-  soname_spec='${libname}${release}${shared_ext}$major'
-  library_names_spec='${libname}${release}${shared_ext}$versuffix ${libname}${release}${shared_ext}$major $libname${shared_ext}'
-  shlibpath_var=LD_LIBRARY_PATH
-  ;;
-
 solaris*)
   version_type=linux
   need_lib_prefix=no
@@ -12118,7 +12387,7 @@
   need_version=yes
   ;;
 
-sysv4 | sysv4.2uw2* | sysv4.3* | sysv5*)
+sysv4 | sysv4.3*)
   version_type=linux
   library_names_spec='${libname}${release}${shared_ext}$versuffix ${libname}${release}${shared_ext}$major $libname${shared_ext}'
   soname_spec='${libname}${release}${shared_ext}$major'
@@ -12151,6 +12420,29 @@
   fi
   ;;
 
+sysv5* | sco3.2v5* | sco5v6* | unixware* | OpenUNIX* | sysv4*uw2*)
+  version_type=freebsd-elf
+  need_lib_prefix=no
+  need_version=no
+  library_names_spec='${libname}${release}${shared_ext}$versuffix ${libname}${release}${shared_ext} $libname${shared_ext}'
+  soname_spec='${libname}${release}${shared_ext}$major'
+  shlibpath_var=LD_LIBRARY_PATH
+  hardcode_into_libs=yes
+  if test &quot;$with_gnu_ld&quot; = yes; then
+    sys_lib_search_path_spec='/usr/local/lib /usr/gnu/lib /usr/ccs/lib /usr/lib /lib'
+    shlibpath_overrides_runpath=no
+  else
+    sys_lib_search_path_spec='/usr/ccs/lib /usr/lib'
+    shlibpath_overrides_runpath=yes
+    case $host_os in
+      sco3.2v5*)
+        sys_lib_search_path_spec=&quot;$sys_lib_search_path_spec /lib&quot;
+	;;
+    esac
+  fi
+  sys_lib_dlsearch_path_spec='/usr/lib'
+  ;;
+
 uts4*)
   version_type=linux
   library_names_spec='${libname}${release}${shared_ext}$versuffix ${libname}${release}${shared_ext}$major $libname${shared_ext}'
@@ -12166,6 +12458,11 @@
 echo &quot;${ECHO_T}$dynamic_linker&quot; &gt;&amp;6
 test &quot;$dynamic_linker&quot; = no &amp;&amp; can_build_shared=no
 
+variables_saved_for_relink=&quot;PATH $shlibpath_var $runpath_var&quot;
+if test &quot;$GCC&quot; = yes; then
+  variables_saved_for_relink=&quot;$variables_saved_for_relink GCC_EXEC_PREFIX COMPILER_PATH LIBRARY_PATH&quot;
+fi
+
 echo &quot;$as_me:$LINENO: checking how to hardcode library paths into programs&quot; &gt;&amp;5
 echo $ECHO_N &quot;checking how to hardcode library paths into programs... $ECHO_C&quot; &gt;&amp;6
 hardcode_action_CXX=
@@ -12203,842 +12500,7 @@
   enable_fast_install=needless
 fi
 
-striplib=
-old_striplib=
-echo &quot;$as_me:$LINENO: checking whether stripping libraries is possible&quot; &gt;&amp;5
-echo $ECHO_N &quot;checking whether stripping libraries is possible... $ECHO_C&quot; &gt;&amp;6
-if test -n &quot;$STRIP&quot; &amp;&amp; $STRIP -V 2&gt;&amp;1 | grep &quot;GNU strip&quot; &gt;/dev/null; then
-  test -z &quot;$old_striplib&quot; &amp;&amp; old_striplib=&quot;$STRIP --strip-debug&quot;
-  test -z &quot;$striplib&quot; &amp;&amp; striplib=&quot;$STRIP --strip-unneeded&quot;
-  echo &quot;$as_me:$LINENO: result: yes&quot; &gt;&amp;5
-echo &quot;${ECHO_T}yes&quot; &gt;&amp;6
-else
-# FIXME - insert some real tests, host_os isn't really good enough
-  case $host_os in
-   darwin*)
-       if test -n &quot;$STRIP&quot; ; then
-         striplib=&quot;$STRIP -x&quot;
-         echo &quot;$as_me:$LINENO: result: yes&quot; &gt;&amp;5
-echo &quot;${ECHO_T}yes&quot; &gt;&amp;6
-       else
-  echo &quot;$as_me:$LINENO: result: no&quot; &gt;&amp;5
-echo &quot;${ECHO_T}no&quot; &gt;&amp;6
-fi
-       ;;
-   *)
-  echo &quot;$as_me:$LINENO: result: no&quot; &gt;&amp;5
-echo &quot;${ECHO_T}no&quot; &gt;&amp;6
-    ;;
-  esac
-fi
 
-if test &quot;x$enable_dlopen&quot; != xyes; then
-  enable_dlopen=unknown
-  enable_dlopen_self=unknown
-  enable_dlopen_self_static=unknown
-else
-  lt_cv_dlopen=no
-  lt_cv_dlopen_libs=
-
-  case $host_os in
-  beos*)
-    lt_cv_dlopen=&quot;load_add_on&quot;
-    lt_cv_dlopen_libs=
-    lt_cv_dlopen_self=yes
-    ;;
-
-  mingw* | pw32*)
-    lt_cv_dlopen=&quot;LoadLibrary&quot;
-    lt_cv_dlopen_libs=
-   ;;
-
-  cygwin*)
-    lt_cv_dlopen=&quot;dlopen&quot;
-    lt_cv_dlopen_libs=
-   ;;
-
-  darwin*)
-  # if libdl is installed we need to link against it
-    echo &quot;$as_me:$LINENO: checking for dlopen in -ldl&quot; &gt;&amp;5
-echo $ECHO_N &quot;checking for dlopen in -ldl... $ECHO_C&quot; &gt;&amp;6
-if test &quot;${ac_cv_lib_dl_dlopen+set}&quot; = set; then
-  echo $ECHO_N &quot;(cached) $ECHO_C&quot; &gt;&amp;6
-else
-  ac_check_lib_save_LIBS=$LIBS
-LIBS=&quot;-ldl  $LIBS&quot;
-cat &gt;conftest.$ac_ext &lt;&lt;_ACEOF
-/* confdefs.h.  */
-_ACEOF
-cat confdefs.h &gt;&gt;conftest.$ac_ext
-cat &gt;&gt;conftest.$ac_ext &lt;&lt;_ACEOF
-/* end confdefs.h.  */
-
-/* Override any gcc2 internal prototype to avoid an error.  */
-#ifdef __cplusplus
-extern &quot;C&quot;
-#endif
-/* We use char because int might match the return type of a gcc2
-   builtin and then its argument prototype would still apply.  */
-char dlopen ();
-int
-main ()
-{
-dlopen ();
-  ;
-  return 0;
-}
-_ACEOF
-rm -f conftest.$ac_objext conftest$ac_exeext
-if { (eval echo &quot;$as_me:$LINENO: \&quot;$ac_link\&quot;&quot;) &gt;&amp;5
-  (eval $ac_link) 2&gt;conftest.er1
-  ac_status=$?
-  grep -v '^ *+' conftest.er1 &gt;conftest.err
-  rm -f conftest.er1
-  cat conftest.err &gt;&amp;5
-  echo &quot;$as_me:$LINENO: \$? = $ac_status&quot; &gt;&amp;5
-  (exit $ac_status); } &amp;&amp;
-	 { ac_try='test -z &quot;$ac_cxx_werror_flag&quot;
-			 || test ! -s conftest.err'
-  { (eval echo &quot;$as_me:$LINENO: \&quot;$ac_try\&quot;&quot;) &gt;&amp;5
-  (eval $ac_try) 2&gt;&amp;5
-  ac_status=$?
-  echo &quot;$as_me:$LINENO: \$? = $ac_status&quot; &gt;&amp;5
-  (exit $ac_status); }; } &amp;&amp;
-	 { ac_try='test -s conftest$ac_exeext'
-  { (eval echo &quot;$as_me:$LINENO: \&quot;$ac_try\&quot;&quot;) &gt;&amp;5
-  (eval $ac_try) 2&gt;&amp;5
-  ac_status=$?
-  echo &quot;$as_me:$LINENO: \$? = $ac_status&quot; &gt;&amp;5
-  (exit $ac_status); }; }; then
-  ac_cv_lib_dl_dlopen=yes
-else
-  echo &quot;$as_me: failed program was:&quot; &gt;&amp;5
-sed 's/^/| /' conftest.$ac_ext &gt;&amp;5
-
-ac_cv_lib_dl_dlopen=no
-fi
-rm -f conftest.err conftest.$ac_objext \
-      conftest$ac_exeext conftest.$ac_ext
-LIBS=$ac_check_lib_save_LIBS
-fi
-echo &quot;$as_me:$LINENO: result: $ac_cv_lib_dl_dlopen&quot; &gt;&amp;5
-echo &quot;${ECHO_T}$ac_cv_lib_dl_dlopen&quot; &gt;&amp;6
-if test $ac_cv_lib_dl_dlopen = yes; then
-  lt_cv_dlopen=&quot;dlopen&quot; lt_cv_dlopen_libs=&quot;-ldl&quot;
-else
-
-    lt_cv_dlopen=&quot;dyld&quot;
-    lt_cv_dlopen_libs=
-    lt_cv_dlopen_self=yes
-
-fi
-
-   ;;
-
-  *)
-    echo &quot;$as_me:$LINENO: checking for shl_load&quot; &gt;&amp;5
-echo $ECHO_N &quot;checking for shl_load... $ECHO_C&quot; &gt;&amp;6
-if test &quot;${ac_cv_func_shl_load+set}&quot; = set; then
-  echo $ECHO_N &quot;(cached) $ECHO_C&quot; &gt;&amp;6
-else
-  cat &gt;conftest.$ac_ext &lt;&lt;_ACEOF
-/* confdefs.h.  */
-_ACEOF
-cat confdefs.h &gt;&gt;conftest.$ac_ext
-cat &gt;&gt;conftest.$ac_ext &lt;&lt;_ACEOF
-/* end confdefs.h.  */
-/* Define shl_load to an innocuous variant, in case &lt;limits.h&gt; declares shl_load.
-   For example, HP-UX 11i &lt;limits.h&gt; declares gettimeofday.  */
-#define shl_load innocuous_shl_load
-
-/* System header to define __stub macros and hopefully few prototypes,
-    which can conflict with char shl_load (); below.
-    Prefer &lt;limits.h&gt; to &lt;assert.h&gt; if __STDC__ is defined, since
-    &lt;limits.h&gt; exists even on freestanding compilers.  */
-
-#ifdef __STDC__
-# include &lt;limits.h&gt;
-#else
-# include &lt;assert.h&gt;
-#endif
-
-#undef shl_load
-
-/* Override any gcc2 internal prototype to avoid an error.  */
-#ifdef __cplusplus
-extern &quot;C&quot;
-{
-#endif
-/* We use char because int might match the return type of a gcc2
-   builtin and then its argument prototype would still apply.  */
-char shl_load ();
-/* The GNU C library defines this for functions which it implements
-    to always fail with ENOSYS.  Some functions are actually named
-    something starting with __ and the normal name is an alias.  */
-#if defined (__stub_shl_load) || defined (__stub___shl_load)
-choke me
-#else
-char (*f) () = shl_load;
-#endif
-#ifdef __cplusplus
-}
-#endif
-
-int
-main ()
-{
-return f != shl_load;
-  ;
-  return 0;
-}
-_ACEOF
-rm -f conftest.$ac_objext conftest$ac_exeext
-if { (eval echo &quot;$as_me:$LINENO: \&quot;$ac_link\&quot;&quot;) &gt;&amp;5
-  (eval $ac_link) 2&gt;conftest.er1
-  ac_status=$?
-  grep -v '^ *+' conftest.er1 &gt;conftest.err
-  rm -f conftest.er1
-  cat conftest.err &gt;&amp;5
-  echo &quot;$as_me:$LINENO: \$? = $ac_status&quot; &gt;&amp;5
-  (exit $ac_status); } &amp;&amp;
-	 { ac_try='test -z &quot;$ac_cxx_werror_flag&quot;
-			 || test ! -s conftest.err'
-  { (eval echo &quot;$as_me:$LINENO: \&quot;$ac_try\&quot;&quot;) &gt;&amp;5
-  (eval $ac_try) 2&gt;&amp;5
-  ac_status=$?
-  echo &quot;$as_me:$LINENO: \$? = $ac_status&quot; &gt;&amp;5
-  (exit $ac_status); }; } &amp;&amp;
-	 { ac_try='test -s conftest$ac_exeext'
-  { (eval echo &quot;$as_me:$LINENO: \&quot;$ac_try\&quot;&quot;) &gt;&amp;5
-  (eval $ac_try) 2&gt;&amp;5
-  ac_status=$?
-  echo &quot;$as_me:$LINENO: \$? = $ac_status&quot; &gt;&amp;5
-  (exit $ac_status); }; }; then
-  ac_cv_func_shl_load=yes
-else
-  echo &quot;$as_me: failed program was:&quot; &gt;&amp;5
-sed 's/^/| /' conftest.$ac_ext &gt;&amp;5
-
-ac_cv_func_shl_load=no
-fi
-rm -f conftest.err conftest.$ac_objext \
-      conftest$ac_exeext conftest.$ac_ext
-fi
-echo &quot;$as_me:$LINENO: result: $ac_cv_func_shl_load&quot; &gt;&amp;5
-echo &quot;${ECHO_T}$ac_cv_func_shl_load&quot; &gt;&amp;6
-if test $ac_cv_func_shl_load = yes; then
-  lt_cv_dlopen=&quot;shl_load&quot;
-else
-  echo &quot;$as_me:$LINENO: checking for shl_load in -ldld&quot; &gt;&amp;5
-echo $ECHO_N &quot;checking for shl_load in -ldld... $ECHO_C&quot; &gt;&amp;6
-if test &quot;${ac_cv_lib_dld_shl_load+set}&quot; = set; then
-  echo $ECHO_N &quot;(cached) $ECHO_C&quot; &gt;&amp;6
-else
-  ac_check_lib_save_LIBS=$LIBS
-LIBS=&quot;-ldld  $LIBS&quot;
-cat &gt;conftest.$ac_ext &lt;&lt;_ACEOF
-/* confdefs.h.  */
-_ACEOF
-cat confdefs.h &gt;&gt;conftest.$ac_ext
-cat &gt;&gt;conftest.$ac_ext &lt;&lt;_ACEOF
-/* end confdefs.h.  */
-
-/* Override any gcc2 internal prototype to avoid an error.  */
-#ifdef __cplusplus
-extern &quot;C&quot;
-#endif
-/* We use char because int might match the return type of a gcc2
-   builtin and then its argument prototype would still apply.  */
-char shl_load ();
-int
-main ()
-{
-shl_load ();
-  ;
-  return 0;
-}
-_ACEOF
-rm -f conftest.$ac_objext conftest$ac_exeext
-if { (eval echo &quot;$as_me:$LINENO: \&quot;$ac_link\&quot;&quot;) &gt;&amp;5
-  (eval $ac_link) 2&gt;conftest.er1
-  ac_status=$?
-  grep -v '^ *+' conftest.er1 &gt;conftest.err
-  rm -f conftest.er1
-  cat conftest.err &gt;&amp;5
-  echo &quot;$as_me:$LINENO: \$? = $ac_status&quot; &gt;&amp;5
-  (exit $ac_status); } &amp;&amp;
-	 { ac_try='test -z &quot;$ac_cxx_werror_flag&quot;
-			 || test ! -s conftest.err'
-  { (eval echo &quot;$as_me:$LINENO: \&quot;$ac_try\&quot;&quot;) &gt;&amp;5
-  (eval $ac_try) 2&gt;&amp;5
-  ac_status=$?
-  echo &quot;$as_me:$LINENO: \$? = $ac_status&quot; &gt;&amp;5
-  (exit $ac_status); }; } &amp;&amp;
-	 { ac_try='test -s conftest$ac_exeext'
-  { (eval echo &quot;$as_me:$LINENO: \&quot;$ac_try\&quot;&quot;) &gt;&amp;5
-  (eval $ac_try) 2&gt;&amp;5
-  ac_status=$?
-  echo &quot;$as_me:$LINENO: \$? = $ac_status&quot; &gt;&amp;5
-  (exit $ac_status); }; }; then
-  ac_cv_lib_dld_shl_load=yes
-else
-  echo &quot;$as_me: failed program was:&quot; &gt;&amp;5
-sed 's/^/| /' conftest.$ac_ext &gt;&amp;5
-
-ac_cv_lib_dld_shl_load=no
-fi
-rm -f conftest.err conftest.$ac_objext \
-      conftest$ac_exeext conftest.$ac_ext
-LIBS=$ac_check_lib_save_LIBS
-fi
-echo &quot;$as_me:$LINENO: result: $ac_cv_lib_dld_shl_load&quot; &gt;&amp;5
-echo &quot;${ECHO_T}$ac_cv_lib_dld_shl_load&quot; &gt;&amp;6
-if test $ac_cv_lib_dld_shl_load = yes; then
-  lt_cv_dlopen=&quot;shl_load&quot; lt_cv_dlopen_libs=&quot;-dld&quot;
-else
-  echo &quot;$as_me:$LINENO: checking for dlopen&quot; &gt;&amp;5
-echo $ECHO_N &quot;checking for dlopen... $ECHO_C&quot; &gt;&amp;6
-if test &quot;${ac_cv_func_dlopen+set}&quot; = set; then
-  echo $ECHO_N &quot;(cached) $ECHO_C&quot; &gt;&amp;6
-else
-  cat &gt;conftest.$ac_ext &lt;&lt;_ACEOF
-/* confdefs.h.  */
-_ACEOF
-cat confdefs.h &gt;&gt;conftest.$ac_ext
-cat &gt;&gt;conftest.$ac_ext &lt;&lt;_ACEOF
-/* end confdefs.h.  */
-/* Define dlopen to an innocuous variant, in case &lt;limits.h&gt; declares dlopen.
-   For example, HP-UX 11i &lt;limits.h&gt; declares gettimeofday.  */
-#define dlopen innocuous_dlopen
-
-/* System header to define __stub macros and hopefully few prototypes,
-    which can conflict with char dlopen (); below.
-    Prefer &lt;limits.h&gt; to &lt;assert.h&gt; if __STDC__ is defined, since
-    &lt;limits.h&gt; exists even on freestanding compilers.  */
-
-#ifdef __STDC__
-# include &lt;limits.h&gt;
-#else
-# include &lt;assert.h&gt;
-#endif
-
-#undef dlopen
-
-/* Override any gcc2 internal prototype to avoid an error.  */
-#ifdef __cplusplus
-extern &quot;C&quot;
-{
-#endif
-/* We use char because int might match the return type of a gcc2
-   builtin and then its argument prototype would still apply.  */
-char dlopen ();
-/* The GNU C library defines this for functions which it implements
-    to always fail with ENOSYS.  Some functions are actually named
-    something starting with __ and the normal name is an alias.  */
-#if defined (__stub_dlopen) || defined (__stub___dlopen)
-choke me
-#else
-char (*f) () = dlopen;
-#endif
-#ifdef __cplusplus
-}
-#endif
-
-int
-main ()
-{
-return f != dlopen;
-  ;
-  return 0;
-}
-_ACEOF
-rm -f conftest.$ac_objext conftest$ac_exeext
-if { (eval echo &quot;$as_me:$LINENO: \&quot;$ac_link\&quot;&quot;) &gt;&amp;5
-  (eval $ac_link) 2&gt;conftest.er1
-  ac_status=$?
-  grep -v '^ *+' conftest.er1 &gt;conftest.err
-  rm -f conftest.er1
-  cat conftest.err &gt;&amp;5
-  echo &quot;$as_me:$LINENO: \$? = $ac_status&quot; &gt;&amp;5
-  (exit $ac_status); } &amp;&amp;
-	 { ac_try='test -z &quot;$ac_cxx_werror_flag&quot;
-			 || test ! -s conftest.err'
-  { (eval echo &quot;$as_me:$LINENO: \&quot;$ac_try\&quot;&quot;) &gt;&amp;5
-  (eval $ac_try) 2&gt;&amp;5
-  ac_status=$?
-  echo &quot;$as_me:$LINENO: \$? = $ac_status&quot; &gt;&amp;5
-  (exit $ac_status); }; } &amp;&amp;
-	 { ac_try='test -s conftest$ac_exeext'
-  { (eval echo &quot;$as_me:$LINENO: \&quot;$ac_try\&quot;&quot;) &gt;&amp;5
-  (eval $ac_try) 2&gt;&amp;5
-  ac_status=$?
-  echo &quot;$as_me:$LINENO: \$? = $ac_status&quot; &gt;&amp;5
-  (exit $ac_status); }; }; then
-  ac_cv_func_dlopen=yes
-else
-  echo &quot;$as_me: failed program was:&quot; &gt;&amp;5
-sed 's/^/| /' conftest.$ac_ext &gt;&amp;5
-
-ac_cv_func_dlopen=no
-fi
-rm -f conftest.err conftest.$ac_objext \
-      conftest$ac_exeext conftest.$ac_ext
-fi
-echo &quot;$as_me:$LINENO: result: $ac_cv_func_dlopen&quot; &gt;&amp;5
-echo &quot;${ECHO_T}$ac_cv_func_dlopen&quot; &gt;&amp;6
-if test $ac_cv_func_dlopen = yes; then
-  lt_cv_dlopen=&quot;dlopen&quot;
-else
-  echo &quot;$as_me:$LINENO: checking for dlopen in -ldl&quot; &gt;&amp;5
-echo $ECHO_N &quot;checking for dlopen in -ldl... $ECHO_C&quot; &gt;&amp;6
-if test &quot;${ac_cv_lib_dl_dlopen+set}&quot; = set; then
-  echo $ECHO_N &quot;(cached) $ECHO_C&quot; &gt;&amp;6
-else
-  ac_check_lib_save_LIBS=$LIBS
-LIBS=&quot;-ldl  $LIBS&quot;
-cat &gt;conftest.$ac_ext &lt;&lt;_ACEOF
-/* confdefs.h.  */
-_ACEOF
-cat confdefs.h &gt;&gt;conftest.$ac_ext
-cat &gt;&gt;conftest.$ac_ext &lt;&lt;_ACEOF
-/* end confdefs.h.  */
-
-/* Override any gcc2 internal prototype to avoid an error.  */
-#ifdef __cplusplus
-extern &quot;C&quot;
-#endif
-/* We use char because int might match the return type of a gcc2
-   builtin and then its argument prototype would still apply.  */
-char dlopen ();
-int
-main ()
-{
-dlopen ();
-  ;
-  return 0;
-}
-_ACEOF
-rm -f conftest.$ac_objext conftest$ac_exeext
-if { (eval echo &quot;$as_me:$LINENO: \&quot;$ac_link\&quot;&quot;) &gt;&amp;5
-  (eval $ac_link) 2&gt;conftest.er1
-  ac_status=$?
-  grep -v '^ *+' conftest.er1 &gt;conftest.err
-  rm -f conftest.er1
-  cat conftest.err &gt;&amp;5
-  echo &quot;$as_me:$LINENO: \$? = $ac_status&quot; &gt;&amp;5
-  (exit $ac_status); } &amp;&amp;
-	 { ac_try='test -z &quot;$ac_cxx_werror_flag&quot;
-			 || test ! -s conftest.err'
-  { (eval echo &quot;$as_me:$LINENO: \&quot;$ac_try\&quot;&quot;) &gt;&amp;5
-  (eval $ac_try) 2&gt;&amp;5
-  ac_status=$?
-  echo &quot;$as_me:$LINENO: \$? = $ac_status&quot; &gt;&amp;5
-  (exit $ac_status); }; } &amp;&amp;
-	 { ac_try='test -s conftest$ac_exeext'
-  { (eval echo &quot;$as_me:$LINENO: \&quot;$ac_try\&quot;&quot;) &gt;&amp;5
-  (eval $ac_try) 2&gt;&amp;5
-  ac_status=$?
-  echo &quot;$as_me:$LINENO: \$? = $ac_status&quot; &gt;&amp;5
-  (exit $ac_status); }; }; then
-  ac_cv_lib_dl_dlopen=yes
-else
-  echo &quot;$as_me: failed program was:&quot; &gt;&amp;5
-sed 's/^/| /' conftest.$ac_ext &gt;&amp;5
-
-ac_cv_lib_dl_dlopen=no
-fi
-rm -f conftest.err conftest.$ac_objext \
-      conftest$ac_exeext conftest.$ac_ext
-LIBS=$ac_check_lib_save_LIBS
-fi
-echo &quot;$as_me:$LINENO: result: $ac_cv_lib_dl_dlopen&quot; &gt;&amp;5
-echo &quot;${ECHO_T}$ac_cv_lib_dl_dlopen&quot; &gt;&amp;6
-if test $ac_cv_lib_dl_dlopen = yes; then
-  lt_cv_dlopen=&quot;dlopen&quot; lt_cv_dlopen_libs=&quot;-ldl&quot;
-else
-  echo &quot;$as_me:$LINENO: checking for dlopen in -lsvld&quot; &gt;&amp;5
-echo $ECHO_N &quot;checking for dlopen in -lsvld... $ECHO_C&quot; &gt;&amp;6
-if test &quot;${ac_cv_lib_svld_dlopen+set}&quot; = set; then
-  echo $ECHO_N &quot;(cached) $ECHO_C&quot; &gt;&amp;6
-else
-  ac_check_lib_save_LIBS=$LIBS
-LIBS=&quot;-lsvld  $LIBS&quot;
-cat &gt;conftest.$ac_ext &lt;&lt;_ACEOF
-/* confdefs.h.  */
-_ACEOF
-cat confdefs.h &gt;&gt;conftest.$ac_ext
-cat &gt;&gt;conftest.$ac_ext &lt;&lt;_ACEOF
-/* end confdefs.h.  */
-
-/* Override any gcc2 internal prototype to avoid an error.  */
-#ifdef __cplusplus
-extern &quot;C&quot;
-#endif
-/* We use char because int might match the return type of a gcc2
-   builtin and then its argument prototype would still apply.  */
-char dlopen ();
-int
-main ()
-{
-dlopen ();
-  ;
-  return 0;
-}
-_ACEOF
-rm -f conftest.$ac_objext conftest$ac_exeext
-if { (eval echo &quot;$as_me:$LINENO: \&quot;$ac_link\&quot;&quot;) &gt;&amp;5
-  (eval $ac_link) 2&gt;conftest.er1
-  ac_status=$?
-  grep -v '^ *+' conftest.er1 &gt;conftest.err
-  rm -f conftest.er1
-  cat conftest.err &gt;&amp;5
-  echo &quot;$as_me:$LINENO: \$? = $ac_status&quot; &gt;&amp;5
-  (exit $ac_status); } &amp;&amp;
-	 { ac_try='test -z &quot;$ac_cxx_werror_flag&quot;
-			 || test ! -s conftest.err'
-  { (eval echo &quot;$as_me:$LINENO: \&quot;$ac_try\&quot;&quot;) &gt;&amp;5
-  (eval $ac_try) 2&gt;&amp;5
-  ac_status=$?
-  echo &quot;$as_me:$LINENO: \$? = $ac_status&quot; &gt;&amp;5
-  (exit $ac_status); }; } &amp;&amp;
-	 { ac_try='test -s conftest$ac_exeext'
-  { (eval echo &quot;$as_me:$LINENO: \&quot;$ac_try\&quot;&quot;) &gt;&amp;5
-  (eval $ac_try) 2&gt;&amp;5
-  ac_status=$?
-  echo &quot;$as_me:$LINENO: \$? = $ac_status&quot; &gt;&amp;5
-  (exit $ac_status); }; }; then
-  ac_cv_lib_svld_dlopen=yes
-else
-  echo &quot;$as_me: failed program was:&quot; &gt;&amp;5
-sed 's/^/| /' conftest.$ac_ext &gt;&amp;5
-
-ac_cv_lib_svld_dlopen=no
-fi
-rm -f conftest.err conftest.$ac_objext \
-      conftest$ac_exeext conftest.$ac_ext
-LIBS=$ac_check_lib_save_LIBS
-fi
-echo &quot;$as_me:$LINENO: result: $ac_cv_lib_svld_dlopen&quot; &gt;&amp;5
-echo &quot;${ECHO_T}$ac_cv_lib_svld_dlopen&quot; &gt;&amp;6
-if test $ac_cv_lib_svld_dlopen = yes; then
-  lt_cv_dlopen=&quot;dlopen&quot; lt_cv_dlopen_libs=&quot;-lsvld&quot;
-else
-  echo &quot;$as_me:$LINENO: checking for dld_link in -ldld&quot; &gt;&amp;5
-echo $ECHO_N &quot;checking for dld_link in -ldld... $ECHO_C&quot; &gt;&amp;6
-if test &quot;${ac_cv_lib_dld_dld_link+set}&quot; = set; then
-  echo $ECHO_N &quot;(cached) $ECHO_C&quot; &gt;&amp;6
-else
-  ac_check_lib_save_LIBS=$LIBS
-LIBS=&quot;-ldld  $LIBS&quot;
-cat &gt;conftest.$ac_ext &lt;&lt;_ACEOF
-/* confdefs.h.  */
-_ACEOF
-cat confdefs.h &gt;&gt;conftest.$ac_ext
-cat &gt;&gt;conftest.$ac_ext &lt;&lt;_ACEOF
-/* end confdefs.h.  */
-
-/* Override any gcc2 internal prototype to avoid an error.  */
-#ifdef __cplusplus
-extern &quot;C&quot;
-#endif
-/* We use char because int might match the return type of a gcc2
-   builtin and then its argument prototype would still apply.  */
-char dld_link ();
-int
-main ()
-{
-dld_link ();
-  ;
-  return 0;
-}
-_ACEOF
-rm -f conftest.$ac_objext conftest$ac_exeext
-if { (eval echo &quot;$as_me:$LINENO: \&quot;$ac_link\&quot;&quot;) &gt;&amp;5
-  (eval $ac_link) 2&gt;conftest.er1
-  ac_status=$?
-  grep -v '^ *+' conftest.er1 &gt;conftest.err
-  rm -f conftest.er1
-  cat conftest.err &gt;&amp;5
-  echo &quot;$as_me:$LINENO: \$? = $ac_status&quot; &gt;&amp;5
-  (exit $ac_status); } &amp;&amp;
-	 { ac_try='test -z &quot;$ac_cxx_werror_flag&quot;
-			 || test ! -s conftest.err'
-  { (eval echo &quot;$as_me:$LINENO: \&quot;$ac_try\&quot;&quot;) &gt;&amp;5
-  (eval $ac_try) 2&gt;&amp;5
-  ac_status=$?
-  echo &quot;$as_me:$LINENO: \$? = $ac_status&quot; &gt;&amp;5
-  (exit $ac_status); }; } &amp;&amp;
-	 { ac_try='test -s conftest$ac_exeext'
-  { (eval echo &quot;$as_me:$LINENO: \&quot;$ac_try\&quot;&quot;) &gt;&amp;5
-  (eval $ac_try) 2&gt;&amp;5
-  ac_status=$?
-  echo &quot;$as_me:$LINENO: \$? = $ac_status&quot; &gt;&amp;5
-  (exit $ac_status); }; }; then
-  ac_cv_lib_dld_dld_link=yes
-else
-  echo &quot;$as_me: failed program was:&quot; &gt;&amp;5
-sed 's/^/| /' conftest.$ac_ext &gt;&amp;5
-
-ac_cv_lib_dld_dld_link=no
-fi
-rm -f conftest.err conftest.$ac_objext \
-      conftest$ac_exeext conftest.$ac_ext
-LIBS=$ac_check_lib_save_LIBS
-fi
-echo &quot;$as_me:$LINENO: result: $ac_cv_lib_dld_dld_link&quot; &gt;&amp;5
-echo &quot;${ECHO_T}$ac_cv_lib_dld_dld_link&quot; &gt;&amp;6
-if test $ac_cv_lib_dld_dld_link = yes; then
-  lt_cv_dlopen=&quot;dld_link&quot; lt_cv_dlopen_libs=&quot;-dld&quot;
-fi
-
-
-fi
-
-
-fi
-
-
-fi
-
-
-fi
-
-
-fi
-
-    ;;
-  esac
-
-  if test &quot;x$lt_cv_dlopen&quot; != xno; then
-    enable_dlopen=yes
-  else
-    enable_dlopen=no
-  fi
-
-  case $lt_cv_dlopen in
-  dlopen)
-    save_CPPFLAGS=&quot;$CPPFLAGS&quot;
-    test &quot;x$ac_cv_header_dlfcn_h&quot; = xyes &amp;&amp; CPPFLAGS=&quot;$CPPFLAGS -DHAVE_DLFCN_H&quot;
-
-    save_LDFLAGS=&quot;$LDFLAGS&quot;
-    eval LDFLAGS=\&quot;\$LDFLAGS $export_dynamic_flag_spec\&quot;
-
-    save_LIBS=&quot;$LIBS&quot;
-    LIBS=&quot;$lt_cv_dlopen_libs $LIBS&quot;
-
-    echo &quot;$as_me:$LINENO: checking whether a program can dlopen itself&quot; &gt;&amp;5
-echo $ECHO_N &quot;checking whether a program can dlopen itself... $ECHO_C&quot; &gt;&amp;6
-if test &quot;${lt_cv_dlopen_self+set}&quot; = set; then
-  echo $ECHO_N &quot;(cached) $ECHO_C&quot; &gt;&amp;6
-else
-  	  if test &quot;$cross_compiling&quot; = yes; then :
-  lt_cv_dlopen_self=cross
-else
-  lt_dlunknown=0; lt_dlno_uscore=1; lt_dlneed_uscore=2
-  lt_status=$lt_dlunknown
-  cat &gt; conftest.$ac_ext &lt;&lt;EOF
-#line 12840 &quot;configure&quot;
-#include &quot;confdefs.h&quot;
-
-#if HAVE_DLFCN_H
-#include &lt;dlfcn.h&gt;
-#endif
-
-#include &lt;stdio.h&gt;
-
-#ifdef RTLD_GLOBAL
-#  define LT_DLGLOBAL		RTLD_GLOBAL
-#else
-#  ifdef DL_GLOBAL
-#    define LT_DLGLOBAL		DL_GLOBAL
-#  else
-#    define LT_DLGLOBAL		0
-#  endif
-#endif
-
-/* We may have to define LT_DLLAZY_OR_NOW in the command line if we
-   find out it does not work in some platform. */
-#ifndef LT_DLLAZY_OR_NOW
-#  ifdef RTLD_LAZY
-#    define LT_DLLAZY_OR_NOW		RTLD_LAZY
-#  else
-#    ifdef DL_LAZY
-#      define LT_DLLAZY_OR_NOW		DL_LAZY
-#    else
-#      ifdef RTLD_NOW
-#        define LT_DLLAZY_OR_NOW	RTLD_NOW
-#      else
-#        ifdef DL_NOW
-#          define LT_DLLAZY_OR_NOW	DL_NOW
-#        else
-#          define LT_DLLAZY_OR_NOW	0
-#        endif
-#      endif
-#    endif
-#  endif
-#endif
-
-#ifdef __cplusplus
-extern &quot;C&quot; void exit (int);
-#endif
-
-void fnord() { int i=42;}
-int main ()
-{
-  void *self = dlopen (0, LT_DLGLOBAL|LT_DLLAZY_OR_NOW);
-  int status = $lt_dlunknown;
-
-  if (self)
-    {
-      if (dlsym (self,&quot;fnord&quot;))       status = $lt_dlno_uscore;
-      else if (dlsym( self,&quot;_fnord&quot;)) status = $lt_dlneed_uscore;
-      /* dlclose (self); */
-    }
-
-    exit (status);
-}
-EOF
-  if { (eval echo &quot;$as_me:$LINENO: \&quot;$ac_link\&quot;&quot;) &gt;&amp;5
-  (eval $ac_link) 2&gt;&amp;5
-  ac_status=$?
-  echo &quot;$as_me:$LINENO: \$? = $ac_status&quot; &gt;&amp;5
-  (exit $ac_status); } &amp;&amp; test -s conftest${ac_exeext} 2&gt;/dev/null; then
-    (./conftest; exit; ) 2&gt;/dev/null
-    lt_status=$?
-    case x$lt_status in
-      x$lt_dlno_uscore) lt_cv_dlopen_self=yes ;;
-      x$lt_dlneed_uscore) lt_cv_dlopen_self=yes ;;
-      x$lt_unknown|x*) lt_cv_dlopen_self=no ;;
-    esac
-  else :
-    # compilation failed
-    lt_cv_dlopen_self=no
-  fi
-fi
-rm -fr conftest*
-
-
-fi
-echo &quot;$as_me:$LINENO: result: $lt_cv_dlopen_self&quot; &gt;&amp;5
-echo &quot;${ECHO_T}$lt_cv_dlopen_self&quot; &gt;&amp;6
-
-    if test &quot;x$lt_cv_dlopen_self&quot; = xyes; then
-      LDFLAGS=&quot;$LDFLAGS $link_static_flag&quot;
-      echo &quot;$as_me:$LINENO: checking whether a statically linked program can dlopen itself&quot; &gt;&amp;5
-echo $ECHO_N &quot;checking whether a statically linked program can dlopen itself... $ECHO_C&quot; &gt;&amp;6
-if test &quot;${lt_cv_dlopen_self_static+set}&quot; = set; then
-  echo $ECHO_N &quot;(cached) $ECHO_C&quot; &gt;&amp;6
-else
-  	  if test &quot;$cross_compiling&quot; = yes; then :
-  lt_cv_dlopen_self_static=cross
-else
-  lt_dlunknown=0; lt_dlno_uscore=1; lt_dlneed_uscore=2
-  lt_status=$lt_dlunknown
-  cat &gt; conftest.$ac_ext &lt;&lt;EOF
-#line 12938 &quot;configure&quot;
-#include &quot;confdefs.h&quot;
-
-#if HAVE_DLFCN_H
-#include &lt;dlfcn.h&gt;
-#endif
-
-#include &lt;stdio.h&gt;
-
-#ifdef RTLD_GLOBAL
-#  define LT_DLGLOBAL		RTLD_GLOBAL
-#else
-#  ifdef DL_GLOBAL
-#    define LT_DLGLOBAL		DL_GLOBAL
-#  else
-#    define LT_DLGLOBAL		0
-#  endif
-#endif
-
-/* We may have to define LT_DLLAZY_OR_NOW in the command line if we
-   find out it does not work in some platform. */
-#ifndef LT_DLLAZY_OR_NOW
-#  ifdef RTLD_LAZY
-#    define LT_DLLAZY_OR_NOW		RTLD_LAZY
-#  else
-#    ifdef DL_LAZY
-#      define LT_DLLAZY_OR_NOW		DL_LAZY
-#    else
-#      ifdef RTLD_NOW
-#        define LT_DLLAZY_OR_NOW	RTLD_NOW
-#      else
-#        ifdef DL_NOW
-#          define LT_DLLAZY_OR_NOW	DL_NOW
-#        else
-#          define LT_DLLAZY_OR_NOW	0
-#        endif
-#      endif
-#    endif
-#  endif
-#endif
-
-#ifdef __cplusplus
-extern &quot;C&quot; void exit (int);
-#endif
-
-void fnord() { int i=42;}
-int main ()
-{
-  void *self = dlopen (0, LT_DLGLOBAL|LT_DLLAZY_OR_NOW);
-  int status = $lt_dlunknown;
-
-  if (self)
-    {
-      if (dlsym (self,&quot;fnord&quot;))       status = $lt_dlno_uscore;
-      else if (dlsym( self,&quot;_fnord&quot;)) status = $lt_dlneed_uscore;
-      /* dlclose (self); */
-    }
-
-    exit (status);
-}
-EOF
-  if { (eval echo &quot;$as_me:$LINENO: \&quot;$ac_link\&quot;&quot;) &gt;&amp;5
-  (eval $ac_link) 2&gt;&amp;5
-  ac_status=$?
-  echo &quot;$as_me:$LINENO: \$? = $ac_status&quot; &gt;&amp;5
-  (exit $ac_status); } &amp;&amp; test -s conftest${ac_exeext} 2&gt;/dev/null; then
-    (./conftest; exit; ) 2&gt;/dev/null
-    lt_status=$?
-    case x$lt_status in
-      x$lt_dlno_uscore) lt_cv_dlopen_self_static=yes ;;
-      x$lt_dlneed_uscore) lt_cv_dlopen_self_static=yes ;;
-      x$lt_unknown|x*) lt_cv_dlopen_self_static=no ;;
-    esac
-  else :
-    # compilation failed
-    lt_cv_dlopen_self_static=no
-  fi
-fi
-rm -fr conftest*
-
-
-fi
-echo &quot;$as_me:$LINENO: result: $lt_cv_dlopen_self_static&quot; &gt;&amp;5
-echo &quot;${ECHO_T}$lt_cv_dlopen_self_static&quot; &gt;&amp;6
-    fi
-
-    CPPFLAGS=&quot;$save_CPPFLAGS&quot;
-    LDFLAGS=&quot;$save_LDFLAGS&quot;
-    LIBS=&quot;$save_LIBS&quot;
-    ;;
-  esac
-
-  case $lt_cv_dlopen_self in
-  yes|no) enable_dlopen_self=$lt_cv_dlopen_self ;;
-  *) enable_dlopen_self=unknown ;;
-  esac
-
-  case $lt_cv_dlopen_self_static in
-  yes|no) enable_dlopen_self_static=$lt_cv_dlopen_self_static ;;
-  *) enable_dlopen_self_static=unknown ;;
-  esac
-fi
-
-
 # The else clause should only fire when bootstrapping the
 # libtool distribution, otherwise you forgot to ship ltmain.sh
 # with your package, and you will get complaints that there are
@@ -13052,7 +12514,7 @@
   # Now quote all the things that may contain metacharacters while being
   # careful not to overquote the AC_SUBSTed values.  We take copies of the
   # variables and quote the copies for generation of the libtool script.
-  for var in echo old_CC old_CFLAGS AR AR_FLAGS EGREP RANLIB LN_S LTCC NM \
+  for var in echo old_CC old_CFLAGS AR AR_FLAGS EGREP RANLIB LN_S LTCC LTCFLAGS NM \
     SED SHELL STRIP \
     libname_spec library_names_spec soname_spec extract_expsyms_cmds \
     old_striplib striplib file_magic_cmd finish_cmds finish_eval \
@@ -13170,6 +12632,9 @@
 # A C compiler.
 LTCC=$lt_LTCC
 
+# LTCC compiler flags.
+LTCFLAGS=$lt_LTCFLAGS
+
 # A language-specific compiler.
 CC=$lt_compiler_CXX
 
@@ -13512,6 +12977,9 @@
 # If no C compiler was specified, use CC.
 LTCC=${LTCC-&quot;$CC&quot;}
 
+# If no C compiler flags were specified, use CFLAGS.
+LTCFLAGS=${LTCFLAGS-&quot;$CFLAGS&quot;}
+
 # Allow CC to be a program name with arguments.
 compiler=$CC
 
@@ -13519,13 +12987,13 @@
 # save warnings/boilerplate of simple test code
 ac_outfile=conftest.$ac_objext
 printf &quot;$lt_simple_compile_test_code&quot; &gt;conftest.$ac_ext
-eval &quot;$ac_compile&quot; 2&gt;&amp;1 &gt;/dev/null | $SED '/^$/d' &gt;conftest.err
+eval &quot;$ac_compile&quot; 2&gt;&amp;1 &gt;/dev/null | $SED '/^$/d; /^ *+/d' &gt;conftest.err
 _lt_compiler_boilerplate=`cat conftest.err`
 $rm conftest*
 
 ac_outfile=conftest.$ac_objext
 printf &quot;$lt_simple_link_test_code&quot; &gt;conftest.$ac_ext
-eval &quot;$ac_link&quot; 2&gt;&amp;1 &gt;/dev/null | $SED '/^$/d' &gt;conftest.err
+eval &quot;$ac_link&quot; 2&gt;&amp;1 &gt;/dev/null | $SED '/^$/d; /^ *+/d' &gt;conftest.err
 _lt_linker_boilerplate=`cat conftest.err`
 $rm conftest*
 
@@ -13557,7 +13025,7 @@
 
 # On AIX, shared libraries and static libraries use the same namespace, and
 # are all built from PIC.
-case &quot;$host_os&quot; in
+case $host_os in
 aix3*)
   test &quot;$enable_shared&quot; = yes &amp;&amp; enable_static=no
   if test -n &quot;$RANLIB&quot;; then
@@ -13581,8 +13049,6 @@
 echo &quot;$as_me:$LINENO: result: $enable_static&quot; &gt;&amp;5
 echo &quot;${ECHO_T}$enable_static&quot; &gt;&amp;6
 
-test &quot;$ld_shlibs_F77&quot; = no &amp;&amp; can_build_shared=no
-
 GCC_F77=&quot;$G77&quot;
 LD_F77=&quot;$LD&quot;
 
@@ -13629,6 +13095,11 @@
       lt_prog_compiler_pic_F77='-fno-common'
       ;;
 
+    interix3*)
+      # Interix 3.x gcc -fpic/-fPIC options generate broken code.
+      # Instead, we relocate shared libraries at runtime.
+      ;;
+
     msdosdjgpp*)
       # Just because we use GCC doesn't mean we suddenly get shared libraries
       # on systems that don't support them.
@@ -13645,7 +13116,7 @@
     hpux*)
       # PIC is the default for IA64 HP-UX and 64-bit HP-UX, but
       # not for PA HP-UX.
-      case &quot;$host_cpu&quot; in
+      case $host_cpu in
       hppa*64*|ia64*)
 	# +Z the default
 	;;
@@ -13692,7 +13163,7 @@
       lt_prog_compiler_wl_F77='-Wl,'
       # PIC is the default for IA64 HP-UX and 64-bit HP-UX, but
       # not for PA HP-UX.
-      case &quot;$host_cpu&quot; in
+      case $host_cpu in
       hppa*64*|ia64*)
 	# +Z the default
 	;;
@@ -13722,12 +13193,12 @@
 	lt_prog_compiler_pic_F77='-KPIC'
 	lt_prog_compiler_static_F77='-static'
         ;;
-      pgcc* | pgf77* | pgf90*)
+      pgcc* | pgf77* | pgf90* | pgf95*)
         # Portland Group compilers (*not* the Pentium gcc compiler,
 	# which looks to be a dead project)
 	lt_prog_compiler_wl_F77='-Wl,'
 	lt_prog_compiler_pic_F77='-fpic'
-	lt_prog_compiler_static_F77='-static'
+	lt_prog_compiler_static_F77='-Bstatic'
         ;;
       ccc*)
         lt_prog_compiler_wl_F77='-Wl,'
@@ -13743,11 +13214,6 @@
       lt_prog_compiler_static_F77='-non_shared'
       ;;
 
-    sco3.2v5*)
-      lt_prog_compiler_pic_F77='-Kpic'
-      lt_prog_compiler_static_F77='-dn'
-      ;;
-
     solaris*)
       lt_prog_compiler_pic_F77='-KPIC'
       lt_prog_compiler_static_F77='-Bstatic'
@@ -13765,7 +13231,7 @@
       lt_prog_compiler_static_F77='-Bstatic'
       ;;
 
-    sysv4 | sysv4.2uw2* | sysv4.3* | sysv5*)
+    sysv4 | sysv4.2uw2* | sysv4.3*)
       lt_prog_compiler_wl_F77='-Wl,'
       lt_prog_compiler_pic_F77='-KPIC'
       lt_prog_compiler_static_F77='-Bstatic'
@@ -13778,6 +13244,12 @@
       fi
       ;;
 
+    sysv5* | unixware* | sco3.2v5* | sco5v6* | OpenUNIX*)
+      lt_prog_compiler_wl_F77='-Wl,'
+      lt_prog_compiler_pic_F77='-KPIC'
+      lt_prog_compiler_static_F77='-Bstatic'
+      ;;
+
     unicos*)
       lt_prog_compiler_wl_F77='-Wl,'
       lt_prog_compiler_can_build_shared_F77=no
@@ -13817,20 +13289,20 @@
    # with a dollar sign (not a hyphen), so the echo should work correctly.
    # The option is referenced via a variable to avoid confusing sed.
    lt_compile=`echo &quot;$ac_compile&quot; | $SED \
-   -e 's:.*FLAGS}? :&amp;$lt_compiler_flag :; t' \
+   -e 's:.*FLAGS}\{0,1\} :&amp;$lt_compiler_flag :; t' \
    -e 's: [^ ]*conftest\.: $lt_compiler_flag&amp;:; t' \
    -e 's:$: $lt_compiler_flag:'`
-   (eval echo &quot;\&quot;\$as_me:13823: $lt_compile\&quot;&quot; &gt;&amp;5)
+   (eval echo &quot;\&quot;\$as_me:13295: $lt_compile\&quot;&quot; &gt;&amp;5)
    (eval &quot;$lt_compile&quot; 2&gt;conftest.err)
    ac_status=$?
    cat conftest.err &gt;&amp;5
-   echo &quot;$as_me:13827: \$? = $ac_status&quot; &gt;&amp;5
+   echo &quot;$as_me:13299: \$? = $ac_status&quot; &gt;&amp;5
    if (exit $ac_status) &amp;&amp; test -s &quot;$ac_outfile&quot;; then
      # The compiler can only warn and ignore the option if not recognized
      # So say no if there are warnings other than the usual output.
-     $echo &quot;X$_lt_compiler_boilerplate&quot; | $Xsed &gt;conftest.exp
-     $SED '/^$/d' conftest.err &gt;conftest.er2
-     if test ! -s conftest.err || diff conftest.exp conftest.er2 &gt;/dev/null; then
+     $echo &quot;X$_lt_compiler_boilerplate&quot; | $Xsed -e '/^$/d' &gt;conftest.exp
+     $SED '/^$/d; /^ *+/d' conftest.err &gt;conftest.er2
+     if test ! -s conftest.er2 || diff conftest.exp conftest.er2 &gt;/dev/null; then
        lt_prog_compiler_pic_works_F77=yes
      fi
    fi
@@ -13851,7 +13323,7 @@
 fi
 
 fi
-case &quot;$host_os&quot; in
+case $host_os in
   # For platforms which do not support PIC, -DPIC is meaningless:
   *djgpp*)
     lt_prog_compiler_pic_F77=
@@ -13861,6 +13333,48 @@
     ;;
 esac
 
+#
+# Check to make sure the static flag actually works.
+#
+wl=$lt_prog_compiler_wl_F77 eval lt_tmp_static_flag=\&quot;$lt_prog_compiler_static_F77\&quot;
+echo &quot;$as_me:$LINENO: checking if $compiler static flag $lt_tmp_static_flag works&quot; &gt;&amp;5
+echo $ECHO_N &quot;checking if $compiler static flag $lt_tmp_static_flag works... $ECHO_C&quot; &gt;&amp;6
+if test &quot;${lt_prog_compiler_static_works_F77+set}&quot; = set; then
+  echo $ECHO_N &quot;(cached) $ECHO_C&quot; &gt;&amp;6
+else
+  lt_prog_compiler_static_works_F77=no
+   save_LDFLAGS=&quot;$LDFLAGS&quot;
+   LDFLAGS=&quot;$LDFLAGS $lt_tmp_static_flag&quot;
+   printf &quot;$lt_simple_link_test_code&quot; &gt; conftest.$ac_ext
+   if (eval $ac_link 2&gt;conftest.err) &amp;&amp; test -s conftest$ac_exeext; then
+     # The linker can only warn and ignore the option if not recognized
+     # So say no if there are warnings
+     if test -s conftest.err; then
+       # Append any errors to the config.log.
+       cat conftest.err 1&gt;&amp;5
+       $echo &quot;X$_lt_linker_boilerplate&quot; | $Xsed -e '/^$/d' &gt; conftest.exp
+       $SED '/^$/d; /^ *+/d' conftest.err &gt;conftest.er2
+       if diff conftest.exp conftest.er2 &gt;/dev/null; then
+         lt_prog_compiler_static_works_F77=yes
+       fi
+     else
+       lt_prog_compiler_static_works_F77=yes
+     fi
+   fi
+   $rm conftest*
+   LDFLAGS=&quot;$save_LDFLAGS&quot;
+
+fi
+echo &quot;$as_me:$LINENO: result: $lt_prog_compiler_static_works_F77&quot; &gt;&amp;5
+echo &quot;${ECHO_T}$lt_prog_compiler_static_works_F77&quot; &gt;&amp;6
+
+if test x&quot;$lt_prog_compiler_static_works_F77&quot; = xyes; then
+    :
+else
+    lt_prog_compiler_static_F77=
+fi
+
+
 echo &quot;$as_me:$LINENO: checking if $compiler supports -c -o file.$ac_objext&quot; &gt;&amp;5
 echo $ECHO_N &quot;checking if $compiler supports -c -o file.$ac_objext... $ECHO_C&quot; &gt;&amp;6
 if test &quot;${lt_cv_prog_compiler_c_o_F77+set}&quot; = set; then
@@ -13879,25 +13393,25 @@
    # Note that $ac_compile itself does not contain backslashes and begins
    # with a dollar sign (not a hyphen), so the echo should work correctly.
    lt_compile=`echo &quot;$ac_compile&quot; | $SED \
-   -e 's:.*FLAGS}? :&amp;$lt_compiler_flag :; t' \
+   -e 's:.*FLAGS}\{0,1\} :&amp;$lt_compiler_flag :; t' \
    -e 's: [^ ]*conftest\.: $lt_compiler_flag&amp;:; t' \
    -e 's:$: $lt_compiler_flag:'`
-   (eval echo &quot;\&quot;\$as_me:13885: $lt_compile\&quot;&quot; &gt;&amp;5)
+   (eval echo &quot;\&quot;\$as_me:13399: $lt_compile\&quot;&quot; &gt;&amp;5)
    (eval &quot;$lt_compile&quot; 2&gt;out/conftest.err)
    ac_status=$?
    cat out/conftest.err &gt;&amp;5
-   echo &quot;$as_me:13889: \$? = $ac_status&quot; &gt;&amp;5
+   echo &quot;$as_me:13403: \$? = $ac_status&quot; &gt;&amp;5
    if (exit $ac_status) &amp;&amp; test -s out/conftest2.$ac_objext
    then
      # The compiler can only warn and ignore the option if not recognized
      # So say no if there are warnings
-     $echo &quot;X$_lt_compiler_boilerplate&quot; | $Xsed &gt; out/conftest.exp
-     $SED '/^$/d' out/conftest.err &gt;out/conftest.er2
-     if test ! -s out/conftest.err || diff out/conftest.exp out/conftest.er2 &gt;/dev/null; then
+     $echo &quot;X$_lt_compiler_boilerplate&quot; | $Xsed -e '/^$/d' &gt; out/conftest.exp
+     $SED '/^$/d; /^ *+/d' out/conftest.err &gt;out/conftest.er2
+     if test ! -s out/conftest.er2 || diff out/conftest.exp out/conftest.er2 &gt;/dev/null; then
        lt_cv_prog_compiler_c_o_F77=yes
      fi
    fi
-   chmod u+w .
+   chmod u+w . 2&gt;&amp;5
    $rm conftest*
    # SGI C++ compiler will create directory out/ii_files/ for
    # template instantiation
@@ -13993,6 +13507,10 @@
       with_gnu_ld=no
     fi
     ;;
+  interix*)
+    # we just hope/assume this is gcc and not c89 (= MSVC++)
+    with_gnu_ld=yes
+    ;;
   openbsd*)
     with_gnu_ld=no
     ;;
@@ -14077,7 +13595,7 @@
       export_symbols_cmds_F77='$NM $libobjs $convenience | $global_symbol_pipe | $SED -e '\''/^[BCDGRS] /s/.* \([^ ]*\)/\1 DATA/'\'' | $SED -e '\''/^[AITW] /s/.* //'\'' | sort | uniq &gt; $export_symbols'
 
       if $LD --help 2&gt;&amp;1 | grep 'auto-import' &gt; /dev/null; then
-        archive_cmds_F77='$CC -shared $libobjs $deplibs $compiler_flags -o $output_objdir/$soname ${wl}--image-base=0x10000000 ${wl}--out-implib,$lib'
+        archive_cmds_F77='$CC -shared $libobjs $deplibs $compiler_flags -o $output_objdir/$soname ${wl}--enable-auto-image-base -Xlinker --out-implib -Xlinker $lib'
 	# If the export-symbols file already is a .def file (1st line
 	# is EXPORTS), use it as is; otherwise, prepend...
 	archive_expsym_cmds_F77='if test &quot;x`$SED 1q $export_symbols`&quot; = xEXPORTS; then
@@ -14086,22 +13604,37 @@
 	  echo EXPORTS &gt; $output_objdir/$soname.def;
 	  cat $export_symbols &gt;&gt; $output_objdir/$soname.def;
 	fi~
-	$CC -shared $output_objdir/$soname.def $libobjs $deplibs $compiler_flags -o $output_objdir/$soname ${wl}--image-base=0x10000000  ${wl}--out-implib,$lib'
+	$CC -shared $output_objdir/$soname.def $libobjs $deplibs $compiler_flags -o $output_objdir/$soname ${wl}--enable-auto-image-base -Xlinker --out-implib -Xlinker $lib'
       else
 	ld_shlibs_F77=no
       fi
       ;;
 
+    interix3*)
+      hardcode_direct_F77=no
+      hardcode_shlibpath_var_F77=no
+      hardcode_libdir_flag_spec_F77='${wl}-rpath,$libdir'
+      export_dynamic_flag_spec_F77='${wl}-E'
+      # Hack: On Interix 3.x, we cannot compile PIC because of a broken gcc.
+      # Instead, shared libraries are loaded at an image base (0x10000000 by
+      # default) and relocated if they conflict, which is a slow very memory
+      # consuming and fragmenting process.  To avoid this, we pick a random,
+      # 256 KiB-aligned image base between 0x50000000 and 0x6FFC0000 at link
+      # time.  Moving up from 0x10000000 also allows more sbrk(2) space.
+      archive_cmds_F77='$CC -shared $pic_flag $libobjs $deplibs $compiler_flags ${wl}-h,$soname ${wl}--image-base,`expr ${RANDOM-$$} % 4096 / 2 \* 262144 + 1342177280` -o $lib'
+      archive_expsym_cmds_F77='sed &quot;s,^,_,&quot; $export_symbols &gt;$output_objdir/$soname.expsym~$CC -shared $pic_flag $libobjs $deplibs $compiler_flags ${wl}-h,$soname ${wl}--retain-symbols-file,$output_objdir/$soname.expsym ${wl}--image-base,`expr ${RANDOM-$$} % 4096 / 2 \* 262144 + 1342177280` -o $lib'
+      ;;
+
     linux*)
       if $LD --help 2&gt;&amp;1 | grep ': supported targets:.* elf' &gt; /dev/null; then
 	tmp_addflag=
 	case $cc_basename,$host_cpu in
 	pgcc*)				# Portland Group C compiler
-	  whole_archive_flag_spec_F77='${wl}--whole-archive,`for conv in $convenience\&quot;\&quot;; do test  -n \&quot;$conv\&quot; &amp;&amp; new_convenience=\&quot;$new_convenience,$conv\&quot;; done; $echo \&quot;$new_convenience\&quot;` ${wl}--no-whole-archive'
+	  whole_archive_flag_spec_F77='${wl}--whole-archive`for conv in $convenience\&quot;\&quot;; do test  -n \&quot;$conv\&quot; &amp;&amp; new_convenience=\&quot;$new_convenience,$conv\&quot;; done; $echo \&quot;$new_convenience\&quot;` ${wl}--no-whole-archive'
 	  tmp_addflag=' $pic_flag'
 	  ;;
-	pgf77* | pgf90* )			# Portland Group f77 and f90 compilers
-	  whole_archive_flag_spec_F77='${wl}--whole-archive,`for conv in $convenience\&quot;\&quot;; do test  -n \&quot;$conv\&quot; &amp;&amp; new_convenience=\&quot;$new_convenience,$conv\&quot;; done; $echo \&quot;$new_convenience\&quot;` ${wl}--no-whole-archive'
+	pgf77* | pgf90* | pgf95*)	# Portland Group f77 and f90 compilers
+	  whole_archive_flag_spec_F77='${wl}--whole-archive`for conv in $convenience\&quot;\&quot;; do test  -n \&quot;$conv\&quot; &amp;&amp; new_convenience=\&quot;$new_convenience,$conv\&quot;; done; $echo \&quot;$new_convenience\&quot;` ${wl}--no-whole-archive'
 	  tmp_addflag=' $pic_flag -Mnomain' ;;
 	ecc*,ia64* | icc*,ia64*)		# Intel C compiler on ia64
 	  tmp_addflag=' -i_dynamic' ;;
@@ -14133,7 +13666,7 @@
       fi
       ;;
 
-    solaris* | sysv5*)
+    solaris*)
       if $LD -v 2&gt;&amp;1 | grep 'BFD 2\.8' &gt; /dev/null; then
 	ld_shlibs_F77=no
 	cat &lt;&lt;EOF 1&gt;&amp;2
@@ -14154,6 +13687,33 @@
       fi
       ;;
 
+    sysv5* | sco3.2v5* | sco5v6* | unixware* | OpenUNIX*)
+      case `$LD -v 2&gt;&amp;1` in
+        *\ [01].* | *\ 2.[0-9].* | *\ 2.1[0-5].*)
+	ld_shlibs_F77=no
+	cat &lt;&lt;_LT_EOF 1&gt;&amp;2
+
+*** Warning: Releases of the GNU linker prior to 2.16.91.0.3 can not
+*** reliably create shared libraries on SCO systems.  Therefore, libtool
+*** is disabling shared libraries support.  We urge you to upgrade GNU
+*** binutils to release 2.16.91.0.3 or newer.  Another option is to modify
+*** your PATH or compiler configuration so that the native linker is
+*** used, and then restart.
+
+_LT_EOF
+	;;
+	*)
+	  if $LD --help 2&gt;&amp;1 | grep ': supported targets:.* elf' &gt; /dev/null; then
+	    hardcode_libdir_flag_spec_F77='`test -z &quot;$SCOABSPATH&quot; &amp;&amp; echo ${wl}-rpath,$libdir`'
+	    archive_cmds_F77='$CC -shared $libobjs $deplibs $compiler_flags ${wl}-soname,\${SCOABSPATH:+${install_libdir}/}$soname -o $lib'
+	    archive_expsym_cmds_F77='$CC -shared $libobjs $deplibs $compiler_flags ${wl}-soname,\${SCOABSPATH:+${install_libdir}/}$soname,-retain-symbols-file,$export_symbols -o $lib'
+	  else
+	    ld_shlibs_F77=no
+	  fi
+	;;
+      esac
+      ;;
+
     sunos4*)
       archive_cmds_F77='$LD -assert pure-text -Bshareable -o $lib $libobjs $deplibs $linker_flags'
       wlarc=
@@ -14187,7 +13747,7 @@
       # Note: this linker hardcodes the directories in LIBPATH if there
       # are no directories specified by -L.
       hardcode_minus_L_F77=yes
-      if test &quot;$GCC&quot; = yes &amp;&amp; test -z &quot;$link_static_flag&quot;; then
+      if test &quot;$GCC&quot; = yes &amp;&amp; test -z &quot;$lt_prog_compiler_static&quot;; then
 	# Neither direct hardcoding nor static linking is supported with a
 	# broken collect2.
 	hardcode_direct_F77=unsupported
@@ -14221,6 +13781,7 @@
   	    break
   	  fi
 	  done
+	  ;;
 	esac
 
 	exp_sym_flag='-bexport'
@@ -14258,6 +13819,7 @@
   	  hardcode_libdir_flag_spec_F77='-L$libdir'
   	  hardcode_libdir_separator_F77=
 	  fi
+	  ;;
 	esac
 	shared_flag='-shared'
 	if test &quot;$aix_use_runtimelinking&quot; = yes; then
@@ -14270,11 +13832,11 @@
   	# chokes on -Wl,-G. The following line is correct:
 	  shared_flag='-G'
 	else
-  	if test &quot;$aix_use_runtimelinking&quot; = yes; then
+	  if test &quot;$aix_use_runtimelinking&quot; = yes; then
 	    shared_flag='${wl}-G'
 	  else
 	    shared_flag='${wl}-bM:SRE'
-  	fi
+	  fi
 	fi
       fi
 
@@ -14329,12 +13891,12 @@
 if test -z &quot;$aix_libpath&quot;; then aix_libpath=&quot;/usr/lib:/lib&quot;; fi
 
        hardcode_libdir_flag_spec_F77='${wl}-blibpath:$libdir:'&quot;$aix_libpath&quot;
-	archive_expsym_cmds_F77=&quot;\$CC&quot;' -o $output_objdir/$soname $libobjs $deplibs $compiler_flags `if test &quot;x${allow_undefined_flag}&quot; != &quot;x&quot;; then echo &quot;${wl}${allow_undefined_flag}&quot;; else :; fi` '&quot;\${wl}$no_entry_flag \${wl}$exp_sym_flag:\$export_symbols $shared_flag&quot;
+	archive_expsym_cmds_F77=&quot;\$CC&quot;' -o $output_objdir/$soname $libobjs $deplibs '&quot;\${wl}$no_entry_flag&quot;' $compiler_flags `if test &quot;x${allow_undefined_flag}&quot; != &quot;x&quot;; then echo &quot;${wl}${allow_undefined_flag}&quot;; else :; fi` '&quot;\${wl}$exp_sym_flag:\$export_symbols $shared_flag&quot;
        else
 	if test &quot;$host_cpu&quot; = ia64; then
 	  hardcode_libdir_flag_spec_F77='${wl}-R $libdir:/usr/lib:/lib'
 	  allow_undefined_flag_F77=&quot;-z nodefs&quot;
-	  archive_expsym_cmds_F77=&quot;\$CC $shared_flag&quot;' -o $output_objdir/$soname $libobjs $deplibs $compiler_flags ${wl}${allow_undefined_flag} '&quot;\${wl}$no_entry_flag \${wl}$exp_sym_flag:\$export_symbols&quot;
+	  archive_expsym_cmds_F77=&quot;\$CC $shared_flag&quot;' -o $output_objdir/$soname $libobjs $deplibs '&quot;\${wl}$no_entry_flag&quot;' $compiler_flags ${wl}${allow_undefined_flag} '&quot;\${wl}$exp_sym_flag:\$export_symbols&quot;
 	else
 	 # Determine the default libpath from the value encoded in an empty executable.
 	 cat &gt;conftest.$ac_ext &lt;&lt;_ACEOF
@@ -14384,13 +13946,11 @@
 	  # -berok will link without error, but may produce a broken library.
 	  no_undefined_flag_F77=' ${wl}-bernotok'
 	  allow_undefined_flag_F77=' ${wl}-berok'
-	  # -bexpall does not export symbols beginning with underscore (_)
-	  always_export_symbols_F77=yes
 	  # Exported symbols can be pulled into shared objects from archives
-	  whole_archive_flag_spec_F77=' '
+	  whole_archive_flag_spec_F77='$convenience'
 	  archive_cmds_need_lc_F77=yes
-	  # This is similar to how AIX traditionally builds it's shared libraries.
-	  archive_expsym_cmds_F77=&quot;\$CC $shared_flag&quot;' -o $output_objdir/$soname $libobjs $deplibs $compiler_flags ${wl}-bE:$export_symbols ${wl}-bnoentry${allow_undefined_flag}~$AR $AR_FLAGS $output_objdir/$libname$release.a $output_objdir/$soname'
+	  # This is similar to how AIX traditionally builds its shared libraries.
+	  archive_expsym_cmds_F77=&quot;\$CC $shared_flag&quot;' -o $output_objdir/$soname $libobjs $deplibs ${wl}-bnoentry $compiler_flags ${wl}-bE:$export_symbols${allow_undefined_flag}~$AR $AR_FLAGS $output_objdir/$libname$release.a $output_objdir/$soname'
 	fi
       fi
       ;;
@@ -14429,7 +13989,7 @@
       ;;
 
     darwin* | rhapsody*)
-      case &quot;$host_os&quot; in
+      case $host_os in
         rhapsody* | darwin1.[012])
          allow_undefined_flag_F77='${wl}-undefined ${wl}suppress'
          ;;
@@ -14458,7 +14018,7 @@
     	output_verbose_link_cmd='echo'
         archive_cmds_F77='$CC -dynamiclib $allow_undefined_flag -o $lib $libobjs $deplibs $compiler_flags -install_name $rpath/$soname $verstring'
       module_cmds_F77='$CC $allow_undefined_flag -o $lib -bundle $libobjs $deplibs$compiler_flags'
-      # Don't fix this by using the ld -exported_symbols_list flag, it doesn't exist in older darwin ld's
+      # Don't fix this by using the ld -exported_symbols_list flag, it doesn't exist in older darwin lds
       archive_expsym_cmds_F77='sed -e &quot;s,#.*,,&quot; -e &quot;s,^[    ]*,,&quot; -e &quot;s,^\(..*\),_&amp;,&quot; &lt; $export_symbols &gt; $output_objdir/${libname}-symbols.expsym~$CC -dynamiclib $allow_undefined_flag -o $lib $libobjs $deplibs $compiler_flags -install_name $rpath/$soname $verstring~nmedit -s $output_objdir/${libname}-symbols.expsym ${lib}'
       module_expsym_cmds_F77='sed -e &quot;s,#.*,,&quot; -e &quot;s,^[    ]*,,&quot; -e &quot;s,^\(..*\),_&amp;,&quot; &lt; $export_symbols &gt; $output_objdir/${libname}-symbols.expsym~$CC $allow_undefined_flag  -o $lib -bundle $libobjs $deplibs$compiler_flags~nmedit -s $output_objdir/${libname}-symbols.expsym ${lib}'
     else
@@ -14467,7 +14027,7 @@
          output_verbose_link_cmd='echo'
          archive_cmds_F77='$CC -qmkshrobj $allow_undefined_flag -o $lib $libobjs $deplibs $compiler_flags ${wl}-install_name ${wl}`echo $rpath/$soname` $verstring'
          module_cmds_F77='$CC $allow_undefined_flag -o $lib -bundle $libobjs $deplibs$compiler_flags'
-          # Don't fix this by using the ld -exported_symbols_list flag, it doesn't exist in older darwin ld's
+          # Don't fix this by using the ld -exported_symbols_list flag, it doesn't exist in older darwin lds
          archive_expsym_cmds_F77='sed -e &quot;s,#.*,,&quot; -e &quot;s,^[    ]*,,&quot; -e &quot;s,^\(..*\),_&amp;,&quot; &lt; $export_symbols &gt; $output_objdir/${libname}-symbols.expsym~$CC -qmkshrobj $allow_undefined_flag -o $lib $libobjs $deplibs $compiler_flags ${wl}-install_name ${wl}$rpath/$soname $verstring~nmedit -s $output_objdir/${libname}-symbols.expsym ${lib}'
           module_expsym_cmds_F77='sed -e &quot;s,#.*,,&quot; -e &quot;s,^[    ]*,,&quot; -e &quot;s,^\(..*\),_&amp;,&quot; &lt; $export_symbols &gt; $output_objdir/${libname}-symbols.expsym~$CC $allow_undefined_flag  -o $lib -bundle $libobjs $deplibs$compiler_flags~nmedit -s $output_objdir/${libname}-symbols.expsym ${lib}'
           ;;
@@ -14531,47 +14091,62 @@
       export_dynamic_flag_spec_F77='${wl}-E'
       ;;
 
-    hpux10* | hpux11*)
+    hpux10*)
       if test &quot;$GCC&quot; = yes -a &quot;$with_gnu_ld&quot; = no; then
-	case &quot;$host_cpu&quot; in
-	hppa*64*|ia64*)
+	archive_cmds_F77='$CC -shared -fPIC ${wl}+h ${wl}$soname ${wl}+b ${wl}$install_libdir -o $lib $libobjs $deplibs $compiler_flags'
+      else
+	archive_cmds_F77='$LD -b +h $soname +b $install_libdir -o $lib $libobjs $deplibs $linker_flags'
+      fi
+      if test &quot;$with_gnu_ld&quot; = no; then
+	hardcode_libdir_flag_spec_F77='${wl}+b ${wl}$libdir'
+	hardcode_libdir_separator_F77=:
+
+	hardcode_direct_F77=yes
+	export_dynamic_flag_spec_F77='${wl}-E'
+
+	# hardcode_minus_L: Not really in the search PATH,
+	# but as the default location of the library.
+	hardcode_minus_L_F77=yes
+      fi
+      ;;
+
+    hpux11*)
+      if test &quot;$GCC&quot; = yes -a &quot;$with_gnu_ld&quot; = no; then
+	case $host_cpu in
+	hppa*64*)
 	  archive_cmds_F77='$CC -shared ${wl}+h ${wl}$soname -o $lib $libobjs $deplibs $compiler_flags'
 	  ;;
+	ia64*)
+	  archive_cmds_F77='$CC -shared ${wl}+h ${wl}$soname ${wl}+nodefaultrpath -o $lib $libobjs $deplibs $compiler_flags'
+	  ;;
 	*)
 	  archive_cmds_F77='$CC -shared -fPIC ${wl}+h ${wl}$soname ${wl}+b ${wl}$install_libdir -o $lib $libobjs $deplibs $compiler_flags'
 	  ;;
 	esac
       else
-	case &quot;$host_cpu&quot; in
-	hppa*64*|ia64*)
-	  archive_cmds_F77='$LD -b +h $soname -o $lib $libobjs $deplibs $linker_flags'
+	case $host_cpu in
+	hppa*64*)
+	  archive_cmds_F77='$CC -b ${wl}+h ${wl}$soname -o $lib $libobjs $deplibs $compiler_flags'
 	  ;;
+	ia64*)
+	  archive_cmds_F77='$CC -b ${wl}+h ${wl}$soname ${wl}+nodefaultrpath -o $lib $libobjs $deplibs $compiler_flags'
+	  ;;
 	*)
-	  archive_cmds_F77='$LD -b +h $soname +b $install_libdir -o $lib $libobjs $deplibs $linker_flags'
+	  archive_cmds_F77='$CC -b ${wl}+h ${wl}$soname ${wl}+b ${wl}$install_libdir -o $lib $libobjs $deplibs $compiler_flags'
 	  ;;
 	esac
       fi
       if test &quot;$with_gnu_ld&quot; = no; then
-	case &quot;$host_cpu&quot; in
-	hppa*64*)
-	  hardcode_libdir_flag_spec_F77='${wl}+b ${wl}$libdir'
+	hardcode_libdir_flag_spec_F77='${wl}+b ${wl}$libdir'
+	hardcode_libdir_separator_F77=:
+
+	case $host_cpu in
+	hppa*64*|ia64*)
 	  hardcode_libdir_flag_spec_ld_F77='+b $libdir'
-	  hardcode_libdir_separator_F77=:
 	  hardcode_direct_F77=no
 	  hardcode_shlibpath_var_F77=no
 	  ;;
-	ia64*)
-	  hardcode_libdir_flag_spec_F77='-L$libdir'
-	  hardcode_direct_F77=no
-	  hardcode_shlibpath_var_F77=no
-
-	  # hardcode_minus_L: Not really in the search PATH,
-	  # but as the default location of the library.
-	  hardcode_minus_L_F77=yes
-	  ;;
 	*)
-	  hardcode_libdir_flag_spec_F77='${wl}+b ${wl}$libdir'
-	  hardcode_libdir_separator_F77=:
 	  hardcode_direct_F77=yes
 	  export_dynamic_flag_spec_F77='${wl}-E'
 
@@ -14673,14 +14248,6 @@
       hardcode_libdir_separator_F77=:
       ;;
 
-    sco3.2v5*)
-      archive_cmds_F77='$LD -G -h $soname -o $lib $libobjs $deplibs $linker_flags'
-      hardcode_shlibpath_var_F77=no
-      export_dynamic_flag_spec_F77='${wl}-Bexport'
-      runpath_var=LD_RUN_PATH
-      hardcode_runpath_var=yes
-      ;;
-
     solaris*)
       no_undefined_flag_F77=' -z text'
       if test &quot;$GCC&quot; = yes; then
@@ -14766,36 +14333,45 @@
       fi
       ;;
 
-    sysv4.2uw2*)
-      archive_cmds_F77='$LD -G -o $lib $libobjs $deplibs $linker_flags'
-      hardcode_direct_F77=yes
-      hardcode_minus_L_F77=no
+    sysv4*uw2* | sysv5OpenUNIX* | sysv5UnixWare7.[01].[10]* | unixware7*)
+      no_undefined_flag_F77='${wl}-z,text'
+      archive_cmds_need_lc_F77=no
       hardcode_shlibpath_var_F77=no
-      hardcode_runpath_var=yes
-      runpath_var=LD_RUN_PATH
-      ;;
+      runpath_var='LD_RUN_PATH'
 
-   sysv5OpenUNIX8* | sysv5UnixWare7* |  sysv5uw[78]* | unixware7*)
-      no_undefined_flag_F77='${wl}-z ${wl}text'
       if test &quot;$GCC&quot; = yes; then
-	archive_cmds_F77='$CC -shared ${wl}-h ${wl}$soname -o $lib $libobjs $deplibs $compiler_flags'
+	archive_cmds_F77='$CC -shared ${wl}-h,$soname -o $lib $libobjs $deplibs $compiler_flags'
+	archive_expsym_cmds_F77='$CC -shared ${wl}-Bexport:$export_symbols ${wl}-h,$soname -o $lib $libobjs $deplibs $compiler_flags'
       else
-	archive_cmds_F77='$CC -G ${wl}-h ${wl}$soname -o $lib $libobjs $deplibs $compiler_flags'
+	archive_cmds_F77='$CC -G ${wl}-h,$soname -o $lib $libobjs $deplibs $compiler_flags'
+	archive_expsym_cmds_F77='$CC -G ${wl}-Bexport:$export_symbols ${wl}-h,$soname -o $lib $libobjs $deplibs $compiler_flags'
       fi
-      runpath_var='LD_RUN_PATH'
-      hardcode_shlibpath_var_F77=no
       ;;
 
-    sysv5*)
-      no_undefined_flag_F77=' -z text'
-      # $CC -shared without GNU ld will not create a library from C++
-      # object files and a static libstdc++, better avoid it by now
-      archive_cmds_F77='$LD -G${allow_undefined_flag} -h $soname -o $lib $libobjs $deplibs $linker_flags'
-      archive_expsym_cmds_F77='$echo &quot;{ global:&quot; &gt; $lib.exp~cat $export_symbols | $SED -e &quot;s/\(.*\)/\1;/&quot; &gt;&gt; $lib.exp~$echo &quot;local: *; };&quot; &gt;&gt; $lib.exp~
-  		$LD -G${allow_undefined_flag} -M $lib.exp -h $soname -o $lib $libobjs $deplibs $linker_flags~$rm $lib.exp'
-      hardcode_libdir_flag_spec_F77=
+    sysv5* | sco3.2v5* | sco5v6*)
+      # Note: We can NOT use -z defs as we might desire, because we do not
+      # link with -lc, and that would cause any symbols used from libc to
+      # always be unresolved, which means just about no library would
+      # ever link correctly.  If we're not using GNU ld we use -z text
+      # though, which does catch some bad symbols but isn't as heavy-handed
+      # as -z defs.
+      no_undefined_flag_F77='${wl}-z,text'
+      allow_undefined_flag_F77='${wl}-z,nodefs'
+      archive_cmds_need_lc_F77=no
       hardcode_shlibpath_var_F77=no
+      hardcode_libdir_flag_spec_F77='`test -z &quot;$SCOABSPATH&quot; &amp;&amp; echo ${wl}-R,$libdir`'
+      hardcode_libdir_separator_F77=':'
+      link_all_deplibs_F77=yes
+      export_dynamic_flag_spec_F77='${wl}-Bexport'
       runpath_var='LD_RUN_PATH'
+
+      if test &quot;$GCC&quot; = yes; then
+	archive_cmds_F77='$CC -shared ${wl}-h,\${SCOABSPATH:+${install_libdir}/}$soname -o $lib $libobjs $deplibs $compiler_flags'
+	archive_expsym_cmds_F77='$CC -shared ${wl}-Bexport:$export_symbols ${wl}-h,\${SCOABSPATH:+${install_libdir}/}$soname -o $lib $libobjs $deplibs $compiler_flags'
+      else
+	archive_cmds_F77='$CC -G ${wl}-h,\${SCOABSPATH:+${install_libdir}/}$soname -o $lib $libobjs $deplibs $compiler_flags'
+	archive_expsym_cmds_F77='$CC -G ${wl}-Bexport:$export_symbols ${wl}-h,\${SCOABSPATH:+${install_libdir}/}$soname -o $lib $libobjs $deplibs $compiler_flags'
+      fi
       ;;
 
     uts4*)
@@ -14814,11 +14390,6 @@
 echo &quot;${ECHO_T}$ld_shlibs_F77&quot; &gt;&amp;6
 test &quot;$ld_shlibs_F77&quot; = no &amp;&amp; can_build_shared=no
 
-variables_saved_for_relink=&quot;PATH $shlibpath_var $runpath_var&quot;
-if test &quot;$GCC&quot; = yes; then
-  variables_saved_for_relink=&quot;$variables_saved_for_relink GCC_EXEC_PREFIX COMPILER_PATH LIBRARY_PATH&quot;
-fi
-
 #
 # Do we need to explicitly link libc?
 #
@@ -14851,6 +14422,7 @@
         libobjs=conftest.$ac_objext
         deplibs=
         wl=$lt_prog_compiler_wl_F77
+	pic_flag=$lt_prog_compiler_pic_F77
         compiler_flags=-v
         linker_flags=-v
         verstring=
@@ -15011,7 +14583,8 @@
       dlpath=`$SHELL 2&gt;&amp;1 -c '\''. $dir/'\''\${base_file}'\''i;echo \$dlname'\''`~
       dldir=$destdir/`dirname \$dlpath`~
       test -d \$dldir || mkdir -p \$dldir~
-      $install_prog $dir/$dlname \$dldir/$dlname'
+      $install_prog $dir/$dlname \$dldir/$dlname~
+      chmod a+x \$dldir/$dlname'
     postuninstall_cmds='dldll=`$SHELL 2&gt;&amp;1 -c '\''. $file; echo \$dlname'\''`~
       dlpath=$dir/\$dldll~
        $rm \$dlpath'
@@ -15088,7 +14661,7 @@
   soname_spec='${libname}${release}${major}$shared_ext'
   shlibpath_overrides_runpath=yes
   shlibpath_var=DYLD_LIBRARY_PATH
-  shrext_cmds='$(test .$module = .yes &amp;&amp; echo .so || echo .dylib)'
+  shrext_cmds='`test .$module = .yes &amp;&amp; echo .so || echo .dylib`'
   # Apple's gcc prints 'gcc -print-search-dirs' doesn't operate the same.
   if test &quot;$GCC&quot; = yes; then
     sys_lib_search_path_spec=`$CC -print-search-dirs | tr &quot;\n&quot; &quot;$PATH_SEPARATOR&quot; | sed -e 's/libraries:/@libraries:/' | tr &quot;@&quot; &quot;\n&quot; | grep &quot;^libraries:&quot; | sed -e &quot;s/^<A HREF="libraries://">libraries://</A>&quot; -e &quot;s,=/,/,g&quot; -e &quot;s,$PATH_SEPARATOR, ,g&quot; -e &quot;s,.*,&amp; /lib /usr/lib /usr/local/lib,g&quot;`
@@ -15126,8 +14699,22 @@
 freebsd* | dragonfly*)
   # DragonFly does not have aout.  When/if they implement a new
   # versioning mechanism, adjust this.
-  objformat=`test -x /usr/bin/objformat &amp;&amp; /usr/bin/objformat || echo aout`
-  version_type=freebsd-$objformat
+  if test -x /usr/bin/objformat; then
+    objformat=`/usr/bin/objformat`
+  else
+    case $host_os in
+    freebsd[123]*) objformat=aout ;;
+    *) objformat=elf ;;
+    esac
+  fi
+  # Handle Gentoo/FreeBSD as it was Linux
+  case $host_vendor in
+    gentoo)
+      version_type=linux ;;
+    *)
+      version_type=freebsd-$objformat ;;
+  esac
+
   case $version_type in
     freebsd-elf*)
       library_names_spec='${libname}${release}${shared_ext}$versuffix ${libname}${release}${shared_ext} $libname${shared_ext}'
@@ -15138,6 +14725,12 @@
       library_names_spec='${libname}${release}${shared_ext}$versuffix $libname${shared_ext}$versuffix'
       need_version=yes
       ;;
+    linux)
+      library_names_spec='${libname}${release}${shared_ext}$versuffix ${libname}${release}${shared_ext}$major ${libname}${shared_ext}'
+      soname_spec='${libname}${release}${shared_ext}$major'
+      need_lib_prefix=no
+      need_version=no
+      ;;
   esac
   shlibpath_var=LD_LIBRARY_PATH
   case $host_os in
@@ -15148,10 +14741,15 @@
     shlibpath_overrides_runpath=yes
     hardcode_into_libs=yes
     ;;
-  *) # from 3.2 on
+  freebsd3.[2-9]* | freebsdelf3.[2-9]* | \
+  freebsd4.[0-5] | freebsdelf4.[0-5] | freebsd4.1.1 | freebsdelf4.1.1)
     shlibpath_overrides_runpath=no
     hardcode_into_libs=yes
     ;;
+  freebsd*) # from 4.6 on
+    shlibpath_overrides_runpath=yes
+    hardcode_into_libs=yes
+    ;;
   esac
   ;;
 
@@ -15171,7 +14769,7 @@
   version_type=sunos
   need_lib_prefix=no
   need_version=no
-  case &quot;$host_cpu&quot; in
+  case $host_cpu in
   ia64*)
     shrext_cmds='.so'
     hardcode_into_libs=yes
@@ -15211,6 +14809,18 @@
   postinstall_cmds='chmod 555 $lib'
   ;;
 
+interix3*)
+  version_type=linux
+  need_lib_prefix=no
+  need_version=no
+  library_names_spec='${libname}${release}${shared_ext}$versuffix ${libname}${release}${shared_ext}$major ${libname}${shared_ext}'
+  soname_spec='${libname}${release}${shared_ext}$major'
+  dynamic_linker='Interix 3.x ld.so.1 (PE, like ELF)'
+  shlibpath_var=LD_LIBRARY_PATH
+  shlibpath_overrides_runpath=no
+  hardcode_into_libs=yes
+  ;;
+
 irix5* | irix6* | nonstopux*)
   case $host_os in
     nonstopux*) version_type=nonstopux ;;
@@ -15274,13 +14884,6 @@
     sys_lib_dlsearch_path_spec=&quot;/lib /usr/lib $lt_ld_extra&quot;
   fi
 
-  case $host_cpu:$lt_cv_cc_64bit_output in
-  powerpc64:yes | s390x:yes | sparc64:yes | x86_64:yes)
-    sys_lib_dlsearch_path_spec=&quot;/lib64 /usr/lib64 /usr/X11R6/lib64&quot;
-    sys_lib_search_path_spec=&quot;/lib64 /usr/lib64 /usr/local/lib64 /usr/X11R6/lib64&quot;
-    ;;
-  esac
-
   # We used to test for /lib/ld.so.1 and disable shared libraries on
   # powerpc, because MkLinux only supported shared libraries with the
   # GNU dynamic linker.  Since this was broken with cross compilers,
@@ -15288,30 +14891,6 @@
   # people can always --disable-shared, the test was removed, and we
   # assume the GNU/Linux dynamic linker is in use.
   dynamic_linker='GNU/Linux ld.so'
-
-  # Find out which ABI we are using (multilib Linux x86_64 hack).
-  libsuff=
-  case &quot;$host_cpu&quot; in
-  x86_64*)
-    echo '#line 15296 &quot;configure&quot;' &gt; conftest.$ac_ext
-    if { (eval echo &quot;$as_me:$LINENO: \&quot;$ac_compile\&quot;&quot;) &gt;&amp;5
-  (eval $ac_compile) 2&gt;&amp;5
-  ac_status=$?
-  echo &quot;$as_me:$LINENO: \$? = $ac_status&quot; &gt;&amp;5
-  (exit $ac_status); }; then
-      case `/usr/bin/file conftest.$ac_objext` in
-      *64-bit*)
-        libsuff=64
-        ;;
-      esac
-    fi
-    rm -rf conftest*
-    ;;
-  *)
-    ;;
-  esac
-  sys_lib_dlsearch_path_spec=&quot;/lib${libsuff} /usr/lib${libsuff}&quot;
-  sys_lib_search_path_spec=&quot;/lib${libsuff} /usr/lib${libsuff} /usr/local/lib${libsuff}&quot;
   ;;
 
 knetbsd*-gnu)
@@ -15363,6 +14942,7 @@
 
 openbsd*)
   version_type=sunos
+  sys_lib_dlsearch_path_spec=&quot;/usr/lib&quot;
   need_lib_prefix=no
   # Some older versions of OpenBSD (3.3 at least) *do* need versioned libs.
   case $host_os in
@@ -15406,13 +14986,6 @@
   sys_lib_dlsearch_path_spec=&quot;$sys_lib_search_path_spec&quot;
   ;;
 
-sco3.2v5*)
-  version_type=osf
-  soname_spec='${libname}${release}${shared_ext}$major'
-  library_names_spec='${libname}${release}${shared_ext}$versuffix ${libname}${release}${shared_ext}$major $libname${shared_ext}'
-  shlibpath_var=LD_LIBRARY_PATH
-  ;;
-
 solaris*)
   version_type=linux
   need_lib_prefix=no
@@ -15438,7 +15011,7 @@
   need_version=yes
   ;;
 
-sysv4 | sysv4.2uw2* | sysv4.3* | sysv5*)
+sysv4 | sysv4.3*)
   version_type=linux
   library_names_spec='${libname}${release}${shared_ext}$versuffix ${libname}${release}${shared_ext}$major $libname${shared_ext}'
   soname_spec='${libname}${release}${shared_ext}$major'
@@ -15471,6 +15044,29 @@
   fi
   ;;
 
+sysv5* | sco3.2v5* | sco5v6* | unixware* | OpenUNIX* | sysv4*uw2*)
+  version_type=freebsd-elf
+  need_lib_prefix=no
+  need_version=no
+  library_names_spec='${libname}${release}${shared_ext}$versuffix ${libname}${release}${shared_ext} $libname${shared_ext}'
+  soname_spec='${libname}${release}${shared_ext}$major'
+  shlibpath_var=LD_LIBRARY_PATH
+  hardcode_into_libs=yes
+  if test &quot;$with_gnu_ld&quot; = yes; then
+    sys_lib_search_path_spec='/usr/local/lib /usr/gnu/lib /usr/ccs/lib /usr/lib /lib'
+    shlibpath_overrides_runpath=no
+  else
+    sys_lib_search_path_spec='/usr/ccs/lib /usr/lib'
+    shlibpath_overrides_runpath=yes
+    case $host_os in
+      sco3.2v5*)
+        sys_lib_search_path_spec=&quot;$sys_lib_search_path_spec /lib&quot;
+	;;
+    esac
+  fi
+  sys_lib_dlsearch_path_spec='/usr/lib'
+  ;;
+
 uts4*)
   version_type=linux
   library_names_spec='${libname}${release}${shared_ext}$versuffix ${libname}${release}${shared_ext}$major $libname${shared_ext}'
@@ -15486,6 +15082,11 @@
 echo &quot;${ECHO_T}$dynamic_linker&quot; &gt;&amp;6
 test &quot;$dynamic_linker&quot; = no &amp;&amp; can_build_shared=no
 
+variables_saved_for_relink=&quot;PATH $shlibpath_var $runpath_var&quot;
+if test &quot;$GCC&quot; = yes; then
+  variables_saved_for_relink=&quot;$variables_saved_for_relink GCC_EXEC_PREFIX COMPILER_PATH LIBRARY_PATH&quot;
+fi
+
 echo &quot;$as_me:$LINENO: checking how to hardcode library paths into programs&quot; &gt;&amp;5
 echo $ECHO_N &quot;checking how to hardcode library paths into programs... $ECHO_C&quot; &gt;&amp;6
 hardcode_action_F77=
@@ -15523,37 +15124,7 @@
   enable_fast_install=needless
 fi
 
-striplib=
-old_striplib=
-echo &quot;$as_me:$LINENO: checking whether stripping libraries is possible&quot; &gt;&amp;5
-echo $ECHO_N &quot;checking whether stripping libraries is possible... $ECHO_C&quot; &gt;&amp;6
-if test -n &quot;$STRIP&quot; &amp;&amp; $STRIP -V 2&gt;&amp;1 | grep &quot;GNU strip&quot; &gt;/dev/null; then
-  test -z &quot;$old_striplib&quot; &amp;&amp; old_striplib=&quot;$STRIP --strip-debug&quot;
-  test -z &quot;$striplib&quot; &amp;&amp; striplib=&quot;$STRIP --strip-unneeded&quot;
-  echo &quot;$as_me:$LINENO: result: yes&quot; &gt;&amp;5
-echo &quot;${ECHO_T}yes&quot; &gt;&amp;6
-else
-# FIXME - insert some real tests, host_os isn't really good enough
-  case $host_os in
-   darwin*)
-       if test -n &quot;$STRIP&quot; ; then
-         striplib=&quot;$STRIP -x&quot;
-         echo &quot;$as_me:$LINENO: result: yes&quot; &gt;&amp;5
-echo &quot;${ECHO_T}yes&quot; &gt;&amp;6
-       else
-  echo &quot;$as_me:$LINENO: result: no&quot; &gt;&amp;5
-echo &quot;${ECHO_T}no&quot; &gt;&amp;6
-fi
-       ;;
-   *)
-  echo &quot;$as_me:$LINENO: result: no&quot; &gt;&amp;5
-echo &quot;${ECHO_T}no&quot; &gt;&amp;6
-    ;;
-  esac
-fi
 
-
-
 # The else clause should only fire when bootstrapping the
 # libtool distribution, otherwise you forgot to ship ltmain.sh
 # with your package, and you will get complaints that there are
@@ -15567,7 +15138,7 @@
   # Now quote all the things that may contain metacharacters while being
   # careful not to overquote the AC_SUBSTed values.  We take copies of the
   # variables and quote the copies for generation of the libtool script.
-  for var in echo old_CC old_CFLAGS AR AR_FLAGS EGREP RANLIB LN_S LTCC NM \
+  for var in echo old_CC old_CFLAGS AR AR_FLAGS EGREP RANLIB LN_S LTCC LTCFLAGS NM \
     SED SHELL STRIP \
     libname_spec library_names_spec soname_spec extract_expsyms_cmds \
     old_striplib striplib file_magic_cmd finish_cmds finish_eval \
@@ -15685,6 +15256,9 @@
 # A C compiler.
 LTCC=$lt_LTCC
 
+# LTCC compiler flags.
+LTCFLAGS=$lt_LTCFLAGS
+
 # A language-specific compiler.
 CC=$lt_compiler_F77
 
@@ -15995,6 +15569,9 @@
 # If no C compiler was specified, use CC.
 LTCC=${LTCC-&quot;$CC&quot;}
 
+# If no C compiler flags were specified, use CFLAGS.
+LTCFLAGS=${LTCFLAGS-&quot;$CFLAGS&quot;}
+
 # Allow CC to be a program name with arguments.
 compiler=$CC
 
@@ -16002,13 +15579,13 @@
 # save warnings/boilerplate of simple test code
 ac_outfile=conftest.$ac_objext
 printf &quot;$lt_simple_compile_test_code&quot; &gt;conftest.$ac_ext
-eval &quot;$ac_compile&quot; 2&gt;&amp;1 &gt;/dev/null | $SED '/^$/d' &gt;conftest.err
+eval &quot;$ac_compile&quot; 2&gt;&amp;1 &gt;/dev/null | $SED '/^$/d; /^ *+/d' &gt;conftest.err
 _lt_compiler_boilerplate=`cat conftest.err`
 $rm conftest*
 
 ac_outfile=conftest.$ac_objext
 printf &quot;$lt_simple_link_test_code&quot; &gt;conftest.$ac_ext
-eval &quot;$ac_link&quot; 2&gt;&amp;1 &gt;/dev/null | $SED '/^$/d' &gt;conftest.err
+eval &quot;$ac_link&quot; 2&gt;&amp;1 &gt;/dev/null | $SED '/^$/d; /^ *+/d' &gt;conftest.err
 _lt_linker_boilerplate=`cat conftest.err`
 $rm conftest*
 
@@ -16056,20 +15633,20 @@
    # with a dollar sign (not a hyphen), so the echo should work correctly.
    # The option is referenced via a variable to avoid confusing sed.
    lt_compile=`echo &quot;$ac_compile&quot; | $SED \
-   -e 's:.*FLAGS}? :&amp;$lt_compiler_flag :; t' \
+   -e 's:.*FLAGS}\{0,1\} :&amp;$lt_compiler_flag :; t' \
    -e 's: [^ ]*conftest\.: $lt_compiler_flag&amp;:; t' \
    -e 's:$: $lt_compiler_flag:'`
-   (eval echo &quot;\&quot;\$as_me:16062: $lt_compile\&quot;&quot; &gt;&amp;5)
+   (eval echo &quot;\&quot;\$as_me:15639: $lt_compile\&quot;&quot; &gt;&amp;5)
    (eval &quot;$lt_compile&quot; 2&gt;conftest.err)
    ac_status=$?
    cat conftest.err &gt;&amp;5
-   echo &quot;$as_me:16066: \$? = $ac_status&quot; &gt;&amp;5
+   echo &quot;$as_me:15643: \$? = $ac_status&quot; &gt;&amp;5
    if (exit $ac_status) &amp;&amp; test -s &quot;$ac_outfile&quot;; then
      # The compiler can only warn and ignore the option if not recognized
      # So say no if there are warnings other than the usual output.
-     $echo &quot;X$_lt_compiler_boilerplate&quot; | $Xsed &gt;conftest.exp
-     $SED '/^$/d' conftest.err &gt;conftest.er2
-     if test ! -s conftest.err || diff conftest.exp conftest.er2 &gt;/dev/null; then
+     $echo &quot;X$_lt_compiler_boilerplate&quot; | $Xsed -e '/^$/d' &gt;conftest.exp
+     $SED '/^$/d; /^ *+/d' conftest.err &gt;conftest.er2
+     if test ! -s conftest.er2 || diff conftest.exp conftest.er2 &gt;/dev/null; then
        lt_cv_prog_compiler_rtti_exceptions=yes
      fi
    fi
@@ -16130,6 +15707,11 @@
       lt_prog_compiler_pic_GCJ='-fno-common'
       ;;
 
+    interix3*)
+      # Interix 3.x gcc -fpic/-fPIC options generate broken code.
+      # Instead, we relocate shared libraries at runtime.
+      ;;
+
     msdosdjgpp*)
       # Just because we use GCC doesn't mean we suddenly get shared libraries
       # on systems that don't support them.
@@ -16146,7 +15728,7 @@
     hpux*)
       # PIC is the default for IA64 HP-UX and 64-bit HP-UX, but
       # not for PA HP-UX.
-      case &quot;$host_cpu&quot; in
+      case $host_cpu in
       hppa*64*|ia64*)
 	# +Z the default
 	;;
@@ -16193,7 +15775,7 @@
       lt_prog_compiler_wl_GCJ='-Wl,'
       # PIC is the default for IA64 HP-UX and 64-bit HP-UX, but
       # not for PA HP-UX.
-      case &quot;$host_cpu&quot; in
+      case $host_cpu in
       hppa*64*|ia64*)
 	# +Z the default
 	;;
@@ -16223,12 +15805,12 @@
 	lt_prog_compiler_pic_GCJ='-KPIC'
 	lt_prog_compiler_static_GCJ='-static'
         ;;
-      pgcc* | pgf77* | pgf90*)
+      pgcc* | pgf77* | pgf90* | pgf95*)
         # Portland Group compilers (*not* the Pentium gcc compiler,
 	# which looks to be a dead project)
 	lt_prog_compiler_wl_GCJ='-Wl,'
 	lt_prog_compiler_pic_GCJ='-fpic'
-	lt_prog_compiler_static_GCJ='-static'
+	lt_prog_compiler_static_GCJ='-Bstatic'
         ;;
       ccc*)
         lt_prog_compiler_wl_GCJ='-Wl,'
@@ -16244,11 +15826,6 @@
       lt_prog_compiler_static_GCJ='-non_shared'
       ;;
 
-    sco3.2v5*)
-      lt_prog_compiler_pic_GCJ='-Kpic'
-      lt_prog_compiler_static_GCJ='-dn'
-      ;;
-
     solaris*)
       lt_prog_compiler_pic_GCJ='-KPIC'
       lt_prog_compiler_static_GCJ='-Bstatic'
@@ -16266,7 +15843,7 @@
       lt_prog_compiler_static_GCJ='-Bstatic'
       ;;
 
-    sysv4 | sysv4.2uw2* | sysv4.3* | sysv5*)
+    sysv4 | sysv4.2uw2* | sysv4.3*)
       lt_prog_compiler_wl_GCJ='-Wl,'
       lt_prog_compiler_pic_GCJ='-KPIC'
       lt_prog_compiler_static_GCJ='-Bstatic'
@@ -16279,6 +15856,12 @@
       fi
       ;;
 
+    sysv5* | unixware* | sco3.2v5* | sco5v6* | OpenUNIX*)
+      lt_prog_compiler_wl_GCJ='-Wl,'
+      lt_prog_compiler_pic_GCJ='-KPIC'
+      lt_prog_compiler_static_GCJ='-Bstatic'
+      ;;
+
     unicos*)
       lt_prog_compiler_wl_GCJ='-Wl,'
       lt_prog_compiler_can_build_shared_GCJ=no
@@ -16318,20 +15901,20 @@
    # with a dollar sign (not a hyphen), so the echo should work correctly.
    # The option is referenced via a variable to avoid confusing sed.
    lt_compile=`echo &quot;$ac_compile&quot; | $SED \
-   -e 's:.*FLAGS}? :&amp;$lt_compiler_flag :; t' \
+   -e 's:.*FLAGS}\{0,1\} :&amp;$lt_compiler_flag :; t' \
    -e 's: [^ ]*conftest\.: $lt_compiler_flag&amp;:; t' \
    -e 's:$: $lt_compiler_flag:'`
-   (eval echo &quot;\&quot;\$as_me:16324: $lt_compile\&quot;&quot; &gt;&amp;5)
+   (eval echo &quot;\&quot;\$as_me:15907: $lt_compile\&quot;&quot; &gt;&amp;5)
    (eval &quot;$lt_compile&quot; 2&gt;conftest.err)
    ac_status=$?
    cat conftest.err &gt;&amp;5
-   echo &quot;$as_me:16328: \$? = $ac_status&quot; &gt;&amp;5
+   echo &quot;$as_me:15911: \$? = $ac_status&quot; &gt;&amp;5
    if (exit $ac_status) &amp;&amp; test -s &quot;$ac_outfile&quot;; then
      # The compiler can only warn and ignore the option if not recognized
      # So say no if there are warnings other than the usual output.
-     $echo &quot;X$_lt_compiler_boilerplate&quot; | $Xsed &gt;conftest.exp
-     $SED '/^$/d' conftest.err &gt;conftest.er2
-     if test ! -s conftest.err || diff conftest.exp conftest.er2 &gt;/dev/null; then
+     $echo &quot;X$_lt_compiler_boilerplate&quot; | $Xsed -e '/^$/d' &gt;conftest.exp
+     $SED '/^$/d; /^ *+/d' conftest.err &gt;conftest.er2
+     if test ! -s conftest.er2 || diff conftest.exp conftest.er2 &gt;/dev/null; then
        lt_prog_compiler_pic_works_GCJ=yes
      fi
    fi
@@ -16352,7 +15935,7 @@
 fi
 
 fi
-case &quot;$host_os&quot; in
+case $host_os in
   # For platforms which do not support PIC, -DPIC is meaningless:
   *djgpp*)
     lt_prog_compiler_pic_GCJ=
@@ -16362,6 +15945,48 @@
     ;;
 esac
 
+#
+# Check to make sure the static flag actually works.
+#
+wl=$lt_prog_compiler_wl_GCJ eval lt_tmp_static_flag=\&quot;$lt_prog_compiler_static_GCJ\&quot;
+echo &quot;$as_me:$LINENO: checking if $compiler static flag $lt_tmp_static_flag works&quot; &gt;&amp;5
+echo $ECHO_N &quot;checking if $compiler static flag $lt_tmp_static_flag works... $ECHO_C&quot; &gt;&amp;6
+if test &quot;${lt_prog_compiler_static_works_GCJ+set}&quot; = set; then
+  echo $ECHO_N &quot;(cached) $ECHO_C&quot; &gt;&amp;6
+else
+  lt_prog_compiler_static_works_GCJ=no
+   save_LDFLAGS=&quot;$LDFLAGS&quot;
+   LDFLAGS=&quot;$LDFLAGS $lt_tmp_static_flag&quot;
+   printf &quot;$lt_simple_link_test_code&quot; &gt; conftest.$ac_ext
+   if (eval $ac_link 2&gt;conftest.err) &amp;&amp; test -s conftest$ac_exeext; then
+     # The linker can only warn and ignore the option if not recognized
+     # So say no if there are warnings
+     if test -s conftest.err; then
+       # Append any errors to the config.log.
+       cat conftest.err 1&gt;&amp;5
+       $echo &quot;X$_lt_linker_boilerplate&quot; | $Xsed -e '/^$/d' &gt; conftest.exp
+       $SED '/^$/d; /^ *+/d' conftest.err &gt;conftest.er2
+       if diff conftest.exp conftest.er2 &gt;/dev/null; then
+         lt_prog_compiler_static_works_GCJ=yes
+       fi
+     else
+       lt_prog_compiler_static_works_GCJ=yes
+     fi
+   fi
+   $rm conftest*
+   LDFLAGS=&quot;$save_LDFLAGS&quot;
+
+fi
+echo &quot;$as_me:$LINENO: result: $lt_prog_compiler_static_works_GCJ&quot; &gt;&amp;5
+echo &quot;${ECHO_T}$lt_prog_compiler_static_works_GCJ&quot; &gt;&amp;6
+
+if test x&quot;$lt_prog_compiler_static_works_GCJ&quot; = xyes; then
+    :
+else
+    lt_prog_compiler_static_GCJ=
+fi
+
+
 echo &quot;$as_me:$LINENO: checking if $compiler supports -c -o file.$ac_objext&quot; &gt;&amp;5
 echo $ECHO_N &quot;checking if $compiler supports -c -o file.$ac_objext... $ECHO_C&quot; &gt;&amp;6
 if test &quot;${lt_cv_prog_compiler_c_o_GCJ+set}&quot; = set; then
@@ -16380,25 +16005,25 @@
    # Note that $ac_compile itself does not contain backslashes and begins
    # with a dollar sign (not a hyphen), so the echo should work correctly.
    lt_compile=`echo &quot;$ac_compile&quot; | $SED \
-   -e 's:.*FLAGS}? :&amp;$lt_compiler_flag :; t' \
+   -e 's:.*FLAGS}\{0,1\} :&amp;$lt_compiler_flag :; t' \
    -e 's: [^ ]*conftest\.: $lt_compiler_flag&amp;:; t' \
    -e 's:$: $lt_compiler_flag:'`
-   (eval echo &quot;\&quot;\$as_me:16386: $lt_compile\&quot;&quot; &gt;&amp;5)
+   (eval echo &quot;\&quot;\$as_me:16011: $lt_compile\&quot;&quot; &gt;&amp;5)
    (eval &quot;$lt_compile&quot; 2&gt;out/conftest.err)
    ac_status=$?
    cat out/conftest.err &gt;&amp;5
-   echo &quot;$as_me:16390: \$? = $ac_status&quot; &gt;&amp;5
+   echo &quot;$as_me:16015: \$? = $ac_status&quot; &gt;&amp;5
    if (exit $ac_status) &amp;&amp; test -s out/conftest2.$ac_objext
    then
      # The compiler can only warn and ignore the option if not recognized
      # So say no if there are warnings
-     $echo &quot;X$_lt_compiler_boilerplate&quot; | $Xsed &gt; out/conftest.exp
-     $SED '/^$/d' out/conftest.err &gt;out/conftest.er2
-     if test ! -s out/conftest.err || diff out/conftest.exp out/conftest.er2 &gt;/dev/null; then
+     $echo &quot;X$_lt_compiler_boilerplate&quot; | $Xsed -e '/^$/d' &gt; out/conftest.exp
+     $SED '/^$/d; /^ *+/d' out/conftest.err &gt;out/conftest.er2
+     if test ! -s out/conftest.er2 || diff out/conftest.exp out/conftest.er2 &gt;/dev/null; then
        lt_cv_prog_compiler_c_o_GCJ=yes
      fi
    fi
-   chmod u+w .
+   chmod u+w . 2&gt;&amp;5
    $rm conftest*
    # SGI C++ compiler will create directory out/ii_files/ for
    # template instantiation
@@ -16494,6 +16119,10 @@
       with_gnu_ld=no
     fi
     ;;
+  interix*)
+    # we just hope/assume this is gcc and not c89 (= MSVC++)
+    with_gnu_ld=yes
+    ;;
   openbsd*)
     with_gnu_ld=no
     ;;
@@ -16578,7 +16207,7 @@
       export_symbols_cmds_GCJ='$NM $libobjs $convenience | $global_symbol_pipe | $SED -e '\''/^[BCDGRS] /s/.* \([^ ]*\)/\1 DATA/'\'' | $SED -e '\''/^[AITW] /s/.* //'\'' | sort | uniq &gt; $export_symbols'
 
       if $LD --help 2&gt;&amp;1 | grep 'auto-import' &gt; /dev/null; then
-        archive_cmds_GCJ='$CC -shared $libobjs $deplibs $compiler_flags -o $output_objdir/$soname ${wl}--image-base=0x10000000 ${wl}--out-implib,$lib'
+        archive_cmds_GCJ='$CC -shared $libobjs $deplibs $compiler_flags -o $output_objdir/$soname ${wl}--enable-auto-image-base -Xlinker --out-implib -Xlinker $lib'
 	# If the export-symbols file already is a .def file (1st line
 	# is EXPORTS), use it as is; otherwise, prepend...
 	archive_expsym_cmds_GCJ='if test &quot;x`$SED 1q $export_symbols`&quot; = xEXPORTS; then
@@ -16587,22 +16216,37 @@
 	  echo EXPORTS &gt; $output_objdir/$soname.def;
 	  cat $export_symbols &gt;&gt; $output_objdir/$soname.def;
 	fi~
-	$CC -shared $output_objdir/$soname.def $libobjs $deplibs $compiler_flags -o $output_objdir/$soname ${wl}--image-base=0x10000000  ${wl}--out-implib,$lib'
+	$CC -shared $output_objdir/$soname.def $libobjs $deplibs $compiler_flags -o $output_objdir/$soname ${wl}--enable-auto-image-base -Xlinker --out-implib -Xlinker $lib'
       else
 	ld_shlibs_GCJ=no
       fi
       ;;
 
+    interix3*)
+      hardcode_direct_GCJ=no
+      hardcode_shlibpath_var_GCJ=no
+      hardcode_libdir_flag_spec_GCJ='${wl}-rpath,$libdir'
+      export_dynamic_flag_spec_GCJ='${wl}-E'
+      # Hack: On Interix 3.x, we cannot compile PIC because of a broken gcc.
+      # Instead, shared libraries are loaded at an image base (0x10000000 by
+      # default) and relocated if they conflict, which is a slow very memory
+      # consuming and fragmenting process.  To avoid this, we pick a random,
+      # 256 KiB-aligned image base between 0x50000000 and 0x6FFC0000 at link
+      # time.  Moving up from 0x10000000 also allows more sbrk(2) space.
+      archive_cmds_GCJ='$CC -shared $pic_flag $libobjs $deplibs $compiler_flags ${wl}-h,$soname ${wl}--image-base,`expr ${RANDOM-$$} % 4096 / 2 \* 262144 + 1342177280` -o $lib'
+      archive_expsym_cmds_GCJ='sed &quot;s,^,_,&quot; $export_symbols &gt;$output_objdir/$soname.expsym~$CC -shared $pic_flag $libobjs $deplibs $compiler_flags ${wl}-h,$soname ${wl}--retain-symbols-file,$output_objdir/$soname.expsym ${wl}--image-base,`expr ${RANDOM-$$} % 4096 / 2 \* 262144 + 1342177280` -o $lib'
+      ;;
+
     linux*)
       if $LD --help 2&gt;&amp;1 | grep ': supported targets:.* elf' &gt; /dev/null; then
 	tmp_addflag=
 	case $cc_basename,$host_cpu in
 	pgcc*)				# Portland Group C compiler
-	  whole_archive_flag_spec_GCJ='${wl}--whole-archive,`for conv in $convenience\&quot;\&quot;; do test  -n \&quot;$conv\&quot; &amp;&amp; new_convenience=\&quot;$new_convenience,$conv\&quot;; done; $echo \&quot;$new_convenience\&quot;` ${wl}--no-whole-archive'
+	  whole_archive_flag_spec_GCJ='${wl}--whole-archive`for conv in $convenience\&quot;\&quot;; do test  -n \&quot;$conv\&quot; &amp;&amp; new_convenience=\&quot;$new_convenience,$conv\&quot;; done; $echo \&quot;$new_convenience\&quot;` ${wl}--no-whole-archive'
 	  tmp_addflag=' $pic_flag'
 	  ;;
-	pgf77* | pgf90* )			# Portland Group f77 and f90 compilers
-	  whole_archive_flag_spec_GCJ='${wl}--whole-archive,`for conv in $convenience\&quot;\&quot;; do test  -n \&quot;$conv\&quot; &amp;&amp; new_convenience=\&quot;$new_convenience,$conv\&quot;; done; $echo \&quot;$new_convenience\&quot;` ${wl}--no-whole-archive'
+	pgf77* | pgf90* | pgf95*)	# Portland Group f77 and f90 compilers
+	  whole_archive_flag_spec_GCJ='${wl}--whole-archive`for conv in $convenience\&quot;\&quot;; do test  -n \&quot;$conv\&quot; &amp;&amp; new_convenience=\&quot;$new_convenience,$conv\&quot;; done; $echo \&quot;$new_convenience\&quot;` ${wl}--no-whole-archive'
 	  tmp_addflag=' $pic_flag -Mnomain' ;;
 	ecc*,ia64* | icc*,ia64*)		# Intel C compiler on ia64
 	  tmp_addflag=' -i_dynamic' ;;
@@ -16634,7 +16278,7 @@
       fi
       ;;
 
-    solaris* | sysv5*)
+    solaris*)
       if $LD -v 2&gt;&amp;1 | grep 'BFD 2\.8' &gt; /dev/null; then
 	ld_shlibs_GCJ=no
 	cat &lt;&lt;EOF 1&gt;&amp;2
@@ -16655,6 +16299,33 @@
       fi
       ;;
 
+    sysv5* | sco3.2v5* | sco5v6* | unixware* | OpenUNIX*)
+      case `$LD -v 2&gt;&amp;1` in
+        *\ [01].* | *\ 2.[0-9].* | *\ 2.1[0-5].*)
+	ld_shlibs_GCJ=no
+	cat &lt;&lt;_LT_EOF 1&gt;&amp;2
+
+*** Warning: Releases of the GNU linker prior to 2.16.91.0.3 can not
+*** reliably create shared libraries on SCO systems.  Therefore, libtool
+*** is disabling shared libraries support.  We urge you to upgrade GNU
+*** binutils to release 2.16.91.0.3 or newer.  Another option is to modify
+*** your PATH or compiler configuration so that the native linker is
+*** used, and then restart.
+
+_LT_EOF
+	;;
+	*)
+	  if $LD --help 2&gt;&amp;1 | grep ': supported targets:.* elf' &gt; /dev/null; then
+	    hardcode_libdir_flag_spec_GCJ='`test -z &quot;$SCOABSPATH&quot; &amp;&amp; echo ${wl}-rpath,$libdir`'
+	    archive_cmds_GCJ='$CC -shared $libobjs $deplibs $compiler_flags ${wl}-soname,\${SCOABSPATH:+${install_libdir}/}$soname -o $lib'
+	    archive_expsym_cmds_GCJ='$CC -shared $libobjs $deplibs $compiler_flags ${wl}-soname,\${SCOABSPATH:+${install_libdir}/}$soname,-retain-symbols-file,$export_symbols -o $lib'
+	  else
+	    ld_shlibs_GCJ=no
+	  fi
+	;;
+      esac
+      ;;
+
     sunos4*)
       archive_cmds_GCJ='$LD -assert pure-text -Bshareable -o $lib $libobjs $deplibs $linker_flags'
       wlarc=
@@ -16688,7 +16359,7 @@
       # Note: this linker hardcodes the directories in LIBPATH if there
       # are no directories specified by -L.
       hardcode_minus_L_GCJ=yes
-      if test &quot;$GCC&quot; = yes &amp;&amp; test -z &quot;$link_static_flag&quot;; then
+      if test &quot;$GCC&quot; = yes &amp;&amp; test -z &quot;$lt_prog_compiler_static&quot;; then
 	# Neither direct hardcoding nor static linking is supported with a
 	# broken collect2.
 	hardcode_direct_GCJ=unsupported
@@ -16722,6 +16393,7 @@
   	    break
   	  fi
 	  done
+	  ;;
 	esac
 
 	exp_sym_flag='-bexport'
@@ -16759,6 +16431,7 @@
   	  hardcode_libdir_flag_spec_GCJ='-L$libdir'
   	  hardcode_libdir_separator_GCJ=
 	  fi
+	  ;;
 	esac
 	shared_flag='-shared'
 	if test &quot;$aix_use_runtimelinking&quot; = yes; then
@@ -16771,11 +16444,11 @@
   	# chokes on -Wl,-G. The following line is correct:
 	  shared_flag='-G'
 	else
-  	if test &quot;$aix_use_runtimelinking&quot; = yes; then
+	  if test &quot;$aix_use_runtimelinking&quot; = yes; then
 	    shared_flag='${wl}-G'
 	  else
 	    shared_flag='${wl}-bM:SRE'
-  	fi
+	  fi
 	fi
       fi
 
@@ -16840,12 +16513,12 @@
 if test -z &quot;$aix_libpath&quot;; then aix_libpath=&quot;/usr/lib:/lib&quot;; fi
 
        hardcode_libdir_flag_spec_GCJ='${wl}-blibpath:$libdir:'&quot;$aix_libpath&quot;
-	archive_expsym_cmds_GCJ=&quot;\$CC&quot;' -o $output_objdir/$soname $libobjs $deplibs $compiler_flags `if test &quot;x${allow_undefined_flag}&quot; != &quot;x&quot;; then echo &quot;${wl}${allow_undefined_flag}&quot;; else :; fi` '&quot;\${wl}$no_entry_flag \${wl}$exp_sym_flag:\$export_symbols $shared_flag&quot;
+	archive_expsym_cmds_GCJ=&quot;\$CC&quot;' -o $output_objdir/$soname $libobjs $deplibs '&quot;\${wl}$no_entry_flag&quot;' $compiler_flags `if test &quot;x${allow_undefined_flag}&quot; != &quot;x&quot;; then echo &quot;${wl}${allow_undefined_flag}&quot;; else :; fi` '&quot;\${wl}$exp_sym_flag:\$export_symbols $shared_flag&quot;
        else
 	if test &quot;$host_cpu&quot; = ia64; then
 	  hardcode_libdir_flag_spec_GCJ='${wl}-R $libdir:/usr/lib:/lib'
 	  allow_undefined_flag_GCJ=&quot;-z nodefs&quot;
-	  archive_expsym_cmds_GCJ=&quot;\$CC $shared_flag&quot;' -o $output_objdir/$soname $libobjs $deplibs $compiler_flags ${wl}${allow_undefined_flag} '&quot;\${wl}$no_entry_flag \${wl}$exp_sym_flag:\$export_symbols&quot;
+	  archive_expsym_cmds_GCJ=&quot;\$CC $shared_flag&quot;' -o $output_objdir/$soname $libobjs $deplibs '&quot;\${wl}$no_entry_flag&quot;' $compiler_flags ${wl}${allow_undefined_flag} '&quot;\${wl}$exp_sym_flag:\$export_symbols&quot;
 	else
 	 # Determine the default libpath from the value encoded in an empty executable.
 	 cat &gt;conftest.$ac_ext &lt;&lt;_ACEOF
@@ -16905,13 +16578,11 @@
 	  # -berok will link without error, but may produce a broken library.
 	  no_undefined_flag_GCJ=' ${wl}-bernotok'
 	  allow_undefined_flag_GCJ=' ${wl}-berok'
-	  # -bexpall does not export symbols beginning with underscore (_)
-	  always_export_symbols_GCJ=yes
 	  # Exported symbols can be pulled into shared objects from archives
-	  whole_archive_flag_spec_GCJ=' '
+	  whole_archive_flag_spec_GCJ='$convenience'
 	  archive_cmds_need_lc_GCJ=yes
-	  # This is similar to how AIX traditionally builds it's shared libraries.
-	  archive_expsym_cmds_GCJ=&quot;\$CC $shared_flag&quot;' -o $output_objdir/$soname $libobjs $deplibs $compiler_flags ${wl}-bE:$export_symbols ${wl}-bnoentry${allow_undefined_flag}~$AR $AR_FLAGS $output_objdir/$libname$release.a $output_objdir/$soname'
+	  # This is similar to how AIX traditionally builds its shared libraries.
+	  archive_expsym_cmds_GCJ=&quot;\$CC $shared_flag&quot;' -o $output_objdir/$soname $libobjs $deplibs ${wl}-bnoentry $compiler_flags ${wl}-bE:$export_symbols${allow_undefined_flag}~$AR $AR_FLAGS $output_objdir/$libname$release.a $output_objdir/$soname'
 	fi
       fi
       ;;
@@ -16950,7 +16621,7 @@
       ;;
 
     darwin* | rhapsody*)
-      case &quot;$host_os&quot; in
+      case $host_os in
         rhapsody* | darwin1.[012])
          allow_undefined_flag_GCJ='${wl}-undefined ${wl}suppress'
          ;;
@@ -16979,7 +16650,7 @@
     	output_verbose_link_cmd='echo'
         archive_cmds_GCJ='$CC -dynamiclib $allow_undefined_flag -o $lib $libobjs $deplibs $compiler_flags -install_name $rpath/$soname $verstring'
       module_cmds_GCJ='$CC $allow_undefined_flag -o $lib -bundle $libobjs $deplibs$compiler_flags'
-      # Don't fix this by using the ld -exported_symbols_list flag, it doesn't exist in older darwin ld's
+      # Don't fix this by using the ld -exported_symbols_list flag, it doesn't exist in older darwin lds
       archive_expsym_cmds_GCJ='sed -e &quot;s,#.*,,&quot; -e &quot;s,^[    ]*,,&quot; -e &quot;s,^\(..*\),_&amp;,&quot; &lt; $export_symbols &gt; $output_objdir/${libname}-symbols.expsym~$CC -dynamiclib $allow_undefined_flag -o $lib $libobjs $deplibs $compiler_flags -install_name $rpath/$soname $verstring~nmedit -s $output_objdir/${libname}-symbols.expsym ${lib}'
       module_expsym_cmds_GCJ='sed -e &quot;s,#.*,,&quot; -e &quot;s,^[    ]*,,&quot; -e &quot;s,^\(..*\),_&amp;,&quot; &lt; $export_symbols &gt; $output_objdir/${libname}-symbols.expsym~$CC $allow_undefined_flag  -o $lib -bundle $libobjs $deplibs$compiler_flags~nmedit -s $output_objdir/${libname}-symbols.expsym ${lib}'
     else
@@ -16988,7 +16659,7 @@
          output_verbose_link_cmd='echo'
          archive_cmds_GCJ='$CC -qmkshrobj $allow_undefined_flag -o $lib $libobjs $deplibs $compiler_flags ${wl}-install_name ${wl}`echo $rpath/$soname` $verstring'
          module_cmds_GCJ='$CC $allow_undefined_flag -o $lib -bundle $libobjs $deplibs$compiler_flags'
-          # Don't fix this by using the ld -exported_symbols_list flag, it doesn't exist in older darwin ld's
+          # Don't fix this by using the ld -exported_symbols_list flag, it doesn't exist in older darwin lds
          archive_expsym_cmds_GCJ='sed -e &quot;s,#.*,,&quot; -e &quot;s,^[    ]*,,&quot; -e &quot;s,^\(..*\),_&amp;,&quot; &lt; $export_symbols &gt; $output_objdir/${libname}-symbols.expsym~$CC -qmkshrobj $allow_undefined_flag -o $lib $libobjs $deplibs $compiler_flags ${wl}-install_name ${wl}$rpath/$soname $verstring~nmedit -s $output_objdir/${libname}-symbols.expsym ${lib}'
           module_expsym_cmds_GCJ='sed -e &quot;s,#.*,,&quot; -e &quot;s,^[    ]*,,&quot; -e &quot;s,^\(..*\),_&amp;,&quot; &lt; $export_symbols &gt; $output_objdir/${libname}-symbols.expsym~$CC $allow_undefined_flag  -o $lib -bundle $libobjs $deplibs$compiler_flags~nmedit -s $output_objdir/${libname}-symbols.expsym ${lib}'
           ;;
@@ -17052,47 +16723,62 @@
       export_dynamic_flag_spec_GCJ='${wl}-E'
       ;;
 
-    hpux10* | hpux11*)
+    hpux10*)
       if test &quot;$GCC&quot; = yes -a &quot;$with_gnu_ld&quot; = no; then
-	case &quot;$host_cpu&quot; in
-	hppa*64*|ia64*)
+	archive_cmds_GCJ='$CC -shared -fPIC ${wl}+h ${wl}$soname ${wl}+b ${wl}$install_libdir -o $lib $libobjs $deplibs $compiler_flags'
+      else
+	archive_cmds_GCJ='$LD -b +h $soname +b $install_libdir -o $lib $libobjs $deplibs $linker_flags'
+      fi
+      if test &quot;$with_gnu_ld&quot; = no; then
+	hardcode_libdir_flag_spec_GCJ='${wl}+b ${wl}$libdir'
+	hardcode_libdir_separator_GCJ=:
+
+	hardcode_direct_GCJ=yes
+	export_dynamic_flag_spec_GCJ='${wl}-E'
+
+	# hardcode_minus_L: Not really in the search PATH,
+	# but as the default location of the library.
+	hardcode_minus_L_GCJ=yes
+      fi
+      ;;
+
+    hpux11*)
+      if test &quot;$GCC&quot; = yes -a &quot;$with_gnu_ld&quot; = no; then
+	case $host_cpu in
+	hppa*64*)
 	  archive_cmds_GCJ='$CC -shared ${wl}+h ${wl}$soname -o $lib $libobjs $deplibs $compiler_flags'
 	  ;;
+	ia64*)
+	  archive_cmds_GCJ='$CC -shared ${wl}+h ${wl}$soname ${wl}+nodefaultrpath -o $lib $libobjs $deplibs $compiler_flags'
+	  ;;
 	*)
 	  archive_cmds_GCJ='$CC -shared -fPIC ${wl}+h ${wl}$soname ${wl}+b ${wl}$install_libdir -o $lib $libobjs $deplibs $compiler_flags'
 	  ;;
 	esac
       else
-	case &quot;$host_cpu&quot; in
-	hppa*64*|ia64*)
-	  archive_cmds_GCJ='$LD -b +h $soname -o $lib $libobjs $deplibs $linker_flags'
+	case $host_cpu in
+	hppa*64*)
+	  archive_cmds_GCJ='$CC -b ${wl}+h ${wl}$soname -o $lib $libobjs $deplibs $compiler_flags'
 	  ;;
+	ia64*)
+	  archive_cmds_GCJ='$CC -b ${wl}+h ${wl}$soname ${wl}+nodefaultrpath -o $lib $libobjs $deplibs $compiler_flags'
+	  ;;
 	*)
-	  archive_cmds_GCJ='$LD -b +h $soname +b $install_libdir -o $lib $libobjs $deplibs $linker_flags'
+	  archive_cmds_GCJ='$CC -b ${wl}+h ${wl}$soname ${wl}+b ${wl}$install_libdir -o $lib $libobjs $deplibs $compiler_flags'
 	  ;;
 	esac
       fi
       if test &quot;$with_gnu_ld&quot; = no; then
-	case &quot;$host_cpu&quot; in
-	hppa*64*)
-	  hardcode_libdir_flag_spec_GCJ='${wl}+b ${wl}$libdir'
+	hardcode_libdir_flag_spec_GCJ='${wl}+b ${wl}$libdir'
+	hardcode_libdir_separator_GCJ=:
+
+	case $host_cpu in
+	hppa*64*|ia64*)
 	  hardcode_libdir_flag_spec_ld_GCJ='+b $libdir'
-	  hardcode_libdir_separator_GCJ=:
 	  hardcode_direct_GCJ=no
 	  hardcode_shlibpath_var_GCJ=no
 	  ;;
-	ia64*)
-	  hardcode_libdir_flag_spec_GCJ='-L$libdir'
-	  hardcode_direct_GCJ=no
-	  hardcode_shlibpath_var_GCJ=no
-
-	  # hardcode_minus_L: Not really in the search PATH,
-	  # but as the default location of the library.
-	  hardcode_minus_L_GCJ=yes
-	  ;;
 	*)
-	  hardcode_libdir_flag_spec_GCJ='${wl}+b ${wl}$libdir'
-	  hardcode_libdir_separator_GCJ=:
 	  hardcode_direct_GCJ=yes
 	  export_dynamic_flag_spec_GCJ='${wl}-E'
 
@@ -17194,14 +16880,6 @@
       hardcode_libdir_separator_GCJ=:
       ;;
 
-    sco3.2v5*)
-      archive_cmds_GCJ='$LD -G -h $soname -o $lib $libobjs $deplibs $linker_flags'
-      hardcode_shlibpath_var_GCJ=no
-      export_dynamic_flag_spec_GCJ='${wl}-Bexport'
-      runpath_var=LD_RUN_PATH
-      hardcode_runpath_var=yes
-      ;;
-
     solaris*)
       no_undefined_flag_GCJ=' -z text'
       if test &quot;$GCC&quot; = yes; then
@@ -17287,36 +16965,45 @@
       fi
       ;;
 
-    sysv4.2uw2*)
-      archive_cmds_GCJ='$LD -G -o $lib $libobjs $deplibs $linker_flags'
-      hardcode_direct_GCJ=yes
-      hardcode_minus_L_GCJ=no
+    sysv4*uw2* | sysv5OpenUNIX* | sysv5UnixWare7.[01].[10]* | unixware7*)
+      no_undefined_flag_GCJ='${wl}-z,text'
+      archive_cmds_need_lc_GCJ=no
       hardcode_shlibpath_var_GCJ=no
-      hardcode_runpath_var=yes
-      runpath_var=LD_RUN_PATH
-      ;;
+      runpath_var='LD_RUN_PATH'
 
-   sysv5OpenUNIX8* | sysv5UnixWare7* |  sysv5uw[78]* | unixware7*)
-      no_undefined_flag_GCJ='${wl}-z ${wl}text'
       if test &quot;$GCC&quot; = yes; then
-	archive_cmds_GCJ='$CC -shared ${wl}-h ${wl}$soname -o $lib $libobjs $deplibs $compiler_flags'
+	archive_cmds_GCJ='$CC -shared ${wl}-h,$soname -o $lib $libobjs $deplibs $compiler_flags'
+	archive_expsym_cmds_GCJ='$CC -shared ${wl}-Bexport:$export_symbols ${wl}-h,$soname -o $lib $libobjs $deplibs $compiler_flags'
       else
-	archive_cmds_GCJ='$CC -G ${wl}-h ${wl}$soname -o $lib $libobjs $deplibs $compiler_flags'
+	archive_cmds_GCJ='$CC -G ${wl}-h,$soname -o $lib $libobjs $deplibs $compiler_flags'
+	archive_expsym_cmds_GCJ='$CC -G ${wl}-Bexport:$export_symbols ${wl}-h,$soname -o $lib $libobjs $deplibs $compiler_flags'
       fi
-      runpath_var='LD_RUN_PATH'
-      hardcode_shlibpath_var_GCJ=no
       ;;
 
-    sysv5*)
-      no_undefined_flag_GCJ=' -z text'
-      # $CC -shared without GNU ld will not create a library from C++
-      # object files and a static libstdc++, better avoid it by now
-      archive_cmds_GCJ='$LD -G${allow_undefined_flag} -h $soname -o $lib $libobjs $deplibs $linker_flags'
-      archive_expsym_cmds_GCJ='$echo &quot;{ global:&quot; &gt; $lib.exp~cat $export_symbols | $SED -e &quot;s/\(.*\)/\1;/&quot; &gt;&gt; $lib.exp~$echo &quot;local: *; };&quot; &gt;&gt; $lib.exp~
-  		$LD -G${allow_undefined_flag} -M $lib.exp -h $soname -o $lib $libobjs $deplibs $linker_flags~$rm $lib.exp'
-      hardcode_libdir_flag_spec_GCJ=
+    sysv5* | sco3.2v5* | sco5v6*)
+      # Note: We can NOT use -z defs as we might desire, because we do not
+      # link with -lc, and that would cause any symbols used from libc to
+      # always be unresolved, which means just about no library would
+      # ever link correctly.  If we're not using GNU ld we use -z text
+      # though, which does catch some bad symbols but isn't as heavy-handed
+      # as -z defs.
+      no_undefined_flag_GCJ='${wl}-z,text'
+      allow_undefined_flag_GCJ='${wl}-z,nodefs'
+      archive_cmds_need_lc_GCJ=no
       hardcode_shlibpath_var_GCJ=no
+      hardcode_libdir_flag_spec_GCJ='`test -z &quot;$SCOABSPATH&quot; &amp;&amp; echo ${wl}-R,$libdir`'
+      hardcode_libdir_separator_GCJ=':'
+      link_all_deplibs_GCJ=yes
+      export_dynamic_flag_spec_GCJ='${wl}-Bexport'
       runpath_var='LD_RUN_PATH'
+
+      if test &quot;$GCC&quot; = yes; then
+	archive_cmds_GCJ='$CC -shared ${wl}-h,\${SCOABSPATH:+${install_libdir}/}$soname -o $lib $libobjs $deplibs $compiler_flags'
+	archive_expsym_cmds_GCJ='$CC -shared ${wl}-Bexport:$export_symbols ${wl}-h,\${SCOABSPATH:+${install_libdir}/}$soname -o $lib $libobjs $deplibs $compiler_flags'
+      else
+	archive_cmds_GCJ='$CC -G ${wl}-h,\${SCOABSPATH:+${install_libdir}/}$soname -o $lib $libobjs $deplibs $compiler_flags'
+	archive_expsym_cmds_GCJ='$CC -G ${wl}-Bexport:$export_symbols ${wl}-h,\${SCOABSPATH:+${install_libdir}/}$soname -o $lib $libobjs $deplibs $compiler_flags'
+      fi
       ;;
 
     uts4*)
@@ -17335,11 +17022,6 @@
 echo &quot;${ECHO_T}$ld_shlibs_GCJ&quot; &gt;&amp;6
 test &quot;$ld_shlibs_GCJ&quot; = no &amp;&amp; can_build_shared=no
 
-variables_saved_for_relink=&quot;PATH $shlibpath_var $runpath_var&quot;
-if test &quot;$GCC&quot; = yes; then
-  variables_saved_for_relink=&quot;$variables_saved_for_relink GCC_EXEC_PREFIX COMPILER_PATH LIBRARY_PATH&quot;
-fi
-
 #
 # Do we need to explicitly link libc?
 #
@@ -17372,6 +17054,7 @@
         libobjs=conftest.$ac_objext
         deplibs=
         wl=$lt_prog_compiler_wl_GCJ
+	pic_flag=$lt_prog_compiler_pic_GCJ
         compiler_flags=-v
         linker_flags=-v
         verstring=
@@ -17532,7 +17215,8 @@
       dlpath=`$SHELL 2&gt;&amp;1 -c '\''. $dir/'\''\${base_file}'\''i;echo \$dlname'\''`~
       dldir=$destdir/`dirname \$dlpath`~
       test -d \$dldir || mkdir -p \$dldir~
-      $install_prog $dir/$dlname \$dldir/$dlname'
+      $install_prog $dir/$dlname \$dldir/$dlname~
+      chmod a+x \$dldir/$dlname'
     postuninstall_cmds='dldll=`$SHELL 2&gt;&amp;1 -c '\''. $file; echo \$dlname'\''`~
       dlpath=$dir/\$dldll~
        $rm \$dlpath'
@@ -17609,7 +17293,7 @@
   soname_spec='${libname}${release}${major}$shared_ext'
   shlibpath_overrides_runpath=yes
   shlibpath_var=DYLD_LIBRARY_PATH
-  shrext_cmds='$(test .$module = .yes &amp;&amp; echo .so || echo .dylib)'
+  shrext_cmds='`test .$module = .yes &amp;&amp; echo .so || echo .dylib`'
   # Apple's gcc prints 'gcc -print-search-dirs' doesn't operate the same.
   if test &quot;$GCC&quot; = yes; then
     sys_lib_search_path_spec=`$CC -print-search-dirs | tr &quot;\n&quot; &quot;$PATH_SEPARATOR&quot; | sed -e 's/libraries:/@libraries:/' | tr &quot;@&quot; &quot;\n&quot; | grep &quot;^libraries:&quot; | sed -e &quot;s/^<A HREF="libraries://">libraries://</A>&quot; -e &quot;s,=/,/,g&quot; -e &quot;s,$PATH_SEPARATOR, ,g&quot; -e &quot;s,.*,&amp; /lib /usr/lib /usr/local/lib,g&quot;`
@@ -17647,8 +17331,22 @@
 freebsd* | dragonfly*)
   # DragonFly does not have aout.  When/if they implement a new
   # versioning mechanism, adjust this.
-  objformat=`test -x /usr/bin/objformat &amp;&amp; /usr/bin/objformat || echo aout`
-  version_type=freebsd-$objformat
+  if test -x /usr/bin/objformat; then
+    objformat=`/usr/bin/objformat`
+  else
+    case $host_os in
+    freebsd[123]*) objformat=aout ;;
+    *) objformat=elf ;;
+    esac
+  fi
+  # Handle Gentoo/FreeBSD as it was Linux
+  case $host_vendor in
+    gentoo)
+      version_type=linux ;;
+    *)
+      version_type=freebsd-$objformat ;;
+  esac
+
   case $version_type in
     freebsd-elf*)
       library_names_spec='${libname}${release}${shared_ext}$versuffix ${libname}${release}${shared_ext} $libname${shared_ext}'
@@ -17659,6 +17357,12 @@
       library_names_spec='${libname}${release}${shared_ext}$versuffix $libname${shared_ext}$versuffix'
       need_version=yes
       ;;
+    linux)
+      library_names_spec='${libname}${release}${shared_ext}$versuffix ${libname}${release}${shared_ext}$major ${libname}${shared_ext}'
+      soname_spec='${libname}${release}${shared_ext}$major'
+      need_lib_prefix=no
+      need_version=no
+      ;;
   esac
   shlibpath_var=LD_LIBRARY_PATH
   case $host_os in
@@ -17669,10 +17373,15 @@
     shlibpath_overrides_runpath=yes
     hardcode_into_libs=yes
     ;;
-  *) # from 3.2 on
+  freebsd3.[2-9]* | freebsdelf3.[2-9]* | \
+  freebsd4.[0-5] | freebsdelf4.[0-5] | freebsd4.1.1 | freebsdelf4.1.1)
     shlibpath_overrides_runpath=no
     hardcode_into_libs=yes
     ;;
+  freebsd*) # from 4.6 on
+    shlibpath_overrides_runpath=yes
+    hardcode_into_libs=yes
+    ;;
   esac
   ;;
 
@@ -17692,7 +17401,7 @@
   version_type=sunos
   need_lib_prefix=no
   need_version=no
-  case &quot;$host_cpu&quot; in
+  case $host_cpu in
   ia64*)
     shrext_cmds='.so'
     hardcode_into_libs=yes
@@ -17732,6 +17441,18 @@
   postinstall_cmds='chmod 555 $lib'
   ;;
 
+interix3*)
+  version_type=linux
+  need_lib_prefix=no
+  need_version=no
+  library_names_spec='${libname}${release}${shared_ext}$versuffix ${libname}${release}${shared_ext}$major ${libname}${shared_ext}'
+  soname_spec='${libname}${release}${shared_ext}$major'
+  dynamic_linker='Interix 3.x ld.so.1 (PE, like ELF)'
+  shlibpath_var=LD_LIBRARY_PATH
+  shlibpath_overrides_runpath=no
+  hardcode_into_libs=yes
+  ;;
+
 irix5* | irix6* | nonstopux*)
   case $host_os in
     nonstopux*) version_type=nonstopux ;;
@@ -17795,13 +17516,6 @@
     sys_lib_dlsearch_path_spec=&quot;/lib /usr/lib $lt_ld_extra&quot;
   fi
 
-  case $host_cpu:$lt_cv_cc_64bit_output in
-  powerpc64:yes | s390x:yes | sparc64:yes | x86_64:yes)
-    sys_lib_dlsearch_path_spec=&quot;/lib64 /usr/lib64 /usr/X11R6/lib64&quot;
-    sys_lib_search_path_spec=&quot;/lib64 /usr/lib64 /usr/local/lib64 /usr/X11R6/lib64&quot;
-    ;;
-  esac
-
   # We used to test for /lib/ld.so.1 and disable shared libraries on
   # powerpc, because MkLinux only supported shared libraries with the
   # GNU dynamic linker.  Since this was broken with cross compilers,
@@ -17809,30 +17523,6 @@
   # people can always --disable-shared, the test was removed, and we
   # assume the GNU/Linux dynamic linker is in use.
   dynamic_linker='GNU/Linux ld.so'
-
-  # Find out which ABI we are using (multilib Linux x86_64 hack).
-  libsuff=
-  case &quot;$host_cpu&quot; in
-  x86_64*)
-    echo '#line 17817 &quot;configure&quot;' &gt; conftest.$ac_ext
-    if { (eval echo &quot;$as_me:$LINENO: \&quot;$ac_compile\&quot;&quot;) &gt;&amp;5
-  (eval $ac_compile) 2&gt;&amp;5
-  ac_status=$?
-  echo &quot;$as_me:$LINENO: \$? = $ac_status&quot; &gt;&amp;5
-  (exit $ac_status); }; then
-      case `/usr/bin/file conftest.$ac_objext` in
-      *64-bit*)
-        libsuff=64
-        ;;
-      esac
-    fi
-    rm -rf conftest*
-    ;;
-  *)
-    ;;
-  esac
-  sys_lib_dlsearch_path_spec=&quot;/lib${libsuff} /usr/lib${libsuff}&quot;
-  sys_lib_search_path_spec=&quot;/lib${libsuff} /usr/lib${libsuff} /usr/local/lib${libsuff}&quot;
   ;;
 
 knetbsd*-gnu)
@@ -17884,6 +17574,7 @@
 
 openbsd*)
   version_type=sunos
+  sys_lib_dlsearch_path_spec=&quot;/usr/lib&quot;
   need_lib_prefix=no
   # Some older versions of OpenBSD (3.3 at least) *do* need versioned libs.
   case $host_os in
@@ -17927,13 +17618,6 @@
   sys_lib_dlsearch_path_spec=&quot;$sys_lib_search_path_spec&quot;
   ;;
 
-sco3.2v5*)
-  version_type=osf
-  soname_spec='${libname}${release}${shared_ext}$major'
-  library_names_spec='${libname}${release}${shared_ext}$versuffix ${libname}${release}${shared_ext}$major $libname${shared_ext}'
-  shlibpath_var=LD_LIBRARY_PATH
-  ;;
-
 solaris*)
   version_type=linux
   need_lib_prefix=no
@@ -17959,7 +17643,7 @@
   need_version=yes
   ;;
 
-sysv4 | sysv4.2uw2* | sysv4.3* | sysv5*)
+sysv4 | sysv4.3*)
   version_type=linux
   library_names_spec='${libname}${release}${shared_ext}$versuffix ${libname}${release}${shared_ext}$major $libname${shared_ext}'
   soname_spec='${libname}${release}${shared_ext}$major'
@@ -17992,6 +17676,29 @@
   fi
   ;;
 
+sysv5* | sco3.2v5* | sco5v6* | unixware* | OpenUNIX* | sysv4*uw2*)
+  version_type=freebsd-elf
+  need_lib_prefix=no
+  need_version=no
+  library_names_spec='${libname}${release}${shared_ext}$versuffix ${libname}${release}${shared_ext} $libname${shared_ext}'
+  soname_spec='${libname}${release}${shared_ext}$major'
+  shlibpath_var=LD_LIBRARY_PATH
+  hardcode_into_libs=yes
+  if test &quot;$with_gnu_ld&quot; = yes; then
+    sys_lib_search_path_spec='/usr/local/lib /usr/gnu/lib /usr/ccs/lib /usr/lib /lib'
+    shlibpath_overrides_runpath=no
+  else
+    sys_lib_search_path_spec='/usr/ccs/lib /usr/lib'
+    shlibpath_overrides_runpath=yes
+    case $host_os in
+      sco3.2v5*)
+        sys_lib_search_path_spec=&quot;$sys_lib_search_path_spec /lib&quot;
+	;;
+    esac
+  fi
+  sys_lib_dlsearch_path_spec='/usr/lib'
+  ;;
+
 uts4*)
   version_type=linux
   library_names_spec='${libname}${release}${shared_ext}$versuffix ${libname}${release}${shared_ext}$major $libname${shared_ext}'
@@ -18007,6 +17714,11 @@
 echo &quot;${ECHO_T}$dynamic_linker&quot; &gt;&amp;6
 test &quot;$dynamic_linker&quot; = no &amp;&amp; can_build_shared=no
 
+variables_saved_for_relink=&quot;PATH $shlibpath_var $runpath_var&quot;
+if test &quot;$GCC&quot; = yes; then
+  variables_saved_for_relink=&quot;$variables_saved_for_relink GCC_EXEC_PREFIX COMPILER_PATH LIBRARY_PATH&quot;
+fi
+
 echo &quot;$as_me:$LINENO: checking how to hardcode library paths into programs&quot; &gt;&amp;5
 echo $ECHO_N &quot;checking how to hardcode library paths into programs... $ECHO_C&quot; &gt;&amp;6
 hardcode_action_GCJ=
@@ -18044,842 +17756,7 @@
   enable_fast_install=needless
 fi
 
-striplib=
-old_striplib=
-echo &quot;$as_me:$LINENO: checking whether stripping libraries is possible&quot; &gt;&amp;5
-echo $ECHO_N &quot;checking whether stripping libraries is possible... $ECHO_C&quot; &gt;&amp;6
-if test -n &quot;$STRIP&quot; &amp;&amp; $STRIP -V 2&gt;&amp;1 | grep &quot;GNU strip&quot; &gt;/dev/null; then
-  test -z &quot;$old_striplib&quot; &amp;&amp; old_striplib=&quot;$STRIP --strip-debug&quot;
-  test -z &quot;$striplib&quot; &amp;&amp; striplib=&quot;$STRIP --strip-unneeded&quot;
-  echo &quot;$as_me:$LINENO: result: yes&quot; &gt;&amp;5
-echo &quot;${ECHO_T}yes&quot; &gt;&amp;6
-else
-# FIXME - insert some real tests, host_os isn't really good enough
-  case $host_os in
-   darwin*)
-       if test -n &quot;$STRIP&quot; ; then
-         striplib=&quot;$STRIP -x&quot;
-         echo &quot;$as_me:$LINENO: result: yes&quot; &gt;&amp;5
-echo &quot;${ECHO_T}yes&quot; &gt;&amp;6
-       else
-  echo &quot;$as_me:$LINENO: result: no&quot; &gt;&amp;5
-echo &quot;${ECHO_T}no&quot; &gt;&amp;6
-fi
-       ;;
-   *)
-  echo &quot;$as_me:$LINENO: result: no&quot; &gt;&amp;5
-echo &quot;${ECHO_T}no&quot; &gt;&amp;6
-    ;;
-  esac
-fi
 
-if test &quot;x$enable_dlopen&quot; != xyes; then
-  enable_dlopen=unknown
-  enable_dlopen_self=unknown
-  enable_dlopen_self_static=unknown
-else
-  lt_cv_dlopen=no
-  lt_cv_dlopen_libs=
-
-  case $host_os in
-  beos*)
-    lt_cv_dlopen=&quot;load_add_on&quot;
-    lt_cv_dlopen_libs=
-    lt_cv_dlopen_self=yes
-    ;;
-
-  mingw* | pw32*)
-    lt_cv_dlopen=&quot;LoadLibrary&quot;
-    lt_cv_dlopen_libs=
-   ;;
-
-  cygwin*)
-    lt_cv_dlopen=&quot;dlopen&quot;
-    lt_cv_dlopen_libs=
-   ;;
-
-  darwin*)
-  # if libdl is installed we need to link against it
-    echo &quot;$as_me:$LINENO: checking for dlopen in -ldl&quot; &gt;&amp;5
-echo $ECHO_N &quot;checking for dlopen in -ldl... $ECHO_C&quot; &gt;&amp;6
-if test &quot;${ac_cv_lib_dl_dlopen+set}&quot; = set; then
-  echo $ECHO_N &quot;(cached) $ECHO_C&quot; &gt;&amp;6
-else
-  ac_check_lib_save_LIBS=$LIBS
-LIBS=&quot;-ldl  $LIBS&quot;
-cat &gt;conftest.$ac_ext &lt;&lt;_ACEOF
-/* confdefs.h.  */
-_ACEOF
-cat confdefs.h &gt;&gt;conftest.$ac_ext
-cat &gt;&gt;conftest.$ac_ext &lt;&lt;_ACEOF
-/* end confdefs.h.  */
-
-/* Override any gcc2 internal prototype to avoid an error.  */
-#ifdef __cplusplus
-extern &quot;C&quot;
-#endif
-/* We use char because int might match the return type of a gcc2
-   builtin and then its argument prototype would still apply.  */
-char dlopen ();
-int
-main ()
-{
-dlopen ();
-  ;
-  return 0;
-}
-_ACEOF
-rm -f conftest.$ac_objext conftest$ac_exeext
-if { (eval echo &quot;$as_me:$LINENO: \&quot;$ac_link\&quot;&quot;) &gt;&amp;5
-  (eval $ac_link) 2&gt;conftest.er1
-  ac_status=$?
-  grep -v '^ *+' conftest.er1 &gt;conftest.err
-  rm -f conftest.er1
-  cat conftest.err &gt;&amp;5
-  echo &quot;$as_me:$LINENO: \$? = $ac_status&quot; &gt;&amp;5
-  (exit $ac_status); } &amp;&amp;
-	 { ac_try='test -z &quot;$ac_c_werror_flag&quot;
-			 || test ! -s conftest.err'
-  { (eval echo &quot;$as_me:$LINENO: \&quot;$ac_try\&quot;&quot;) &gt;&amp;5
-  (eval $ac_try) 2&gt;&amp;5
-  ac_status=$?
-  echo &quot;$as_me:$LINENO: \$? = $ac_status&quot; &gt;&amp;5
-  (exit $ac_status); }; } &amp;&amp;
-	 { ac_try='test -s conftest$ac_exeext'
-  { (eval echo &quot;$as_me:$LINENO: \&quot;$ac_try\&quot;&quot;) &gt;&amp;5
-  (eval $ac_try) 2&gt;&amp;5
-  ac_status=$?
-  echo &quot;$as_me:$LINENO: \$? = $ac_status&quot; &gt;&amp;5
-  (exit $ac_status); }; }; then
-  ac_cv_lib_dl_dlopen=yes
-else
-  echo &quot;$as_me: failed program was:&quot; &gt;&amp;5
-sed 's/^/| /' conftest.$ac_ext &gt;&amp;5
-
-ac_cv_lib_dl_dlopen=no
-fi
-rm -f conftest.err conftest.$ac_objext \
-      conftest$ac_exeext conftest.$ac_ext
-LIBS=$ac_check_lib_save_LIBS
-fi
-echo &quot;$as_me:$LINENO: result: $ac_cv_lib_dl_dlopen&quot; &gt;&amp;5
-echo &quot;${ECHO_T}$ac_cv_lib_dl_dlopen&quot; &gt;&amp;6
-if test $ac_cv_lib_dl_dlopen = yes; then
-  lt_cv_dlopen=&quot;dlopen&quot; lt_cv_dlopen_libs=&quot;-ldl&quot;
-else
-
-    lt_cv_dlopen=&quot;dyld&quot;
-    lt_cv_dlopen_libs=
-    lt_cv_dlopen_self=yes
-
-fi
-
-   ;;
-
-  *)
-    echo &quot;$as_me:$LINENO: checking for shl_load&quot; &gt;&amp;5
-echo $ECHO_N &quot;checking for shl_load... $ECHO_C&quot; &gt;&amp;6
-if test &quot;${ac_cv_func_shl_load+set}&quot; = set; then
-  echo $ECHO_N &quot;(cached) $ECHO_C&quot; &gt;&amp;6
-else
-  cat &gt;conftest.$ac_ext &lt;&lt;_ACEOF
-/* confdefs.h.  */
-_ACEOF
-cat confdefs.h &gt;&gt;conftest.$ac_ext
-cat &gt;&gt;conftest.$ac_ext &lt;&lt;_ACEOF
-/* end confdefs.h.  */
-/* Define shl_load to an innocuous variant, in case &lt;limits.h&gt; declares shl_load.
-   For example, HP-UX 11i &lt;limits.h&gt; declares gettimeofday.  */
-#define shl_load innocuous_shl_load
-
-/* System header to define __stub macros and hopefully few prototypes,
-    which can conflict with char shl_load (); below.
-    Prefer &lt;limits.h&gt; to &lt;assert.h&gt; if __STDC__ is defined, since
-    &lt;limits.h&gt; exists even on freestanding compilers.  */
-
-#ifdef __STDC__
-# include &lt;limits.h&gt;
-#else
-# include &lt;assert.h&gt;
-#endif
-
-#undef shl_load
-
-/* Override any gcc2 internal prototype to avoid an error.  */
-#ifdef __cplusplus
-extern &quot;C&quot;
-{
-#endif
-/* We use char because int might match the return type of a gcc2
-   builtin and then its argument prototype would still apply.  */
-char shl_load ();
-/* The GNU C library defines this for functions which it implements
-    to always fail with ENOSYS.  Some functions are actually named
-    something starting with __ and the normal name is an alias.  */
-#if defined (__stub_shl_load) || defined (__stub___shl_load)
-choke me
-#else
-char (*f) () = shl_load;
-#endif
-#ifdef __cplusplus
-}
-#endif
-
-int
-main ()
-{
-return f != shl_load;
-  ;
-  return 0;
-}
-_ACEOF
-rm -f conftest.$ac_objext conftest$ac_exeext
-if { (eval echo &quot;$as_me:$LINENO: \&quot;$ac_link\&quot;&quot;) &gt;&amp;5
-  (eval $ac_link) 2&gt;conftest.er1
-  ac_status=$?
-  grep -v '^ *+' conftest.er1 &gt;conftest.err
-  rm -f conftest.er1
-  cat conftest.err &gt;&amp;5
-  echo &quot;$as_me:$LINENO: \$? = $ac_status&quot; &gt;&amp;5
-  (exit $ac_status); } &amp;&amp;
-	 { ac_try='test -z &quot;$ac_c_werror_flag&quot;
-			 || test ! -s conftest.err'
-  { (eval echo &quot;$as_me:$LINENO: \&quot;$ac_try\&quot;&quot;) &gt;&amp;5
-  (eval $ac_try) 2&gt;&amp;5
-  ac_status=$?
-  echo &quot;$as_me:$LINENO: \$? = $ac_status&quot; &gt;&amp;5
-  (exit $ac_status); }; } &amp;&amp;
-	 { ac_try='test -s conftest$ac_exeext'
-  { (eval echo &quot;$as_me:$LINENO: \&quot;$ac_try\&quot;&quot;) &gt;&amp;5
-  (eval $ac_try) 2&gt;&amp;5
-  ac_status=$?
-  echo &quot;$as_me:$LINENO: \$? = $ac_status&quot; &gt;&amp;5
-  (exit $ac_status); }; }; then
-  ac_cv_func_shl_load=yes
-else
-  echo &quot;$as_me: failed program was:&quot; &gt;&amp;5
-sed 's/^/| /' conftest.$ac_ext &gt;&amp;5
-
-ac_cv_func_shl_load=no
-fi
-rm -f conftest.err conftest.$ac_objext \
-      conftest$ac_exeext conftest.$ac_ext
-fi
-echo &quot;$as_me:$LINENO: result: $ac_cv_func_shl_load&quot; &gt;&amp;5
-echo &quot;${ECHO_T}$ac_cv_func_shl_load&quot; &gt;&amp;6
-if test $ac_cv_func_shl_load = yes; then
-  lt_cv_dlopen=&quot;shl_load&quot;
-else
-  echo &quot;$as_me:$LINENO: checking for shl_load in -ldld&quot; &gt;&amp;5
-echo $ECHO_N &quot;checking for shl_load in -ldld... $ECHO_C&quot; &gt;&amp;6
-if test &quot;${ac_cv_lib_dld_shl_load+set}&quot; = set; then
-  echo $ECHO_N &quot;(cached) $ECHO_C&quot; &gt;&amp;6
-else
-  ac_check_lib_save_LIBS=$LIBS
-LIBS=&quot;-ldld  $LIBS&quot;
-cat &gt;conftest.$ac_ext &lt;&lt;_ACEOF
-/* confdefs.h.  */
-_ACEOF
-cat confdefs.h &gt;&gt;conftest.$ac_ext
-cat &gt;&gt;conftest.$ac_ext &lt;&lt;_ACEOF
-/* end confdefs.h.  */
-
-/* Override any gcc2 internal prototype to avoid an error.  */
-#ifdef __cplusplus
-extern &quot;C&quot;
-#endif
-/* We use char because int might match the return type of a gcc2
-   builtin and then its argument prototype would still apply.  */
-char shl_load ();
-int
-main ()
-{
-shl_load ();
-  ;
-  return 0;
-}
-_ACEOF
-rm -f conftest.$ac_objext conftest$ac_exeext
-if { (eval echo &quot;$as_me:$LINENO: \&quot;$ac_link\&quot;&quot;) &gt;&amp;5
-  (eval $ac_link) 2&gt;conftest.er1
-  ac_status=$?
-  grep -v '^ *+' conftest.er1 &gt;conftest.err
-  rm -f conftest.er1
-  cat conftest.err &gt;&amp;5
-  echo &quot;$as_me:$LINENO: \$? = $ac_status&quot; &gt;&amp;5
-  (exit $ac_status); } &amp;&amp;
-	 { ac_try='test -z &quot;$ac_c_werror_flag&quot;
-			 || test ! -s conftest.err'
-  { (eval echo &quot;$as_me:$LINENO: \&quot;$ac_try\&quot;&quot;) &gt;&amp;5
-  (eval $ac_try) 2&gt;&amp;5
-  ac_status=$?
-  echo &quot;$as_me:$LINENO: \$? = $ac_status&quot; &gt;&amp;5
-  (exit $ac_status); }; } &amp;&amp;
-	 { ac_try='test -s conftest$ac_exeext'
-  { (eval echo &quot;$as_me:$LINENO: \&quot;$ac_try\&quot;&quot;) &gt;&amp;5
-  (eval $ac_try) 2&gt;&amp;5
-  ac_status=$?
-  echo &quot;$as_me:$LINENO: \$? = $ac_status&quot; &gt;&amp;5
-  (exit $ac_status); }; }; then
-  ac_cv_lib_dld_shl_load=yes
-else
-  echo &quot;$as_me: failed program was:&quot; &gt;&amp;5
-sed 's/^/| /' conftest.$ac_ext &gt;&amp;5
-
-ac_cv_lib_dld_shl_load=no
-fi
-rm -f conftest.err conftest.$ac_objext \
-      conftest$ac_exeext conftest.$ac_ext
-LIBS=$ac_check_lib_save_LIBS
-fi
-echo &quot;$as_me:$LINENO: result: $ac_cv_lib_dld_shl_load&quot; &gt;&amp;5
-echo &quot;${ECHO_T}$ac_cv_lib_dld_shl_load&quot; &gt;&amp;6
-if test $ac_cv_lib_dld_shl_load = yes; then
-  lt_cv_dlopen=&quot;shl_load&quot; lt_cv_dlopen_libs=&quot;-dld&quot;
-else
-  echo &quot;$as_me:$LINENO: checking for dlopen&quot; &gt;&amp;5
-echo $ECHO_N &quot;checking for dlopen... $ECHO_C&quot; &gt;&amp;6
-if test &quot;${ac_cv_func_dlopen+set}&quot; = set; then
-  echo $ECHO_N &quot;(cached) $ECHO_C&quot; &gt;&amp;6
-else
-  cat &gt;conftest.$ac_ext &lt;&lt;_ACEOF
-/* confdefs.h.  */
-_ACEOF
-cat confdefs.h &gt;&gt;conftest.$ac_ext
-cat &gt;&gt;conftest.$ac_ext &lt;&lt;_ACEOF
-/* end confdefs.h.  */
-/* Define dlopen to an innocuous variant, in case &lt;limits.h&gt; declares dlopen.
-   For example, HP-UX 11i &lt;limits.h&gt; declares gettimeofday.  */
-#define dlopen innocuous_dlopen
-
-/* System header to define __stub macros and hopefully few prototypes,
-    which can conflict with char dlopen (); below.
-    Prefer &lt;limits.h&gt; to &lt;assert.h&gt; if __STDC__ is defined, since
-    &lt;limits.h&gt; exists even on freestanding compilers.  */
-
-#ifdef __STDC__
-# include &lt;limits.h&gt;
-#else
-# include &lt;assert.h&gt;
-#endif
-
-#undef dlopen
-
-/* Override any gcc2 internal prototype to avoid an error.  */
-#ifdef __cplusplus
-extern &quot;C&quot;
-{
-#endif
-/* We use char because int might match the return type of a gcc2
-   builtin and then its argument prototype would still apply.  */
-char dlopen ();
-/* The GNU C library defines this for functions which it implements
-    to always fail with ENOSYS.  Some functions are actually named
-    something starting with __ and the normal name is an alias.  */
-#if defined (__stub_dlopen) || defined (__stub___dlopen)
-choke me
-#else
-char (*f) () = dlopen;
-#endif
-#ifdef __cplusplus
-}
-#endif
-
-int
-main ()
-{
-return f != dlopen;
-  ;
-  return 0;
-}
-_ACEOF
-rm -f conftest.$ac_objext conftest$ac_exeext
-if { (eval echo &quot;$as_me:$LINENO: \&quot;$ac_link\&quot;&quot;) &gt;&amp;5
-  (eval $ac_link) 2&gt;conftest.er1
-  ac_status=$?
-  grep -v '^ *+' conftest.er1 &gt;conftest.err
-  rm -f conftest.er1
-  cat conftest.err &gt;&amp;5
-  echo &quot;$as_me:$LINENO: \$? = $ac_status&quot; &gt;&amp;5
-  (exit $ac_status); } &amp;&amp;
-	 { ac_try='test -z &quot;$ac_c_werror_flag&quot;
-			 || test ! -s conftest.err'
-  { (eval echo &quot;$as_me:$LINENO: \&quot;$ac_try\&quot;&quot;) &gt;&amp;5
-  (eval $ac_try) 2&gt;&amp;5
-  ac_status=$?
-  echo &quot;$as_me:$LINENO: \$? = $ac_status&quot; &gt;&amp;5
-  (exit $ac_status); }; } &amp;&amp;
-	 { ac_try='test -s conftest$ac_exeext'
-  { (eval echo &quot;$as_me:$LINENO: \&quot;$ac_try\&quot;&quot;) &gt;&amp;5
-  (eval $ac_try) 2&gt;&amp;5
-  ac_status=$?
-  echo &quot;$as_me:$LINENO: \$? = $ac_status&quot; &gt;&amp;5
-  (exit $ac_status); }; }; then
-  ac_cv_func_dlopen=yes
-else
-  echo &quot;$as_me: failed program was:&quot; &gt;&amp;5
-sed 's/^/| /' conftest.$ac_ext &gt;&amp;5
-
-ac_cv_func_dlopen=no
-fi
-rm -f conftest.err conftest.$ac_objext \
-      conftest$ac_exeext conftest.$ac_ext
-fi
-echo &quot;$as_me:$LINENO: result: $ac_cv_func_dlopen&quot; &gt;&amp;5
-echo &quot;${ECHO_T}$ac_cv_func_dlopen&quot; &gt;&amp;6
-if test $ac_cv_func_dlopen = yes; then
-  lt_cv_dlopen=&quot;dlopen&quot;
-else
-  echo &quot;$as_me:$LINENO: checking for dlopen in -ldl&quot; &gt;&amp;5
-echo $ECHO_N &quot;checking for dlopen in -ldl... $ECHO_C&quot; &gt;&amp;6
-if test &quot;${ac_cv_lib_dl_dlopen+set}&quot; = set; then
-  echo $ECHO_N &quot;(cached) $ECHO_C&quot; &gt;&amp;6
-else
-  ac_check_lib_save_LIBS=$LIBS
-LIBS=&quot;-ldl  $LIBS&quot;
-cat &gt;conftest.$ac_ext &lt;&lt;_ACEOF
-/* confdefs.h.  */
-_ACEOF
-cat confdefs.h &gt;&gt;conftest.$ac_ext
-cat &gt;&gt;conftest.$ac_ext &lt;&lt;_ACEOF
-/* end confdefs.h.  */
-
-/* Override any gcc2 internal prototype to avoid an error.  */
-#ifdef __cplusplus
-extern &quot;C&quot;
-#endif
-/* We use char because int might match the return type of a gcc2
-   builtin and then its argument prototype would still apply.  */
-char dlopen ();
-int
-main ()
-{
-dlopen ();
-  ;
-  return 0;
-}
-_ACEOF
-rm -f conftest.$ac_objext conftest$ac_exeext
-if { (eval echo &quot;$as_me:$LINENO: \&quot;$ac_link\&quot;&quot;) &gt;&amp;5
-  (eval $ac_link) 2&gt;conftest.er1
-  ac_status=$?
-  grep -v '^ *+' conftest.er1 &gt;conftest.err
-  rm -f conftest.er1
-  cat conftest.err &gt;&amp;5
-  echo &quot;$as_me:$LINENO: \$? = $ac_status&quot; &gt;&amp;5
-  (exit $ac_status); } &amp;&amp;
-	 { ac_try='test -z &quot;$ac_c_werror_flag&quot;
-			 || test ! -s conftest.err'
-  { (eval echo &quot;$as_me:$LINENO: \&quot;$ac_try\&quot;&quot;) &gt;&amp;5
-  (eval $ac_try) 2&gt;&amp;5
-  ac_status=$?
-  echo &quot;$as_me:$LINENO: \$? = $ac_status&quot; &gt;&amp;5
-  (exit $ac_status); }; } &amp;&amp;
-	 { ac_try='test -s conftest$ac_exeext'
-  { (eval echo &quot;$as_me:$LINENO: \&quot;$ac_try\&quot;&quot;) &gt;&amp;5
-  (eval $ac_try) 2&gt;&amp;5
-  ac_status=$?
-  echo &quot;$as_me:$LINENO: \$? = $ac_status&quot; &gt;&amp;5
-  (exit $ac_status); }; }; then
-  ac_cv_lib_dl_dlopen=yes
-else
-  echo &quot;$as_me: failed program was:&quot; &gt;&amp;5
-sed 's/^/| /' conftest.$ac_ext &gt;&amp;5
-
-ac_cv_lib_dl_dlopen=no
-fi
-rm -f conftest.err conftest.$ac_objext \
-      conftest$ac_exeext conftest.$ac_ext
-LIBS=$ac_check_lib_save_LIBS
-fi
-echo &quot;$as_me:$LINENO: result: $ac_cv_lib_dl_dlopen&quot; &gt;&amp;5
-echo &quot;${ECHO_T}$ac_cv_lib_dl_dlopen&quot; &gt;&amp;6
-if test $ac_cv_lib_dl_dlopen = yes; then
-  lt_cv_dlopen=&quot;dlopen&quot; lt_cv_dlopen_libs=&quot;-ldl&quot;
-else
-  echo &quot;$as_me:$LINENO: checking for dlopen in -lsvld&quot; &gt;&amp;5
-echo $ECHO_N &quot;checking for dlopen in -lsvld... $ECHO_C&quot; &gt;&amp;6
-if test &quot;${ac_cv_lib_svld_dlopen+set}&quot; = set; then
-  echo $ECHO_N &quot;(cached) $ECHO_C&quot; &gt;&amp;6
-else
-  ac_check_lib_save_LIBS=$LIBS
-LIBS=&quot;-lsvld  $LIBS&quot;
-cat &gt;conftest.$ac_ext &lt;&lt;_ACEOF
-/* confdefs.h.  */
-_ACEOF
-cat confdefs.h &gt;&gt;conftest.$ac_ext
-cat &gt;&gt;conftest.$ac_ext &lt;&lt;_ACEOF
-/* end confdefs.h.  */
-
-/* Override any gcc2 internal prototype to avoid an error.  */
-#ifdef __cplusplus
-extern &quot;C&quot;
-#endif
-/* We use char because int might match the return type of a gcc2
-   builtin and then its argument prototype would still apply.  */
-char dlopen ();
-int
-main ()
-{
-dlopen ();
-  ;
-  return 0;
-}
-_ACEOF
-rm -f conftest.$ac_objext conftest$ac_exeext
-if { (eval echo &quot;$as_me:$LINENO: \&quot;$ac_link\&quot;&quot;) &gt;&amp;5
-  (eval $ac_link) 2&gt;conftest.er1
-  ac_status=$?
-  grep -v '^ *+' conftest.er1 &gt;conftest.err
-  rm -f conftest.er1
-  cat conftest.err &gt;&amp;5
-  echo &quot;$as_me:$LINENO: \$? = $ac_status&quot; &gt;&amp;5
-  (exit $ac_status); } &amp;&amp;
-	 { ac_try='test -z &quot;$ac_c_werror_flag&quot;
-			 || test ! -s conftest.err'
-  { (eval echo &quot;$as_me:$LINENO: \&quot;$ac_try\&quot;&quot;) &gt;&amp;5
-  (eval $ac_try) 2&gt;&amp;5
-  ac_status=$?
-  echo &quot;$as_me:$LINENO: \$? = $ac_status&quot; &gt;&amp;5
-  (exit $ac_status); }; } &amp;&amp;
-	 { ac_try='test -s conftest$ac_exeext'
-  { (eval echo &quot;$as_me:$LINENO: \&quot;$ac_try\&quot;&quot;) &gt;&amp;5
-  (eval $ac_try) 2&gt;&amp;5
-  ac_status=$?
-  echo &quot;$as_me:$LINENO: \$? = $ac_status&quot; &gt;&amp;5
-  (exit $ac_status); }; }; then
-  ac_cv_lib_svld_dlopen=yes
-else
-  echo &quot;$as_me: failed program was:&quot; &gt;&amp;5
-sed 's/^/| /' conftest.$ac_ext &gt;&amp;5
-
-ac_cv_lib_svld_dlopen=no
-fi
-rm -f conftest.err conftest.$ac_objext \
-      conftest$ac_exeext conftest.$ac_ext
-LIBS=$ac_check_lib_save_LIBS
-fi
-echo &quot;$as_me:$LINENO: result: $ac_cv_lib_svld_dlopen&quot; &gt;&amp;5
-echo &quot;${ECHO_T}$ac_cv_lib_svld_dlopen&quot; &gt;&amp;6
-if test $ac_cv_lib_svld_dlopen = yes; then
-  lt_cv_dlopen=&quot;dlopen&quot; lt_cv_dlopen_libs=&quot;-lsvld&quot;
-else
-  echo &quot;$as_me:$LINENO: checking for dld_link in -ldld&quot; &gt;&amp;5
-echo $ECHO_N &quot;checking for dld_link in -ldld... $ECHO_C&quot; &gt;&amp;6
-if test &quot;${ac_cv_lib_dld_dld_link+set}&quot; = set; then
-  echo $ECHO_N &quot;(cached) $ECHO_C&quot; &gt;&amp;6
-else
-  ac_check_lib_save_LIBS=$LIBS
-LIBS=&quot;-ldld  $LIBS&quot;
-cat &gt;conftest.$ac_ext &lt;&lt;_ACEOF
-/* confdefs.h.  */
-_ACEOF
-cat confdefs.h &gt;&gt;conftest.$ac_ext
-cat &gt;&gt;conftest.$ac_ext &lt;&lt;_ACEOF
-/* end confdefs.h.  */
-
-/* Override any gcc2 internal prototype to avoid an error.  */
-#ifdef __cplusplus
-extern &quot;C&quot;
-#endif
-/* We use char because int might match the return type of a gcc2
-   builtin and then its argument prototype would still apply.  */
-char dld_link ();
-int
-main ()
-{
-dld_link ();
-  ;
-  return 0;
-}
-_ACEOF
-rm -f conftest.$ac_objext conftest$ac_exeext
-if { (eval echo &quot;$as_me:$LINENO: \&quot;$ac_link\&quot;&quot;) &gt;&amp;5
-  (eval $ac_link) 2&gt;conftest.er1
-  ac_status=$?
-  grep -v '^ *+' conftest.er1 &gt;conftest.err
-  rm -f conftest.er1
-  cat conftest.err &gt;&amp;5
-  echo &quot;$as_me:$LINENO: \$? = $ac_status&quot; &gt;&amp;5
-  (exit $ac_status); } &amp;&amp;
-	 { ac_try='test -z &quot;$ac_c_werror_flag&quot;
-			 || test ! -s conftest.err'
-  { (eval echo &quot;$as_me:$LINENO: \&quot;$ac_try\&quot;&quot;) &gt;&amp;5
-  (eval $ac_try) 2&gt;&amp;5
-  ac_status=$?
-  echo &quot;$as_me:$LINENO: \$? = $ac_status&quot; &gt;&amp;5
-  (exit $ac_status); }; } &amp;&amp;
-	 { ac_try='test -s conftest$ac_exeext'
-  { (eval echo &quot;$as_me:$LINENO: \&quot;$ac_try\&quot;&quot;) &gt;&amp;5
-  (eval $ac_try) 2&gt;&amp;5
-  ac_status=$?
-  echo &quot;$as_me:$LINENO: \$? = $ac_status&quot; &gt;&amp;5
-  (exit $ac_status); }; }; then
-  ac_cv_lib_dld_dld_link=yes
-else
-  echo &quot;$as_me: failed program was:&quot; &gt;&amp;5
-sed 's/^/| /' conftest.$ac_ext &gt;&amp;5
-
-ac_cv_lib_dld_dld_link=no
-fi
-rm -f conftest.err conftest.$ac_objext \
-      conftest$ac_exeext conftest.$ac_ext
-LIBS=$ac_check_lib_save_LIBS
-fi
-echo &quot;$as_me:$LINENO: result: $ac_cv_lib_dld_dld_link&quot; &gt;&amp;5
-echo &quot;${ECHO_T}$ac_cv_lib_dld_dld_link&quot; &gt;&amp;6
-if test $ac_cv_lib_dld_dld_link = yes; then
-  lt_cv_dlopen=&quot;dld_link&quot; lt_cv_dlopen_libs=&quot;-dld&quot;
-fi
-
-
-fi
-
-
-fi
-
-
-fi
-
-
-fi
-
-
-fi
-
-    ;;
-  esac
-
-  if test &quot;x$lt_cv_dlopen&quot; != xno; then
-    enable_dlopen=yes
-  else
-    enable_dlopen=no
-  fi
-
-  case $lt_cv_dlopen in
-  dlopen)
-    save_CPPFLAGS=&quot;$CPPFLAGS&quot;
-    test &quot;x$ac_cv_header_dlfcn_h&quot; = xyes &amp;&amp; CPPFLAGS=&quot;$CPPFLAGS -DHAVE_DLFCN_H&quot;
-
-    save_LDFLAGS=&quot;$LDFLAGS&quot;
-    eval LDFLAGS=\&quot;\$LDFLAGS $export_dynamic_flag_spec\&quot;
-
-    save_LIBS=&quot;$LIBS&quot;
-    LIBS=&quot;$lt_cv_dlopen_libs $LIBS&quot;
-
-    echo &quot;$as_me:$LINENO: checking whether a program can dlopen itself&quot; &gt;&amp;5
-echo $ECHO_N &quot;checking whether a program can dlopen itself... $ECHO_C&quot; &gt;&amp;6
-if test &quot;${lt_cv_dlopen_self+set}&quot; = set; then
-  echo $ECHO_N &quot;(cached) $ECHO_C&quot; &gt;&amp;6
-else
-  	  if test &quot;$cross_compiling&quot; = yes; then :
-  lt_cv_dlopen_self=cross
-else
-  lt_dlunknown=0; lt_dlno_uscore=1; lt_dlneed_uscore=2
-  lt_status=$lt_dlunknown
-  cat &gt; conftest.$ac_ext &lt;&lt;EOF
-#line 18681 &quot;configure&quot;
-#include &quot;confdefs.h&quot;
-
-#if HAVE_DLFCN_H
-#include &lt;dlfcn.h&gt;
-#endif
-
-#include &lt;stdio.h&gt;
-
-#ifdef RTLD_GLOBAL
-#  define LT_DLGLOBAL		RTLD_GLOBAL
-#else
-#  ifdef DL_GLOBAL
-#    define LT_DLGLOBAL		DL_GLOBAL
-#  else
-#    define LT_DLGLOBAL		0
-#  endif
-#endif
-
-/* We may have to define LT_DLLAZY_OR_NOW in the command line if we
-   find out it does not work in some platform. */
-#ifndef LT_DLLAZY_OR_NOW
-#  ifdef RTLD_LAZY
-#    define LT_DLLAZY_OR_NOW		RTLD_LAZY
-#  else
-#    ifdef DL_LAZY
-#      define LT_DLLAZY_OR_NOW		DL_LAZY
-#    else
-#      ifdef RTLD_NOW
-#        define LT_DLLAZY_OR_NOW	RTLD_NOW
-#      else
-#        ifdef DL_NOW
-#          define LT_DLLAZY_OR_NOW	DL_NOW
-#        else
-#          define LT_DLLAZY_OR_NOW	0
-#        endif
-#      endif
-#    endif
-#  endif
-#endif
-
-#ifdef __cplusplus
-extern &quot;C&quot; void exit (int);
-#endif
-
-void fnord() { int i=42;}
-int main ()
-{
-  void *self = dlopen (0, LT_DLGLOBAL|LT_DLLAZY_OR_NOW);
-  int status = $lt_dlunknown;
-
-  if (self)
-    {
-      if (dlsym (self,&quot;fnord&quot;))       status = $lt_dlno_uscore;
-      else if (dlsym( self,&quot;_fnord&quot;)) status = $lt_dlneed_uscore;
-      /* dlclose (self); */
-    }
-
-    exit (status);
-}
-EOF
-  if { (eval echo &quot;$as_me:$LINENO: \&quot;$ac_link\&quot;&quot;) &gt;&amp;5
-  (eval $ac_link) 2&gt;&amp;5
-  ac_status=$?
-  echo &quot;$as_me:$LINENO: \$? = $ac_status&quot; &gt;&amp;5
-  (exit $ac_status); } &amp;&amp; test -s conftest${ac_exeext} 2&gt;/dev/null; then
-    (./conftest; exit; ) 2&gt;/dev/null
-    lt_status=$?
-    case x$lt_status in
-      x$lt_dlno_uscore) lt_cv_dlopen_self=yes ;;
-      x$lt_dlneed_uscore) lt_cv_dlopen_self=yes ;;
-      x$lt_unknown|x*) lt_cv_dlopen_self=no ;;
-    esac
-  else :
-    # compilation failed
-    lt_cv_dlopen_self=no
-  fi
-fi
-rm -fr conftest*
-
-
-fi
-echo &quot;$as_me:$LINENO: result: $lt_cv_dlopen_self&quot; &gt;&amp;5
-echo &quot;${ECHO_T}$lt_cv_dlopen_self&quot; &gt;&amp;6
-
-    if test &quot;x$lt_cv_dlopen_self&quot; = xyes; then
-      LDFLAGS=&quot;$LDFLAGS $link_static_flag&quot;
-      echo &quot;$as_me:$LINENO: checking whether a statically linked program can dlopen itself&quot; &gt;&amp;5
-echo $ECHO_N &quot;checking whether a statically linked program can dlopen itself... $ECHO_C&quot; &gt;&amp;6
-if test &quot;${lt_cv_dlopen_self_static+set}&quot; = set; then
-  echo $ECHO_N &quot;(cached) $ECHO_C&quot; &gt;&amp;6
-else
-  	  if test &quot;$cross_compiling&quot; = yes; then :
-  lt_cv_dlopen_self_static=cross
-else
-  lt_dlunknown=0; lt_dlno_uscore=1; lt_dlneed_uscore=2
-  lt_status=$lt_dlunknown
-  cat &gt; conftest.$ac_ext &lt;&lt;EOF
-#line 18779 &quot;configure&quot;
-#include &quot;confdefs.h&quot;
-
-#if HAVE_DLFCN_H
-#include &lt;dlfcn.h&gt;
-#endif
-
-#include &lt;stdio.h&gt;
-
-#ifdef RTLD_GLOBAL
-#  define LT_DLGLOBAL		RTLD_GLOBAL
-#else
-#  ifdef DL_GLOBAL
-#    define LT_DLGLOBAL		DL_GLOBAL
-#  else
-#    define LT_DLGLOBAL		0
-#  endif
-#endif
-
-/* We may have to define LT_DLLAZY_OR_NOW in the command line if we
-   find out it does not work in some platform. */
-#ifndef LT_DLLAZY_OR_NOW
-#  ifdef RTLD_LAZY
-#    define LT_DLLAZY_OR_NOW		RTLD_LAZY
-#  else
-#    ifdef DL_LAZY
-#      define LT_DLLAZY_OR_NOW		DL_LAZY
-#    else
-#      ifdef RTLD_NOW
-#        define LT_DLLAZY_OR_NOW	RTLD_NOW
-#      else
-#        ifdef DL_NOW
-#          define LT_DLLAZY_OR_NOW	DL_NOW
-#        else
-#          define LT_DLLAZY_OR_NOW	0
-#        endif
-#      endif
-#    endif
-#  endif
-#endif
-
-#ifdef __cplusplus
-extern &quot;C&quot; void exit (int);
-#endif
-
-void fnord() { int i=42;}
-int main ()
-{
-  void *self = dlopen (0, LT_DLGLOBAL|LT_DLLAZY_OR_NOW);
-  int status = $lt_dlunknown;
-
-  if (self)
-    {
-      if (dlsym (self,&quot;fnord&quot;))       status = $lt_dlno_uscore;
-      else if (dlsym( self,&quot;_fnord&quot;)) status = $lt_dlneed_uscore;
-      /* dlclose (self); */
-    }
-
-    exit (status);
-}
-EOF
-  if { (eval echo &quot;$as_me:$LINENO: \&quot;$ac_link\&quot;&quot;) &gt;&amp;5
-  (eval $ac_link) 2&gt;&amp;5
-  ac_status=$?
-  echo &quot;$as_me:$LINENO: \$? = $ac_status&quot; &gt;&amp;5
-  (exit $ac_status); } &amp;&amp; test -s conftest${ac_exeext} 2&gt;/dev/null; then
-    (./conftest; exit; ) 2&gt;/dev/null
-    lt_status=$?
-    case x$lt_status in
-      x$lt_dlno_uscore) lt_cv_dlopen_self_static=yes ;;
-      x$lt_dlneed_uscore) lt_cv_dlopen_self_static=yes ;;
-      x$lt_unknown|x*) lt_cv_dlopen_self_static=no ;;
-    esac
-  else :
-    # compilation failed
-    lt_cv_dlopen_self_static=no
-  fi
-fi
-rm -fr conftest*
-
-
-fi
-echo &quot;$as_me:$LINENO: result: $lt_cv_dlopen_self_static&quot; &gt;&amp;5
-echo &quot;${ECHO_T}$lt_cv_dlopen_self_static&quot; &gt;&amp;6
-    fi
-
-    CPPFLAGS=&quot;$save_CPPFLAGS&quot;
-    LDFLAGS=&quot;$save_LDFLAGS&quot;
-    LIBS=&quot;$save_LIBS&quot;
-    ;;
-  esac
-
-  case $lt_cv_dlopen_self in
-  yes|no) enable_dlopen_self=$lt_cv_dlopen_self ;;
-  *) enable_dlopen_self=unknown ;;
-  esac
-
-  case $lt_cv_dlopen_self_static in
-  yes|no) enable_dlopen_self_static=$lt_cv_dlopen_self_static ;;
-  *) enable_dlopen_self_static=unknown ;;
-  esac
-fi
-
-
 # The else clause should only fire when bootstrapping the
 # libtool distribution, otherwise you forgot to ship ltmain.sh
 # with your package, and you will get complaints that there are
@@ -18893,7 +17770,7 @@
   # Now quote all the things that may contain metacharacters while being
   # careful not to overquote the AC_SUBSTed values.  We take copies of the
   # variables and quote the copies for generation of the libtool script.
-  for var in echo old_CC old_CFLAGS AR AR_FLAGS EGREP RANLIB LN_S LTCC NM \
+  for var in echo old_CC old_CFLAGS AR AR_FLAGS EGREP RANLIB LN_S LTCC LTCFLAGS NM \
     SED SHELL STRIP \
     libname_spec library_names_spec soname_spec extract_expsyms_cmds \
     old_striplib striplib file_magic_cmd finish_cmds finish_eval \
@@ -19011,6 +17888,9 @@
 # A C compiler.
 LTCC=$lt_LTCC
 
+# LTCC compiler flags.
+LTCFLAGS=$lt_LTCFLAGS
+
 # A language-specific compiler.
 CC=$lt_compiler_GCJ
 
@@ -19320,6 +18200,9 @@
 # If no C compiler was specified, use CC.
 LTCC=${LTCC-&quot;$CC&quot;}
 
+# If no C compiler flags were specified, use CFLAGS.
+LTCFLAGS=${LTCFLAGS-&quot;$CFLAGS&quot;}
+
 # Allow CC to be a program name with arguments.
 compiler=$CC
 
@@ -19327,13 +18210,13 @@
 # save warnings/boilerplate of simple test code
 ac_outfile=conftest.$ac_objext
 printf &quot;$lt_simple_compile_test_code&quot; &gt;conftest.$ac_ext
-eval &quot;$ac_compile&quot; 2&gt;&amp;1 &gt;/dev/null | $SED '/^$/d' &gt;conftest.err
+eval &quot;$ac_compile&quot; 2&gt;&amp;1 &gt;/dev/null | $SED '/^$/d; /^ *+/d' &gt;conftest.err
 _lt_compiler_boilerplate=`cat conftest.err`
 $rm conftest*
 
 ac_outfile=conftest.$ac_objext
 printf &quot;$lt_simple_link_test_code&quot; &gt;conftest.$ac_ext
-eval &quot;$ac_link&quot; 2&gt;&amp;1 &gt;/dev/null | $SED '/^$/d' &gt;conftest.err
+eval &quot;$ac_link&quot; 2&gt;&amp;1 &gt;/dev/null | $SED '/^$/d; /^ *+/d' &gt;conftest.err
 _lt_linker_boilerplate=`cat conftest.err`
 $rm conftest*
 
@@ -19368,7 +18251,7 @@
   # Now quote all the things that may contain metacharacters while being
   # careful not to overquote the AC_SUBSTed values.  We take copies of the
   # variables and quote the copies for generation of the libtool script.
-  for var in echo old_CC old_CFLAGS AR AR_FLAGS EGREP RANLIB LN_S LTCC NM \
+  for var in echo old_CC old_CFLAGS AR AR_FLAGS EGREP RANLIB LN_S LTCC LTCFLAGS NM \
     SED SHELL STRIP \
     libname_spec library_names_spec soname_spec extract_expsyms_cmds \
     old_striplib striplib file_magic_cmd finish_cmds finish_eval \
@@ -19486,6 +18369,9 @@
 # A C compiler.
 LTCC=$lt_LTCC
 
+# LTCC compiler flags.
+LTCFLAGS=$lt_LTCFLAGS
+
 # A language-specific compiler.
 CC=$lt_compiler_RC
 
@@ -22486,7 +21372,7 @@
         fi
 
 
-                                                                                ac_config_files=&quot;$ac_config_files openspacerc Makefile src/Makefile icons/Makefile icons/default/Makefile src/plugins/Makefile src/plugins/filelist/Makefile src/plugins/cmddialog/Makefile&quot;
+                                                                                          ac_config_files=&quot;$ac_config_files openspacerc Makefile src/Makefile icons/Makefile icons/default/Makefile icons/mini/Makefile src/plugins/Makefile src/plugins/filelist/Makefile src/plugins/cmddialog/Makefile&quot;
 
 cat &gt;confcache &lt;&lt;\_ACEOF
 # This file is a shell script that caches the results of configure
@@ -23049,6 +21935,7 @@
   &quot;src/Makefile&quot; ) CONFIG_FILES=&quot;$CONFIG_FILES src/Makefile&quot; ;;
   &quot;icons/Makefile&quot; ) CONFIG_FILES=&quot;$CONFIG_FILES icons/Makefile&quot; ;;
   &quot;icons/default/Makefile&quot; ) CONFIG_FILES=&quot;$CONFIG_FILES icons/default/Makefile&quot; ;;
+  &quot;icons/mini/Makefile&quot; ) CONFIG_FILES=&quot;$CONFIG_FILES icons/mini/Makefile&quot; ;;
   &quot;src/plugins/Makefile&quot; ) CONFIG_FILES=&quot;$CONFIG_FILES src/plugins/Makefile&quot; ;;
   &quot;src/plugins/filelist/Makefile&quot; ) CONFIG_FILES=&quot;$CONFIG_FILES src/plugins/filelist/Makefile&quot; ;;
   &quot;src/plugins/cmddialog/Makefile&quot; ) CONFIG_FILES=&quot;$CONFIG_FILES src/plugins/cmddialog/Makefile&quot; ;;

Modified: trunk/configure.ac
===================================================================
--- trunk/configure.ac	2006-03-06 17:48:57 UTC (rev 256)
+++ trunk/configure.ac	2006-03-06 18:46:28 UTC (rev 257)
@@ -62,6 +62,7 @@
 		 src/Makefile
 		 icons/Makefile
 		 icons/default/Makefile
+		 icons/mini/Makefile
 		 src/plugins/Makefile
 		 src/plugins/filelist/Makefile
 		 src/plugins/cmddialog/Makefile

Modified: trunk/icons/Makefile.am
===================================================================
--- trunk/icons/Makefile.am	2006-03-06 17:48:57 UTC (rev 256)
+++ trunk/icons/Makefile.am	2006-03-06 18:46:28 UTC (rev 257)
@@ -1 +1 @@
-SUBDIRS=default
+SUBDIRS=default mini

Modified: trunk/icons/Makefile.in
===================================================================
--- trunk/icons/Makefile.in	2006-03-06 17:48:57 UTC (rev 256)
+++ trunk/icons/Makefile.in	2006-03-06 18:46:28 UTC (rev 257)
@@ -151,7 +151,7 @@
 sharedstatedir = @sharedstatedir@
 sysconfdir = @sysconfdir@
 target_alias = @target_alias@
-SUBDIRS = default
+SUBDIRS = default mini
 all: all-recursive
 
 .SUFFIXES:

Added: trunk/icons/mini/Makefile.am
===================================================================
--- trunk/icons/mini/Makefile.am	2006-03-06 17:48:57 UTC (rev 256)
+++ trunk/icons/mini/Makefile.am	2006-03-06 18:46:28 UTC (rev 257)
@@ -0,0 +1,5 @@
+iconsdir=$(datadir)/openspace/icons/mini
+EXTRA_DIST=*.png
+icons_DATA=*.png
+	
+	 

Added: trunk/icons/mini/close.png
===================================================================
(Binary files differ)


Property changes on: trunk/icons/mini/close.png
___________________________________________________________________
Name: svn:mime-type
   + application/octet-stream

Added: trunk/icons/mini/copy.png
===================================================================
(Binary files differ)


Property changes on: trunk/icons/mini/copy.png
___________________________________________________________________
Name: svn:mime-type
   + application/octet-stream

Added: trunk/icons/mini/cut.png
===================================================================
(Binary files differ)


Property changes on: trunk/icons/mini/cut.png
___________________________________________________________________
Name: svn:mime-type
   + application/octet-stream

Added: trunk/icons/mini/details.png
===================================================================
(Binary files differ)


Property changes on: trunk/icons/mini/details.png
___________________________________________________________________
Name: svn:mime-type
   + application/octet-stream

Added: trunk/icons/mini/directory.png
===================================================================
(Binary files differ)


Property changes on: trunk/icons/mini/directory.png
___________________________________________________________________
Name: svn:mime-type
   + application/octet-stream

Added: trunk/icons/mini/dirup.png
===================================================================
(Binary files differ)


Property changes on: trunk/icons/mini/dirup.png
___________________________________________________________________
Name: svn:mime-type
   + application/octet-stream

Added: trunk/icons/mini/find.png
===================================================================
(Binary files differ)


Property changes on: trunk/icons/mini/find.png
___________________________________________________________________
Name: svn:mime-type
   + application/octet-stream

Added: trunk/icons/mini/home.png
===================================================================
(Binary files differ)


Property changes on: trunk/icons/mini/home.png
___________________________________________________________________
Name: svn:mime-type
   + application/octet-stream

Added: trunk/icons/mini/left.png
===================================================================
(Binary files differ)


Property changes on: trunk/icons/mini/left.png
___________________________________________________________________
Name: svn:mime-type
   + application/octet-stream

Added: trunk/icons/mini/min.png
===================================================================
(Binary files differ)


Property changes on: trunk/icons/mini/min.png
___________________________________________________________________
Name: svn:mime-type
   + application/octet-stream

Added: trunk/icons/mini/network.png
===================================================================
(Binary files differ)


Property changes on: trunk/icons/mini/network.png
___________________________________________________________________
Name: svn:mime-type
   + application/octet-stream

Added: trunk/icons/mini/paste.png
===================================================================
(Binary files differ)


Property changes on: trunk/icons/mini/paste.png
___________________________________________________________________
Name: svn:mime-type
   + application/octet-stream

Added: trunk/icons/mini/pattern.png
===================================================================
(Binary files differ)


Property changes on: trunk/icons/mini/pattern.png
___________________________________________________________________
Name: svn:mime-type
   + application/octet-stream

Added: trunk/icons/mini/plus.png
===================================================================
(Binary files differ)


Property changes on: trunk/icons/mini/plus.png
___________________________________________________________________
Name: svn:mime-type
   + application/octet-stream

Added: trunk/icons/mini/reload.png
===================================================================
(Binary files differ)


Property changes on: trunk/icons/mini/reload.png
___________________________________________________________________
Name: svn:mime-type
   + application/octet-stream

Added: trunk/icons/mini/right.png
===================================================================
(Binary files differ)


Property changes on: trunk/icons/mini/right.png
___________________________________________________________________
Name: svn:mime-type
   + application/octet-stream

Added: trunk/icons/mini/run_shell.png
===================================================================
(Binary files differ)


Property changes on: trunk/icons/mini/run_shell.png
___________________________________________________________________
Name: svn:mime-type
   + application/octet-stream

Added: trunk/icons/mini/smallicons.png
===================================================================
(Binary files differ)


Property changes on: trunk/icons/mini/smallicons.png
___________________________________________________________________
Name: svn:mime-type
   + application/octet-stream

Added: trunk/icons/mini/unknown.png
===================================================================
(Binary files differ)


Property changes on: trunk/icons/mini/unknown.png
___________________________________________________________________
Name: svn:mime-type
   + application/octet-stream

Modified: trunk/ltmain.sh
===================================================================
--- trunk/ltmain.sh	2006-03-06 17:48:57 UTC (rev 256)
+++ trunk/ltmain.sh	2006-03-06 18:46:28 UTC (rev 257)
@@ -46,8 +46,8 @@
 
 PROGRAM=ltmain.sh
 PACKAGE=libtool
-VERSION=1.5.18
-TIMESTAMP=&quot; (1.1220.2.246 2005/05/16 10:00:18)&quot;
+VERSION=1.5.22
+TIMESTAMP=&quot; (1.1220.2.365 2005/12/18 22:14:06)&quot;
 
 # See if we are running on zsh, and set the options which allow our
 # commands through without removal of \ escapes.
@@ -98,14 +98,15 @@
 Xsed=&quot;${SED}&quot;' -e 1s/^X//'
 sed_quote_subst='s/\([\\`\\&quot;$\\\\]\)/\\\1/g'
 # test EBCDIC or ASCII
-case `echo A|tr A '\301'` in
- A) # EBCDIC based system
-  SP2NL=&quot;tr '\100' '\n'&quot;
-  NL2SP=&quot;tr '\r\n' '\100\100'&quot;
+case `echo X|tr X '\101'` in
+ A) # ASCII based system
+    # \n is not interpreted correctly by Solaris 8 /usr/ucb/tr
+  SP2NL='tr \040 \012'
+  NL2SP='tr \015\012 \040\040'
   ;;
- *) # Assume ASCII based system
-  SP2NL=&quot;tr '\040' '\012'&quot;
-  NL2SP=&quot;tr '\015\012' '\040\040'&quot;
+ *) # EBCDIC based system
+  SP2NL='tr \100 \n'
+  NL2SP='tr \r\n \100\100'
   ;;
 esac
 
@@ -141,9 +142,10 @@
 show=&quot;$echo&quot;
 show_help=
 execute_dlfiles=
+duplicate_deps=no
+preserve_args=
 lo2o=&quot;s/\\.lo\$/.${objext}/&quot;
 o2lo=&quot;s/\\.${objext}\$/.lo/&quot;
-quote_scanset='[[~#^*{};&lt;&gt;?'&quot;'&quot;' 	]'
 
 if test -z &quot;$max_cmd_len&quot;; then
   i=0
@@ -173,6 +175,43 @@
 # Shell function definitions:
 # This seems to be the best place for them
 
+# func_mktempdir [string]
+# Make a temporary directory that won't clash with other running
+# libtool processes, and avoids race conditions if possible.  If
+# given, STRING is the basename for that directory.
+func_mktempdir ()
+{
+    my_template=&quot;${TMPDIR-/tmp}/${1-$progname}&quot;
+
+    if test &quot;$run&quot; = &quot;:&quot;; then
+      # Return a directory name, but don't create it in dry-run mode
+      my_tmpdir=&quot;${my_template}-$$&quot;
+    else
+
+      # If mktemp works, use that first and foremost
+      my_tmpdir=`mktemp -d &quot;${my_template}-XXXXXXXX&quot; 2&gt;/dev/null`
+
+      if test ! -d &quot;$my_tmpdir&quot;; then
+	# Failing that, at least try and use $RANDOM to avoid a race
+	my_tmpdir=&quot;${my_template}-${RANDOM-0}$$&quot;
+
+	save_mktempdir_umask=`umask`
+	umask 0077
+	$mkdir &quot;$my_tmpdir&quot;
+	umask $save_mktempdir_umask
+      fi
+
+      # If we're not in dry-run mode, bomb out on failure
+      test -d &quot;$my_tmpdir&quot; || {
+        $echo &quot;cannot create temporary directory \`$my_tmpdir'&quot; 1&gt;&amp;2
+	exit $EXIT_FAILURE
+      }
+    fi
+
+    $echo &quot;X$my_tmpdir&quot; | $Xsed
+}
+
+
 # func_win32_libid arg
 # return the library type of file 'arg'
 #
@@ -191,12 +230,11 @@
     if eval $OBJDUMP -f $1 | $SED -e '10q' 2&gt;/dev/null | \
       $EGREP -e 'file format pe-i386(.*architecture: i386)?' &gt;/dev/null ; then
       win32_nmres=`eval $NM -f posix -A $1 | \
-	sed -n -e '1,100{/ I /{x;/import/!{s/^/import/;h;p;};x;};}'`
-      if test &quot;X$win32_nmres&quot; = &quot;Ximport&quot; ; then
-        win32_libid_type=&quot;x86 archive import&quot;
-      else
-        win32_libid_type=&quot;x86 archive static&quot;
-      fi
+	$SED -n -e '1,100{/ I /{s,.*,import,;p;q;};}'`
+      case $win32_nmres in
+      import*)  win32_libid_type=&quot;x86 archive import&quot;;;
+      *)        win32_libid_type=&quot;x86 archive static&quot;;;
+      esac
     fi
     ;;
   *DLL*)
@@ -226,7 +264,7 @@
       CC_quoted=
       for arg in $CC; do
 	case $arg in
-	  *$quote_scanset* | *]* | *\|* | *\&amp;* | *\(* | *\)* | &quot;&quot;)
+	  *[\[\~\#\^\&amp;\*\(\)\{\}\|\;\&lt;\&gt;\?\'\ \	]*|*]*|&quot;&quot;)
 	  arg=&quot;\&quot;$arg\&quot;&quot;
 	  ;;
 	esac
@@ -247,7 +285,7 @@
 	    for arg in $CC; do
 	    # Double-quote args containing other shell metacharacters.
 	    case $arg in
-	      *$quote_scanset* | *]* | *\|* | *\&amp;* | *\(* | *\)* | &quot;&quot;)
+	      *[\[\~\#\^\&amp;\*\(\)\{\}\|\;\&lt;\&gt;\?\'\ \	]*|*]*|&quot;&quot;)
 	      arg=&quot;\&quot;$arg\&quot;&quot;
 	      ;;
 	    esac
@@ -257,6 +295,9 @@
 	    trimedcc=`echo ${CC} | $SED -e &quot;s/${host}-//g&quot;`
 	    # and sometimes libtool has CC=&lt;HOST&gt;-gcc but user does CC=gcc
 	    extendcc=${host}-${CC}
+	    # and sometimes libtool has CC=&lt;OLDHOST&gt;-gcc but user has CC=&lt;NEWHOST&gt;-gcc  
+	    # (Gentoo-specific hack because we always export $CHOST)
+	    mungedcc=${CHOST-${host}}-${trimedcc}
 	    case &quot;$@ &quot; in
 	      &quot;cc &quot;* | &quot; cc &quot;* | &quot;${host}-cc &quot;* | &quot; ${host}-cc &quot;*|\
 	      &quot;gcc &quot;* | &quot; gcc &quot;* | &quot;${host}-gcc &quot;* | &quot; ${host}-gcc &quot;*)
@@ -264,6 +305,7 @@
 	      break ;;
 	      &quot;$trimedcc &quot;* | &quot; $trimedcc &quot;* | &quot;`$echo $trimedcc` &quot;* | &quot; `$echo $trimedcc` &quot;*|\
 	      &quot;$extendcc &quot;* | &quot; $extendcc &quot;* | &quot;`$echo $extendcc` &quot;* | &quot; `$echo $extendcc` &quot;*|\
+	      &quot;$mungedcc &quot;* | &quot; $mungedcc &quot;* | &quot;`$echo $mungedcc` &quot;* | &quot; `$echo $mungedcc` &quot;*|\
 	      &quot; $CC &quot;* | &quot;$CC &quot;* | &quot; `$echo $CC` &quot;* | &quot;`$echo $CC` &quot;* | &quot; $CC_quoted&quot;* | &quot;$CC_quoted &quot;* | &quot; `$echo $CC_quoted` &quot;* | &quot;`$echo $CC_quoted` &quot;*)
 	      # The compiler in the base compile command matches
 	      # the one in the tagged configuration.
@@ -339,9 +381,9 @@
       $run ${rm}r &quot;$my_xdir&quot;
       $show &quot;$mkdir $my_xdir&quot;
       $run $mkdir &quot;$my_xdir&quot;
-      status=$?
-      if test &quot;$status&quot; -ne 0 &amp;&amp; test ! -d &quot;$my_xdir&quot;; then
-	exit $status
+      exit_status=$?
+      if test &quot;$exit_status&quot; -ne 0 &amp;&amp; test ! -d &quot;$my_xdir&quot;; then
+	exit $exit_status
       fi
       case $host in
       *-darwin*)
@@ -381,7 +423,7 @@
  	    func_extract_an_archive &quot;$my_xdir&quot; &quot;$my_xabs&quot;
 	  fi # $darwin_arches
 	fi # $run
-      ;;
+	;;
       *)
         func_extract_an_archive &quot;$my_xdir&quot; &quot;$my_xabs&quot;
         ;;
@@ -396,6 +438,8 @@
 # Darwin sucks
 eval std_shrext=\&quot;$shrext_cmds\&quot;
 
+disable_libs=no
+
 # Parse our command line options once, thoroughly.
 while test &quot;$#&quot; -gt 0
 do
@@ -512,7 +556,11 @@
     preserve_args=&quot;$preserve_args $arg&quot;
     ;;
 
-  --tag) prevopt=&quot;--tag&quot; prev=tag ;;
+  --tag)
+    prevopt=&quot;--tag&quot;
+    prev=tag
+    preserve_args=&quot;$preserve_args --tag&quot;
+    ;;
   --tag=*)
     set tag &quot;$optarg&quot; ${1+&quot;$@&quot;}
     shift
@@ -544,6 +592,18 @@
   exit $EXIT_FAILURE
 fi
 
+case $disable_libs in
+no) 
+  ;;
+shared)
+  build_libtool_libs=no
+  build_old_libs=yes
+  ;;
+static)
+  build_old_libs=`case $build_libtool_libs in yes) echo no;; *) echo yes;; esac`
+  ;;
+esac
+
 # If this variable is set in any of the actions, the command in it
 # will be execed at the end.  This prevents here-documents from being
 # left over by shells.
@@ -620,7 +680,7 @@
 
     for arg
     do
-      case &quot;$arg_mode&quot; in
+      case $arg_mode in
       arg  )
 	# do not &quot;continue&quot;.  Instead, add this to base_compile
 	lastarg=&quot;$arg&quot;
@@ -671,7 +731,7 @@
 	    # Many Bourne shells cannot handle close brackets correctly
 	    # in scan sets, so we specify it separately.
 	    case $arg in
-	      *$quote_scanset* | *]* | *\|* | *\&amp;* | *\(* | *\)* | &quot;&quot;)
+	      *[\[\~\#\^\&amp;\*\(\)\{\}\|\;\&lt;\&gt;\?\'\ \	]*|*]*|&quot;&quot;)
 	      arg=&quot;\&quot;$arg\&quot;&quot;
 	      ;;
 	    esac
@@ -706,7 +766,7 @@
       # in scan sets (worked around with variable expansion),
       # and furthermore cannot handle '|' '&amp;' '(' ')' in scan sets 
       # at all, so we specify them separately.
-      *$quote_scanset* | *]* | *\|* | *\&amp;* | *\(* | *\)* | &quot;&quot;)
+      *[\[\~\#\^\&amp;\*\(\)\{\}\|\;\&lt;\&gt;\?\'\ \	]*|*]*|&quot;&quot;)
 	lastarg=&quot;\&quot;$lastarg\&quot;&quot;
 	;;
       esac
@@ -781,13 +841,12 @@
 
     qlibobj=`$echo &quot;X$libobj&quot; | $Xsed -e &quot;$sed_quote_subst&quot;`
     case $qlibobj in
-      *$quote_scanset* | *]* | *\|* | *\&amp;* | *\(* | *\)* | &quot;&quot;)
+      *[\[\~\#\^\&amp;\*\(\)\{\}\|\;\&lt;\&gt;\?\'\ \	]*|*]*|&quot;&quot;)
 	qlibobj=&quot;\&quot;$qlibobj\&quot;&quot; ;;
     esac
-    if test &quot;X$libobj&quot; != &quot;X$qlibobj&quot;; then
-	$echo &quot;$modename: libobj name \`$libobj' may not contain shell special characters.&quot;
-	exit $EXIT_FAILURE
-    fi
+    test &quot;X$libobj&quot; != &quot;X$qlibobj&quot; \
+	&amp;&amp; $echo &quot;X$libobj&quot; | grep '[]~#^*{};&lt;&gt;?&quot;'&quot;'&quot;' 	&amp;()|`$[]' \
+	&amp;&amp; $echo &quot;$modename: libobj name \`$libobj' may not contain shell special characters.&quot;
     objname=`$echo &quot;X$obj&quot; | $Xsed -e 's%^.*/%%'`
     xdir=`$echo &quot;X$obj&quot; | $Xsed -e 's%/[^/]*$%%'`
     if test &quot;X$xdir&quot; = &quot;X$obj&quot;; then
@@ -868,7 +927,7 @@
     fi
     qsrcfile=`$echo &quot;X$srcfile&quot; | $Xsed -e &quot;$sed_quote_subst&quot;`
     case $qsrcfile in
-      *$quote_scanset* | *]* | *\|* | *\&amp;* | *\(* | *\)* | &quot;&quot;)
+      *[\[\~\#\^\&amp;\*\(\)\{\}\|\;\&lt;\&gt;\?\'\ \	]*|*]*|&quot;&quot;)
       qsrcfile=&quot;\&quot;$qsrcfile\&quot;&quot; ;;
     esac
 
@@ -901,9 +960,9 @@
       if test ! -d &quot;${xdir}$objdir&quot;; then
 	$show &quot;$mkdir ${xdir}$objdir&quot;
 	$run $mkdir ${xdir}$objdir
-	status=$?
-	if test &quot;$status&quot; -ne 0 &amp;&amp; test ! -d &quot;${xdir}$objdir&quot;; then
-	  exit $status
+	exit_status=$?
+	if test &quot;$exit_status&quot; -ne 0 &amp;&amp; test ! -d &quot;${xdir}$objdir&quot;; then
+	  exit $exit_status
 	fi
       fi
 
@@ -1106,6 +1165,7 @@
     no_install=no
     objs=
     non_pic_objects=
+    notinst_path= # paths that contain not-installed libtool libraries
     precious_files_regex=
     prefer_static_libs=no
     preload=no
@@ -1134,14 +1194,15 @@
 	  if test -n &quot;$link_static_flag&quot;; then
 	    dlopen_self=$dlopen_self_static
 	  fi
+	  prefer_static_libs=yes
 	else
 	  if test -z &quot;$pic_flag&quot; &amp;&amp; test -n &quot;$link_static_flag&quot;; then
 	    dlopen_self=$dlopen_self_static
 	  fi
+	  prefer_static_libs=built
 	fi
 	build_libtool_libs=no
 	build_old_libs=yes
-	prefer_static_libs=yes
 	break
 	;;
       esac
@@ -1155,7 +1216,7 @@
       arg=&quot;$1&quot;
       shift
       case $arg in
-      *$quote_scanset* | *]* | *\|* | *\&amp;* | *\(* | *\)* | &quot;&quot;)
+      *[\[\~\#\^\&amp;\*\(\)\{\}\|\;\&lt;\&gt;\?\'\ \	]*|*]*|&quot;&quot;)
 	qarg=\&quot;`$echo &quot;X$arg&quot; | $Xsed -e &quot;$sed_quote_subst&quot;`\&quot; ### testsuite: skip nested quoting test
 	;;
       *) qarg=$arg ;;
@@ -1316,6 +1377,11 @@
 		  if test -z &quot;$pic_object&quot; || test &quot;$pic_object&quot; = none ; then
 		    arg=&quot;$non_pic_object&quot;
 		  fi
+		else
+		  # If the PIC object exists, use it instead.
+		  # $xdir was prepended to $pic_object above.
+		  non_pic_object=&quot;$pic_object&quot;
+		  non_pic_objects=&quot;$non_pic_objects $non_pic_object&quot;
 		fi
 	      else
 		# Only an error if not doing a dry-run.
@@ -1399,8 +1465,8 @@
 	  prev=
 	  continue
 	  ;;
-        darwin_framework)
-	  compiler_flags=&quot;$compiler_flags $arg&quot;
+	darwin_framework|darwin_framework_skip)
+	  test &quot;$prev&quot; = &quot;darwin_framework&quot; &amp;&amp; compiler_flags=&quot;$compiler_flags $arg&quot;
 	  compile_command=&quot;$compile_command $arg&quot;
 	  finalize_command=&quot;$finalize_command $arg&quot;
 	  prev=
@@ -1464,13 +1530,17 @@
 	continue
 	;;
 
-      -framework)
-        prev=darwin_framework
-        compiler_flags=&quot;$compiler_flags $arg&quot;
+      -framework|-arch|-isysroot)
+	case &quot; $CC &quot; in
+	  *&quot; ${arg} ${1} &quot;* | *&quot; ${arg}	${1} &quot;*) 
+		prev=darwin_framework_skip ;;
+	  *) compiler_flags=&quot;$compiler_flags $arg&quot;
+	     prev=darwin_framework ;;
+	esac
 	compile_command=&quot;$compile_command $arg&quot;
 	finalize_command=&quot;$finalize_command $arg&quot;
-        continue
-        ;;
+	continue
+	;;
 
       -inst-prefix-dir)
 	prev=inst_prefix
@@ -1498,7 +1568,8 @@
 	  absdir=`cd &quot;$dir&quot; &amp;&amp; pwd`
 	  if test -z &quot;$absdir&quot;; then
 	    $echo &quot;$modename: cannot determine absolute directory name of \`$dir'&quot; 1&gt;&amp;2
-	    exit $EXIT_FAILURE
+	    absdir=&quot;$dir&quot;
+	    notinst_path=&quot;$notinst_path $dir&quot;
 	  fi
 	  dir=&quot;$absdir&quot;
 	  ;;
@@ -1512,10 +1583,15 @@
 	esac
 	case $host in
 	*-*-cygwin* | *-*-mingw* | *-*-pw32* | *-*-os2*)
+	  testbindir=`$echo &quot;X$dir&quot; | $Xsed -e 's*/lib$*/bin*'`
 	  case :$dllsearchpath: in
 	  *&quot;:$dir:&quot;*) ;;
 	  *) dllsearchpath=&quot;$dllsearchpath:$dir&quot;;;
 	  esac
+	  case :$dllsearchpath: in
+	  *&quot;:$testbindir:&quot;*) ;;
+	  *) dllsearchpath=&quot;$dllsearchpath:$testbindir&quot;;;
+	  esac
 	  ;;
 	esac
 	continue
@@ -1524,11 +1600,11 @@
       -l*)
 	if test &quot;X$arg&quot; = &quot;X-lc&quot; || test &quot;X$arg&quot; = &quot;X-lm&quot;; then
 	  case $host in
-	  *-*-cygwin* | *-*-pw32* | *-*-beos*)
+	  *-*-cygwin* | *-*-mingw* | *-*-pw32* | *-*-beos*)
 	    # These systems don't actually have a C or math library (as such)
 	    continue
 	    ;;
-	  *-*-mingw* | *-*-os2*)
+	  *-*-os2*)
 	    # These systems don't actually have a C library (as such)
 	    test &quot;X$arg&quot; = &quot;X-lc&quot; &amp;&amp; continue
 	    ;;
@@ -1540,6 +1616,15 @@
 	    # Rhapsody C and math libraries are in the System framework
 	    deplibs=&quot;$deplibs -framework System&quot;
 	    continue
+	    ;;
+	  *-*-sco3.2v5* | *-*-sco5v6*)
+	    # Causes problems with __ctype
+	    test &quot;X$arg&quot; = &quot;X-lc&quot; &amp;&amp; continue
+	    ;;
+	  *-*-sysv4.2uw2* | *-*-sysv5* | *-*-unixware* | *-*-OpenUNIX*)
+	    # Compiler inserts libc in the correct place for threads to work
+	    test &quot;X$arg&quot; = &quot;X-lc&quot; &amp;&amp; continue
+	    ;;
 	  esac
 	elif test &quot;X$arg&quot; = &quot;X-lc_r&quot;; then
 	 case $host in
@@ -1581,21 +1666,24 @@
       # +DA*, +DD* enable 64-bit mode on the HP compiler
       # -q* pass through compiler args for the IBM compiler
       # -m* pass through architecture-specific compiler args for GCC
-      -64|-mips[0-9]|-r[0-9][0-9]*|-xarch=*|-xtarget=*|+DA*|+DD*|-q*|-m*)
+      # -m*, -t[45]*, -txscale* pass through architecture-specific
+      # compiler args for GCC
+      # -pg pass through profiling flag for GCC
+      # @file GCC response files
+      -64|-mips[0-9]|-r[0-9][0-9]*|-xarch=*|-xtarget=*|+DA*|+DD*|-q*|-m*|-pg| \
+      -t[45]*|-txscale*|@*)
 
 	# Unknown arguments in both finalize_command and compile_command need
 	# to be aesthetically quoted because they are evaled later.
 	arg=`$echo &quot;X$arg&quot; | $Xsed -e &quot;$sed_quote_subst&quot;`
 	case $arg in
-	*$quote_scanset* | *]* | *\|* | *\&amp;* | *\(* | *\)* | &quot;&quot;)
+	*[\[\~\#\^\&amp;\*\(\)\{\}\|\;\&lt;\&gt;\?\'\ \	]*|*]*|&quot;&quot;)
 	  arg=&quot;\&quot;$arg\&quot;&quot;
 	  ;;
 	esac
         compile_command=&quot;$compile_command $arg&quot;
         finalize_command=&quot;$finalize_command $arg&quot;
-        if test &quot;$with_gcc&quot; = &quot;yes&quot; ; then
-          compiler_flags=&quot;$compiler_flags $arg&quot;
-        fi
+        compiler_flags=&quot;$compiler_flags $arg&quot;
         continue
         ;;
 
@@ -1703,7 +1791,7 @@
 	for flag in $args; do
 	  IFS=&quot;$save_ifs&quot;
 	  case $flag in
-	    *$quote_scanset* | *]* | *\|* | *\&amp;* | *\(* | *\)* | &quot;&quot;)
+	    *[\[\~\#\^\&amp;\*\(\)\{\}\|\;\&lt;\&gt;\?\'\ \	]*|*]*|&quot;&quot;)
 	    flag=&quot;\&quot;$flag\&quot;&quot;
 	    ;;
 	  esac
@@ -1721,7 +1809,7 @@
 	for flag in $args; do
 	  IFS=&quot;$save_ifs&quot;
 	  case $flag in
-	    *$quote_scanset* | *]* | *\|* | *\&amp;* | *\(* | *\)* | &quot;&quot;)
+	    *[\[\~\#\^\&amp;\*\(\)\{\}\|\;\&lt;\&gt;\?\'\ \	]*|*]*|&quot;&quot;)
 	    flag=&quot;\&quot;$flag\&quot;&quot;
 	    ;;
 	  esac
@@ -1748,18 +1836,13 @@
 	continue
 	;;
 
-      -Kthread | -mthreads | -mt | -pthread | -pthreads | -threads | -qthreaded | -kthread )
-        compiler_flags=&quot;$compiler_flags $arg&quot;
-        continue
-        ;;
-
       # Some other compiler flag.
       -* | +*)
 	# Unknown arguments in both finalize_command and compile_command need
 	# to be aesthetically quoted because they are evaled later.
 	arg=`$echo &quot;X$arg&quot; | $Xsed -e &quot;$sed_quote_subst&quot;`
 	case $arg in
-	*$quote_scanset* | *]* | *\|* | *\&amp;* | *\(* | *\)* | &quot;&quot;)
+	*[\[\~\#\^\&amp;\*\(\)\{\}\|\;\&lt;\&gt;\?\'\ \	]*|*]*|&quot;&quot;)
 	  arg=&quot;\&quot;$arg\&quot;&quot;
 	  ;;
 	esac
@@ -1838,6 +1921,11 @@
 	    if test -z &quot;$pic_object&quot; || test &quot;$pic_object&quot; = none ; then
 	      arg=&quot;$non_pic_object&quot;
 	    fi
+	  else
+	    # If the PIC object exists, use it instead.
+	    # $xdir was prepended to $pic_object above.
+	    non_pic_object=&quot;$pic_object&quot;
+	    non_pic_objects=&quot;$non_pic_objects $non_pic_object&quot;
 	  fi
 	else
 	  # Only an error if not doing a dry-run.
@@ -1893,7 +1981,7 @@
 	# to be aesthetically quoted because they are evaled later.
 	arg=`$echo &quot;X$arg&quot; | $Xsed -e &quot;$sed_quote_subst&quot;`
 	case $arg in
-	*$quote_scanset* | *]* | *\|* | *\&amp;* | *\(* | *\)* | &quot;&quot;)
+	*[\[\~\#\^\&amp;\*\(\)\{\}\|\;\&lt;\&gt;\?\'\ \	]*|*]*|&quot;&quot;)
 	  arg=&quot;\&quot;$arg\&quot;&quot;
 	  ;;
 	esac
@@ -1943,9 +2031,9 @@
     if test ! -d &quot;$output_objdir&quot;; then
       $show &quot;$mkdir $output_objdir&quot;
       $run $mkdir $output_objdir
-      status=$?
-      if test &quot;$status&quot; -ne 0 &amp;&amp; test ! -d &quot;$output_objdir&quot;; then
-	exit $status
+      exit_status=$?
+      if test &quot;$exit_status&quot; -ne 0 &amp;&amp; test ! -d &quot;$output_objdir&quot;; then
+	exit $exit_status
       fi
     fi
 
@@ -2008,7 +2096,6 @@
     newlib_search_path=
     need_relink=no # whether we're linking any uninstalled libtool libraries
     notinst_deplibs= # not-installed libtool libraries
-    notinst_path= # paths that contain not-installed libtool libraries
     case $linkmode in
     lib)
 	passes=&quot;conv link&quot;
@@ -2244,7 +2331,7 @@
 	esac # case $deplib
 	if test &quot;$found&quot; = yes || test -f &quot;$lib&quot;; then :
 	else
-	  $echo &quot;$modename: cannot find the library \`$lib'&quot; 1&gt;&amp;2
+	  $echo &quot;$modename: cannot find the library \`$lib' or unhandled argument \`$deplib'&quot; 1&gt;&amp;2
 	  exit $EXIT_FAILURE
 	fi
 
@@ -2458,7 +2545,7 @@
 	      case &quot;$temp_rpath &quot; in
 	      *&quot; $dir &quot;*) ;;
 	      *&quot; $absdir &quot;*) ;;
-	      *) temp_rpath=&quot;$temp_rpath $dir&quot; ;;
+	      *) temp_rpath=&quot;$temp_rpath $absdir&quot; ;;
 	      esac
 	    fi
 
@@ -2495,8 +2582,12 @@
 	fi
 
 	link_static=no # Whether the deplib will be linked statically
+	use_static_libs=$prefer_static_libs
+	if test &quot;$use_static_libs&quot; = built &amp;&amp; test &quot;$installed&quot; = yes ; then
+	  use_static_libs=no
+	fi
 	if test -n &quot;$library_names&quot; &amp;&amp;
-	   { test &quot;$prefer_static_libs&quot; = no || test -z &quot;$old_library&quot;; }; then
+	   { test &quot;$use_static_libs&quot; = no || test -z &quot;$old_library&quot;; }; then
 	  if test &quot;$installed&quot; = no; then
 	    notinst_deplibs=&quot;$notinst_deplibs $lib&quot;
 	    need_relink=yes
@@ -2609,11 +2700,15 @@
 	      if test &quot;$hardcode_direct&quot; = no; then
 		add=&quot;$dir/$linklib&quot;
 		case $host in
-		  *-*-sco3.2v5* ) add_dir=&quot;-L$dir&quot; ;;
+		  *-*-sco3.2v5.0.[024]*) add_dir=&quot;-L$dir&quot; ;;
+		  *-*-sysv4*uw2*) add_dir=&quot;-L$dir&quot; ;;
+		  *-*-sysv5OpenUNIX* | *-*-sysv5UnixWare7.[01].[10]* | \
+		    *-*-unixware7*) add_dir=&quot;-L$dir&quot; ;;
 		  *-*-darwin* )
 		    # if the lib is a module then we can not link against
 		    # it, someone is ignoring the new warnings I added
-		    if /usr/bin/file -L $add 2&gt; /dev/null | $EGREP &quot;bundle&quot; &gt;/dev/null ; then
+		    if /usr/bin/file -L $add 2&gt; /dev/null |
+                      $EGREP &quot;: [^:]* bundle&quot; &gt;/dev/null ; then
 		      $echo &quot;** Warning, lib $linklib is a module, not a shared library&quot;
 		      if test -z &quot;$old_library&quot; ; then
 		        $echo
@@ -2644,7 +2739,7 @@
 		add_dir=&quot;-L$dir&quot;
 		# Try looking first in the location we're being installed to.
 		if test -n &quot;$inst_prefix_dir&quot;; then
-		  case &quot;$libdir&quot; in
+		  case $libdir in
 		    [\\/]*)
 		      add_dir=&quot;$add_dir -L$inst_prefix_dir$libdir&quot;
 		      ;;
@@ -2717,7 +2812,7 @@
 	      add_dir=&quot;-L$libdir&quot;
 	      # Try looking first in the location we're being installed to.
 	      if test -n &quot;$inst_prefix_dir&quot;; then
-		case &quot;$libdir&quot; in
+		case $libdir in
 		  [\\/]*)
 		    add_dir=&quot;$add_dir -L$inst_prefix_dir$libdir&quot;
 		    ;;
@@ -2778,8 +2873,6 @@
 	      fi
 	    fi
 	  else
-	    convenience=&quot;$convenience $dir/$old_library&quot;
-	    old_convenience=&quot;$old_convenience $dir/$old_library&quot;
 	    deplibs=&quot;$dir/$old_library $deplibs&quot;
 	    link_static=yes
 	  fi
@@ -3366,9 +3459,9 @@
 
       # Eliminate all temporary directories.
       for path in $notinst_path; do
-	lib_search_path=`$echo &quot;$lib_search_path &quot; | ${SED} -e 's% $path % %g'`
-	deplibs=`$echo &quot;$deplibs &quot; | ${SED} -e 's% -L$path % %g'`
-	dependency_libs=`$echo &quot;$dependency_libs &quot; | ${SED} -e 's% -L$path % %g'`
+	lib_search_path=`$echo &quot;$lib_search_path &quot; | ${SED} -e &quot;s% $path % %g&quot;`
+	deplibs=`$echo &quot;$deplibs &quot; | ${SED} -e &quot;s% -L$path % %g&quot;`
+	dependency_libs=`$echo &quot;$dependency_libs &quot; | ${SED} -e &quot;s% -L$path % %g&quot;`
       done
 
       if test -n &quot;$xrpath&quot;; then
@@ -3421,8 +3514,13 @@
 	    ;;
 	  *-*-openbsd* | *-*-freebsd* | *-*-dragonfly*)
 	    # Do not include libc due to us having libc/libc_r.
-	    test &quot;X$arg&quot; = &quot;X-lc&quot; &amp;&amp; continue
 	    ;;
+	  *-*-sco3.2v5* | *-*-sco5v6*)
+	    # Causes problems with __ctype
+	    ;;
+	  *-*-sysv4.2uw2* | *-*-sysv5* | *-*-unixware* | *-*-OpenUNIX*)
+	    # Compiler inserts libc in the correct place for threads to work
+	    ;;
  	  *)
 	    # Add libc to deplibs on all other systems if necessary.
 	    if test &quot;$build_libtool_need_lc&quot; = &quot;yes&quot;; then
@@ -3465,11 +3563,11 @@
 	  int main() { return 0; }
 EOF
 	  $rm conftest
-	  $LTCC -o conftest conftest.c $deplibs
+	  $LTCC $LTCFLAGS -o conftest conftest.c $deplibs
 	  if test &quot;$?&quot; -eq 0 ; then
 	    ldd_output=`ldd conftest`
 	    for i in $deplibs; do
-	      name=&quot;`expr $i : '-l\(.*\)'`&quot;
+	      name=`expr $i : '-l\(.*\)'`
 	      # If $name is empty we are operating on a -L argument.
               if test &quot;$name&quot; != &quot;&quot; &amp;&amp; test &quot;$name&quot; -ne &quot;0&quot;; then
 		if test &quot;X$allow_libtool_libs_with_static_runtimes&quot; = &quot;Xyes&quot; ; then
@@ -3506,11 +3604,11 @@
 	    # Error occurred in the first compile.  Let's try to salvage
 	    # the situation: Compile a separate program for each library.
 	    for i in $deplibs; do
-	      name=&quot;`expr $i : '-l\(.*\)'`&quot;
+	      name=`expr $i : '-l\(.*\)'`
 	      # If $name is empty we are operating on a -L argument.
               if test &quot;$name&quot; != &quot;&quot; &amp;&amp; test &quot;$name&quot; != &quot;0&quot;; then
 		$rm conftest
-		$LTCC -o conftest conftest.c $i
+		$LTCC $LTCFLAGS -o conftest conftest.c $i
 		# Did it work?
 		if test &quot;$?&quot; -eq 0 ; then
 		  ldd_output=`ldd conftest`
@@ -3558,7 +3656,7 @@
 	  set dummy $deplibs_check_method
 	  file_magic_regex=`expr &quot;$deplibs_check_method&quot; : &quot;$2 \(.*\)&quot;`
 	  for a_deplib in $deplibs; do
-	    name=&quot;`expr $a_deplib : '-l\(.*\)'`&quot;
+	    name=`expr $a_deplib : '-l\(.*\)'`
 	    # If $name is empty we are operating on a -L argument.
             if test &quot;$name&quot; != &quot;&quot; &amp;&amp; test  &quot;$name&quot; != &quot;0&quot;; then
 	      if test &quot;X$allow_libtool_libs_with_static_runtimes&quot; = &quot;Xyes&quot; ; then
@@ -3634,7 +3732,7 @@
 	  set dummy $deplibs_check_method
 	  match_pattern_regex=`expr &quot;$deplibs_check_method&quot; : &quot;$2 \(.*\)&quot;`
 	  for a_deplib in $deplibs; do
-	    name=&quot;`expr $a_deplib : '-l\(.*\)'`&quot;
+	    name=`expr $a_deplib : '-l\(.*\)'`
 	    # If $name is empty we are operating on a -L argument.
 	    if test -n &quot;$name&quot; &amp;&amp; test &quot;$name&quot; != &quot;0&quot;; then
 	      if test &quot;X$allow_libtool_libs_with_static_runtimes&quot; = &quot;Xyes&quot; ; then
@@ -3764,6 +3862,35 @@
 	deplibs=$newdeplibs
       fi
 
+
+      # move library search paths that coincide with paths to not yet
+      # installed libraries to the beginning of the library search list
+      new_libs=
+      for path in $notinst_path; do
+	case &quot; $new_libs &quot; in
+	*&quot; -L$path/$objdir &quot;*) ;;
+	*)
+	  case &quot; $deplibs &quot; in
+	  *&quot; -L$path/$objdir &quot;*)
+	    new_libs=&quot;$new_libs -L$path/$objdir&quot; ;;
+	  esac
+	  ;;
+	esac
+      done
+      for deplib in $deplibs; do
+	case $deplib in
+	-L*)
+	  case &quot; $new_libs &quot; in
+	  *&quot; $deplib &quot;*) ;;
+	  *) new_libs=&quot;$new_libs $deplib&quot; ;;
+	  esac
+	  ;;
+	*) new_libs=&quot;$new_libs $deplib&quot; ;;
+	esac
+      done
+      deplibs=&quot;$new_libs&quot;
+
+
       # All the library-specific variables (install_libdir is set above).
       library_names=
       old_library=
@@ -3847,6 +3974,7 @@
 	fi
 
 	lib=&quot;$output_objdir/$realname&quot;
+	linknames=
 	for link
 	do
 	  linknames=&quot;$linknames $link&quot;
@@ -3875,6 +4003,9 @@
 	        # The command line is too long to execute in one step.
 	        $show &quot;using reloadable object file for export list...&quot;
 	        skipped_export=:
+		# Break out early, otherwise skipped_export may be
+		# set to false by a later but shorter cmd.
+		break
 	      fi
 	    done
 	    IFS=&quot;$save_ifs&quot;
@@ -3944,7 +4075,8 @@
 	  fi
 	fi
 
-	if test &quot;X$skipped_export&quot; != &quot;X:&quot; &amp;&amp; len=`expr &quot;X$test_cmds&quot; : &quot;.*&quot;` &amp;&amp;
+	if test &quot;X$skipped_export&quot; != &quot;X:&quot; &amp;&amp;
+	   len=`expr &quot;X$test_cmds&quot; : &quot;.*&quot; 2&gt;/dev/null` &amp;&amp;
 	   test &quot;$len&quot; -le &quot;$max_cmd_len&quot; || test &quot;$max_cmd_len&quot; -le -1; then
 	  :
 	else
@@ -3979,7 +4111,7 @@
 	  do
 	    eval test_cmds=\&quot;$reload_cmds $objlist $last_robj\&quot;
 	    if test &quot;X$objlist&quot; = X ||
-	       { len=`expr &quot;X$test_cmds&quot; : &quot;.*&quot;` &amp;&amp;
+	       { len=`expr &quot;X$test_cmds&quot; : &quot;.*&quot; 2&gt;/dev/null` &amp;&amp;
 		 test &quot;$len&quot; -le &quot;$max_cmd_len&quot;; }; then
 	      objlist=&quot;$objlist $obj&quot;
 	    else
@@ -4069,13 +4201,30 @@
 	  IFS=&quot;$save_ifs&quot;
 	  eval cmd=\&quot;$cmd\&quot;
 	  $show &quot;$cmd&quot;
-	  $run eval &quot;$cmd&quot; || exit $?
+	  $run eval &quot;$cmd&quot; || {
+	    lt_exit=$?
+
+	    # Restore the uninstalled library and exit
+	    if test &quot;$mode&quot; = relink; then
+	      $run eval '(cd $output_objdir &amp;&amp; $rm ${realname}T &amp;&amp; $mv ${realname}U $realname)'
+	    fi
+
+	    exit $lt_exit
+	  }
 	done
 	IFS=&quot;$save_ifs&quot;
 
 	# Restore the uninstalled library and exit
 	if test &quot;$mode&quot; = relink; then
 	  $run eval '(cd $output_objdir &amp;&amp; $rm ${realname}T &amp;&amp; $mv $realname ${realname}T &amp;&amp; $mv &quot;$realname&quot;U $realname)' || exit $?
+
+	  if test -n &quot;$convenience&quot;; then
+	    if test -z &quot;$whole_archive_flag_spec&quot;; then
+	      $show &quot;${rm}r $gentop&quot;
+	      $run ${rm}r &quot;$gentop&quot;
+	    fi
+	  fi
+
 	  exit $EXIT_SUCCESS
 	fi
 
@@ -4257,6 +4406,35 @@
         ;;
       esac
 
+
+      # move library search paths that coincide with paths to not yet
+      # installed libraries to the beginning of the library search list
+      new_libs=
+      for path in $notinst_path; do
+	case &quot; $new_libs &quot; in
+	*&quot; -L$path/$objdir &quot;*) ;;
+	*)
+	  case &quot; $compile_deplibs &quot; in
+	  *&quot; -L$path/$objdir &quot;*)
+	    new_libs=&quot;$new_libs -L$path/$objdir&quot; ;;
+	  esac
+	  ;;
+	esac
+      done
+      for deplib in $compile_deplibs; do
+	case $deplib in
+	-L*)
+	  case &quot; $new_libs &quot; in
+	  *&quot; $deplib &quot;*) ;;
+	  *) new_libs=&quot;$new_libs $deplib&quot; ;;
+	  esac
+	  ;;
+	*) new_libs=&quot;$new_libs $deplib&quot; ;;
+	esac
+      done
+      compile_deplibs=&quot;$new_libs&quot;
+
+
       compile_command=&quot;$compile_command $compile_deplibs&quot;
       finalize_command=&quot;$finalize_command $finalize_deplibs&quot;
 
@@ -4301,10 +4479,15 @@
 	fi
 	case $host in
 	*-*-cygwin* | *-*-mingw* | *-*-pw32* | *-*-os2*)
+	  testbindir=`$echo &quot;X$libdir&quot; | $Xsed -e 's*/lib$*/bin*'`
 	  case :$dllsearchpath: in
 	  *&quot;:$libdir:&quot;*) ;;
 	  *) dllsearchpath=&quot;$dllsearchpath:$libdir&quot;;;
 	  esac
+	  case :$dllsearchpath: in
+	  *&quot;:$testbindir:&quot;*) ;;
+	  *) dllsearchpath=&quot;$dllsearchpath:$testbindir&quot;;;
+	  esac
 	  ;;
 	esac
       done
@@ -4420,11 +4603,23 @@
 	    if test -z &quot;$export_symbols&quot;; then
 	      export_symbols=&quot;$output_objdir/$outputname.exp&quot;
 	      $run $rm $export_symbols
-	      $run eval &quot;${SED} -n -e '/^: @PROGRAM@$/d' -e 's/^.* \(.*\)$/\1/p' &quot;'&lt; &quot;$nlist&quot; &gt; &quot;$export_symbols&quot;'
+	      $run eval &quot;${SED} -n -e '/^: @PROGRAM@ $/d' -e 's/^.* \(.*\)$/\1/p' &quot;'&lt; &quot;$nlist&quot; &gt; &quot;$export_symbols&quot;'
+              case $host in
+              *cygwin* | *mingw* )
+	        $run eval &quot;echo EXPORTS &quot;'&gt; &quot;$output_objdir/$outputname.def&quot;'
+		$run eval 'cat &quot;$export_symbols&quot; &gt;&gt; &quot;$output_objdir/$outputname.def&quot;'
+                ;;
+              esac
 	    else
-	      $run eval &quot;${SED} -e 's/\([ ][.*^$]\)/\\\1/g' -e 's/^/ /' -e 's/$/$/'&quot;' &lt; &quot;$export_symbols&quot; &gt; &quot;$output_objdir/$outputname.exp&quot;'
+	      $run eval &quot;${SED} -e 's/\([].[*^$]\)/\\\\\1/g' -e 's/^/ /' -e 's/$/$/'&quot;' &lt; &quot;$export_symbols&quot; &gt; &quot;$output_objdir/$outputname.exp&quot;'
 	      $run eval 'grep -f &quot;$output_objdir/$outputname.exp&quot; &lt; &quot;$nlist&quot; &gt; &quot;$nlist&quot;T'
 	      $run eval 'mv &quot;$nlist&quot;T &quot;$nlist&quot;'
+              case $host in
+              *cygwin* | *mingw* )
+	        $run eval &quot;echo EXPORTS &quot;'&gt; &quot;$output_objdir/$outputname.def&quot;'
+		$run eval 'cat &quot;$nlist&quot; &gt;&gt; &quot;$output_objdir/$outputname.def&quot;'
+                ;;
+              esac
 	    fi
 	  fi
 
@@ -4541,16 +4736,29 @@
 	  esac
 
 	  # Now compile the dynamic symbol file.
-	  $show &quot;(cd $output_objdir &amp;&amp; $LTCC -c$no_builtin_flag$pic_flag_for_symtable \&quot;$dlsyms\&quot;)&quot;
-	  $run eval '(cd $output_objdir &amp;&amp; $LTCC -c$no_builtin_flag$pic_flag_for_symtable &quot;$dlsyms&quot;)' || exit $?
+	  $show &quot;(cd $output_objdir &amp;&amp; $LTCC  $LTCFLAGS -c$no_builtin_flag$pic_flag_for_symtable \&quot;$dlsyms\&quot;)&quot;
+	  $run eval '(cd $output_objdir &amp;&amp; $LTCC  $LTCFLAGS -c$no_builtin_flag$pic_flag_for_symtable &quot;$dlsyms&quot;)' || exit $?
 
 	  # Clean up the generated files.
 	  $show &quot;$rm $output_objdir/$dlsyms $nlist ${nlist}S ${nlist}T&quot;
 	  $run $rm &quot;$output_objdir/$dlsyms&quot; &quot;$nlist&quot; &quot;${nlist}S&quot; &quot;${nlist}T&quot;
 
 	  # Transform the symbol file into the correct name.
-	  compile_command=`$echo &quot;X$compile_command&quot; | $Xsed -e &quot;s%@SYMFILE@%$output_objdir/${outputname}S.${objext}%&quot;`
-	  finalize_command=`$echo &quot;X$finalize_command&quot; | $Xsed -e &quot;s%@SYMFILE@%$output_objdir/${outputname}S.${objext}%&quot;`
+          case $host in
+          *cygwin* | *mingw* )
+            if test -f &quot;$output_objdir/${outputname}.def&quot; ; then
+              compile_command=`$echo &quot;X$compile_command&quot; | $Xsed -e &quot;s%@SYMFILE@%$output_objdir/${outputname}.def $output_objdir/${outputname}S.${objext}%&quot;`
+              finalize_command=`$echo &quot;X$finalize_command&quot; | $Xsed -e &quot;s%@SYMFILE@%$output_objdir/${outputname}.def $output_objdir/${outputname}S.${objext}%&quot;`
+            else
+              compile_command=`$echo &quot;X$compile_command&quot; | $Xsed -e &quot;s%@SYMFILE@%$output_objdir/${outputname}S.${objext}%&quot;`
+              finalize_command=`$echo &quot;X$finalize_command&quot; | $Xsed -e &quot;s%@SYMFILE@%$output_objdir/${outputname}S.${objext}%&quot;`
+             fi
+            ;;
+          * )
+            compile_command=`$echo &quot;X$compile_command&quot; | $Xsed -e &quot;s%@SYMFILE@%$output_objdir/${outputname}S.${objext}%&quot;`
+            finalize_command=`$echo &quot;X$finalize_command&quot; | $Xsed -e &quot;s%@SYMFILE@%$output_objdir/${outputname}S.${objext}%&quot;`
+            ;;
+          esac
 	  ;;
 	*)
 	  $echo &quot;$modename: unknown suffix for \`$dlsyms'&quot; 1&gt;&amp;2
@@ -4575,7 +4783,7 @@
 	# We have no uninstalled library dependencies, so finalize right now.
 	$show &quot;$link_command&quot;
 	$run eval &quot;$link_command&quot;
-	status=$?
+	exit_status=$?
 
 	# Delete the generated files.
 	if test -n &quot;$dlsyms&quot;; then
@@ -4583,7 +4791,7 @@
 	  $run $rm &quot;$output_objdir/${outputname}S.${objext}&quot;
 	fi
 
-	exit $status
+	exit $exit_status
       fi
 
       if test -n &quot;$shlibpath_var&quot;; then
@@ -4723,10 +4931,12 @@
 	esac
 	case $host in
 	  *cygwin* | *mingw* )
-	    cwrappersource=`$echo ${objdir}/lt-${outputname}.c`
-	    cwrapper=`$echo ${output}.exe`
-	    $rm $cwrappersource $cwrapper
-	    trap &quot;$rm $cwrappersource $cwrapper; exit $EXIT_FAILURE&quot; 1 2 15
+            output_name=`basename $output`
+            output_path=`dirname $output`
+            cwrappersource=&quot;$output_path/$objdir/lt-$output_name.c&quot;
+            cwrapper=&quot;$output_path/$output_name.exe&quot;
+            $rm $cwrappersource $cwrapper
+            trap &quot;$rm $cwrappersource $cwrapper; exit $EXIT_FAILURE&quot; 1 2 15
 
 	    cat &gt; $cwrappersource &lt;&lt;EOF
 
@@ -4751,6 +4961,9 @@
 #include &lt;malloc.h&gt;
 #include &lt;stdarg.h&gt;
 #include &lt;assert.h&gt;
+#include &lt;string.h&gt;
+#include &lt;ctype.h&gt;
+#include &lt;sys/stat.h&gt;
 
 #if defined(PATH_MAX)
 # define LT_PATHMAX PATH_MAX
@@ -4761,16 +4974,20 @@
 #endif
 
 #ifndef DIR_SEPARATOR
-#define DIR_SEPARATOR '/'
+# define DIR_SEPARATOR '/'
+# define PATH_SEPARATOR ':'
 #endif
 
 #if defined (_WIN32) || defined (__MSDOS__) || defined (__DJGPP__) || \
   defined (__OS2__)
-#define HAVE_DOS_BASED_FILE_SYSTEM
-#ifndef DIR_SEPARATOR_2
-#define DIR_SEPARATOR_2 '\\'
+# define HAVE_DOS_BASED_FILE_SYSTEM
+# ifndef DIR_SEPARATOR_2
+#  define DIR_SEPARATOR_2 '\\'
+# endif
+# ifndef PATH_SEPARATOR_2
+#  define PATH_SEPARATOR_2 ';'
+# endif
 #endif
-#endif
 
 #ifndef DIR_SEPARATOR_2
 # define IS_DIR_SEPARATOR(ch) ((ch) == DIR_SEPARATOR)
@@ -4779,17 +4996,32 @@
         (((ch) == DIR_SEPARATOR) || ((ch) == DIR_SEPARATOR_2))
 #endif /* DIR_SEPARATOR_2 */
 
+#ifndef PATH_SEPARATOR_2
+# define IS_PATH_SEPARATOR(ch) ((ch) == PATH_SEPARATOR)
+#else /* PATH_SEPARATOR_2 */
+# define IS_PATH_SEPARATOR(ch) ((ch) == PATH_SEPARATOR_2)
+#endif /* PATH_SEPARATOR_2 */
+
 #define XMALLOC(type, num)      ((type *) xmalloc ((num) * sizeof(type)))
 #define XFREE(stale) do { \
   if (stale) { free ((void *) stale); stale = 0; } \
 } while (0)
 
+/* -DDEBUG is fairly common in CFLAGS.  */
+#undef DEBUG
+#if defined DEBUGWRAPPER
+# define DEBUG(format, ...) fprintf(stderr, format, __VA_ARGS__)
+#else
+# define DEBUG(format, ...)
+#endif
+
 const char *program_name = NULL;
 
 void * xmalloc (size_t num);
 char * xstrdup (const char *string);
-char * basename (const char *name);
-char * fnqualify(const char *path);
+const char * base_name (const char *name);
+char * find_executable(const char *wrapper);
+int    check_executable(const char *path);
 char * strendzap(char *str, const char *pat);
 void lt_fatal (const char *message, ...);
 
@@ -4799,29 +5031,51 @@
   char **newargz;
   int i;
 
-  program_name = (char *) xstrdup ((char *) basename (argv[0]));
+  program_name = (char *) xstrdup (base_name (argv[0]));
+  DEBUG(&quot;(main) argv[0]      : %s\n&quot;,argv[0]);
+  DEBUG(&quot;(main) program_name : %s\n&quot;,program_name);
   newargz = XMALLOC(char *, argc+2);
 EOF
 
-	    cat &gt;&gt; $cwrappersource &lt;&lt;EOF
-  newargz[0] = &quot;$SHELL&quot;;
+            cat &gt;&gt; $cwrappersource &lt;&lt;EOF
+  newargz[0] = (char *) xstrdup(&quot;$SHELL&quot;);
 EOF
 
-	    cat &gt;&gt; $cwrappersource &lt;&lt;&quot;EOF&quot;
-  newargz[1] = fnqualify(argv[0]);
+            cat &gt;&gt; $cwrappersource &lt;&lt;&quot;EOF&quot;
+  newargz[1] = find_executable(argv[0]);
+  if (newargz[1] == NULL)
+    lt_fatal(&quot;Couldn't find %s&quot;, argv[0]);
+  DEBUG(&quot;(main) found exe at : %s\n&quot;,newargz[1]);
   /* we know the script has the same name, without the .exe */
   /* so make sure newargz[1] doesn't end in .exe */
   strendzap(newargz[1],&quot;.exe&quot;);
   for (i = 1; i &lt; argc; i++)
     newargz[i+1] = xstrdup(argv[i]);
   newargz[argc+1] = NULL;
+
+  for (i=0; i&lt;argc+1; i++)
+  {
+    DEBUG(&quot;(main) newargz[%d]   : %s\n&quot;,i,newargz[i]);
+    ;
+  }
+
 EOF
 
-	    cat &gt;&gt; $cwrappersource &lt;&lt;EOF
+            case $host_os in
+              mingw*)
+                cat &gt;&gt; $cwrappersource &lt;&lt;EOF
+  execv(&quot;$SHELL&quot;,(char const **)newargz);
+EOF
+              ;;
+              *)
+                cat &gt;&gt; $cwrappersource &lt;&lt;EOF
   execv(&quot;$SHELL&quot;,newargz);
 EOF
+              ;;
+            esac
 
-	    cat &gt;&gt; $cwrappersource &lt;&lt;&quot;EOF&quot;
+            cat &gt;&gt; $cwrappersource &lt;&lt;&quot;EOF&quot;
+  return 127;
 }
 
 void *
@@ -4841,48 +5095,148 @@
 ;
 }
 
-char *
-basename (const char *name)
+const char *
+base_name (const char *name)
 {
   const char *base;
 
 #if defined (HAVE_DOS_BASED_FILE_SYSTEM)
   /* Skip over the disk name in MSDOS pathnames. */
-  if (isalpha (name[0]) &amp;&amp; name[1] == ':')
+  if (isalpha ((unsigned char)name[0]) &amp;&amp; name[1] == ':')
     name += 2;
 #endif
 
   for (base = name; *name; name++)
     if (IS_DIR_SEPARATOR (*name))
       base = name + 1;
-  return (char *) base;
+  return base;
 }
 
+int
+check_executable(const char * path)
+{
+  struct stat st;
+
+  DEBUG(&quot;(check_executable)  : %s\n&quot;, path ? (*path ? path : &quot;EMPTY!&quot;) : &quot;NULL!&quot;);
+  if ((!path) || (!*path))
+    return 0;
+
+  if ((stat (path, &amp;st) &gt;= 0) &amp;&amp;
+      (
+        /* MinGW &amp; native WIN32 do not support S_IXOTH or S_IXGRP */
+#if defined (S_IXOTH)
+       ((st.st_mode &amp; S_IXOTH) == S_IXOTH) ||
+#endif
+#if defined (S_IXGRP)
+       ((st.st_mode &amp; S_IXGRP) == S_IXGRP) ||
+#endif
+       ((st.st_mode &amp; S_IXUSR) == S_IXUSR))
+      )
+    return 1;
+  else
+    return 0;
+}
+
+/* Searches for the full path of the wrapper.  Returns
+   newly allocated full path name if found, NULL otherwise */
 char *
-fnqualify(const char *path)
+find_executable (const char* wrapper)
 {
-  size_t size;
-  char *p;
+  int has_slash = 0;
+  const char* p;
+  const char* p_next;
+  /* static buffer for getcwd */
   char tmp[LT_PATHMAX + 1];
+  int tmp_len;
+  char* concat_name;
 
-  assert(path != NULL);
+  DEBUG(&quot;(find_executable)  : %s\n&quot;, wrapper ? (*wrapper ? wrapper : &quot;EMPTY!&quot;) : &quot;NULL!&quot;);
 
-  /* Is it qualified already? */
+  if ((wrapper == NULL) || (*wrapper == '\0'))
+    return NULL;
+
+  /* Absolute path? */
 #if defined (HAVE_DOS_BASED_FILE_SYSTEM)
-  if (isalpha (path[0]) &amp;&amp; path[1] == ':')
-    return xstrdup (path);
+  if (isalpha ((unsigned char)wrapper[0]) &amp;&amp; wrapper[1] == ':')
+  {
+    concat_name = xstrdup (wrapper);
+    if (check_executable(concat_name))
+      return concat_name;
+    XFREE(concat_name);
+  }
+  else
+  {
 #endif
-  if (IS_DIR_SEPARATOR (path[0]))
-    return xstrdup (path);
+    if (IS_DIR_SEPARATOR (wrapper[0]))
+    {
+      concat_name = xstrdup (wrapper);
+      if (check_executable(concat_name))
+        return concat_name;
+      XFREE(concat_name);
+    }
+#if defined (HAVE_DOS_BASED_FILE_SYSTEM)
+  }
+#endif
 
-  /* prepend the current directory */
-  /* doesn't handle '~' */
+  for (p = wrapper; *p; p++)
+    if (*p == '/')
+    {
+      has_slash = 1;
+      break;
+    }
+  if (!has_slash)
+  {
+    /* no slashes; search PATH */
+    const char* path = getenv (&quot;PATH&quot;);
+    if (path != NULL)
+    {
+      for (p = path; *p; p = p_next)
+      {
+        const char* q;
+        size_t p_len;
+        for (q = p; *q; q++)
+          if (IS_PATH_SEPARATOR(*q))
+            break;
+        p_len = q - p;
+        p_next = (*q == '\0' ? q : q + 1);
+        if (p_len == 0)
+        {
+          /* empty path: current directory */
+          if (getcwd (tmp, LT_PATHMAX) == NULL)
+            lt_fatal (&quot;getcwd failed&quot;);
+          tmp_len = strlen(tmp);
+          concat_name = XMALLOC(char, tmp_len + 1 + strlen(wrapper) + 1);
+          memcpy (concat_name, tmp, tmp_len);
+          concat_name[tmp_len] = '/';
+          strcpy (concat_name + tmp_len + 1, wrapper);
+        }
+        else
+        {
+          concat_name = XMALLOC(char, p_len + 1 + strlen(wrapper) + 1);
+          memcpy (concat_name, p, p_len);
+          concat_name[p_len] = '/';
+          strcpy (concat_name + p_len + 1, wrapper);
+        }
+        if (check_executable(concat_name))
+          return concat_name;
+        XFREE(concat_name);
+      }
+    }
+    /* not found in PATH; assume curdir */
+  }
+  /* Relative path | not found in path: prepend cwd */
   if (getcwd (tmp, LT_PATHMAX) == NULL)
     lt_fatal (&quot;getcwd failed&quot;);
-  size = strlen(tmp) + 1 + strlen(path) + 1; /* +2 for '/' and '\0' */
-  p = XMALLOC(char, size);
-  sprintf(p, &quot;%s%c%s&quot;, tmp, DIR_SEPARATOR, path);
-  return p;
+  tmp_len = strlen(tmp);
+  concat_name = XMALLOC(char, tmp_len + 1 + strlen(wrapper) + 1);
+  memcpy (concat_name, tmp, tmp_len);
+  concat_name[tmp_len] = '/';
+  strcpy (concat_name + tmp_len + 1, wrapper);
+
+  if (check_executable(concat_name))
+    return concat_name;
+  XFREE(concat_name);
+  return NULL;
 }
 
 char *
@@ -4926,16 +5280,16 @@
   va_end (ap);
 }
 EOF
-	  # we should really use a build-platform specific compiler
-	  # here, but OTOH, the wrappers (shell script and this C one)
-	  # are only useful if you want to execute the &quot;real&quot; binary.
-	  # Since the &quot;real&quot; binary is built for $host, then this
-	  # wrapper might as well be built for $host, too.
-	  $run $LTCC -s -o $cwrapper $cwrappersource
-	  ;;
-	esac
-	$rm $output
-	trap &quot;$rm $output; exit $EXIT_FAILURE&quot; 1 2 15
+          # we should really use a build-platform specific compiler
+          # here, but OTOH, the wrappers (shell script and this C one)
+          # are only useful if you want to execute the &quot;real&quot; binary.
+          # Since the &quot;real&quot; binary is built for $host, then this
+          # wrapper might as well be built for $host, too.
+          $run $LTCC $LTCFLAGS -s -o $cwrapper $cwrappersource
+          ;;
+        esac
+        $rm $output
+        trap &quot;$rm $output; exit $EXIT_FAILURE&quot; 1 2 15
 
 	$echo &gt; $output &quot;\
 #! $SHELL
@@ -5080,18 +5434,23 @@
 	$echo &gt;&gt; $output &quot;\
     if test \&quot;\$libtool_execute_magic\&quot; != \&quot;$magic\&quot;; then
       # Run the actual program with our arguments.
+
+      # Make sure env LD_LIBRARY_PATH does not mess us up
+      if test -n \&quot;\${LD_LIBRARY_PATH+set}\&quot;; then
+        export LD_LIBRARY_PATH=\$progdir:\$LD_LIBRARY_PATH
+      fi
 &quot;
 	case $host in
 	# Backslashes separate directories on plain windows
 	*-*-mingw | *-*-os2*)
 	  $echo &gt;&gt; $output &quot;\
-      exec \$progdir\\\\\$program \${1+\&quot;\$@\&quot;}
+      exec \&quot;\$progdir\\\\\$program\&quot; \${1+\&quot;\$@\&quot;}
 &quot;
 	  ;;
 
 	*)
 	  $echo &gt;&gt; $output &quot;\
-      exec \$progdir/\$program \${1+\&quot;\$@\&quot;}
+      exec \&quot;\$progdir/\$program\&quot; \${1+\&quot;\$@\&quot;}
 &quot;
 	  ;;
 	esac
@@ -5101,7 +5460,7 @@
     fi
   else
     # The program doesn't exist.
-    \$echo \&quot;\$0: error: \$progdir/\$program does not exist\&quot; 1&gt;&amp;2
+    \$echo \&quot;\$0: error: \\\`\$progdir/\$program' does not exist\&quot; 1&gt;&amp;2
     \$echo \&quot;This script is just a wrapper for \$program.\&quot; 1&gt;&amp;2
     $echo \&quot;See the $PACKAGE documentation for more information.\&quot; 1&gt;&amp;2
     exit $EXIT_FAILURE
@@ -5165,9 +5524,9 @@
 	    $run ${rm}r &quot;$gentop&quot;
 	    $show &quot;$mkdir $gentop&quot;
 	    $run $mkdir &quot;$gentop&quot;
-	    status=$?
-	    if test &quot;$status&quot; -ne 0 &amp;&amp; test ! -d &quot;$gentop&quot;; then
-	      exit $status
+	    exit_status=$?
+	    if test &quot;$exit_status&quot; -ne 0 &amp;&amp; test ! -d &quot;$gentop&quot;; then
+	      exit $exit_status
 	    fi
 	  fi
 
@@ -5224,7 +5583,7 @@
 	    oldobjs=&quot;$objlist $obj&quot;
 	    objlist=&quot;$objlist $obj&quot;
 	    eval test_cmds=\&quot;$old_archive_cmds\&quot;
-	    if len=`expr &quot;X$test_cmds&quot; : &quot;.*&quot;` &amp;&amp;
+	    if len=`expr &quot;X$test_cmds&quot; : &quot;.*&quot; 2&gt;/dev/null` &amp;&amp;
 	       test &quot;$len&quot; -le &quot;$max_cmd_len&quot;; then
 	      :
 	    else
@@ -5334,10 +5693,10 @@
 		  fi
 		  # We do not want portage's build root ($S) present.
 		  my_little_ninja_foo_2=`echo $deplib |$EGREP -e &quot;$S&quot;`
+		  # We do not want portage's install root ($D) present.
+		  my_little_ninja_foo_3=`echo $deplib |$EGREP -e &quot;$D&quot;`
 		  if test -n &quot;$my_little_ninja_foo_2&quot; &amp;&amp; test &quot;$S&quot;; then
 		    mynewdependency_lib=&quot;&quot;
-		  # We do not want portage's install root ($D) present.
-		  my_little_ninja_foo_3=`echo $deplib |$EGREP -e &quot;$D&quot;`
 		  elif test -n &quot;$my_little_ninja_foo_3&quot; &amp;&amp; test &quot;$D&quot;; then
 		    eval mynewdependency_lib=`echo &quot;$deplib&quot; |sed -e &quot;s:$D:/:g&quot; -e 's:/\+:/:g'`
 		  else
@@ -5469,11 +5828,11 @@
     # install_prog (especially on Windows NT).
     if test &quot;$nonopt&quot; = &quot;$SHELL&quot; || test &quot;$nonopt&quot; = /bin/sh ||
        # Allow the use of GNU shtool's install command.
-       $echo &quot;X$nonopt&quot; | $Xsed | grep shtool &gt; /dev/null; then
+       $echo &quot;X$nonopt&quot; | grep shtool &gt; /dev/null; then
       # Aesthetically quote it.
       arg=`$echo &quot;X$nonopt&quot; | $Xsed -e &quot;$sed_quote_subst&quot;`
       case $arg in
-      *$quote_scanset* | *]* | *\|* | *\&amp;* | *\(* | *\)* | &quot;&quot;)
+      *[\[\~\#\^\&amp;\*\(\)\{\}\|\;\&lt;\&gt;\?\'\ \	]*|*]*|&quot;&quot;)
 	arg=&quot;\&quot;$arg\&quot;&quot;
 	;;
       esac
@@ -5482,14 +5841,14 @@
       shift
     else
       install_prog=
-      arg=&quot;$nonopt&quot;
+      arg=$nonopt
     fi
 
     # The real first argument should be the name of the installation program.
     # Aesthetically quote it.
     arg=`$echo &quot;X$arg&quot; | $Xsed -e &quot;$sed_quote_subst&quot;`
     case $arg in
-    *$quote_scanset* | *]* | *\|* | *\&amp;* | *\(* | *\)* | &quot;&quot;)
+    *[\[\~\#\^\&amp;\*\(\)\{\}\|\;\&lt;\&gt;\?\'\ \	]*|*]*|&quot;&quot;)
       arg=&quot;\&quot;$arg\&quot;&quot;
       ;;
     esac
@@ -5507,28 +5866,31 @@
     do
       if test -n &quot;$dest&quot;; then
 	files=&quot;$files $dest&quot;
-	dest=&quot;$arg&quot;
+	dest=$arg
 	continue
       fi
 
       case $arg in
       -d) isdir=yes ;;
-      -f) prev=&quot;-f&quot; ;;
-      -g) prev=&quot;-g&quot; ;;
-      -m) prev=&quot;-m&quot; ;;
-      -o) prev=&quot;-o&quot; ;;
+      -f) 
+      	case &quot; $install_prog &quot; in
+	*[\\\ /]cp\ *) ;;
+	*) prev=$arg ;;
+	esac
+	;;
+      -g | -m | -o) prev=$arg ;;
       -s)
 	stripme=&quot; -s&quot;
 	continue
 	;;
-      -*) ;;
-
+      -*)
+	;;
       *)
 	# If the previous option needed an argument, then skip it.
 	if test -n &quot;$prev&quot;; then
 	  prev=
 	else
-	  dest=&quot;$arg&quot;
+	  dest=$arg
 	  continue
 	fi
 	;;
@@ -5537,7 +5899,7 @@
       # Aesthetically quote the argument.
       arg=`$echo &quot;X$arg&quot; | $Xsed -e &quot;$sed_quote_subst&quot;`
       case $arg in
-      *$quote_scanset* | *]* | *\|* | *\&amp;* | *\(* | *\)* | &quot;&quot;)
+      *[\[\~\#\^\&amp;\*\(\)\{\}\|\;\&lt;\&gt;\?\'\ \	]*|*]*|&quot;&quot;)
 	arg=&quot;\&quot;$arg\&quot;&quot;
 	;;
       esac
@@ -5706,11 +6068,14 @@
 
 	  if test &quot;$#&quot; -gt 0; then
 	    # Delete the old symlinks, and create new ones.
+	    # Try `ln -sf' first, because the `ln' binary might depend on
+	    # the symlink we replace!  Solaris /bin/ln does not understand -f,
+	    # so we also need to try rm &amp;&amp; ln -s.
 	    for linkname
 	    do
 	      if test &quot;$linkname&quot; != &quot;$realname&quot;; then
-		$show &quot;(cd $destdir &amp;&amp; $rm $linkname &amp;&amp; $LN_S $realname $linkname)&quot;
-		$run eval &quot;(cd $destdir &amp;&amp; $rm $linkname &amp;&amp; $LN_S $realname $linkname)&quot;
+                $show &quot;(cd $destdir &amp;&amp; { $LN_S -f $realname $linkname || { $rm $linkname &amp;&amp; $LN_S $realname $linkname; }; })&quot;
+                $run eval &quot;(cd $destdir &amp;&amp; { $LN_S -f $realname $linkname || { $rm $linkname &amp;&amp; $LN_S $realname $linkname; }; })&quot;
 	      fi
 	    done
 	  fi
@@ -5723,7 +6088,16 @@
 	    IFS=&quot;$save_ifs&quot;
 	    eval cmd=\&quot;$cmd\&quot;
 	    $show &quot;$cmd&quot;
-	    $run eval &quot;$cmd&quot; || exit $?
+	    $run eval &quot;$cmd&quot; || {
+	      lt_exit=$?
+
+	      # Restore the uninstalled library and exit
+	      if test &quot;$mode&quot; = relink; then
+		$run eval '(cd $output_objdir &amp;&amp; $rm ${realname}T &amp;&amp; $mv ${realname}U $realname)'
+	      fi
+
+	      exit $lt_exit
+	    }
 	  done
 	  IFS=&quot;$save_ifs&quot;
 	fi
@@ -5817,17 +6191,15 @@
 	  notinst_deplibs=
 	  relink_command=
 
-	  # To insure that &quot;foo&quot; is sourced, and not &quot;foo.exe&quot;,
-	  # finese the cygwin/MSYS system by explicitly sourcing &quot;foo.&quot;
-	  # which disallows the automatic-append-.exe behavior.
-	  case $build in
-	  *cygwin* | *mingw*) wrapperdot=${wrapper}. ;;
-	  *) wrapperdot=${wrapper} ;;
-	  esac
+	  # Note that it is not necessary on cygwin/mingw to append a dot to
+	  # foo even if both foo and FILE.exe exist: automatic-append-.exe
+	  # behavior happens only for exec(3), not for open(2)!  Also, sourcing
+	  # `FILE.' does not work on cygwin managed mounts.
+	  #
 	  # If there is no directory component, then add one.
-	  case $file in
-	  */* | *\\*) . ${wrapperdot} ;;
-	  *) . ./${wrapperdot} ;;
+	  case $wrapper in
+	  */* | *\\*) . ${wrapper} ;;
+	  *) . ./${wrapper} ;;
 	  esac
 
 	  # Check the variables that should have been set.
@@ -5855,34 +6227,21 @@
 	  done
 
 	  relink_command=
-	  # To insure that &quot;foo&quot; is sourced, and not &quot;foo.exe&quot;,
-	  # finese the cygwin/MSYS system by explicitly sourcing &quot;foo.&quot;
-	  # which disallows the automatic-append-.exe behavior.
-	  case $build in
-	  *cygwin* | *mingw*) wrapperdot=${wrapper}. ;;
-	  *) wrapperdot=${wrapper} ;;
-	  esac
+	  # Note that it is not necessary on cygwin/mingw to append a dot to
+	  # foo even if both foo and FILE.exe exist: automatic-append-.exe
+	  # behavior happens only for exec(3), not for open(2)!  Also, sourcing
+	  # `FILE.' does not work on cygwin managed mounts.
+	  #
 	  # If there is no directory component, then add one.
-	  case $file in
-	  */* | *\\*) . ${wrapperdot} ;;
-	  *) . ./${wrapperdot} ;;
+	  case $wrapper in
+	  */* | *\\*) . ${wrapper} ;;
+	  *) . ./${wrapper} ;;
 	  esac
 
 	  outputname=
 	  if test &quot;$fast_install&quot; = no &amp;&amp; test -n &quot;$relink_command&quot;; then
 	    if test &quot;$finalize&quot; = yes &amp;&amp; test -z &quot;$run&quot;; then
-	      tmpdir=&quot;/tmp&quot;
-	      test -n &quot;$TMPDIR&quot; &amp;&amp; tmpdir=&quot;$TMPDIR&quot;
-	      tmpdir=&quot;$tmpdir/libtool-$$&quot;
-	      save_umask=`umask`
-	      umask 0077
-	      if $mkdir &quot;$tmpdir&quot;; then
-	        umask $save_umask
-	      else
-	        umask $save_umask
-		$echo &quot;$modename: error: cannot create temporary directory \`$tmpdir'&quot; 1&gt;&amp;2
-		continue
-	      fi
+	      tmpdir=`func_mktempdir`
 	      file=`$echo &quot;X$file$stripped_ext&quot; | $Xsed -e 's%^.*/%%'`
 	      outputname=&quot;$tmpdir/$file&quot;
 	      # Replace the output file specification.
@@ -5906,7 +6265,7 @@
 	fi
 
 	# remove .exe since cygwin /usr/bin/install will append another
-	# one anyways
+	# one anyway 
 	case $install_prog,$host in
 	*/usr/bin/install*,*cygwin*)
 	  case $file:$destfile in
@@ -6006,7 +6365,7 @@
     # Exit here if they wanted silent mode.
     test &quot;$show&quot; = : &amp;&amp; exit $EXIT_SUCCESS
 
-    $echo &quot;----------------------------------------------------------------------&quot;
+    $echo &quot;X----------------------------------------------------------------------&quot; | $Xsed
     $echo &quot;Libraries have been installed in:&quot;
     for libdir in $libdirs; do
       $echo &quot;   $libdir&quot;
@@ -6039,7 +6398,7 @@
     $echo
     $echo &quot;See any operating system documentation about shared libraries for&quot;
     $echo &quot;more information, such as the ld(1) and ld.so(8) manual pages.&quot;
-    $echo &quot;----------------------------------------------------------------------&quot;
+    $echo &quot;X----------------------------------------------------------------------&quot; | $Xsed
     exit $EXIT_SUCCESS
     ;;
 
@@ -6256,9 +6615,17 @@
 	    rmfiles=&quot;$rmfiles $objdir/$n&quot;
 	  done
 	  test -n &quot;$old_library&quot; &amp;&amp; rmfiles=&quot;$rmfiles $objdir/$old_library&quot;
-	  test &quot;$mode&quot; = clean &amp;&amp; rmfiles=&quot;$rmfiles $objdir/$name $objdir/${name}i&quot;
 
-	  if test &quot;$mode&quot; = uninstall; then
+	  case &quot;$mode&quot; in
+	  clean)
+	    case &quot;  $library_names &quot; in
+	    # &quot;  &quot; in the beginning catches empty $dlname
+	    *&quot; $dlname &quot;*) ;;
+	    *) rmfiles=&quot;$rmfiles $objdir/$dlname&quot; ;;
+	    esac
+	     test -n &quot;$libdir&quot; &amp;&amp; rmfiles=&quot;$rmfiles $objdir/$name $objdir/${name}i&quot;
+	    ;;
+	  uninstall)
 	    if test -n &quot;$library_names&quot;; then
 	      # Do each command in the postuninstall commands.
 	      cmds=$postuninstall_cmds
@@ -6291,7 +6658,8 @@
 	      IFS=&quot;$save_ifs&quot;
 	    fi
 	    # FIXME: should reinstall the best remaining shared library.
-	  fi
+	    ;;
+	  esac
 	fi
 	;;
 
@@ -6590,12 +6958,11 @@
 # configuration.  But we'll never go from static-only to shared-only.
 
 # ### BEGIN LIBTOOL TAG CONFIG: disable-shared
-build_libtool_libs=no
-build_old_libs=yes
+disable_libs=shared
 # ### END LIBTOOL TAG CONFIG: disable-shared
 
 # ### BEGIN LIBTOOL TAG CONFIG: disable-static
-build_old_libs=`case $build_libtool_libs in yes) $echo no;; *) $echo yes;; esac`
+disable_libs=static
 # ### END LIBTOOL TAG CONFIG: disable-static
 
 # Local Variables:

Modified: trunk/src/OSFileListItem.cpp
===================================================================
--- trunk/src/OSFileListItem.cpp	2006-03-06 17:48:57 UTC (rev 256)
+++ trunk/src/OSFileListItem.cpp	2006-03-06 18:46:28 UTC (rev 257)
@@ -248,11 +248,15 @@
         }
         if ( osf.type &amp; EXECUTABLE &amp;&amp; !( osf.type &amp; FOLDER ) )
         {
-            dc.drawIcon( ( ( OSFileList* ) list ) -&gt;specialicons[ 2 ], xi, y + 4 + font-&gt;getFontHeight() );
+	    FXIcon *icon=( ( OSFileList* ) list ) -&gt;specialicons[ 2 ];
+	    if(icon)
+            dc.drawIcon( icon, xi, y + 4 + font-&gt;getFontHeight() );
         }
         else if ( osf.type &amp; SYMLINK )
         {
-            dc.drawIcon( ( ( OSFileList* ) list ) -&gt;specialicons[ 3 ], xi, y + 4 + font-&gt;getFontHeight() );
+	    FXIcon *icon=( ( OSFileList* ) list ) -&gt;specialicons[ 3 ];
+	    if(icon)
+            dc.drawIcon( icon, xi, y + 4 + font-&gt;getFontHeight() );
         }
 
         if ( osf.content != &quot;&quot; )

Modified: trunk/src/OSMainWindow.cpp
===================================================================
--- trunk/src/OSMainWindow.cpp	2006-03-06 17:48:57 UTC (rev 256)
+++ trunk/src/OSMainWindow.cpp	2006-03-06 18:46:28 UTC (rev 257)
@@ -892,42 +892,38 @@
 }
 
 
-//load icon from file and put in the array
-void OSMainWindow::loadicons ( string icondir )
+void OSMainWindow::loadSpecialIcon (string icondir, string type, int nr )
 {
-    objmanager = OSObjectManager::instance( getApp() );
+FXIconSource *source = new FXIconSource ( getApp () );
+FXString fil = icondir.c_str();
+FXString name = fil + conf-&gt;readonestring ( &quot;/OpenspaceConfig/file_types/COMMON/types/&quot;+type+&quot;/icon&quot; ).c_str() + &quot;.png&quot;;
 
-    FXIconSource *source = new FXIconSource ( getApp () );
-    FXString fil = icondir.c_str();
-    FXString name = fil + conf-&gt;readonestring ( &quot;/OpenspaceConfig/file_types/COMMON/types/dir/icon&quot; ).c_str() + &quot;.png&quot;;
-    objmanager-&gt;specialicons[ 0 ] = source-&gt;loadIcon ( name );
-    if ( objmanager-&gt;specialicons[ 0 ] )
+    objmanager-&gt;specialicons[ nr ] = source-&gt;loadIcon ( name );
+    if ( objmanager-&gt;specialicons[ nr ] )
     {
-        objmanager-&gt;specialicons[ 0 ] -&gt;blend(objmanager-&gt;specialicons[ 0 ]-&gt;getTransparentColor());
-        objmanager-&gt;specialicons[ 0 ] -&gt;create();
-    }	
-    name = fil + conf-&gt;readonestring ( &quot;/OpenspaceConfig/file_types/COMMON/types/all/icon&quot; ).c_str() + &quot;.png&quot;;
-    objmanager-&gt;specialicons[ 1 ] = source-&gt;loadIcon ( name );
-    if ( objmanager-&gt;specialicons[ 1 ] )
-    {
-        objmanager-&gt;specialicons[ 1 ] -&gt;blend(objmanager-&gt;specialicons[ 1 ]-&gt;getTransparentColor());
-        objmanager-&gt;specialicons[ 1 ] -&gt;create();
+        objmanager-&gt;specialicons[ nr ] -&gt;blend(objmanager-&gt;specialicons[ nr ]-&gt;getTransparentColor());
+        objmanager-&gt;specialicons[ nr ] -&gt;create();
     }
-    name = fil + conf-&gt;readonestring ( &quot;/OpenspaceConfig/file_types/COMMON/types/executable/icon&quot; ).c_str() + &quot;.png&quot;;
-    objmanager-&gt;specialicons[ 2 ] = source-&gt;loadIcon ( name );
-    if ( objmanager-&gt;specialicons[ 2 ] )
+    else
     {
-        objmanager-&gt;specialicons[ 2 ] -&gt;blend(objmanager-&gt;specialicons[ 2 ]-&gt;getTransparentColor());
-        objmanager-&gt;specialicons[ 2 ] -&gt;create();
+    objmanager-&gt;specialicons[ nr ]=NULL;	
     }	
-    name = fil + conf-&gt;readonestring ( &quot;/OpenspaceConfig/file_types/COMMON/types/symlink/icon&quot; ).c_str() + &quot;.png&quot;;
-    objmanager-&gt;specialicons[ 3 ] = source-&gt;loadIcon ( name );
-    if ( objmanager-&gt;specialicons[ 3 ] )
-    {
-        objmanager-&gt;specialicons[ 3 ] -&gt;blend(objmanager-&gt;specialicons[ 3 ]-&gt;getTransparentColor());
-        objmanager-&gt;specialicons[ 3 ] -&gt;create();
-    }	
+}
 
+
+//load icon from file and put in the array
+void OSMainWindow::loadicons ( string icondir )
+{
+    objmanager = OSObjectManager::instance( getApp() );
+    FXIconSource *source = new FXIconSource ( getApp () );    
+    FXString fil = icondir.c_str();
+    
+    loadSpecialIcon(icondir,&quot;dir&quot;,0);
+    loadSpecialIcon(icondir,&quot;all&quot;,1); 
+    loadSpecialIcon(icondir,&quot;executable&quot;,2); 
+    loadSpecialIcon(icondir,&quot;symlink&quot;,3); 
+    
+   
     struct stat status;
     struct dirent *dp;
     DIR *dirp;

Modified: trunk/src/OSMainWindow.h
===================================================================
--- trunk/src/OSMainWindow.h	2006-03-06 17:48:57 UTC (rev 256)
+++ trunk/src/OSMainWindow.h	2006-03-06 18:46:28 UTC (rev 257)
@@ -78,6 +78,7 @@
     }
     
     void OSMainWindow::loadicons (string dir);
+    void OSMainWindow::loadSpecialIcon (string icondir, string type, int nr );
     int OSMainWindow::popupDir (OSFileList * current_filelist, string path, int x, int y);
     string OSMainWindow::parseDir (string dir);
     bool OSMainWindow::loadMimeSettings (string path, string type);


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="000037.html">[Openspace-svn] r256 - in trunk: . icons/default src
</A></li>
	<LI>Next message: <A HREF="000039.html">[Openspace-svn] r258 - in trunk: icons/default src
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#38">[ date ]</a>
              <a href="thread.html#38">[ thread ]</a>
              <a href="subject.html#38">[ subject ]</a>
              <a href="author.html#38">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/openspace-svn">More information about the Openspace-svn
mailing list</a><br>
</body></html>
